webpackJsonp(["main"],{

/***/ "../../../../../src/$$_lazy_route_resource lazy recursive":
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "../../../../../src/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "../../../../../src/app/albums/album-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__upload_images_to_album_modal_component__ = __webpack_require__("../../../../../src/app/albums/upload-images-to-album-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__upload_labels_to_album_modal_component__ = __webpack_require__("../../../../../src/app/albums/upload-labels-to-album-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var AlbumContextComponent = (function () {
    function AlbumContextComponent(albums, events, user, route, processes) {
        var _this = this;
        this.albums = albums;
        this.events = events;
        this.user = user;
        this.route = route;
        this.processes = processes;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.albumsList = [];
        this.menuOpen = [true];
        this.downloadObserver = new __WEBPACK_IMPORTED_MODULE_6__utils_activity_observer__["a" /* ActivityObserver */]();
        this.albumProcessList = {};
        this._subscriptions = [];
        this.albumsLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this.albums.list({ page_size: 1000 }); });
        this.singleAlbumLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.albums.get(id); });
    }
    AlbumContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.albumProcessList = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM]];
        this.singleAlbumSubscription = this.singleAlbumLoader.subscribe(function (album) {
            _this.album = album;
        });
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.albumId = params['albumId'];
            _this.album = null;
            if (_this.albumId) {
                _this.singleAlbumLoader.load(_this.albumId);
            }
        });
        this.albumsListSubscription = this.albumsLoader.subscribe(function (data) {
            _this.albumsList = data.data;
            _this.watchAlbumProcesses(_this.albumsList);
        });
        this.albumsLoader.load();
        this.eventsSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_ALBUM_LIST') {
                _this.albumsLoader.load();
            }
        });
    };
    AlbumContextComponent.prototype.onDeleteAlbum = function (album) {
        this.albums.delete(album);
    };
    AlbumContextComponent.prototype.ngOnDestroy = function () {
        this.albumsListSubscription && this.albumsListSubscription.unsubscribe();
        this.eventsSubscription && this.eventsSubscription.unsubscribe();
        this.singleAlbumSubscription && this.singleAlbumSubscription.unsubscribe();
        this.routeSubscription && this.routeSubscription.unsubscribe();
        this._subscriptions.forEach(function (_a) {
            var _ = _a[0], subscription = _a[1];
            return subscription.unsubscribe();
        });
    };
    AlbumContextComponent.prototype.download = function (id) {
        this.downloadObserver.observe(this.albums.download(id, this.user.token()));
    };
    AlbumContextComponent.prototype.openUploadModal = function () {
        this.uploadModal.open(this.albumId);
    };
    AlbumContextComponent.prototype.openUploadLabelsModal = function () {
        this.uploadLabelsModal.open(this.albumId);
    };
    AlbumContextComponent.prototype.watchAlbumProcesses = function (albums) {
        var _this = this;
        albums.forEach(function (album) {
            switch (album.status) {
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.UPLOADING:
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.UPDATING:
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.SAVING:
                    _this._watchAlbumProcess(album.id);
                    break;
            }
        });
    };
    AlbumContextComponent.prototype._watchAlbumProcess = function (targetId) {
        var _this = this;
        this.processes.getByTarget(targetId, __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type.ALBUM).subscribe(function (process) {
            if (!_this._findSubscription(process.id)) {
                _this._addSubscription(process, _this.processes.subscribe(process, function (curProcess) {
                    switch (curProcess.target) {
                        case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM:
                            _this.albumsLoader.load();
                            if (_this.albumId === curProcess.targetId) {
                                _this.singleAlbumLoader.load(_this.albumId);
                            }
                            break;
                        default:
                            throw new Error('Unexpected target');
                    }
                    _this._removeSubscription(process);
                }));
            }
        });
    };
    AlbumContextComponent.prototype._addSubscription = function (process, subscription) {
        this._subscriptions.push([process, subscription]);
    };
    AlbumContextComponent.prototype._findSubscription = function (id) {
        return (this._subscriptions).filter(function (_a) {
            var item = _a[0], _ = _a[1];
            return item.id === id;
        }).length > 0;
    };
    AlbumContextComponent.prototype._removeSubscription = function (process) {
        var index = this._subscriptions.map(function (_a) {
            var item = _a[0], _ = _a[1];
            return item.id;
        }).indexOf(process.id);
        if (index > -1) {
            this._subscriptions[index][1].unsubscribe();
            this._subscriptions.splice(index, 1);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('uploadModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2__upload_images_to_album_modal_component__["a" /* UploadImagesToAlbumModalComponent */])
    ], AlbumContextComponent.prototype, "uploadModal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('uploadLabelsModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_8__upload_labels_to_album_modal_component__["a" /* UploadLabelsToAlbumModalComponent */])
    ], AlbumContextComponent.prototype, "uploadLabelsModal", void 0);
    AlbumContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-album-context',
            template: "\n    <div class=\"group\">\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\"\n          [routerLink]=\"['/desk', 'albums', 'create']\">Create Album</button>\n        <button [disabled]=\"album?.type !== config.album.type.values.SOURCE\n          || album.status !== config.album.status.values.ACTIVE\"\n          type=\"button\" class=\"btn btn-primary btn-alt btn-block\" (click)=\"openUploadModal()\">Upload Images</button>\n\n        <button [disabled]=\"album?.type !== config.album.type.values.SOURCE\n          || album?.labelMode !== config.album.labelMode.values.CLASSIFICATION\n          || album.status !== config.album.status.values.ACTIVE\"\n          type=\"button\"\n          class=\"btn btn-primary btn-alt btn-block\"\n          (click)=\"openUploadLabelsModal()\">Upload Labels</button>\n    </div>\n    <upload-images-to-album-modal #uploadModal></upload-images-to-album-modal>\n    <upload-labels-to-album-modal #uploadLabelsModal></upload-labels-to-album-modal>\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n            <i class=\"iconapp iconapp-visuals\"></i>\n            <span>Albums</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of albumsList\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a [routerLink]=\"['/desk', 'albums', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li>\n                    <a [routerLink]=\"['/desk', 'albums', item.id, 'edit']\"\n                      class=\"dropdown-item link\">\n                      Edit\n                    </a>\n                  </li>\n                  <li>\n                    <a (click)=\"downloadObserver.isActive || download(item.id)\"\n                      class=\"dropdown-item link\">\n                      Download Labels\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.table.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"onDeleteAlbum(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'albums', item.id]\" [title]=\"item.name\"\n                album-status-color=\"{{item.status}}\">\n                {{item.name | truncate}}\n                <span *ngIf=\"(item.status === config.album.status.values.UPDATING\n                  || item.status === config.album.status.values.SAVING\n                  || item.status === config.album.status.values.UPLOADING)\n                  && albumProcessList[item.id]\">\n                  {{((albumProcessList[item.id].progress) * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!albumsList.length\"><a>No albums</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_10__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_11__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_5__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_7__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_9__services_process_service__["a" /* ProcessService */]])
    ], AlbumContextComponent);
    return AlbumContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/album-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var AlbumCreateComponent = (function () {
    function AlbumCreateComponent(router, albums) {
        this.router = router;
        this.albums = albums;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.labelModeOptions = __WEBPACK_IMPORTED_MODULE_6__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].album.labelMode.list, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].album.labelMode.labels);
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            labelMode: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__["a" /* IAlbum */].LabelMode.CLASSIFICATION, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
        });
    }
    AlbumCreateComponent.prototype.onSubmit = function () {
        var _this = this;
        this._savingObserver
            .observe(this.albums.create(this.form.value)).subscribe(function (album) { return _this.router.navigate(['/desk', 'albums', album.id]); });
    };
    AlbumCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'album-create',
            template: "\n    <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n      <h3 class=\"text-center\">Create A New Album</h3>\n      <form [formGroup]=\"form\" (ngSubmit)=\"form.valid && onSubmit()\">\n        <app-input [label]=\"'Name'\" [control]=\"form.controls['name']\"></app-input>\n        <app-select [label]=\"'Label Mode'\" [control]=\"form.controls['labelMode']\"\n          [options]=\"labelModeOptions\"></app-select>\n        <button type=\"submit\"\n          [disabled]=\"!form.valid || ((_savingObserver.active) | async)\" class=\"btn btn-success pull-right\">Create\n        </button>\n      </form>\n    </div>",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_7__services_album_service__["a" /* AlbumService */]])
    ], AlbumCreateComponent);
    return AlbumCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/album-edit.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var AlbumEditComponent = (function () {
    function AlbumEditComponent(route, albums, router) {
        this.route = route;
        this.albums = albums;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.labelModeOptions = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].album.labelMode.list, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].album.labelMode.labels);
        this.editForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            labelMode: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__["a" /* IAlbum */].LabelMode.LOCALIZATION, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
        });
    }
    AlbumEditComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.albumId = params['albumId'];
            if (_this.albumId) {
                _this.albums.get(_this.albumId).subscribe(function (album) {
                    _this.album = album;
                    _this.editForm.controls['name'].setValue(album.name);
                    _this.editForm.controls['labelMode'].setValue(album.labelMode);
                });
            }
            else {
                _this.router.navigate(['/desk', 'albums', 'create']);
            }
        });
    };
    AlbumEditComponent.prototype.onSubmit = function () {
        var _this = this;
        this.albums.update(this.album.id, this.editForm.value).subscribe(function () {
            _this.router.navigate(['/desk', 'albums', _this.album.id]);
        });
    };
    AlbumEditComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AlbumEditComponent.prototype, "type", void 0);
    AlbumEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-album-edit',
            template: "\n    <div [hidden]=\"pictureId\">\n      <asset-operations [type]=\"config.asset.values.ALBUM\"\n        [album]=\"album\"\n        [selectedItems]=\"[album]\">\n      </asset-operations>\n\n      <app-spinner [visibility]=\"!album\"></app-spinner>\n      <div *ngIf=\"album\"\n        class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\"\n      >\n        <h3 class=\"text-center\">Edit Album</h3>\n        <form [formGroup]=\"editForm\">\n          <app-input [label]=\"'Album Name'\" [control]=\"editForm.controls['name']\"></app-input>\n          <app-select [label]=\"'Label Mode'\" [control]=\"editForm.controls['labelMode']\"\n            [options]=\"labelModeOptions\"\n            [disabled]=\"album.type !== config.album.type.values.SOURCE\"\n          ></app-select>\n          <button type=\"button\" class=\"btn btn-primary pull-right\"\n            [disabled]=\"editForm.invalid || editForm.pristine || editForm.disabled\"\n            (click)=\"onSubmit()\"\n          >\n            Update&nbsp;<i class=\"glyphicon glyphicon-ok\"></i>\n          </button>\n        </form>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_6__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */]])
    ], AlbumEditComponent);
    return AlbumEditComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/album-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AlbumStatusColorDirective = (function () {
    function AlbumStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    AlbumStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass;
        switch (this.albumStatusColor) {
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.INACTIVE:
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.ERROR:
                cssClass = 'dot-danger';
                break;
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.status.values.ACTIVE:
                cssClass = 'dot-primary';
                break;
            default:
                cssClass = 'dot-warning';
        }
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('album-status-color'),
        __metadata("design:type", String)
    ], AlbumStatusColorDirective.prototype, "albumStatusColor", void 0);
    AlbumStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[album-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], AlbumStatusColorDirective);
    return AlbumStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/albums/album-view-embed.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumViewEmbedComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var AlbumViewEmbedComponent = (function () {
    function AlbumViewEmbedComponent(albums, processes, events) {
        var _this = this;
        this.albums = albums;
        this.processes = processes;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.albumProcessList = {};
        this._albumLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.albums.get(id); });
        this._albumLoader.subscribe(function (album) {
            _this.setAlbum(album);
        });
    }
    AlbumViewEmbedComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.albumProcessList = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM]];
        this.eventSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_ALBUM' && _this.album.id === event.data.id) {
                _this._albumLoader.load(_this.album.id);
            }
        });
    };
    AlbumViewEmbedComponent.prototype.ngOnChanges = function () {
        if (this.albumId) {
            this._albumLoader.load(this.albumId);
        }
    };
    AlbumViewEmbedComponent.prototype.setAlbum = function (album) {
        var _this = this;
        this.album = album;
        // get process (casual)
        if (__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.status.hasProcess[album.status]) {
            this.processSubscription && this.processSubscription.unsubscribe();
            this.processSubscription = this.processes.getByTarget(album.id, __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type.ALBUM).subscribe(function (process) {
                _this.processes.subscribe(process, function () { return _this._albumLoader.load(album.id); });
            });
        }
    };
    AlbumViewEmbedComponent.prototype.ngOnDestroy = function () {
        this.eventSubscription && this.eventSubscription.unsubscribe();
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AlbumViewEmbedComponent.prototype, "albumId", void 0);
    AlbumViewEmbedComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'album-view-embed',
            template: "\n    <app-spinner [visibility]=\"!_albumLoader.loaded\"></app-spinner>\n    <ng-template [ngIf]=\"album\">\n      <div [ngSwitch]=\"album.status\">\n        <error-indicator *ngSwitchCase=\"config.album.status.values.ERROR\"\n          [process]=\"albumProcessList[album.id]\" [target]=\"'album'\"></error-indicator>\n\n        <picture-view *ngSwitchCase=\"config.album.status.values.ACTIVE\"\n          [album]=\"album\"\n          [allowEdit]=\"false\"\n        ></picture-view>\n\n        <process-indicator *ngSwitchDefault\n          [process]=\"albumProcessList[album.id]\"></process-indicator>\n      </div>\n    </ng-template>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_1__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */]])
    ], AlbumViewEmbedComponent);
    return AlbumViewEmbedComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/album-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumData; });
/* unused harmony export AlbumDataSubject */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return AlbumViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












var AlbumData = (function (_super) {
    __extends(AlbumData, _super);
    function AlbumData() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return AlbumData;
}(__WEBPACK_IMPORTED_MODULE_9_rxjs_Observable__["a" /* Observable */]));

var AlbumDataSubject = (function (_super) {
    __extends(AlbumDataSubject, _super);
    function AlbumDataSubject() {
        return _super.call(this, 1) || this;
    }
    return AlbumDataSubject;
}(__WEBPACK_IMPORTED_MODULE_10_rxjs_ReplaySubject__["a" /* ReplaySubject */]));

var AlbumViewComponent = (function () {
    function AlbumViewComponent(route, router, albums, processes, albumData, events) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.albums = albums;
        this.processes = processes;
        this.albumData = albumData;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.pictureShown = false;
        this.albumProcessList = {};
        this.searchMode = '';
        this.searchModeOptions = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(['', 'labels'], ['General Search', 'Label Filter']);
        this.searchLabelOptions = [];
        this.searchForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            search: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](''),
            labels: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([]),
        });
        this._albumLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.albums.get(id); });
        this._albumLoader.subscribe(function (album) {
            _this.setAlbum(album);
        });
        this._tagsLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (albumId) {
            _this.searchLabelOptions = [];
            return _this.albums.getTags(albumId);
        });
        this._tagsLoader.subscribe(function (data) {
            _this.searchLabelOptions = data.map(function (_) {
                return { id: _.label, text: (_.label || 'Unlabeled') + " (" + _.count + ")" };
            });
        });
    }
    AlbumViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.albumProcessList = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM]];
        this.eventSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_ALBUM' && _this.album.id === event.data.id) {
                _this.tryUpdateAlbum(_this.album.id);
            }
        });
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.tryUpdateAlbum(params['albumId']);
        });
    };
    AlbumViewComponent.prototype.setAlbum = function (album) {
        var _this = this;
        this.album = album;
        this.albumData.next(this.album);
        // get process (casual)
        if (__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].album.status.hasProcess[album.status]) {
            this.processSubscription = this.processes.getByTarget(album.id, __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__["a" /* IAsset */].Type.ALBUM).subscribe(function (process) {
                _this.processes.subscribe(process, function () { return _this.tryUpdateAlbum(album.id); });
            });
        }
    };
    AlbumViewComponent.prototype.onAlbumDeleted = function () {
        this.router.navigate(['/desk', 'albums']);
    };
    AlbumViewComponent.prototype.onCancelAlbumUpload = function () {
        var process = this.albumProcessList[this.album.id];
        if (!process) {
            return;
        }
        this.processes.cancel(process);
    };
    AlbumViewComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription.unsubscribe();
        this.processSubscription && this.processSubscription.unsubscribe();
        this.eventSubscription && this.eventSubscription.unsubscribe();
    };
    AlbumViewComponent.prototype.setSearchMode = function (value) {
        this.searchMode = value;
        switch (value) {
            case 'labels':
                this.searchForm.controls.search.setValue('');
                break;
            default:
                this.searchForm.controls.labels.setValue([]);
        }
    };
    AlbumViewComponent.prototype.tryUpdateAlbum = function (albumId) {
        this._albumLoader.load(albumId);
        this._tagsLoader.load(albumId);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AlbumViewComponent.prototype, "type", void 0);
    AlbumViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-album-view',
            template: "\n    <div [hidden]=\"pictureShown\">\n      <asset-operations [type]=\"config.asset.values.ALBUM\"\n        [album]=\"album\"\n        [selectedItems]=\"[album]\"\n        (onDelete)=\"onAlbumDeleted()\"\n      >\n        <form class=\"form\">\n          <div class=\"row\">\n            <div class=\"col-md-4 col-md-push-8\">\n              <app-select\n                [label]=\"'Search Mode'\"\n                [options]=\"searchModeOptions\"\n                [value]=\"searchMode\"\n                (valueChange)=\"setSearchMode($event)\"\n              ></app-select>\n            </div>\n            <div class=\"col-md-8 col-md-pull-4\" [ngSwitch]=\"searchMode\">\n              <app-select *ngSwitchCase=\"'labels'\"\n                [label]=\"'Labels'\"\n                [options]=\"searchLabelOptions\"\n                [multiple]=\"true\"\n                [iconBefore]=\"'glyphicon-search'\"\n                [disabled]=\"!searchLabelOptions.length || !_tagsLoader.loaded\"\n                [control]=\"searchForm.controls['labels']\"\n              ></app-select>\n              <app-input *ngSwitchDefault=\"\"\n                [control]=\"searchForm.controls['search']\"\n                [iconBefore]=\"'glyphicon-search'\"\n                [iconAfter]=\"'glyphicon-remove'\"\n                (iconAfterClick)=\"searchForm.controls['search'].setValue('')\"\n              ></app-input>\n            </div>\n          </div>\n        </form>\n      </asset-operations>\n\n      <app-spinner [visibility]=\"!_albumLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"album\">\n        <div [ngSwitch]=\"album.status\">\n          <error-indicator *ngSwitchCase=\"config.album.status.values.ERROR\"\n            [process]=\"albumProcessList[album.id]\" [target]=\"'album'\"></error-indicator>\n\n          <picture-view *ngSwitchCase=\"config.album.status.values.ACTIVE\"\n            [album]=\"album\"\n            [searchParams]=\"searchForm.value\"\n            [allowEdit]=\"album.type === 'SOURCE'\"\n          ></picture-view>\n\n          <process-indicator *ngSwitchDefault\n            [process]=\"albumProcessList[album.id]\">\n            <button *ngIf=\"album.status === config.album.status.values.UPLOADING\"\n              type=\"button\" class=\"btn btn-primary\"\n              (click)=\"onCancelAlbumUpload()\">\n              Cancel Upload&nbsp;<i class=\"glyphicon glyphicon-ban-circle\"></i></button>\n          </process-indicator>\n        </div>\n      </ng-template>\n    </div>\n\n    <router-outlet (activate)=\"pictureShown = true\" (deactivate)=\"pictureShown = false\"></router-outlet>\n  ",
            providers: [{
                    provide: AlbumData,
                    useClass: AlbumDataSubject,
                }]
        }),
        __param(4, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["z" /* Inject */])(AlbumData)),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_11__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_5__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_10_rxjs_ReplaySubject__["a" /* ReplaySubject */],
            __WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */]])
    ], AlbumViewComponent);
    return AlbumViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/albums.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumsModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__album_view_component__ = __webpack_require__("../../../../../src/app/albums/album-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__album_context_component__ = __webpack_require__("../../../../../src/app/albums/album-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__album_create_component__ = __webpack_require__("../../../../../src/app/albums/album-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__album_view_embed_component__ = __webpack_require__("../../../../../src/app/albums/album-view-embed.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__picture_preview_modal_component__ = __webpack_require__("../../../../../src/app/albums/picture-preview-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__picture_view_component__ = __webpack_require__("../../../../../src/app/albums/picture-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__tag_image_component__ = __webpack_require__("../../../../../src/app/albums/tag-image.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__tag_image_directive__ = __webpack_require__("../../../../../src/app/albums/tag-image.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__upload_images_to_album_modal_component__ = __webpack_require__("../../../../../src/app/albums/upload-images-to-album-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__album_status_color_directive__ = __webpack_require__("../../../../../src/app/albums/album-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__upload_labels_to_album_modal_component__ = __webpack_require__("../../../../../src/app/albums/upload-labels-to-album-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__album_edit_component__ = __webpack_require__("../../../../../src/app/albums/album-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__s3_bucket_form_component__ = __webpack_require__("../../../../../src/app/albums/s3-bucket-form.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



















var AlbumsModule = (function () {
    function AlbumsModule() {
    }
    AlbumsModule_1 = AlbumsModule;
    AlbumsModule.forRoot = function () {
        return {
            ngModule: AlbumsModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_14__services_album_service__["a" /* AlbumService */],
            ],
        };
    };
    AlbumsModule = AlbumsModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_5__album_view_component__["b" /* AlbumViewComponent */],
                __WEBPACK_IMPORTED_MODULE_6__album_context_component__["a" /* AlbumContextComponent */],
                __WEBPACK_IMPORTED_MODULE_7__album_create_component__["a" /* AlbumCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_8__album_view_embed_component__["a" /* AlbumViewEmbedComponent */],
                __WEBPACK_IMPORTED_MODULE_15__album_status_color_directive__["a" /* AlbumStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_9__picture_preview_modal_component__["a" /* PicturePreviewComponent */],
                __WEBPACK_IMPORTED_MODULE_10__picture_view_component__["a" /* PictureViewComponent */],
                __WEBPACK_IMPORTED_MODULE_11__tag_image_component__["a" /* TagImageComponent */],
                __WEBPACK_IMPORTED_MODULE_12__tag_image_directive__["a" /* TagImageDirective */],
                __WEBPACK_IMPORTED_MODULE_13__upload_images_to_album_modal_component__["a" /* UploadImagesToAlbumModalComponent */],
                __WEBPACK_IMPORTED_MODULE_17__album_edit_component__["a" /* AlbumEditComponent */],
                __WEBPACK_IMPORTED_MODULE_16__upload_labels_to_album_modal_component__["a" /* UploadLabelsToAlbumModalComponent */],
                __WEBPACK_IMPORTED_MODULE_18__s3_bucket_form_component__["a" /* S3BucketFormComponent */],
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_8__album_view_embed_component__["a" /* AlbumViewEmbedComponent */],
                __WEBPACK_IMPORTED_MODULE_15__album_status_color_directive__["a" /* AlbumStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_13__upload_images_to_album_modal_component__["a" /* UploadImagesToAlbumModalComponent */],
                __WEBPACK_IMPORTED_MODULE_18__s3_bucket_form_component__["a" /* S3BucketFormComponent */],
            ],
        })
    ], AlbumsModule);
    return AlbumsModule;
    var AlbumsModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/albums/albums.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return albumsRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__album_create_component__ = __webpack_require__("../../../../../src/app/albums/album-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__album_context_component__ = __webpack_require__("../../../../../src/app/albums/album-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__album_view_component__ = __webpack_require__("../../../../../src/app/albums/album-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__album_edit_component__ = __webpack_require__("../../../../../src/app/albums/album-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tag_image_component__ = __webpack_require__("../../../../../src/app/albums/tag-image.component.ts");





var albumsRoutes = [
    {
        path: 'albums/create',
        component: __WEBPACK_IMPORTED_MODULE_0__album_create_component__["a" /* AlbumCreateComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__album_context_component__["a" /* AlbumContextComponent */],
    },
    {
        path: 'albums/:albumId',
        component: __WEBPACK_IMPORTED_MODULE_2__album_view_component__["b" /* AlbumViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__album_context_component__["a" /* AlbumContextComponent */],
        children: [
            {
                path: 'tag/:pictureId',
                component: __WEBPACK_IMPORTED_MODULE_4__tag_image_component__["a" /* TagImageComponent */],
            },
        ],
    },
    {
        path: 'albums/:albumId/edit',
        component: __WEBPACK_IMPORTED_MODULE_3__album_edit_component__["a" /* AlbumEditComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__album_context_component__["a" /* AlbumContextComponent */],
    },
    {
        path: 'albums',
        redirectTo: 'albums/create',
    },
];


/***/ }),

/***/ "../../../../../src/app/albums/picture-preview-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PicturePreviewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tag_image_directive__ = __webpack_require__("../../../../../src/app/albums/tag-image.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var PicturePreviewComponent = (function () {
    function PicturePreviewComponent(albums) {
        var _this = this;
        this.albums = albums;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.picture = null;
        this.areas = [];
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_5__angular_common__["d" /* DecimalPipe */]('en-US');
        this._loader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (pictureId) {
            _this.picture = null;
            return _this.albums.getPicture(_this.album.id, pictureId);
        });
        this._loader.subscribe(function (picture) {
            _this.picture = picture;
            if (_this.album.type !== __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.type.values.SOURCE) {
                _this.areas = _this.mapTags(_this.picture.predictedTags || [], true);
            }
            else {
                _this.areas = _this.mapTags(_this.picture.tags);
            }
        });
    }
    PicturePreviewComponent.prototype.open = function (pictureId) {
        this._loader.load(pictureId);
        this.modal.show();
    };
    PicturePreviewComponent.prototype.mapTags = function (tags, addConfidence) {
        var _this = this;
        if (addConfidence === void 0) { addConfidence = false; }
        return tags.map(function (tag) {
            var area = {
                label: tag.label,
            };
            if (tag.area) {
                Object.assign(area, {
                    x: tag.area.left,
                    y: tag.area.top,
                    width: tag.area.width,
                    height: tag.area.height,
                });
            }
            if (addConfidence) {
                area.label += " [" + _this.decimalPipe.transform(tag.confidence, '1.0-3') + "]";
            }
            return area;
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PicturePreviewComponent.prototype, "album", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], PicturePreviewComponent.prototype, "modal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('editor'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2__tag_image_directive__["a" /* TagImageDirective */])
    ], PicturePreviewComponent.prototype, "editor", void 0);
    PicturePreviewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'picture-preview',
            template: "\n  <app-modal #modal [title]=\"picture?.filename\" [sizeClass]=\"config.modal.size.LARGE\">\n    <app-spinner [visibility]=\"!_loader.loaded\"></app-spinner>\n    <div class=\"row\" *ngIf=\"_loader.loaded && picture\">\n      <div class=\"col-md-6 col-md-push-6\">\n        <dl *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n          <ng-template [ngIf]=\"album && album.type !== config.album.type.values.DERIVED\">\n            <dt>Caption</dt>\n            <dd>{{picture.caption || '{No caption}'}}</dd>\n          </ng-template>\n          <ng-template [ngIf]=\"album.type !== config.album.type.values.SOURCE\">\n            <dt>Predicted Caption</dt>\n            <dd>{{picture.predictedCaption || '{No caption}'}}</dd>\n          </ng-template>\n        </dl>\n        <ng-template [ngIf]=\"album && album.type !== config.album.type.values.DERIVED\">\n          <label>Labels</label>\n          <table class=\"table\">\n            <tr>\n              <th>Label</th>\n              <ng-template [ngIf]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                <th title=\"(x,y)\">Position</th>\n                <th>Size</th>\n              </ng-template>\n            </tr>\n            <tr *ngFor=\"let tag of picture.tags\">\n              <td>{{tag.label}}</td>\n              <ng-template [ngIf]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                <td>({{tag.area.left}},{{tag.area.top}})</td>\n                <td>{{tag.area.width}}x{{tag.area.height}}</td>\n              </ng-template>\n            </tr>\n            <tr *ngIf=\"!picture.tags.length\">\n              <td [attr.colspan]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION ? 3 : 1\">No labels</td>\n            </tr>\n          </table>\n        </ng-template>\n        <ng-template [ngIf]=\"album && album.type !== config.album.type.values.SOURCE\">\n          <label>Predicted Labels</label>\n          <table class=\"table\">\n            <tr>\n              <th>Label</th>\n              <ng-template [ngIf]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                <th title=\"(x,y)\">Position</th>\n                <th>Size</th>\n              </ng-template>\n              <th title=\"Confidence\">Conf.</th>\n            </tr>\n            <tr *ngFor=\"let tag of picture.predictedTags\">\n              <td>{{tag.label}}</td>\n              <ng-template [ngIf]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                <td>({{tag.area.left}},{{tag.area.top}})</td>\n                <td>{{tag.area.width}}x{{tag.area.height}}</td>\n              </ng-template>\n              <td>{{tag.confidence | number: '1.0-3'}}</td>\n            </tr>\n            <tr *ngIf=\"!picture.predictedTags.length\">\n              <td [attr.colspan]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION ? 4 : 2\">No labels</td>\n            </tr>\n          </table>\n        </ng-template>\n      </div>\n      <div class=\"col-md-6 col-md-pull-6\">\n        <div class=\"panel panel-default\">\n          <div class=\"panel-body\">\n            <div class=\"image-block\" [ngSwitch]=\"album?.labelMode\">\n              <img *ngSwitchCase=\"config.album.labelMode.values.LOCALIZATION\"\n                #editor=\"tagImageDirective\"\n                tag-image\n                [allowEdit]=\"false\"\n                style=\"width:100%;vertical-align: middle;\"\n                [src]=\"picture.filepath\"\n                [tags]=\"areas\"/>\n              <img *ngSwitchDefault\n                style=\"width:100%;vertical-align: middle;\"\n                [src]=\"picture.filepath\"/>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </app-modal>\n", styles: [
                '.panel-body { padding: 0; }'
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_album_service__["a" /* AlbumService */]])
    ], PicturePreviewComponent);
    return PicturePreviewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/picture-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PictureViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__picture_preview_modal_component__ = __webpack_require__("../../../../../src/app/albums/picture-preview-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PictureViewComponent = (function () {
    function PictureViewComponent(albums, events) {
        var _this = this;
        this.albums = albums;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.selectedPictures = [];
        this.allowEdit = true;
        this.searchParams = {};
        this.selectedPicturesValue = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.viewMode = 'list';
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_7__angular_common__["d" /* DecimalPipe */]('en-US');
        this.labelsToString = function (tags) {
            return tags.map(function (tag) {
                return _this.album.labelMode === __WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__["a" /* IAlbum */].LabelMode.LOCALIZATION
                    ? tag.label + " (" + tag.area.left + "," + tag.area.top + ";" + tag.area.width + "x" + tag.area.height + ")"
                    : "" + tag.label;
            }).join(', ');
        };
        this.confidenceToString = function (tags) {
            return tags
                .map(function (tag) { return _this._decimalPipe.transform(tag.confidence, '1.0-3'); })
                .join(', ');
        };
        this._itemsLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (formData) {
            var params = Object.assign({}, _this.searchParams, formData);
            if (params.labels && !params.labels.length) {
                delete params.labels;
            }
            return _this.albums.pictureList(_this.album, params);
        });
        this._itemsLoader.subscribe(function (data) {
            _this.picturesList = data;
            _this.selectedPicturesValue.emit([]);
        });
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            order: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
            page: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](1),
            page_size: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](20),
        });
        this.formSubscription && this.formSubscription.unsubscribe();
        this.formSubscription = this.form.valueChanges.debounceTime(100).subscribe(function (data) {
            return _this._itemsLoader.load(data);
        });
        this.eventSubscription && this.eventSubscription.unsubscribe();
        this.eventSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_PICTURE_LIST') {
                _this._itemsLoader.load(_this.form.value);
            }
        });
    }
    PictureViewComponent.prototype.ngOnChanges = function (changes) {
        if ('album' in changes) {
            __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].fillForm(this.form, {
                search: '',
                order: null,
                page: 1,
                labels: [],
            });
            var isLocalization = this.album.labelMode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.labelMode.values.LOCALIZATION;
            switch (this.album.type) {
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.type.values.SOURCE:
                    this.options = {
                        columns: [
                            { name: 'Image', style: 'width: 20%' },
                            { name: 'Filename', alias: 'filename', style: 'width: 20%' },
                            { name: 'Size', alias: 'filesize', style: 'width: 5%' },
                            isLocalization ? { name: 'Caption', alias: 'caption', style: 'width: 12%' } : null,
                            { name: 'Labels', alias: 'tags.label', style: 'width: 12%' },
                        ],
                    };
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.type.values.TRAINRESULTS:
                    this.options = {
                        columns: [
                            { name: 'Image', alias: 'filename', style: 'width: 20%' },
                            { name: 'Filename', alias: 'filename', style: 'width: 20%' },
                            { name: 'Size', alias: 'filesize', style: 'width: 5%' },
                            isLocalization ? { name: 'Caption', style: 'width: 12%' } : null,
                            isLocalization ? { name: 'Predicted Caption', style: 'width: 12%' } : null,
                            { name: 'Labels', alias: 'labels', style: 'width: 12%' },
                            { name: 'Predicted Labels', alias: 'predictedTags.label', style: 'width: 12%' },
                            { name: 'Confidence', alias: 'predictedTags.confidence', style: 'width: 12%' },
                        ],
                    };
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.type.values.DERIVED:
                    this.options = {
                        columns: [
                            { name: 'Image', alias: 'filename', style: 'width: 20%' },
                            { name: 'Filename', alias: 'filename', style: 'width: 20%' },
                            { name: 'Size', alias: 'filesize', style: 'width: 5%' },
                            isLocalization ? { name: 'Predicted Caption', style: 'width: 12%' } : null,
                            { name: 'Predicted Labels', alias: 'predictedTags.label', style: 'width: 12%' },
                            { name: 'Confidence', alias: 'predictedTags.confidence', style: 'width: 12%' },
                        ],
                    };
                    break;
                default:
                    throw new Error('No album type');
            }
            this.options.columns = this.options.columns.filter(function (_) { return !!_; });
            this._itemsLoader.load(this.form.value);
        }
        else if ('searchParams' in changes) {
            this._itemsLoader.load(this.form.value);
        }
    };
    PictureViewComponent.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
        this.eventSubscription && this.eventSubscription.unsubscribe();
    };
    PictureViewComponent.prototype.previewPicture = function (id) {
        this.preview && this.preview.open(id);
    };
    PictureViewComponent.prototype.deletePicture = function (picture) {
        this.albums.deletePicture(this.album, picture);
    };
    PictureViewComponent.prototype.changeSelection = function (item, checked) {
        var i = this.isSelected(item);
        if (checked) {
            i >= 0 || this.selectedPictures.push(item);
        }
        else {
            i >= 0 && this.selectedPictures.splice(i, 1);
        }
        this.selectedPictures = this.selectedPictures.slice();
        this.selectedPicturesValue.emit(this.selectedPictures);
    };
    PictureViewComponent.prototype.isSelected = function (currentItem) {
        return this.selectedPictures.findIndex(function (item) { return item.id === currentItem.id; });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PictureViewComponent.prototype, "album", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], PictureViewComponent.prototype, "selectedPictures", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], PictureViewComponent.prototype, "allowEdit", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PictureViewComponent.prototype, "searchParams", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], PictureViewComponent.prototype, "selectedPicturesValue", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('preview'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__picture_preview_modal_component__["a" /* PicturePreviewComponent */])
    ], PictureViewComponent.prototype, "preview", void 0);
    PictureViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'picture-view',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <div class=\"ellipsis text-bold\">{{album?.name}}</div>\n            </div>\n            <div class=\"col-md-6\" *ngIf=\"picturesList\">\n              <div class=\"pull-right\">\n                <button (click)=\"viewMode = 'list'\"\n                  [ngClass]=\"{'active': viewMode === 'list'}\"\n                  type=\"button\" class=\"btn btn-secondary btn-xs\"><i class=\"glyphicon glyphicon-th-list\"></i></button>\n                <button (click)=\"viewMode = 'grid'\"\n                  [ngClass]=\"{'active': viewMode === 'grid'}\"\n                  type=\"button\" class=\"btn btn-secondary btn-xs\"><i class=\"glyphicon glyphicon-th\"></i></button>\n                {{(picturesList.count || 0) | pluralize:({other: '{} pictures', '0': 'No pictures', '1': '{} picture'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"picturesList.data.length\"\n                  [rowsCount]=\"picturesList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\" *ngIf=\"viewMode === 'list'\">\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n        <tr style=\"white-space: nowrap\">\n          <th *ngFor=\"let item of options?.columns\"\n            [grid-sort]=\"item\"\n            [grid-sort-control]=\"form.controls['order']\">\n            {{item.name}}\n          </th>\n          <th *ngIf=\"allowEdit\" class=\"text-right\">Actions</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr *ngFor=\"let item of picturesList.data\">\n          <td>\n            <a [routerLink]=\"['/desk', 'albums', album.id, 'tag', item.id]\" *ngIf=\"allowEdit\">\n              <img width=\"32px\" height=\"32px\" [src]=\"item.filepath\">\n            </a>\n            <a (click)=\"previewPicture(item.id)\" *ngIf=\"!allowEdit\">\n              <img width=\"32px\" height=\"32px\" [src]=\"item.filepath\">\n            </a>\n          </td>\n          <td>\n            <a [routerLink]=\"['/desk', 'albums', album.id, 'tag', item.id]\" *ngIf=\"allowEdit\"\n              [title]=\"item.filename\" class=\"ellipsis\">{{item.filename}}\n            </a>\n            <a (click)=\"previewPicture(item.id)\" *ngIf=\"!allowEdit\"\n              [title]=\"item.filename\" class=\"ellipsis\">{{item.filename}}\n            </a>\n          </td>\n          <td>\n            {{item.filesize | formatBytes}}\n          </td>\n          <td\n            *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION && album.type !== config.album.type.values.DERIVED\"\n            [title]=\"item.caption\"\n            class=\"ellipsis\">{{item.caption}}\n          </td>\n          <td [title]=\"item.predictedCaption\"\n            class=\"ellipsis\"\n            *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION && album.type !== config.album.type.values.SOURCE\">\n            {{item.predictedCaption}}\n          </td>\n          <td style=\"max-width: 300px;\" *ngIf=\"album.type !== config.album.type.values.DERIVED\">\n            {{ item.tags | apply: labelsToString }}\n          </td>\n          <td style=\"max-width: 300px;\" *ngIf=\"album.type !== config.album.type.values.SOURCE\">\n            {{(item?.predictedTags || []) | apply: labelsToString }}\n          </td>\n          <td style=\"max-width: 300px;\" *ngIf=\"album.type !== config.album.type.values.SOURCE\">\n            {{(item?.predictedTags || []) | apply: confidenceToString }}\n          </td>\n          <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\" *ngIf=\"allowEdit\">\n            <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n              style=\"font-size: 18px;\">\n              <span class=\"glyphicon glyphicon-option-vertical\"></span>\n            </a>\n\n            <ul class=\"dropdown-menu\">\n              <li><a [routerLink]=\"['/desk', 'albums', album.id, 'tag', item.id]\"\n                class=\"dropdown-item link\">\n                Label\n              </a></li>\n              <li><a\n                (click)=\"deletePicture(item)\"\n                class=\"dropdown-item link\">\n                Trash\n              </a></li>\n            </ul>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div *ngIf=\"viewMode === 'grid'\">\n      <div class=\"row flex-tiles\" *ngIf=\"_itemsLoader.loaded\">\n        <div class=\"col-xs-6 col-sm-6 col-md-4 col-lg-3\"\n          *ngFor=\"let item of picturesList.data\">\n          <div class=\"thumbnail\">\n            <img style=\"max-height:100px\" class=\"thumbnail\" [src]=\"item.filepath\">\n            <div class=\"caption\">\n              <h3 [title]=\"item.caption\" class=\"ellipsis\"\n                *ngIf=\"album.type !== config.album.type.values.DERIVED\">{{item.caption}}</h3>\n              <h3 [title]=\"item.predictedCaption\" class=\"ellipsis\"\n                *ngIf=\"album.type !== config.album.type.values.SOURCE\">{{item.predictedCaption}}</h3>\n              <p>size:{{item.filesize | formatBytes}}</p>\n              <p [title]=\"item.filename\" class=\"ellipsis\">filename: {{item.filename}}</p>\n              <p *ngIf=\"album.type !== config.album.type.values.DERIVED\">labels: {{ item.tags | apply: labelsToString\n                }}</p>\n              <p *ngIf=\"album.type !== config.album.type.values.SOURCE\">predicted labels:\n                {{ (item?.predictedTags || []) | apply: labelsToString }}</p>\n              <p *ngIf=\"album.type !== config.album.type.values.SOURCE\">confidence:\n                {{ (item?.predictedTags || []) | apply: confidenceToString }}</p>\n              <p *ngIf=\"allowEdit\">\n                <a [routerLink]=\"['tag', item.id]\" role=\"button\" class=\"btn btn-primary\">Label</a>\n                <a (click)=\"deletePicture(item)\" class=\"btn btn-default\" role=\"button\">Trash</a>\n              </p>\n              <p *ngIf=\"!allowEdit\">\n                <a (click)=\"previewPicture(item.id)\" role=\"button\" class=\"btn btn-primary\">Preview</a>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <picture-preview #preview [album]=\"album\"></picture-preview>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_9__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_8__services_event_service__["a" /* EventService */]])
    ], PictureViewComponent);
    return PictureViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/s3-bucket-form.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return S3BucketFormComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var S3BucketFormComponent = (function () {
    function S3BucketFormComponent() {
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_forms__["c" /* FormGroup */])
    ], S3BucketFormComponent.prototype, "form", void 0);
    S3BucketFormComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["n" /* Component */])({
            selector: 's3-bucket-form',
            template: "\n    <app-input [label]=\"'AWS S3 Bucket Name'\" [control]=\"form.controls['AWSS3BucketName']\"></app-input>\n    <app-form-group [title]=\"'AWS Access Credentials'\">\n      <p class=\"text-muted\">\n        We need AWS credentials to be able to pull from your bucket. Please give us at least 5 hours of\n        expiration\n        time.\n      </p>\n      <div class=\"alert alert-warning\">\n        <strong>WARNING!</strong>\n        AWS Access Key, AWS Secret Key and AWS Session Token should be TEMPORARY credentials, we DON'T NEED\n        YOUR\n        MAIN CREDENTIALS.\n        See <a target=\"_blank\"\n        href=\"http://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html\">link</a>\n        for more\n        information.\n      </div>\n      <app-input [label]=\"'AWS Access Key'\" [control]=\"form.controls['AWSAccessKey']\"></app-input>\n      <app-input [label]=\"'AWS Secret Key'\" [control]=\"form.controls['AWSSecretKey']\"></app-input>\n      <div class=\"form-group\">\n    <textarea [formControl]=\"form.controls['AWSSessionToken']\"\n      class=\"form-control\"\n      [placeholder]=\"'AWS Session Token'\" style=\"resize: vertical\"></textarea>\n      </div>\n    </app-form-group>\n  ",
        })
    ], S3BucketFormComponent);
    return S3BucketFormComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/tag-image.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TagImageComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tag_image_directive__ = __webpack_require__("../../../../../src/app/albums/tag-image.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__album_view_component__ = __webpack_require__("../../../../../src/app/albums/album-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};












var TagImageComponent = (function () {
    function TagImageComponent(albums, albumData, route, router) {
        var _this = this;
        this.albums = albums;
        this.albumData = albumData;
        this.route = route;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */];
        this.areas = [];
        this.step = 0.1;
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_1__angular_common__["d" /* DecimalPipe */]('en-US');
        this.tagDescription = function (tag, addConfidence) {
            var value = "Position: (" + tag.area.left + "," + tag.area.top + ")" +
                (" Size: " + tag.area.width + "x" + tag.area.height);
            if (addConfidence) {
                value += ' Confidence: ' + _this.decimalPipe.transform(tag.confidence, '1.0-3');
            }
            return value;
        };
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            caption: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            predictedCaption: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            zoom: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_5__utils_validators__["a" /* AppValidators */].float]),
            tags: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([this.newTagForm()])
        });
        this._loader = new __WEBPACK_IMPORTED_MODULE_8__utils_reactive_loader__["a" /* ReactiveLoader */](function (pictureId) {
            return _this.albums.getPicture(_this.album.id, pictureId);
        });
        this._loader.subscribe(function (picture) {
            _this.picture = picture;
            _this.areas = _this.mapTags(_this.picture.tags);
            if (_this.album.type !== __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].album.type.values.SOURCE) {
                _this.areas = _this.areas.concat(_this.mapTags(_this.picture.predictedTags || [], true));
            }
            __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].fillForm(_this.form, {
                caption: picture.caption,
                predictedCaption: picture.predictedCaption,
                tags: picture.tags
            }, _this.album.type !== __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].album.type.values.SOURCE, false);
        });
    }
    TagImageComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.formSubscription = this.form.controls['tags'].valueChanges.subscribe(function (value) {
            if (_this.album.type === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].album.type.values.SOURCE) {
                _this.areas = _this.mapTags(value.filter(function (tag) { return tag.area.width > 0 && tag.area.height > 0; }));
            }
        });
        this.routeSubscription = __WEBPACK_IMPORTED_MODULE_9_rxjs_Observable__["a" /* Observable */].combineLatest(this.albumData, this.route.params.map(function (params) { return params['pictureId']; })).subscribe(function (_a) {
            var album = _a[0], pictureId = _a[1];
            _this.album = album;
            _this.album.type !== __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].album.type.values.SOURCE && _this.form.disable();
            _this._loader.load(pictureId);
        });
    };
    TagImageComponent.prototype.mapTags = function (tags, addConfidence) {
        var _this = this;
        if (addConfidence === void 0) { addConfidence = false; }
        return tags.map(function (tag) {
            var area = {
                label: tag.label,
            };
            if (tag.area) {
                Object.assign(area, {
                    x: tag.area.left,
                    y: tag.area.top,
                    width: tag.area.width,
                    height: tag.area.height,
                });
            }
            if (addConfidence) {
                area.label += ' : ' + _this.decimalPipe.transform(tag.confidence, '1.0-3');
            }
            return area;
        });
    };
    TagImageComponent.prototype.mapAreas = function (areas) {
        return areas.map(function (area) {
            return {
                label: area.label,
                area: {
                    top: area.y,
                    left: area.x,
                    width: area.width,
                    height: area.height,
                }
            };
        });
    };
    TagImageComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription && this.routeSubscription.unsubscribe();
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    TagImageComponent.prototype.onAreasChange = function (areas) {
        if (this.album.type !== __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].album.type.values.SOURCE) {
            return;
        }
        var tagsControl = this.form.controls['tags'];
        while (tagsControl.length) {
            tagsControl.removeAt(0);
        }
        var filtered = areas.filter(function (tagArea) {
            return tagArea.height > 0 && tagArea.width > 0;
        });
        if (filtered.length) {
            tagsControl.push(this.newTagForm());
            __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].fillForm(tagsControl, this.mapAreas(filtered));
        }
    };
    TagImageComponent.prototype.onBlur = function (_, i) {
        if (this.editor) {
            this.editor.blurAll();
        }
    };
    TagImageComponent.prototype.onFocus = function (_, i) {
        if (this.editor) {
            this.editor.focus(i);
        }
    };
    TagImageComponent.prototype.onZoomIn = function () {
        this.form.controls['zoom'].setValue(parseFloat(this.form.controls['zoom'].value) + this.step);
    };
    TagImageComponent.prototype.onZoomOut = function () {
        this.form.controls['zoom'].setValue(parseFloat(this.form.controls['zoom'].value) - this.step);
    };
    TagImageComponent.prototype.newTagForm = function () {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            label: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            area: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
                top: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_5__utils_validators__["a" /* AppValidators */].number),
                left: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_5__utils_validators__["a" /* AppValidators */].number),
                width: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](50, __WEBPACK_IMPORTED_MODULE_5__utils_validators__["a" /* AppValidators */].number),
                height: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](50, __WEBPACK_IMPORTED_MODULE_5__utils_validators__["a" /* AppValidators */].number),
            }),
        });
    };
    TagImageComponent.prototype.submit = function () {
        var _this = this;
        this.albums.saveTags(this.album.id, this.picture.id, {
            caption: this.form.value.caption,
            tags: this.form.value.tags,
        }).subscribe(function (picture) {
            _this.picture = picture;
            _this.navigateBack();
        });
    };
    TagImageComponent.prototype.navigateBack = function () {
        this.router.navigate(['/desk', 'albums', this.album.id]);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('editor'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_7__tag_image_directive__["a" /* TagImageDirective */])
    ], TagImageComponent.prototype, "editor", void 0);
    TagImageComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'tag-image',
            template: "\n    <asset-operations [type]=\"config.asset.values.PICTURE\"\n      [selectedItems]=\"[picture]\" (onDelete)=\"navigateBack()\" [album]=\"album\">\n      <div class=\"btn-group pull-right\" role=\"group\">\n        <button type=\"button\" class=\"btn btn-primary\"\n          (click)=\"submit()\">\n          Update&nbsp;<i class=\"glyphicon glyphicon-ok\"></i></button>\n        <button type=\"button\" class=\"btn btn-default\"\n          (click)=\"navigateBack()\">\n          Close&nbsp;<i class=\"glyphicon glyphicon-remove\"></i></button>\n      </div>\n    </asset-operations>\n    <app-spinner [visibility]=\"!album || !_loader.loaded\"></app-spinner>\n    <div class=\"pt15\" *ngIf=\"_loader.loaded && album && picture\">\n      <div class=\"row\">\n        <div class=\"col-md-6 col-md-push-6\">\n          <ng-template [ngIf]=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n            <app-input *ngIf=\"album.type !== config.album.type.values.DERIVED\"\n              [label]=\"'Caption'\" [control]=\"form.controls['caption']\"></app-input>\n            <app-input *ngIf=\"album.type !== config.album.type.values.SOURCE\"\n              [label]=\"'Predicted Caption'\" [control]=\"form.controls['predictedCaption']\"></app-input>\n          </ng-template>\n\n          <label>Labels</label>\n          <button\n            *ngIf=\"album.type === config.album.type.values.SOURCE\"\n            class=\"btn btn-default\"\n            (click)=\"form.controls['tags'].push(newTagForm())\"\n            title=\"Add\">\n            <i class=\"glyphicon glyphicon-plus\"></i>\n          </button>\n          <div class=\"row\"\n            *ngFor=\"let controlGroup of form.controls['tags'].controls; let i = index;\">\n            <div class=\"col-xs-10\">\n              <app-input [label]=\"'Label'\" [control]=\"controlGroup.controls.label\"\n                (blur)=\"onBlur($event, i)\"\n                (focus)=\"onFocus($event, i)\"></app-input>\n            </div>\n            <div class=\"col-xs-10 col-md-9 col-lg-10 form-group\"\n              *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n              <div class=\"input-group\">\n                <input type=\"text\"\n                  [disabled]=\"album.type !== config.album.type.values.SOURCE\"\n                  [readonly]=\"album.type === config.album.type.values.SOURCE\" class=\"form-control\"\n                  value=\"{{controlGroup.value | apply: tagDescription}}\"/>\n                <span class=\"input-group-addon\"\n                  [ngClass]=\"{'disabled': album.type !== config.album.type.values.SOURCE }\">\n                <i class=\"glyphicon glyphicon-screenshot\"></i></span>\n              </div>\n            </div>\n            <div class=\"col-xs-2 col-md-3 col-lg-2 text-right\" *ngIf=\"album.type === config.album.type.values.SOURCE\">\n              <button class=\"btn btn-default\" (click)=\"form.controls['tags'].removeAt(i)\"\n                title=\"Remove\">\n                <i class=\"glyphicon glyphicon-remove\"></i>\n              </button>\n            </div>\n          </div>\n          <ng-template [ngIf]=\"album.type !== config.album.type.values.SOURCE\">\n            <label>Predicted Labels</label>\n            <div class=\"row\"\n              *ngFor=\"let tag of picture?.predictedTags; let i = index;\">\n              <div class=\"col-xs-12\">\n                <app-input [label]=\"'Label'\" [value]=\"tag.label\" [disabled]=\"true\"></app-input>\n              </div>\n              <div class=\"col-xs-12 form-group\" *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                <div class=\"input-group\">\n                  <input type=\"text\"\n                    [disabled]=\"true\"\n                    class=\"form-control\" value=\"{{tag | apply: tagDescription: true}}\"/>\n                  <span class=\"input-group-addon\" [ngClass]=\"{'disabled': true }\">\n                  <i class=\"glyphicon glyphicon-screenshot\"></i></span>\n                </div>\n              </div>\n            </div>\n          </ng-template>\n        </div>\n        <div class=\"col-md-6 col-md-pull-6\">\n          <div class=\"panel panel-default\" *ngIf=\"picture\">\n            <div class=\"panel-heading\">\n              <div class=\"row\">\n                <div class=\"col-md-6 ellipsis\" [title]=\"picture.filename\">\n                  {{picture.filename}}\n                </div>\n                <div class=\"col-md-6\" *ngIf=\"album.labelMode === config.album.labelMode.values.LOCALIZATION\">\n                  <div class=\"input-group\">\n                    <label class=\"input-group-addon input-group-label label-bare\"\n                      for=\"zoom\"\n                      [ngClass]=\"{'disabled': form.controls.zoom.disabled}\">\n                      <i class=\"glyphicon glyphicon-search\"></i>\n                    </label>\n                    <input type=\"text\" class=\"form-control\" [formControl]=\"form.controls['zoom']\" id=\"zoom\">\n                    <div class=\"input-group-btn\">\n                      <button [disabled]=\"album.type !== config.album.type.values.SOURCE\"\n                        title=\"Zoom In\" class=\"btn btn-default\" (click)=\"onZoomIn()\">\n                        <i class=\"glyphicon glyphicon-zoom-in\"></i></button>\n                      <button [disabled]=\"album.type !== config.album.type.values.SOURCE\"\n                        title=\"Zoom Out\" class=\"btn btn-default\" (click)=\"onZoomOut()\">\n                        <i class=\"glyphicon glyphicon-zoom-out\"></i></button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class=\"panel-body\" [adaptiveHeight]=\"{pageMargin: 30, minHeight: 450, property: 'height'}\"\n              style=\"overflow:auto\">\n              <div class=\"image-block\" [ngSwitch]=\"album.labelMode\">\n                <img *ngSwitchCase=\"config.album.labelMode.values.LOCALIZATION\"\n                  #editor=\"tagImageDirective\"\n                  tag-image\n                  [allowEdit]=\"album.type === config.album.type.values.SOURCE\"\n                  style=\"width:100%;vertical-align: middle;\"\n                  [src]=\"picture.filepath\"\n                  (tagsChange)=\"onAreasChange($event)\"\n                  [scale]=\"form.controls['zoom'].value\"\n                  (scaleChange)=\"form.controls['zoom'].setValue($event)\"\n                  [tags]=\"areas\"/>\n                <img *ngSwitchDefault\n                  style=\"width:100%;vertical-align: middle;\"\n                  [src]=\"picture.filepath\"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  ", styles: [
                '.panel-body { padding: 0; }'
            ]
        }),
        __param(1, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_11__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_10__album_view_component__["a" /* AlbumData */],
            __WEBPACK_IMPORTED_MODULE_3__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_3__angular_router__["c" /* Router */]])
    ], TagImageComponent);
    return TagImageComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/tag-image.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TagImageDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
__webpack_require__("../../../../../src/lib/jquery.selectareas.ts");

var TagImageDirective = (function () {
    function TagImageDirective(el, zone) {
        this.zone = zone;
        this.scale = 1;
        this.allowEdit = true;
        this.tagsChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.scaleChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.loaded = false;
        this.el = el.nativeElement;
    }
    TagImageDirective.prototype.ngAfterViewInit = function () {
        this.init();
    };
    TagImageDirective.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (!this.loaded) {
            return;
        }
        if ('scale' in changes && changes['scale'].previousValue) {
            $(this.el).selectAreas('destroy');
            this.el.width = this.originWidth * this.scale;
            this.initPlugin();
        }
        if ('tags' in changes) {
            var oldTags_1 = $(this.el).selectAreas('areas');
            this.tags.forEach(function (tag, i) {
                if (!oldTags_1[i]) {
                    $(_this.el).selectAreas('add', _this._scaleTag(tag), true);
                }
                else if (!_this._equals(tag, oldTags_1[i])) {
                    $(_this.el).selectAreas('set', i, _this._scaleTag(tag), true);
                }
            });
            if (oldTags_1.length > this.tags.length) {
                for (var i = this.tags.length; i < oldTags_1.length; i++) {
                    $(this.el).selectAreas('remove', i);
                }
            }
        }
    };
    TagImageDirective.prototype.focus = function (index) {
        $(this.el).selectAreas('focus', index);
    };
    TagImageDirective.prototype.blurAll = function () {
        $(this.el).selectAreas('blurAll');
    };
    TagImageDirective.prototype.init = function () {
        var _this = this;
        this.loaded = true;
        var img = new Image();
        img.onload = function () {
            if (img.width !== _this.el.width) {
                _this.scale = _this.el.width / img.width;
            }
            _this.originWidth = img.width;
            _this.scaleChange.emit(_this.scale);
            _this.initPlugin();
        };
        img.src = this.el.src;
    };
    TagImageDirective.prototype.ngOnDestroy = function () {
        $(this.el).selectAreas('destroy');
    };
    TagImageDirective.prototype.initPlugin = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            var initializer = function () {
                var $el = $(_this.el);
                if (!$el.is(':visible')) {
                    window.setTimeout(initializer, 100);
                    return;
                }
                $el.selectAreas({
                    allowNudge: false,
                    allowEdit: _this.allowEdit,
                    areas: _this.tags.map(function (tag) { return _this._scaleTag(tag); }),
                    onChanged: function (val, index, changes) {
                        if (!_this.allowEdit) {
                            return;
                        }
                        var newTags = changes.map(function (tagArea) {
                            return {
                                label: tagArea.label,
                                width: Math.round(tagArea.width / _this.scale),
                                height: Math.round(tagArea.height / _this.scale),
                                x: Math.round(tagArea.x / _this.scale),
                                y: Math.round(tagArea.y / _this.scale),
                            };
                        });
                        if (!_this._equals(newTags, _this.tags)) {
                            _this.zone.run(function () {
                                _this.tags = newTags;
                                _this.tagsChange.emit(newTags);
                            });
                        }
                    }
                });
            };
            window.setTimeout(initializer, 100);
        });
    };
    TagImageDirective.prototype._scaleTag = function (tag) {
        return {
            label: tag.label,
            x: tag.x * this.scale,
            y: tag.y * this.scale,
            width: tag.width * this.scale,
            height: tag.height * this.scale,
        };
    };
    TagImageDirective.prototype._equals = function (a, b) {
        var _this = this;
        if (a === b) {
            return true;
        }
        if ((typeof a) !== (typeof b)) {
            return false;
        }
        if (Array.isArray(a)) {
            return Array.isArray(b) &&
                a.length === b.length &&
                a.every(function (item, i) { return _this._equals(item, b[i]); });
        }
        // objects only!!!
        return Object.keys(a).filter(function (key) {
            return b[key] !== a[key];
        }).length === 0;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TagImageDirective.prototype, "tags", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], TagImageDirective.prototype, "scale", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], TagImageDirective.prototype, "allowEdit", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], TagImageDirective.prototype, "tagsChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], TagImageDirective.prototype, "scaleChange", void 0);
    TagImageDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[tag-image]',
            exportAs: 'tagImageDirective'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], TagImageDirective);
    return TagImageDirective;
}());



/***/ }),

/***/ "../../../../../src/app/albums/upload-images-to-album-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UploadImagesToAlbumModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var ZERO_ID = '-1';
var UploadMode;
(function (UploadMode) {
    UploadMode["SINGLE_PICTURE"] = "SINGLE_PICTURE";
    UploadMode["S3_BUCKET"] = "S3_BUCKET";
})(UploadMode || (UploadMode = {}));
var UploadCSVPath;
(function (UploadCSVPath) {
    UploadCSVPath["LOCAL_FILE"] = "LOCAL_FILE";
    UploadCSVPath["BUCKET_PATH"] = "BUCKET_PATH";
    UploadCSVPath["NONE"] = "NONE";
})(UploadCSVPath || (UploadCSVPath = {}));
var uploadModeDescription = Object(__WEBPACK_IMPORTED_MODULE_2__config__["b" /* describeEnum */])(UploadMode, {
    labels: {
        SINGLE_PICTURE: 'Single Picture',
        S3_BUCKET: 'Import From S3',
    },
});
var uploadCSVPathDescription = Object(__WEBPACK_IMPORTED_MODULE_2__config__["b" /* describeEnum */])(UploadCSVPath, {
    labels: {
        LOCAL_FILE: 'Upload File',
        BUCKET_PATH: 'S3 Bucket Path',
        NONE: 'None',
    },
});
var UploadImagesToAlbumModalComponent = (function () {
    function UploadImagesToAlbumModalComponent(albums) {
        var _this = this;
        this.albums = albums;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.uploadModeOptions = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(uploadModeDescription.list, uploadModeDescription.labels);
        this.uploadCSVPathOptions = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(uploadCSVPathDescription.list, uploadCSVPathDescription.labels);
        this._albumIdLocked = false;
        this.ZERO_ID = ZERO_ID;
        this.UploadCSVPath = UploadCSVPath;
        this.UploadMode = UploadMode;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__["a" /* ActivityObserver */]();
        var albumNameControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), uploadModeControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](UploadMode.SINGLE_PICTURE, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required), CSVPathModeControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](UploadCSVPath.LOCAL_FILE), fileControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), labelControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), s3PathControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), bucketNameControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), accessKeyControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), secretKeyControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null), sessionTokenControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null);
        this.albumForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            filename: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            albumName: albumNameControl,
            uploadMode: uploadModeControl,
            AWSS3BucketName: bucketNameControl,
            AWSAccessKey: accessKeyControl,
            AWSSecretKey: secretKeyControl,
            AWSSessionToken: sessionTokenControl,
            file: fileControl,
            labels: labelControl,
            CSVPathMode: CSVPathModeControl,
            S3CSVPath: s3PathControl,
        });
        //csv path mode
        //s3 credentials
        __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].crossValidate(uploadModeControl, [CSVPathModeControl, bucketNameControl, accessKeyControl, secretKeyControl, sessionTokenControl], function (value) {
            if (value === UploadMode.S3_BUCKET) {
                return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required;
            }
            return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator;
        });
        //image file
        __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].crossValidate(uploadModeControl, [fileControl], function (value) {
            if (value === UploadMode.SINGLE_PICTURE) {
                return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required;
            }
            return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator;
        });
        //labels
        __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].crossValidate(uploadModeControl, [labelControl], function (value) {
            if (value === UploadMode.S3_BUCKET && CSVPathModeControl.value === UploadCSVPath.LOCAL_FILE) {
                return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required;
            }
            return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator;
        });
        __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].crossValidate(CSVPathModeControl, [labelControl], function (value) {
            if (value === UploadCSVPath.LOCAL_FILE && uploadModeControl.value === UploadMode.S3_BUCKET) {
                return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required;
            }
            return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator;
        });
        //s3path
        __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].crossValidate(CSVPathModeControl, [s3PathControl], function (value) {
            if (value === UploadCSVPath.BUCKET_PATH && uploadModeControl.value === UploadMode.S3_BUCKET) {
                return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required;
            }
            return __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator;
        });
        this.albumsLoader = new __WEBPACK_IMPORTED_MODULE_9__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadList(); });
        this.albumsLoader.subscribe(function (_) {
            _this.albumList = _.data.filter(function (album) { return album.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.type.values.SOURCE; });
            _this.albumOptions = _this.albumList.map(function (_a) {
                var id = _a.id, name = _a.name, status = _a.status;
                return {
                    id: id,
                    text: name,
                    disabled: status !== __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.status.values.ACTIVE,
                };
            });
            _this.albumOptions.push({
                id: ZERO_ID,
                text: 'Create New Album',
            });
        });
    }
    UploadImagesToAlbumModalComponent.prototype.isClassification = function (albumId) {
        var album = this.albumList.find(function (_) { return _.id === albumId; });
        if (!album && albumId !== ZERO_ID) {
            return false;
        }
        return albumId === ZERO_ID || album.labelMode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].album.labelMode.values.CLASSIFICATION;
    };
    UploadImagesToAlbumModalComponent.prototype.setAlbum = function (albumId) {
        this.albumId = albumId;
        // new album name
        if (albumId === ZERO_ID) {
            this.albumForm.controls['albumName'].setValidators(__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
        }
        else {
            this.albumForm.controls['albumName'].setValidators(__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].nullValidator);
        }
        this.albumForm.controls['albumName'].updateValueAndValidity();
        this.albumForm.controls['CSVPathMode'].setValue(UploadCSVPath.NONE);
        this.albumForm.controls['CSVPathMode'].updateValueAndValidity();
    };
    UploadImagesToAlbumModalComponent.prototype.open = function (albumId) {
        this.setAlbum(albumId || ZERO_ID);
        this._albumIdLocked = !!albumId;
        this.albumList = null;
        this.albumsLoader.load();
        __WEBPACK_IMPORTED_MODULE_7__utils_misc__["a" /* MiscUtils */].fillForm(this.albumForm, {
            filename: null,
            albumName: null,
            uploadMode: UploadMode.SINGLE_PICTURE,
            AWSS3BucketName: null,
            AWSAccessKey: null,
            AWSSecretKey: null,
            AWSSessionToken: null,
            file: null,
            labels: null,
            CSVPathMode: UploadCSVPath.NONE,
            S3CSVPath: null,
        });
        this.modal.show();
    };
    UploadImagesToAlbumModalComponent.prototype.onUploadPicture = function (file) {
        this.albumForm.controls['file'].setValue(file);
        this.albumForm.controls['filename'].setValue(file.name.replace(/\.\w+$/, ''));
    };
    UploadImagesToAlbumModalComponent.prototype.onUploadLabels = function (file) {
        this.albumForm.controls['labels'].setValue(file);
    };
    UploadImagesToAlbumModalComponent.prototype.doUpload = function () {
        var _this = this;
        if (this.albumId === ZERO_ID) {
            var newAlbum = {
                name: this.albumForm.value['albumName'],
                labelMode: __WEBPACK_IMPORTED_MODULE_6__interfaces_album_interface__["a" /* IAlbum */].LabelMode.CLASSIFICATION,
            };
            this._savingObserver.observe(this.albums.create(newAlbum)).subscribe(function (album) {
                _this.doImport(album.id);
            });
        }
        else {
            this.doImport(this.albumId);
        }
    };
    UploadImagesToAlbumModalComponent.prototype.doImport = function (albumId) {
        var _this = this;
        this._savingObserver.observe(this.resolveAlbumnUploadFunction(albumId, this.albumForm.value))
            .subscribe(null, null, function () { return _this.modal.hide(); });
    };
    UploadImagesToAlbumModalComponent.prototype.resolveAlbumnUploadFunction = function (albumId, params) {
        switch (this.albumForm.value.uploadMode) {
            case UploadMode.SINGLE_PICTURE:
                return this.albums.upload(albumId, params);
            case UploadMode.S3_BUCKET:
                return this.albums.importFromAWS(albumId, params);
            default:
                throw new Error('Unknown Upload Mode');
        }
    };
    UploadImagesToAlbumModalComponent.prototype._loadList = function () {
        return this.albums.list({ page_size: 1000 }); //@TODO
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_10__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], UploadImagesToAlbumModalComponent.prototype, "modal", void 0);
    UploadImagesToAlbumModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'upload-images-to-album-modal',
            template: "\n    <app-modal #modal\n      [title]=\"'Upload Images'\"\n      [buttons]=\"[{ 'class': 'btn-primary', disabled: (albumForm.invalid || ((_savingObserver.active) | async)), title: 'Upload' }]\"\n      (buttonClick)=\"albumForm.valid && doUpload()\">\n      <form>\n        <app-spinner [visibility]=\"!albumList\"></app-spinner>\n        <div *ngIf=\"albumList\" class=\"form-group\">\n          <app-select [label]=\"'Album'\"\n            [disabled]=\"_albumIdLocked\"\n            [value]=\"albumId\"\n            (valueChange)=\"setAlbum($event)\"\n            [options]=\"albumOptions\"\n          ></app-select>\n          <div class=\"form-group\" *ngIf=\"albumId === ZERO_ID\">\n            <app-input [label]=\"'Album Name'\" [control]=\"albumForm.controls['albumName']\"></app-input>\n          </div>\n          <app-select [label]=\"'Upload Mode'\" [options]=\"uploadModeOptions\"\n            [control]=\"albumForm.controls['uploadMode']\">\n          </app-select>\n          <ng-template [ngIf]=\"albumForm.value.uploadMode === UploadMode.SINGLE_PICTURE\">\n            <app-input [label]=\"'Image File Name'\" [control]=\"albumForm.controls['filename']\"></app-input>\n            <app-input *ngIf=\"albumId\" [label]=\"'Image'\"\n              [readonly]=\"true\"\n              [iconAfter]=\"'glyphicon-file'\"\n              [placeholder]=\"'pick an image...'\"\n              file-upload\n              [accept]=\"config.picture.import.extension.list\"\n              [value]=\"albumForm.value['file']?.name\"\n              [file-upload-click]=\"true\"\n              (tableUploadDrop)=\"onUploadPicture($event)\">Upload Images\n            </app-input>\n          </ng-template>\n          <div *ngVar=\"isClassification(albumId); let isClassificationAlbum = value\">\n            <ng-template [ngIf]=\"albumForm.value.uploadMode === UploadMode.S3_BUCKET\">\n              <s3-bucket-form [form]=\"albumForm\"></s3-bucket-form>\n              <app-select [label]=\"'Labeling mode'\"\n                [disabled]=\"!isClassificationAlbum\"\n                [options]=\"uploadCSVPathOptions\"\n                [control]=\"albumForm.controls['CSVPathMode']\">\n              </app-select>\n              <div [ngSwitch]=\"albumForm.value.CSVPathMode\">\n                <div *ngSwitchCase=\"UploadCSVPath.BUCKET_PATH\">\n                  <app-input\n                    [label]=\"'S3 Bucket Path'\"\n                    [placeholder]=\"'path/to/file.csv'\"\n                    [control]=\"albumForm.controls['S3CSVPath']\"\n                  ></app-input>\n                </div>\n                <div *ngSwitchCase=\"UploadCSVPath.LOCAL_FILE\">\n                  <app-input [label]=\"'Labels CSV file'\"\n                    [readonly]=\"true\"\n                    [iconAfter]=\"'glyphicon-tags'\"\n                    [placeholder]=\"'pick a file...'\"\n                    file-upload\n                    [accept]=\"config.picture.labels.extension.list\"\n                    [value]=\"albumForm.value.labels?.name\"\n                    [file-upload-click]=\"true\"\n                    (tableUploadDrop)=\"onUploadLabels($event)\"\n                  ></app-input>\n                </div>\n              </div>\n              <div *ngIf=\"!isClassificationAlbum\" class=\"alert alert-warning\" role=\"alert\">\n                <strong><i class=\"glyphicon glyphicon-exclamation-sign\"></i></strong> Currently automatic labelling\n                available only for Classification albums.\n              </div>\n            </ng-template>\n          </div>\n        </div>\n      </form>\n    </app-modal>",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_album_service__["a" /* AlbumService */]])
    ], UploadImagesToAlbumModalComponent);
    return UploadImagesToAlbumModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/albums/upload-labels-to-album-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UploadLabelsToAlbumModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var CSVLocation;
(function (CSVLocation) {
    CSVLocation["LOCAL_FILE"] = "LOCAL_FILE";
    CSVLocation["BUCKET_PATH"] = "BUCKET_PATH";
})(CSVLocation || (CSVLocation = {}));
var CSVLocationDescription = Object(__WEBPACK_IMPORTED_MODULE_2__config__["b" /* describeEnum */])(CSVLocation, {
    labels: {
        LOCAL_FILE: 'Local Desktop File',
        BUCKET_PATH: 'S3 Bucket Path',
    },
});
var UploadLabelsToAlbumModalComponent = (function () {
    function UploadLabelsToAlbumModalComponent(albums, events) {
        this.albums = albums;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
        this.CSVLocationVariable = CSVLocation;
        this.CSVLocationOptions = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(CSVLocationDescription.list, CSVLocationDescription.labels);
        this.s3UploadForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            AWSS3BucketName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            AWSAccessKey: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            AWSSecretKey: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            AWSSessionToken: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            S3CSVPath: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
        });
        this.localUploadForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            labels: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
        });
    }
    UploadLabelsToAlbumModalComponent.prototype.setAlbum = function (albumId) {
        this.albumId = albumId;
        this.CSVPathMode = CSVLocation.LOCAL_FILE;
    };
    UploadLabelsToAlbumModalComponent.prototype.open = function (albumId) {
        this.setAlbum(albumId);
        this.CSVPathMode = CSVLocation.LOCAL_FILE;
        __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.s3UploadForm, {
            AWSS3BucketName: null,
            AWSAccessKey: null,
            AWSSecretKey: null,
            AWSSessionToken: null,
            labels: null,
            S3CSVPath: null,
        });
        __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.localUploadForm, {
            labels: null,
        });
        this.s3UploadForm.markAsPristine();
        this.localUploadForm.markAsPristine();
        this.modal.show();
    };
    UploadLabelsToAlbumModalComponent.prototype.onUploadLabels = function (file) {
        this.localUploadForm.controls['labels'].setValue(file);
    };
    UploadLabelsToAlbumModalComponent.prototype.doUpload = function () {
        var _this = this;
        this._savingObserver.observe(this.resolveAlbumnUploadFunction())
            .subscribe(null, null, function () {
            _this.events.emit('UPDATE_ALBUM', { id: _this.albumId });
            _this.modal.hide();
        });
    };
    UploadLabelsToAlbumModalComponent.prototype.resolveAlbumnUploadFunction = function () {
        switch (this.CSVPathMode) {
            case CSVLocation.BUCKET_PATH:
                return this.albums.importLabelsFromS3(this.albumId, this.s3UploadForm.value);
            case CSVLocation.LOCAL_FILE:
                return this.albums.uploadLabels(this.albumId, this.localUploadForm.value.labels);
            default:
                throw new Error('Unknown Path Mode');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_8__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], UploadLabelsToAlbumModalComponent.prototype, "modal", void 0);
    UploadLabelsToAlbumModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'upload-labels-to-album-modal',
            template: "\n    <app-modal #modal\n      [title]=\"'Upload Labels'\"\n      [buttons]=\"[{ 'class': 'btn-primary',\n        disabled: (CSVPathMode === CSVLocationVariable.LOCAL_FILE && localUploadForm.invalid)\n          || (CSVPathMode === CSVLocationVariable.BUCKET_PATH && s3UploadForm.invalid)\n          || (_savingObserver.active | async),\n        title: 'Upload' }]\"\n      (buttonClick)=\"((CSVLocationVariable.LOCAL_FILE && localUploadForm.valid)\n        || (CSVPathMode === CSVLocationVariable.BUCKET_PATH && s3UploadForm.valid)) && doUpload()\">\n      <form>\n        <div class=\"form-group\">\n          <app-select [label]=\"'CSV Location'\"\n            [options]=\"CSVLocationOptions\"\n            [(value)]=\"CSVPathMode\">\n          </app-select>\n          <div [ngSwitch]=\"CSVPathMode\">\n            <div *ngSwitchCase=\"CSVLocationVariable.BUCKET_PATH\">\n              <s3-bucket-form [form]=\"s3UploadForm\"></s3-bucket-form>\n              <app-input\n                [label]=\"'S3 Bucket Path'\"\n                [placeholder]=\"'path/to/file.csv'\"\n                [control]=\"s3UploadForm.controls['S3CSVPath']\"\n              ></app-input>\n            </div>\n            <div *ngSwitchCase=\"CSVLocationVariable.LOCAL_FILE\">\n              <app-input [label]=\"'Labels CSV file'\"\n                [readonly]=\"true\"\n                [iconAfter]=\"'glyphicon-tags'\"\n                [placeholder]=\"'pick a file...'\"\n                file-upload\n                [accept]=\"config.picture.labels.extension.list\"\n                [value]=\"localUploadForm.value.labels?.name\"\n                [file-upload-click]=\"true\"\n                (tableUploadDrop)=\"onUploadLabels($event)\"\n              ></app-input>\n            </div>\n          </div>\n        </div>\n      </form>\n    </app-modal>",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_album_service__["a" /* AlbumService */], __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */]])
    ], UploadLabelsToAlbumModalComponent);
    return UploadLabelsToAlbumModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/app.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var AppComponent = (function () {
    function AppComponent() {
    }
    AppComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-root',
            template: "\n    <app-block></app-block>\n    <router-outlet></router-outlet>\n    <notification-list></notification-list>\n  ",
        })
    ], AppComponent);
    return AppComponent;
}());



/***/ }),

/***/ "../../../../../src/app/app.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_http__ = __webpack_require__("../../../http/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__environments_environment__ = __webpack_require__("../../../../../src/environments/environment.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_ngx_bootstrap_typeahead__ = __webpack_require__("../../../../ngx-bootstrap/typeahead/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__app_routes__ = __webpack_require__("../../../../../src/app/app.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__core_ui_core_ui_module__ = __webpack_require__("../../../../../src/app/core-ui/core-ui.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__albums_albums_module__ = __webpack_require__("../../../../../src/app/albums/albums.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__compose_compose_module__ = __webpack_require__("../../../../../src/app/compose/compose.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__train_train_module__ = __webpack_require__("../../../../../src/app/train/train.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__visualize_visualize_module__ = __webpack_require__("../../../../../src/app/visualize/visualize.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__optimize_optimize_module__ = __webpack_require__("../../../../../src/app/optimize/optimize.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__diaa_diaa_module__ = __webpack_require__("../../../../../src/app/diaa/diaa.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__app_component__ = __webpack_require__("../../../../../src/app/app.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__components_app_block_component__ = __webpack_require__("../../../../../src/app/components/app-block.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__components_signup_component__ = __webpack_require__("../../../../../src/app/components/signup.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__components_signin_component__ = __webpack_require__("../../../../../src/app/components/signin.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__components_signin_password_confirmation_component__ = __webpack_require__("../../../../../src/app/components/signin-password-confirmation.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__components_layout_desk_component__ = __webpack_require__("../../../../../src/app/components/layout-desk.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__components_layout_desk_header_component__ = __webpack_require__("../../../../../src/app/components/layout-desk-header.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__components_layout_splash_component__ = __webpack_require__("../../../../../src/app/components/layout-splash.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__components_library_component__ = __webpack_require__("../../../../../src/app/components/library.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__components_library_context_component__ = __webpack_require__("../../../../../src/app/components/library-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__components_library_flow_list_component__ = __webpack_require__("../../../../../src/app/components/library-flow-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__components_library_table_list_component__ = __webpack_require__("../../../../../src/app/components/library-table-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__components_library_model_list_component__ = __webpack_require__("../../../../../src/app/components/library-model-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__components_library_cv_model_list_component__ = __webpack_require__("../../../../../src/app/components/library-cv-model-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__components_play_component__ = __webpack_require__("../../../../../src/app/components/play.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__components_notification_component__ = __webpack_require__("../../../../../src/app/components/notification.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__components_table_list_component__ = __webpack_require__("../../../../../src/app/components/table-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__components_play_create_component__ = __webpack_require__("../../../../../src/app/components/play-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__components_play_replay_create_component__ = __webpack_require__("../../../../../src/app/components/play-replay-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__components_play_cv_prediction_create_component__ = __webpack_require__("../../../../../src/app/components/play-cv-prediction-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__components_play_prediction_view_component__ = __webpack_require__("../../../../../src/app/components/play-prediction-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__components_play_cv_prediction_view_component__ = __webpack_require__("../../../../../src/app/components/play-cv-prediction-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__components_play_replay_view_component__ = __webpack_require__("../../../../../src/app/components/play-replay-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__components_deploy_context_component__ = __webpack_require__("../../../../../src/app/components/deploy-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__components_deploy_component__ = __webpack_require__("../../../../../src/app/components/deploy.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__components_project_edit_modal_component__ = __webpack_require__("../../../../../src/app/components/project-edit-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__components_library_album_list_component__ = __webpack_require__("../../../../../src/app/components/library-album-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__components_play_context_component__ = __webpack_require__("../../../../../src/app/components/play-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__components_play_prediction_create_component__ = __webpack_require__("../../../../../src/app/components/play-prediction-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__components_notification_list_component__ = __webpack_require__("../../../../../src/app/components/notification-list.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__components_signin_password_component__ = __webpack_require__("../../../../../src/app/components/signin-password.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__services_storage_service__ = __webpack_require__("../../../../../src/app/services/storage.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__services_dropdown_context_service__ = __webpack_require__("../../../../../src/app/services/dropdown-context.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__services_http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};






























































if (__WEBPACK_IMPORTED_MODULE_5__environments_environment__["a" /* environment */].production) {
    Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["_17" /* enableProdMode */])();
}
var AppErrorHandler = (function () {
    function AppErrorHandler(platformRef) {
        this.platformRef = platformRef;
    }
    AppErrorHandler.prototype.handleError = function (error) {
        if (error.message) {
            console.error(error.message);
        }
        console.error(error);
        this.platformRef.destroyed || this.platformRef.destroy();
    };
    return AppErrorHandler;
}());
var BackendClass = __WEBPACK_IMPORTED_MODULE_5__environments_environment__["a" /* environment */].backendClass || __WEBPACK_IMPORTED_MODULE_2__angular_http__["l" /* XHRBackend */];
var AppModule = (function () {
    function AppModule() {
    }
    AppModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_2__angular_http__["e" /* HttpModule */],
                __WEBPACK_IMPORTED_MODULE_3__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_3__angular_forms__["f" /* ReactiveFormsModule */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["f" /* routing */],
                __WEBPACK_IMPORTED_MODULE_6_ngx_bootstrap_typeahead__["a" /* TypeaheadModule */].forRoot(),
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_8__core_ui_core_ui_module__["a" /* CoreUIModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_9__core_core_module__["a" /* CoreModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_10__tables_tables_module__["a" /* TablesModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_11__albums_albums_module__["a" /* AlbumsModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_12__compose_compose_module__["a" /* ComposeModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_13__train_train_module__["a" /* TrainModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_14__visualize_visualize_module__["a" /* VisualizeModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_15__optimize_optimize_module__["a" /* OptimizeModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_16__diaa_diaa_module__["a" /* DIAAModule */].forRoot(),
            ],
            providers: (__WEBPACK_IMPORTED_MODULE_5__environments_environment__["a" /* environment */].providers || []).concat([
                {
                    provide: __WEBPACK_IMPORTED_MODULE_4__angular_core__["u" /* ErrorHandler */],
                    deps: [__WEBPACK_IMPORTED_MODULE_4__angular_core__["U" /* PlatformRef */]],
                    useFactory: function (platformRef) { return new AppErrorHandler(platformRef); },
                },
                __WEBPACK_IMPORTED_MODULE_2__angular_http__["a" /* BaseRequestOptions */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["a" /* APP_ROUTER_PROVIDERS */],
                __WEBPACK_IMPORTED_MODULE_48__services_storage_service__["a" /* StorageService */],
                __WEBPACK_IMPORTED_MODULE_49__services_event_service__["a" /* EventService */],
                __WEBPACK_IMPORTED_MODULE_50__services_notification_service__["a" /* NotificationService */],
                {
                    provide: __WEBPACK_IMPORTED_MODULE_0__angular_common__["a" /* APP_BASE_HREF */],
                    useValue: '/'
                },
                {
                    provide: __WEBPACK_IMPORTED_MODULE_61__services_http_service__["a" /* AppHttp */],
                    deps: [BackendClass, __WEBPACK_IMPORTED_MODULE_2__angular_http__["a" /* BaseRequestOptions */], __WEBPACK_IMPORTED_MODULE_48__services_storage_service__["a" /* StorageService */], __WEBPACK_IMPORTED_MODULE_50__services_notification_service__["a" /* NotificationService */]],
                    useFactory: function (backend, requestOptions, storage, notifications) {
                        return new __WEBPACK_IMPORTED_MODULE_61__services_http_service__["a" /* AppHttp */](backend, requestOptions, storage, notifications);
                    },
                },
                __WEBPACK_IMPORTED_MODULE_51__services_user_service__["a" /* UserService */],
                __WEBPACK_IMPORTED_MODULE_52__services_acl_service__["a" /* AclService */],
                __WEBPACK_IMPORTED_MODULE_53__services_dropdown_context_service__["a" /* DropdownContextService */],
                __WEBPACK_IMPORTED_MODULE_54__services_prediction_service__["a" /* PredictionService */],
                __WEBPACK_IMPORTED_MODULE_55__services_cv_prediction_service__["a" /* CVPredictionService */],
                __WEBPACK_IMPORTED_MODULE_56__services_process_service__["a" /* ProcessService */],
                __WEBPACK_IMPORTED_MODULE_57__services_replay_service__["a" /* ReplayService */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["c" /* PredictionResolve */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["e" /* ReplayResolve */],
                __WEBPACK_IMPORTED_MODULE_58__services_shared_resource_service__["a" /* SharedResourceService */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["d" /* ProjectResolve */],
                __WEBPACK_IMPORTED_MODULE_59__services_project_service__["a" /* ProjectService */],
                __WEBPACK_IMPORTED_MODULE_60__services_modal_service__["a" /* ModalService */],
                __WEBPACK_IMPORTED_MODULE_7__app_routes__["b" /* CVPredictionResolve */],
            ]),
            declarations: [
                __WEBPACK_IMPORTED_MODULE_17__app_component__["a" /* AppComponent */],
                __WEBPACK_IMPORTED_MODULE_18__components_app_block_component__["a" /* AppBlockComponent */],
                // Components from Routes
                __WEBPACK_IMPORTED_MODULE_19__components_signup_component__["a" /* SignupComponent */],
                __WEBPACK_IMPORTED_MODULE_20__components_signin_component__["a" /* SigninComponent */],
                __WEBPACK_IMPORTED_MODULE_47__components_signin_password_component__["a" /* SigninPasswordComponent */],
                __WEBPACK_IMPORTED_MODULE_21__components_signin_password_confirmation_component__["a" /* SigninPasswordConfirmationComponent */],
                __WEBPACK_IMPORTED_MODULE_22__components_layout_desk_component__["a" /* LayoutDeskComponent */],
                __WEBPACK_IMPORTED_MODULE_23__components_layout_desk_header_component__["a" /* LayoutDeskHeaderComponent */],
                __WEBPACK_IMPORTED_MODULE_24__components_layout_splash_component__["a" /* LayoutSplashComponent */],
                __WEBPACK_IMPORTED_MODULE_25__components_library_component__["a" /* LibraryComponent */],
                __WEBPACK_IMPORTED_MODULE_26__components_library_context_component__["a" /* LibraryContextComponent */],
                __WEBPACK_IMPORTED_MODULE_27__components_library_flow_list_component__["a" /* LibraryFlowListComponent */],
                __WEBPACK_IMPORTED_MODULE_28__components_library_table_list_component__["a" /* LibraryTableListComponent */],
                __WEBPACK_IMPORTED_MODULE_29__components_library_model_list_component__["a" /* LibraryModelListComponent */],
                __WEBPACK_IMPORTED_MODULE_30__components_library_cv_model_list_component__["a" /* LibraryCVModelListComponent */],
                __WEBPACK_IMPORTED_MODULE_46__components_notification_list_component__["a" /* NotificationListComponent */],
                __WEBPACK_IMPORTED_MODULE_32__components_notification_component__["a" /* NotificationComponent */],
                __WEBPACK_IMPORTED_MODULE_33__components_table_list_component__["a" /* TableListComponent */],
                __WEBPACK_IMPORTED_MODULE_31__components_play_component__["a" /* PlayComponent */],
                __WEBPACK_IMPORTED_MODULE_34__components_play_create_component__["a" /* PlayCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_45__components_play_prediction_create_component__["a" /* PlayPredictionCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_36__components_play_cv_prediction_create_component__["a" /* PlayCVPredictionCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_35__components_play_replay_create_component__["a" /* PlayReplayCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_37__components_play_prediction_view_component__["a" /* PlayPredictionViewComponent */],
                __WEBPACK_IMPORTED_MODULE_38__components_play_cv_prediction_view_component__["a" /* PlayCVPredictionViewComponent */],
                __WEBPACK_IMPORTED_MODULE_39__components_play_replay_view_component__["a" /* PlayReplayViewComponent */],
                __WEBPACK_IMPORTED_MODULE_44__components_play_context_component__["a" /* PlayContextComponent */],
                __WEBPACK_IMPORTED_MODULE_41__components_deploy_component__["a" /* DeployComponent */],
                __WEBPACK_IMPORTED_MODULE_40__components_deploy_context_component__["a" /* DeployContextComponent */],
                __WEBPACK_IMPORTED_MODULE_20__components_signin_component__["a" /* SigninComponent */],
                __WEBPACK_IMPORTED_MODULE_42__components_project_edit_modal_component__["a" /* ProjectEditModalComponent */],
                __WEBPACK_IMPORTED_MODULE_43__components_library_album_list_component__["a" /* LibraryAlbumListComponent */],
            ],
            bootstrap: [__WEBPACK_IMPORTED_MODULE_17__app_component__["a" /* AppComponent */]],
        })
    ], AppModule);
    return AppModule;
}());



/***/ }),

/***/ "../../../../../src/app/app.routes.auth.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return IsAuthenticated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AUTH_PROVIDERS; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var IsAuthenticated = (function () {
    function IsAuthenticated(router, user) {
        this.router = router;
        this.user = user;
    }
    IsAuthenticated.prototype.canActivate = function (route, state) {
        var _this = this;
        var isAuthorized = this.user.isAuthenticated();
        if (isAuthorized === null) {
            // authentication is not compeleted yet
            return this.user.data.observable.first().map(function (user) {
                // TODO: it seems that auth stuff should be refactored because of
                !user && _this.router.navigate([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].routes.signin]);
                return !!user;
            }, function () {
                _this.router.navigate([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].routes.signin]);
                return false;
            });
        }
        else {
            !isAuthorized && state.url.indexOf('/sign') !== 0 && this.router.navigate([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].routes.signin]);
            return isAuthorized || state.url.indexOf('/sign') === 0;
        }
    };
    IsAuthenticated = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_3__services_user_service__["a" /* UserService */]])
    ], IsAuthenticated);
    return IsAuthenticated;
}());

var AUTH_PROVIDERS = [IsAuthenticated, __WEBPACK_IMPORTED_MODULE_3__services_user_service__["a" /* UserService */]];


/***/ }),

/***/ "../../../../../src/app/app.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return CVPredictionResolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return PredictionResolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return ReplayResolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return ProjectResolve; });
/* unused harmony export appRoutes */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return APP_ROUTER_PROVIDERS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return routing; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_routes_auth__ = __webpack_require__("../../../../../src/app/app.routes.auth.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__ = __webpack_require__("../../../../../src/app/components/library-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_desk_route__ = __webpack_require__("../../../../../src/app/core/desk.route.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_play_context_component__ = __webpack_require__("../../../../../src/app/components/play-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tables_table_view_component__ = __webpack_require__("../../../../../src/app/tables/table-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__albums_albums_routes__ = __webpack_require__("../../../../../src/app/albums/albums.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__compose_compose_routes__ = __webpack_require__("../../../../../src/app/compose/compose.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__train_train_routes__ = __webpack_require__("../../../../../src/app/train/train.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__visualize_visualize_routes__ = __webpack_require__("../../../../../src/app/visualize/visualize.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__optimize_optimize_routes__ = __webpack_require__("../../../../../src/app/optimize/optimize.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__diaa_diaa_routes__ = __webpack_require__("../../../../../src/app/diaa/diaa.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__components_signin_component__ = __webpack_require__("../../../../../src/app/components/signin.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__components_signin_password_component__ = __webpack_require__("../../../../../src/app/components/signin-password.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__components_signup_component__ = __webpack_require__("../../../../../src/app/components/signup.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__components_signin_password_confirmation_component__ = __webpack_require__("../../../../../src/app/components/signin-password-confirmation.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__components_layout_desk_component__ = __webpack_require__("../../../../../src/app/components/layout-desk.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__components_play_replay_view_component__ = __webpack_require__("../../../../../src/app/components/play-replay-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__components_play_cv_prediction_view_component__ = __webpack_require__("../../../../../src/app/components/play-cv-prediction-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__components_play_prediction_view_component__ = __webpack_require__("../../../../../src/app/components/play-prediction-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__components_play_create_component__ = __webpack_require__("../../../../../src/app/components/play-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__components_library_component__ = __webpack_require__("../../../../../src/app/components/library.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




























var CVPredictionResolve = (function () {
    function CVPredictionResolve(predictions) {
        this.predictions = predictions;
    }
    CVPredictionResolve.prototype.resolve = function (route) {
        var predictionId = route.params['predictionId'];
        return this.predictions.get(predictionId);
    };
    CVPredictionResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_27__services_cv_prediction_service__["a" /* CVPredictionService */]])
    ], CVPredictionResolve);
    return CVPredictionResolve;
}());

var PredictionResolve = (function () {
    function PredictionResolve(predictions) {
        this.predictions = predictions;
    }
    PredictionResolve.prototype.resolve = function (route) {
        var predictionId = route.params['predictionId'];
        return this.predictions.get(predictionId);
    };
    PredictionResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_24__services_prediction_service__["a" /* PredictionService */]])
    ], PredictionResolve);
    return PredictionResolve;
}());

var ReplayResolve = (function () {
    function ReplayResolve(replays) {
        this.replays = replays;
    }
    ReplayResolve.prototype.resolve = function (route) {
        var replayId = route.params['replayId'];
        return this.replays.get(replayId);
    };
    ReplayResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_25__services_replay_service__["a" /* ReplayService */]])
    ], ReplayResolve);
    return ReplayResolve;
}());

var ProjectResolve = (function () {
    function ProjectResolve(projects) {
        this.projects = projects;
    }
    ProjectResolve.prototype.resolve = function (route) {
        return this.projects.get(route.params['projectId']);
    };
    ProjectResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_26__services_project_service__["a" /* ProjectService */]])
    ], ProjectResolve);
    return ProjectResolve;
}());

var appRoutes = [
    {
        path: '',
        redirectTo: 'signin',
        pathMatch: 'full',
    },
    {
        path: 'signin',
        component: __WEBPACK_IMPORTED_MODULE_14__components_signin_component__["a" /* SigninComponent */],
    },
    {
        path: 'signin/password',
        component: __WEBPACK_IMPORTED_MODULE_15__components_signin_password_component__["a" /* SigninPasswordComponent */],
    },
    {
        path: 'signin/password/complete',
        component: __WEBPACK_IMPORTED_MODULE_17__components_signin_password_confirmation_component__["a" /* SigninPasswordConfirmationComponent */],
    },
    {
        path: 'signup',
        component: __WEBPACK_IMPORTED_MODULE_16__components_signup_component__["a" /* SignupComponent */],
    },
    {
        path: 'desk',
        component: __WEBPACK_IMPORTED_MODULE_18__components_layout_desk_component__["a" /* LayoutDeskComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_2__app_routes_auth__["b" /* IsAuthenticated */]],
        children: __WEBPACK_IMPORTED_MODULE_5__core_desk_route__["a" /* DeskRoute */].parse([
            {
                path: 'library/tables/table/:tableId',
                component: __WEBPACK_IMPORTED_MODULE_7__tables_table_view_component__["a" /* TableViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/tables/:scope/table/:tableId',
                component: __WEBPACK_IMPORTED_MODULE_7__tables_table_view_component__["a" /* TableViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/tables/:scope/:param/table/:tableId',
                component: __WEBPACK_IMPORTED_MODULE_7__tables_table_view_component__["a" /* TableViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/projects/:projectId/:type',
                component: __WEBPACK_IMPORTED_MODULE_23__components_library_component__["a" /* LibraryComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
                resolve: { project: ProjectResolve },
            },
            {
                path: 'library/projects/:projectId/tables/:tableId',
                component: __WEBPACK_IMPORTED_MODULE_7__tables_table_view_component__["a" /* TableViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library',
                component: __WEBPACK_IMPORTED_MODULE_23__components_library_component__["a" /* LibraryComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/:type',
                component: __WEBPACK_IMPORTED_MODULE_23__components_library_component__["a" /* LibraryComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/:type/:scope',
                component: __WEBPACK_IMPORTED_MODULE_23__components_library_component__["a" /* LibraryComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'library/:type/:scope/:param',
                component: __WEBPACK_IMPORTED_MODULE_23__components_library_component__["a" /* LibraryComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_4__components_library_context_component__["a" /* LibraryContextComponent */],
            },
            {
                path: 'play',
                redirectTo: 'play/create',
            },
            {
                path: 'play/create',
                component: __WEBPACK_IMPORTED_MODULE_22__components_play_create_component__["a" /* PlayCreateComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_6__components_play_context_component__["a" /* PlayContextComponent */],
            },
            {
                path: 'play/predictions/:predictionId',
                component: __WEBPACK_IMPORTED_MODULE_21__components_play_prediction_view_component__["a" /* PlayPredictionViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_6__components_play_context_component__["a" /* PlayContextComponent */],
                resolve: { prediction: PredictionResolve },
            },
            {
                path: 'play/cv-predictions/:predictionId',
                component: __WEBPACK_IMPORTED_MODULE_20__components_play_cv_prediction_view_component__["a" /* PlayCVPredictionViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_6__components_play_context_component__["a" /* PlayContextComponent */],
                resolve: { prediction: CVPredictionResolve },
            },
            {
                path: 'play/replays/:replayId',
                component: __WEBPACK_IMPORTED_MODULE_19__components_play_replay_view_component__["a" /* PlayReplayViewComponent */],
                sideComponent: __WEBPACK_IMPORTED_MODULE_6__components_play_context_component__["a" /* PlayContextComponent */],
                resolve: { replay: ReplayResolve },
            },
            {
                path: 'deploy',
                redirectTo: '',
            }
        ].concat(__WEBPACK_IMPORTED_MODULE_8__albums_albums_routes__["a" /* albumsRoutes */], __WEBPACK_IMPORTED_MODULE_9__compose_compose_routes__["a" /* composeRoutes */], __WEBPACK_IMPORTED_MODULE_13__diaa_diaa_routes__["a" /* diaaRoutes */], __WEBPACK_IMPORTED_MODULE_10__train_train_routes__["a" /* trainRoutes */], __WEBPACK_IMPORTED_MODULE_12__optimize_optimize_routes__["b" /* optimizeRoutes */], __WEBPACK_IMPORTED_MODULE_11__visualize_visualize_routes__["b" /* visualizeRoutes */])),
    },
];
var APP_ROUTER_PROVIDERS = [
    __WEBPACK_IMPORTED_MODULE_3__core_core_mocks_only__["a" /* IfMocksGuard */],
    __WEBPACK_IMPORTED_MODULE_2__app_routes_auth__["a" /* AUTH_PROVIDERS */],
];
var routing = __WEBPACK_IMPORTED_MODULE_1__angular_router__["d" /* RouterModule */].forRoot(appRoutes);


/***/ }),

/***/ "../../../../../src/app/charts/bar-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export BarChartType */
/* unused harmony export ChartOrientation */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BarChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var BarChartType;
(function (BarChartType) {
    BarChartType["STACKED"] = "STACKED";
    BarChartType["GROUPED"] = "GROUPED";
})(BarChartType || (BarChartType = {}));
var ChartOrientation;
(function (ChartOrientation) {
    ChartOrientation["VERTICAL"] = "VERTICAL";
    ChartOrientation["HORIZONTAL"] = "HORIZONTAL";
})(ChartOrientation || (ChartOrientation = {}));
var BarChartComponent = (function () {
    function BarChartComponent() {
        this.options = BarChartComponent_1.defaultOptions;
        this.selection = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_4__angular_common__["d" /* DecimalPipe */]('en-US');
    }
    BarChartComponent_1 = BarChartComponent;
    BarChartComponent.prototype.ngOnChanges = function (changes) {
        if ('options' in changes) {
            this.options = __WEBPACK_IMPORTED_MODULE_2_lodash__["defaults"](this.options, BarChartComponent_1.defaultOptions);
        }
        if (this._svgElement) {
            this.drawChart();
        }
    };
    BarChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    BarChartComponent.prototype.drawChart = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        if (this.options.margin) {
            svg.margin = this.options.margin;
        }
        var seriesIndex = __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.series.length);
        var metricIndex = __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.metrics.length);
        var colorScale = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCategoricalGammaScale(metricIndex, this.options.seriesGamma);
        var classifier = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareAttributesClassifier(this.data);
        // Legend
        if (this.data.metrics.length > 1) {
            svg.pushLegend('metrics', __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].legendColor()
                .labels(this.data.metrics.map(function (_) { return _.name; }))
                .scale(colorScale));
        }
        // ranges
        var metricRange = this.options.orientation === ChartOrientation.VERTICAL
            ? svg.yRange
            : svg.xRange;
        var attributeRange = this.options.orientation === ChartOrientation.VERTICAL
            ? svg.xRange
            : svg.yRange.reverse();
        var metricScale = this.options.stacked
            ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareStackedMetricsScale(this.data, metricRange, colorScale.range().length)
            : __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCombinedMetricsScale(this.data, metricRange, true, colorScale.range().length);
        // SERIES
        var oldSeriesGroup = svg.chartArea
            .selectAll('g.series')
            .data(seriesIndex);
        oldSeriesGroup.exit().remove();
        var seriesGroup = oldSeriesGroup.enter()
            .append('g')
            .classed('series', true)
            .merge(oldSeriesGroup);
        //Attribute axis
        var axes = [];
        var attributeScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleBand"]() //@TODO DEFAULT ScaleBand but can be ScalePoint
            .domain(classifier.range)
            .range(attributeRange) // TODO: introduce an option
            .paddingInner(0.05)
            .paddingOuter(0.025);
        var ticks = [], step, start, stop;
        if (this.options.linearAttributeDomain) {
            _a = this.options.linearAttributeDomain, start = _a[0], stop = _a[1];
            step = this.options.ticksCountX ? (stop - start) / this.options.ticksCountX : null;
            ticks = step
                ? __WEBPACK_IMPORTED_MODULE_3_d3__["range"](start, stop, step).concat([stop]).map(function (_) { return _this._formatFloat(_); })
                : __WEBPACK_IMPORTED_MODULE_3_d3__["range"](start, stop, (stop - start) / classifier.range.length).concat([stop]).map(function (_) { return _this._formatFloat(_); });
            attributeScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scalePoint"]()
                .domain(__WEBPACK_IMPORTED_MODULE_3_d3__["range"](ticks.length))
                .rangeRound(attributeRange);
            if (this.options.attributeAxis) {
                axes.push({
                    location: this.options.orientation === ChartOrientation.VERTICAL
                        ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom
                        : __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.left,
                    label: ('labelX' in this.options)
                        ? this.options.labelX
                        : this.data.attributes.map(function (_) { return _.name; }).join('/'),
                    scale: attributeScale,
                    options: {
                        tickFormat: function (i) { return ticks[i]; },
                    },
                });
            }
        }
        else {
            var step_1 = this.options.ticksCountX ? Math.ceil(classifier.labels.length / this.options.ticksCountX) : null;
            var labels_1 = step_1
                ? classifier.labels.reduce(function (acc, label, index) {
                    if (index % step_1 === 0) {
                        acc.push(label);
                    }
                    else {
                        acc.push(null);
                    }
                    return acc;
                }, [])
                : classifier.labels;
            if (this.options.attributeAxis) {
                axes.push({
                    location: this.options.orientation === ChartOrientation.VERTICAL
                        ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom
                        : __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.left,
                    label: ('labelX' in this.options)
                        ? this.options.labelX
                        : this.data.attributes.map(function (_) { return _.name; }).join('/'),
                    scale: attributeScale,
                    options: {
                        tickFormat: function (i) { return labels_1[i]; },
                        label: this.options.attirbuteLabelAngle,
                    },
                });
            }
        }
        if (this.options.metricAxis) {
            //Metric axis
            axes.push({
                location: this.options.orientation === ChartOrientation.VERTICAL
                    ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.left
                    : __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom,
                label: ('labelY' in this.options) ? this.options.labelY : this.data.metrics.map(function (_) { return _.name; }).join('/'),
                scale: metricScale,
                options: this.options.integerDomain
                    ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].integerAxisOptions(metricScale, this.options.ticksCountY)
                    : {
                        label: this.options.metricLabelAngle,
                    },
            });
        }
        // Set Axes
        var _b = svg.setAxes(axes), _c = _b[1], newAttributeScale = _c[0], newMetricScale = _c[1], elements = _b[3];
        var attributeAxisEl = elements[0];
        if (this.options.attributeAxis) {
            attributeScale = newAttributeScale;
        }
        if (this.options.metricAxis) {
            metricScale = newMetricScale;
        }
        var bandWidth = this.options.linearAttributeDomain
            ? attributeScale.step()
            : attributeScale.bandwidth();
        var rectAttributeScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleBand"]()
            .domain(metricIndex)
            .rangeRound([0, bandWidth])
            .paddingInner(0.2);
        if (this.options.orientation === ChartOrientation.VERTICAL && attributeAxisEl) {
            attributeAxisEl
                .selectAll('text')
                .each(__WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].textTrimmer(bandWidth));
        }
        // BARS
        var oldBars = seriesGroup.selectAll('g.bar')
            .data(function (i) { return _this.data.series[i].data.map(function (_, j) {
            return [i, j, _.referenceId || String(classifier(_.attributes))];
        }); }, function (_a) {
            var referenceId = _a[2];
            return referenceId;
        });
        oldBars.exit().remove();
        var bars = oldBars.enter()
            .append('g')
            .classed('bar', true)
            .merge(oldBars)
            .attr('transform', function (_a) {
            var i = _a[0], j = _a[1];
            if (!_this.options.linearAttributeDomain) {
                if (_this.options.orientation === ChartOrientation.VERTICAL) {
                    return "translate(" + attributeScale(classifier(_this.data.series[i].data[j].attributes)) + ", 0)";
                }
                else if (_this.options.orientation === ChartOrientation.HORIZONTAL) {
                    return "translate(0, " + attributeScale(classifier(_this.data.series[i].data[j].attributes)) + ")";
                }
            }
            else {
                var k = Math.ceil((Number(_this.data.series[i].data[j].attributes[0]) - start) / step);
                var tick = 0;
                if (_this.options.orientation === ChartOrientation.VERTICAL) {
                    tick = step ?
                        (k > 0) ? (k - 1) : 0
                        : 1;
                    return "translate(" + (attributeScale(tick) || attributeScale.range()[0]) + ", 0)";
                }
                else if (_this.options.orientation === ChartOrientation.HORIZONTAL) {
                    tick = (k === 0) ? 1 : k;
                    return "translate(0, " + (attributeScale(tick) || 0) + ")";
                }
            }
        });
        // RECTS
        var oldRects = bars.selectAll('rect')
            .data(function (_a) {
            var i = _a[0], j = _a[1];
            return _this.data.metrics.map(function (_, k) { return [i, j, k]; });
        });
        oldRects.exit().remove();
        var rects = oldRects.enter()
            .append('rect')
            .each(this._initRectPosition(rectAttributeScale, metricScale))
            .merge(oldRects);
        rects
            .attr('fill', function (_a) {
            var i = _a[0], j = _a[1], k = _a[2];
            return colorScale(k);
        })
            .each(this._setRectTransition(rectAttributeScale, metricScale));
        //TITLE
        svg.appendTitle(this.data.series[0].title);
        var _a;
    };
    BarChartComponent.prototype._setRectTransition = function (rectAttributeScale, metricScale) {
        // *trollface*
        var _a = this.options.orientation === ChartOrientation.VERTICAL
            ? ['y', 'x', 'height', 'width']
            : ['x', 'y', 'width', 'height'], yAttr = _a[0], xAttr = _a[1], heightAttr = _a[2], widthAttr = _a[3];
        var data = this.data;
        var options = this.options;
        var stacks = [];
        var y0 = metricScale(0);
        var rectWidth = options.stacked
            ? rectAttributeScale.range()[1] - rectAttributeScale.range()[0]
            : rectAttributeScale.bandwidth();
        return function (datum) {
            var i = datum[0], j = datum[1], k = datum[2];
            var value = data.series[i].data[j].values[k];
            var y1 = metricScale(value);
            var y = Math.min(y0, y1), height = Math.abs(y1 - y0);
            if (options.stacked) {
                var stack = stacks[j] || (stacks[j] = [0, 0]);
                var stackIndex = +(value >= 0);
                var stackShift = stack[stackIndex];
                y += stackShift;
                stack[stackIndex] = stackShift + y1 - y0;
            }
            // *trollface*
            __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this)
                .transition()
                .duration(500)
                .delay((k + 1) * 10)
                .attr(xAttr, rectAttributeScale(options.stacked ? 0 : k))
                .attr(yAttr, y)
                .attr(widthAttr, rectWidth)
                .attr(heightAttr, height);
        };
    };
    BarChartComponent.prototype._initRectPosition = function (rectAttributeScale, metricScale) {
        // *trollface*
        var _a = this.options.orientation === ChartOrientation.VERTICAL
            ? ['y', 'x', 'height', 'width']
            : ['x', 'y', 'width', 'height'], yAttr = _a[0], xAttr = _a[1], heightAttr = _a[2], widthAttr = _a[3];
        var options = this.options;
        var rectWidth = options.stacked
            ? rectAttributeScale.range()[1] - rectAttributeScale.range()[0]
            : rectAttributeScale.bandwidth();
        return function (datum) {
            var k = datum[2];
            __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this)
                .attr(xAttr, rectAttributeScale(options.stacked ? 0 : k))
                .attr(yAttr, metricScale(0))
                .attr(widthAttr, rectWidth)
                .attr(heightAttr, 0);
        };
    };
    BarChartComponent.prototype._formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-2');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], BarChartComponent.prototype, "selection", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], BarChartComponent.prototype, "_svgElement", void 0);
    BarChartComponent = BarChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-bar',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], BarChartComponent);
    return BarChartComponent;
    var BarChartComponent_1;
}());

(function (BarChartComponent) {
    BarChartComponent.defaultOptions = {
        type: BarChartType.GROUPED,
        seriesGamma: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma.category10,
        orientation: ChartOrientation.VERTICAL,
        attirbuteLabelAngle: 0,
        metricLabelAngle: 0,
    };
})(BarChartComponent || (BarChartComponent = {}));


/***/ }),

/***/ "../../../../../src/app/charts/box-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export BoxMetric */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BoxChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var BoxMetric;
(function (BoxMetric) {
    BoxMetric["MIN"] = "MIN";
    BoxMetric["LOWER_QUARTILE"] = "LOWER_QUARTILE";
    BoxMetric["MEDIAN"] = "MEDIAN";
    BoxMetric["UPPER_QUARTILE"] = "UPPER_QUARTILE";
    BoxMetric["MAX"] = "MAX";
})(BoxMetric || (BoxMetric = {}));
var BoxChartComponent = (function () {
    function BoxChartComponent() {
        this.selection = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_4__angular_common__["d" /* DecimalPipe */]('en-US');
    }
    BoxChartComponent_1 = BoxChartComponent;
    BoxChartComponent.prototype.ngOnChanges = function (changes) {
        if ('options' in changes) {
            this.options = __WEBPACK_IMPORTED_MODULE_2_lodash__["defaults"](this.options, BoxChartComponent_1.defaultOptions);
        }
        if (this._svgElement) {
            this.drawChart();
        }
    };
    BoxChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    BoxChartComponent.prototype.drawChart = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        var seriesIndex = __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.series.length);
        var groupByIndices = this.options.groupByAttributes || __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.attributes.length);
        var colorIndices = __WEBPACK_IMPORTED_MODULE_2_lodash__["range"](this.data.attributes.length).filter(function (_) {
            return groupByIndices.indexOf(_) < 0;
        });
        var groupClassifier = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareAttributesClassifier(this.data, ', ', groupByIndices);
        var colorClassifier = this.options.colorClassifier ||
            __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareAttributesClassifier(this.data, ', ', colorIndices);
        // Color Scale
        var colorScale = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCategoricalGammaScale(colorClassifier.range, __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].getCategoricalGamma(this.options.colorGamma));
        // Legend
        if (colorClassifier.range.length > 1) {
            svg.pushLegend('class', __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].legendColor()
                .title(colorIndices.map(function (_) { return _this.data.attributes[_].name; }).join(', '))
                .titleWidth(120)
                .labels(colorClassifier.labels)
                .scale(colorScale));
        }
        // ranges
        // 1. Metric Range
        var metricRange = svg.yRange;
        // 2. AttributeRange
        var attributeRange = svg.xRange;
        // SERIES
        var oldSeriesGroup = svg.chartArea
            .selectAll('g.series')
            .data(seriesIndex);
        oldSeriesGroup.exit().remove();
        var seriesGroup = oldSeriesGroup.enter()
            .append('g')
            .classed('series', true)
            .merge(oldSeriesGroup);
        // Default Scales
        // 2. Metric Scale
        var metricScale = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCombinedMetricsScale(this.data, metricRange, true, this.data.metrics.length, this.options.metricDomain);
        // 2. Attribute Scale
        var axes = [];
        var attributeScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleBand"]()
            .domain(groupClassifier.range)
            .rangeRound(attributeRange)
            .paddingInner(0.5)
            .paddingOuter(0.25);
        // AXES
        // 1. Attribute Axis
        var labels = groupClassifier.labels;
        axes.push({
            location: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom,
            label: ('labelX' in this.options)
                ? this.options.labelX
                : this.data.attributes.map(function (_) { return _.name; }).join('/'),
            scale: attributeScale,
            options: {
                tickFormat: function (i) { return labels[i]; },
                angle: -90,
            },
        });
        // 2. Metric axis
        var _a = metricScale.domain(), start = _a[0], stop = _a[1];
        var metricStep = this.options.ticksCountY ? (stop - start) / this.options.ticksCountY : null;
        axes.push({
            location: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.left,
            label: ('labelY' in this.options) ? this.options.labelY : this.data.metrics.map(function (_) { return _.name; }).join('/'),
            scale: metricScale,
            options: this.options.integerDomain
                ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].integerAxisOptions(metricScale, this.options.ticksCountY)
                : (metricStep
                    ? { ticks: __WEBPACK_IMPORTED_MODULE_3_d3__["range"](start, stop, metricStep).concat([stop]).map(function (_) { return _this._formatFloat(_); }) }
                    : {}),
        });
        // Init Both Axes
        _b = svg.setAxes(axes), _c = _b[1], attributeScale = _c[0], metricScale = _c[1];
        var bandWidth = attributeScale.bandwidth();
        var _d = [
            this.options.metricsMapping[BoxMetric.MIN],
            this.options.metricsMapping[BoxMetric.MAX],
            this.options.metricsMapping[BoxMetric.LOWER_QUARTILE],
            this.options.metricsMapping[BoxMetric.UPPER_QUARTILE],
            this.options.metricsMapping[BoxMetric.MEDIAN],
        ], minIndex = _d[0], maxIndex = _d[1], quartileMinIndex = _d[2], quartileMaxIndex = _d[3], medianIndex = _d[4];
        // SERIES
        var oldGroups = seriesGroup
            .selectAll('g.box-group')
            .data(function (i) { return _this.data.series[i].data.map(function (_, j) { return [i, j]; }); });
        oldGroups.exit().remove();
        var groups = oldGroups.enter()
            .append('g')
            .attr('class', 'box-group')
            .merge(oldGroups)
            .on('mouseover', function (_a) {
            var i = _a[0], j = _a[1];
            __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('.toolTip').remove();
            var divTooltip = __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('body').append('div').attr('class', 'toolTip');
            divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_3_d3__["event"].pageX - 120 + 'px');
            divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_3_d3__["event"].pageY - 200 + 'px');
            divTooltip.style('display', 'inline-block');
            var html = "<table class=\"table\" style=\"margin-bottom: 0;\">\n          <label>" + labels[groupClassifier(_this.data.series[i].data[j].attributes)] + "</label>\n          <tr><td>Max</td><td>" + _this._formatFloat(_this.data.series[i].data[j].values[maxIndex]) + "</td></tr>\n          <tr><td>75%</td><td>" + _this._formatFloat(_this.data.series[i].data[j].values[quartileMaxIndex]) + "</td></tr>\n          <tr><td>Median</td><td>" + _this._formatFloat(_this.data.series[i].data[j].values[medianIndex]) + "</td></tr>\n          <tr><td>25%</td><td>" + _this._formatFloat(_this.data.series[i].data[j].values[quartileMinIndex]) + "</td></tr>\n          <tr><td>Min</td><td>" + _this._formatFloat(_this.data.series[i].data[j].values[minIndex]) + "</td></tr>\n        </table>";
            divTooltip.html(html);
        })
            .on('mouseout', function () {
            __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('.toolTip').remove();
        });
        // Draw the box plot vertical lines
        var oldVerticalLines = groups.selectAll('line.center').data(function (d) { return [d]; });
        oldVerticalLines.exit().remove();
        oldVerticalLines.enter()
            .append('line')
            .attr('class', 'center')
            .merge(oldVerticalLines)
            .attr('x1', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes)) + bandWidth / 2;
        })
            .attr('y1', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[minIndex]);
        })
            .attr('x2', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes)) + bandWidth / 2;
        })
            .attr('y2', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[maxIndex]);
        })
            .attr('stroke', '#000')
            .attr('stroke-width', 1)
            .attr('fill', 'none');
        // Draw the boxes of the box plot, filled in white and on top of vertical lines
        var oldRects = groups.selectAll('rect.box').data(function (d) { return [d]; });
        oldRects.exit().remove();
        oldRects
            .enter()
            .append('rect')
            .attr('class', 'box')
            .merge(oldRects)
            .attr('width', bandWidth)
            .attr('height', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[quartileMinIndex]) - metricScale(_this.data.series[i].data[j].values[quartileMaxIndex]);
        })
            .attr('x', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes));
        })
            .attr('y', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[quartileMaxIndex]);
        }).attr('fill', function (_a) {
            var i = _a[0], j = _a[1];
            return colorScale(colorClassifier(_this.data.series[i].data[j].attributes));
        })
            .attr('stroke', '#000')
            .attr('stroke-width', 1);
        // Now render all the horizontal lines at once - the whiskers and the median
        // Top whisker
        var oldTopWhiskers = groups.selectAll('line.topWhisker').data(function (d) { return [d]; });
        oldTopWhiskers.exit().remove();
        oldTopWhiskers.enter()
            .append('line')
            .attr('class', 'topWhisker')
            .merge(oldTopWhiskers)
            .attr('x1', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes));
        })
            .attr('y1', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[minIndex]);
        })
            .attr('x2', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes)) + bandWidth;
        })
            .attr('y2', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[minIndex]);
        })
            .attr('stroke', '#000')
            .attr('stroke-width', 1)
            .attr('fill', 'none');
        // Median line
        var oldMedians = groups.selectAll('line.median').data(function (d) { return [d]; });
        oldMedians.exit().remove();
        oldMedians.enter()
            .append('line')
            .attr('class', 'median')
            .merge(oldMedians)
            .attr('x1', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes));
        })
            .attr('y1', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[medianIndex]);
        })
            .attr('x2', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes)) + bandWidth;
        })
            .attr('y2', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[medianIndex]);
        })
            .attr('stroke', '#000')
            .attr('stroke-width', 1.5)
            .attr('fill', 'none');
        // Bottom whisker
        var oldBottomWhiskers = groups.selectAll('line.bottomWhisker').data(function (d) { return [d]; });
        oldBottomWhiskers.exit().remove();
        oldMedians.enter()
            .append('line')
            .attr('class', 'bottomWhisker')
            .merge(oldBottomWhiskers)
            .attr('x1', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes));
        })
            .attr('y1', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[maxIndex]);
        })
            .attr('x2', function (_a) {
            var i = _a[0], j = _a[1];
            return attributeScale(groupClassifier(_this.data.series[i].data[j].attributes)) + bandWidth;
        })
            .attr('y2', function (_a) {
            var i = _a[0], j = _a[1];
            return metricScale(_this.data.series[i].data[j].values[maxIndex]);
        })
            .attr('stroke', '#000')
            .attr('stroke-width', 1)
            .attr('fill', 'none');
        //TITLE
        svg.appendTitle(this.data.series[0].title);
        var _b, _c;
    };
    BoxChartComponent.prototype._formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-3');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], BoxChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], BoxChartComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], BoxChartComponent.prototype, "selection", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], BoxChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], BoxChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], BoxChartComponent.prototype, "_svgElement", void 0);
    BoxChartComponent = BoxChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'box-chart',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], BoxChartComponent);
    return BoxChartComponent;
    var BoxChartComponent_1;
}());

(function (BoxChartComponent) {
    BoxChartComponent.defaultOptions = {
        colorGamma: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma.category10,
        ticksCountY: 5,
        boxWidth: 30,
        integerDomain: false,
    };
})(BoxChartComponent || (BoxChartComponent = {}));


/***/ }),

/***/ "../../../../../src/app/charts/charts.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartsModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__one_d_scatter_chart_component__ = __webpack_require__("../../../../../src/app/charts/one-d-scatter-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__two_d_scatter_chart_component__ = __webpack_require__("../../../../../src/app/charts/two-d-scatter-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__bar_chart_component__ = __webpack_require__("../../../../../src/app/charts/bar-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__box_chart_component__ = __webpack_require__("../../../../../src/app/charts/box-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__gauge_chart_component__ = __webpack_require__("../../../../../src/app/charts/gauge-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__progress_chart_component__ = __webpack_require__("../../../../../src/app/charts/progress-chart.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};









var CHART_COMPONENTS = [
    __WEBPACK_IMPORTED_MODULE_3__one_d_scatter_chart_component__["a" /* OneDimScatterChartComponent */],
    __WEBPACK_IMPORTED_MODULE_4__two_d_scatter_chart_component__["a" /* TwoDimScatterChartComponent */],
    __WEBPACK_IMPORTED_MODULE_5__bar_chart_component__["a" /* BarChartComponent */],
    __WEBPACK_IMPORTED_MODULE_6__box_chart_component__["a" /* BoxChartComponent */],
    __WEBPACK_IMPORTED_MODULE_7__gauge_chart_component__["a" /* GaugeChartComponent */],
    __WEBPACK_IMPORTED_MODULE_8__progress_chart_component__["a" /* ProgressChartComponent */],
];
var ChartsModule = (function () {
    function ChartsModule() {
    }
    ChartsModule = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_2__core_core_module__["a" /* CoreModule */],
            ],
            declarations: CHART_COMPONENTS.slice(),
            exports: CHART_COMPONENTS.slice(),
            entryComponents: CHART_COMPONENTS.slice(),
        })
    ], ChartsModule);
    return ChartsModule;
}());



/***/ }),

/***/ "../../../../../src/app/charts/d3-chart.helper.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return D3ChartHelper; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__ = __webpack_require__("../../../../d3-scale-chromatic/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3_svg_legend__ = __webpack_require__("../../../../d3-svg-legend/indexRollupNext.js");



var D3ChartHelper = (function () {
    function D3ChartHelper(element) {
        this._legendMargin = { left: 0, top: 0, right: 0, bottom: 5 };
        this._leftAxisWidth = 0;
        this._rightAxisWidth = 0;
        this._bottomAxisHeight = 0;
        this.svg = __WEBPACK_IMPORTED_MODULE_0_d3__["select"](element);
        var oldChartArea = this.svg.selectAll('g.chartArea').data([true]);
        this.chartArea = oldChartArea.enter()
            .append('g')
            .attr('class', 'chartArea')
            .merge(oldChartArea);
        //force chartArea transform translate
        this.margin = { left: 20, top: 30, right: 20, bottom: 0 };
    }
    Object.defineProperty(D3ChartHelper.prototype, "margin", {
        get: function () {
            return this._margin;
        },
        set: function (margin) {
            this._margin = margin;
            this._updateChartAreaPosition();
            // todo: redraw axes or throw if any axes are in place when this is called
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "size", {
        get: function () {
            return {
                width: parseInt(this.svg.style('width'), 10),
                height: parseInt(this.svg.style('height'), 10),
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "rect", {
        get: function () {
            var _a = this.size, width = _a.width, height = _a.height;
            return {
                left: 0,
                top: 0,
                width: width,
                height: height,
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "chartSize", {
        get: function () {
            var _a = this.size, width = _a.width, height = _a.height;
            return {
                width: width - this._margin.left - this._margin.right - this._legendMargin.left - this._legendMargin.right - this._rightAxisWidth - this._leftAxisWidth,
                height: height - this._margin.top - this._margin.bottom - this._legendMargin.top - this._legendMargin.bottom - this._bottomAxisHeight,
            };
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "xRange", {
        get: function () {
            return [0, this.chartSize.width];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "yRange", {
        get: function () {
            return [this.chartSize.height, 0];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(D3ChartHelper.prototype, "legend", {
        get: function () {
            var oldLegend = this.svg.selectAll('g.legend').data([true]);
            return oldLegend.enter()
                .append('g')
                .attr('class', 'legend')
                .merge(oldLegend);
        },
        enumerable: true,
        configurable: true
    });
    // instance helpers
    D3ChartHelper.prototype.pushLegend = function (name, legend) {
        var element = this.legend.selectAll("g.legend-" + name)
            .data([true]);
        element.enter()
            .append('g')
            .attr('class', "legend-" + name)
            .merge(element)
            .call(legend);
        var legendBox = this.legend.node().getBBox();
        this._legendMargin.right = legendBox.width + 10;
        this.legend
            .attr('transform', "translate(" + (this.size.width - this._margin.right - legendBox.width) + "," + this.margin.top + ")");
    };
    D3ChartHelper.prototype.removeLegend = function (name) {
        this.legend.selectAll("g.legend-" + name)
            .remove();
    };
    D3ChartHelper.prototype.appendTitle = function (title, className, height) {
        if (className === void 0) { className = 'chart-title'; }
        if (height === void 0) { height = 15; }
        //TEXT
        var oldTitle = this.svg.selectAll("text." + className)
            .data([1]);
        oldTitle.exit().remove();
        oldTitle.enter()
            .append('text')
            .attr('class', className)
            .merge(oldTitle)
            .attr('transform', "translate(" + this.size.width / 2 + ", " + height + ")")
            .text(title)
            .attr('text-anchor', 'middle')
            .each(D3ChartHelper.textTrimmer(this.size.width));
    };
    // TODO: now axes definition order matters, we need to make sure that left axis is added before right one
    D3ChartHelper.prototype.setAxes = function (axesParameters) {
        var _this = this;
        var axes = [], scales = [], elements = [], groupElements = [];
        axesParameters.forEach(function (axisParameters) {
            var _a = _this._applyAxis(axisParameters), groupElement = _a[1], axisElement = _a[2];
            axisParameters.scale = _this._setAxisPosition(groupElement, axisElement, axisParameters);
        });
        //redrawing scales
        axesParameters.forEach(function (axisParameters) {
            var _a = _this._applyAxis(axisParameters), axis = _a[0], groupElement = _a[1], element = _a[2];
            axes.push(axis);
            scales.push(axisParameters.scale);
            elements.push(element);
            groupElements.push(groupElement);
        });
        return [axes, scales, groupElements, elements];
    };
    D3ChartHelper.prototype._applyAxis = function (axisParameters) {
        //Creating a group with axis and its label
        var oldGroupElement = this.chartArea.selectAll("g.group-axis-" + axisParameters.location)
            .data([true]);
        var groupElement = oldGroupElement
            .enter()
            .append('g')
            .attr('class', "group-axis-" + axisParameters.location)
            .attr('fill', 'black')
            .merge(oldGroupElement);
        var oldAxisElement = groupElement.selectAll("g.axis-" + axisParameters.location).data([true]);
        //Creating axis element
        var axisElement = oldAxisElement
            .enter()
            .append('g')
            .attr('class', "axis-" + axisParameters.location)
            .merge(oldAxisElement);
        var axis = this._createAxis(axisParameters.scale, axisParameters.location);
        //applying axis external options
        if (axisParameters.options) {
            if (axisParameters.options.ticks) {
                axis.tickValues(axisParameters.options.ticks);
            }
            if (axisParameters.options.tickFormat) {
                axis.tickFormat(axisParameters.options.tickFormat);
            }
        }
        //draw axis
        axisElement
            .call(axis);
        //placing axis with labels
        this._setAxisPosition(groupElement, axisElement, axisParameters);
        return [axis, groupElement, axisElement];
    };
    D3ChartHelper.prototype._setAxisPosition = function (groupElement, axisElement, axisParameters) {
        var scale = axisParameters.scale.copy(); //@TODO ANY SCALE (not d3.AxisScale with readonly range())
        // Adding Label to any type of axis
        var oldAxisLabel = groupElement.selectAll('text.axis-label').data([1]);
        var axisLabel = oldAxisLabel.enter()
            .append('text')
            .classed('axis-label', true)
            .attr('text-anchor', 'middle')
            .merge(oldAxisLabel)
            .text(axisParameters.label);
        if (axisParameters.options && axisParameters.options.angle) {
            axisElement.selectAll('text')
                .attr('y', 0)
                .attr('x', 9)
                .attr('dy', '.35em')
                .attr('transform', 'rotate(90)')
                .style('text-anchor', 'start');
        }
        //Rescaling group + setting its position
        switch (axisParameters.location) {
            case D3ChartHelper.AssetLocation.left:
                groupElement.attr('transform', "translate(0, 0)");
                this._leftAxisWidth = axisElement.node().getBBox().width;
                axisElement.attr('transform', "translate(0, 0)");
                axisLabel.attr('transform', "translate(-" + (this._leftAxisWidth + 2) + ", " + this.chartSize.height / 2 + ") rotate(-90)");
                // need to fix chartArea position
                this._updateChartAreaPosition();
                break;
            case D3ChartHelper.AssetLocation.bottom:
                groupElement.attr('transform', "translate(0, " + this.chartSize.height + ")");
                var axisHeight = axisElement.node().getBBox().height + 12; //@ TODO WHY?
                axisElement.attr('transform', "translate(0, 0)");
                axisLabel.attr('transform', "translate(" + this.chartSize.width / 2 + ", " + (axisHeight + 2) + ")");
                this._bottomAxisHeight = axisHeight;
                break;
            case D3ChartHelper.AssetLocation.right:
                groupElement.attr('transform', "translate(" + this.chartSize.width + ", 0)");
                this._rightAxisWidth = axisElement.node().getBBox().width;
                axisElement.attr('transform', "translate(0, 0)");
                axisLabel.attr('transform', "translate(" + this._rightAxisWidth + ", " + this.chartSize.height / 2 + ") rotate(90)");
                break;
            default:
                throw new Error("Unknown D3ChartHelper.AssetLocation value: " + axisParameters.location);
        }
        return scale;
    };
    D3ChartHelper.prototype._createAxis = function (scale, location) {
        //Rearranging scales depending on its location
        switch (location) {
            case D3ChartHelper.AssetLocation.left:
                scale.range(this.yRange);
                return __WEBPACK_IMPORTED_MODULE_0_d3__["axisLeft"](scale);
            case D3ChartHelper.AssetLocation.bottom:
                scale.range(this.xRange);
                return __WEBPACK_IMPORTED_MODULE_0_d3__["axisBottom"](scale);
            case D3ChartHelper.AssetLocation.right:
                scale.range(this.yRange);
                return __WEBPACK_IMPORTED_MODULE_0_d3__["axisRight"](scale);
            default:
                throw new Error("Unknown D3ChartHelper.AssetLocation value: " + location);
        }
    };
    D3ChartHelper.prototype._updateChartAreaPosition = function () {
        this.chartArea
            .attr('transform', "translate(" + (this.margin.left + this._leftAxisWidth) + ", " + this.margin.top + ")");
    };
    // Static methods
    D3ChartHelper.legendColor = function () {
        return __WEBPACK_IMPORTED_MODULE_2_d3_svg_legend__["a" /* legendColor */]();
    };
    D3ChartHelper.prepareMetricScales = function (data, ranges, domains, limit, paddings) {
        if (domains === void 0) { domains = []; }
        if (limit === void 0) { limit = data.metrics.length; }
        if (paddings === void 0) { paddings = []; }
        return data.metrics.slice(0, limit).map(function (_, i) {
            var range = ranges[i];
            if (!range) {
                throw new Error("No range defined for metric: " + _.name);
            }
            var domain = domains[i] || [
                __WEBPACK_IMPORTED_MODULE_0_d3__["min"](data.series, function (series) { return __WEBPACK_IMPORTED_MODULE_0_d3__["min"](series.data, function (_) { return _.values[i]; }); }) || 0,
                __WEBPACK_IMPORTED_MODULE_0_d3__["max"](data.series, function (series) { return __WEBPACK_IMPORTED_MODULE_0_d3__["max"](series.data, function (_) { return _.values[i]; }); }) || 0,
            ];
            var scale = __WEBPACK_IMPORTED_MODULE_0_d3__["scaleLinear"]()
                .domain(domain)
                .rangeRound(range)
                .clamp(false)
                .nice();
            var padding = paddings[i] || 0;
            if (padding > 0) {
                var rangeLeft = range[0], rangeRight = range[1];
                if (rangeRight < rangeLeft) {
                    rangeLeft += padding;
                    rangeRight -= padding;
                }
                else {
                    rangeRight += padding;
                    rangeLeft -= padding;
                }
                var domainLeft = scale.invert(rangeLeft);
                var domainRight = scale.invert(rangeRight);
                scale
                    .domain([domainLeft, domainRight])
                    .rangeRound([rangeLeft, rangeRight]);
            }
            return scale;
        });
    };
    D3ChartHelper.prepareCombinedMetricsScale = function (data, range, includeZero, limit, metricDomain) {
        if (includeZero === void 0) { includeZero = false; }
        if (limit === void 0) { limit = data.metrics.length; }
        var domain = metricDomain ? metricDomain : [
            __WEBPACK_IMPORTED_MODULE_0_d3__["min"](data.series, function (series) { return __WEBPACK_IMPORTED_MODULE_0_d3__["min"](series.data, function (_) { return __WEBPACK_IMPORTED_MODULE_0_d3__["min"](_.values.slice(0, limit)); }); }),
            __WEBPACK_IMPORTED_MODULE_0_d3__["max"](data.series, function (series) { return __WEBPACK_IMPORTED_MODULE_0_d3__["max"](series.data, function (_) { return __WEBPACK_IMPORTED_MODULE_0_d3__["max"](_.values.slice(0, limit)); }); }),
        ];
        if (includeZero) {
            domain[0] = __WEBPACK_IMPORTED_MODULE_0_d3__["min"]([0, domain[0]]);
            domain[1] = __WEBPACK_IMPORTED_MODULE_0_d3__["max"]([0, domain[1]]);
        }
        return __WEBPACK_IMPORTED_MODULE_0_d3__["scaleLinear"]()
            .domain(domain)
            .rangeRound(range)
            .nice();
    };
    D3ChartHelper.prepareStackedMetricsScale = function (data, range, limit) {
        if (limit === void 0) { limit = data.metrics.length; }
        var domain = [
            __WEBPACK_IMPORTED_MODULE_0_d3__["min"](data.series[0].data, function (_) { return __WEBPACK_IMPORTED_MODULE_0_d3__["sum"](_.values.slice(0, limit).map(function (_) { return Math.min(0, _); })); }),
            __WEBPACK_IMPORTED_MODULE_0_d3__["max"](data.series[0].data, function (_) { return __WEBPACK_IMPORTED_MODULE_0_d3__["sum"](_.values.slice(0, limit).map(function (_) { return Math.max(0, _); })); }),
        ];
        return __WEBPACK_IMPORTED_MODULE_0_d3__["scaleLinear"]()
            .domain(domain)
            .rangeRound(range)
            .nice();
    };
    D3ChartHelper.prepareAttributesClassifier = function (data, labelGlue, takeIndices) {
        if (labelGlue === void 0) { labelGlue = ', '; }
        var includeIndices = takeIndices || __WEBPACK_IMPORTED_MODULE_0_d3__["range"](data.attributes.length);
        var domain = [];
        var labels = [];
        var _trashMap = {};
        data.series.forEach(function (series) {
            series.data.forEach(function (row) {
                var values = includeIndices.map(function (_) { return row.attributes[_]; });
                var hash = values.map(encodeURIComponent).join('&');
                if (!_trashMap.hasOwnProperty(hash)) {
                    var label = values.map(String).join(labelGlue);
                    _trashMap[hash] = label;
                    domain.push(hash);
                    labels.push(label);
                }
            });
        });
        var range = __WEBPACK_IMPORTED_MODULE_0_d3__["range"](domain.length);
        var scale = __WEBPACK_IMPORTED_MODULE_0_d3__["scaleOrdinal"]()
            .domain(domain)
            .range(range);
        return Object.assign(function (attributes) {
            var values = includeIndices.map(function (_) { return attributes[_]; });
            return scale(values.map(encodeURIComponent).join('&'));
        }, {
            domain: domain,
            range: range,
            labels: labels,
        });
    };
    D3ChartHelper.prepareCategoricalGammaScale = function (domain, gamma) {
        return __WEBPACK_IMPORTED_MODULE_0_d3__["scaleOrdinal"]()
            .domain(domain)
            .range(D3ChartHelper.getCategoricalGamma(gamma));
    };
    D3ChartHelper.getCategoricalGamma = function (gamma) {
        if (Array.isArray(gamma)) {
            return gamma;
        }
        switch (gamma) {
            case 'category10':
                return __WEBPACK_IMPORTED_MODULE_0_d3__["schemeCategory10"];
            case 'category20':
                return __WEBPACK_IMPORTED_MODULE_0_d3__["schemeCategory20"];
            case 'category20b':
                return __WEBPACK_IMPORTED_MODULE_0_d3__["schemeCategory20b"];
            case 'category20c':
                return __WEBPACK_IMPORTED_MODULE_0_d3__["schemeCategory20c"];
            case 'schemeAccent':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["g" /* schemeAccent */];
            case 'schemeDark2':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["h" /* schemeDark2 */];
            case 'schemePaired':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["i" /* schemePaired */];
            case 'schemePastel1':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["j" /* schemePastel1 */];
            case 'schemePastel2':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["k" /* schemePastel2 */];
            case 'schemeSet1':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["l" /* schemeSet1 */];
            case 'schemeSet2':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["m" /* schemeSet2 */];
            case 'schemeSet3':
                return __WEBPACK_IMPORTED_MODULE_1_d3_scale_chromatic__["n" /* schemeSet3 */];
            default:
                throw new Error('Unsupported gamma');
        }
    };
    D3ChartHelper.integerAxisOptions = function (scale, ticksCount) {
        return {
            ticks: scale.ticks(ticksCount).filter(function (_) { return _ % 1 === 0; }),
            tickFormat: __WEBPACK_IMPORTED_MODULE_0_d3__["format"]('d'),
        };
    };
    D3ChartHelper.textTrimmer = function (width) {
        return function () {
            var self = __WEBPACK_IMPORTED_MODULE_0_d3__["select"](this), textLength = self.node().getComputedTextLength(), text = self.text();
            while (textLength > width && text.length > 0) {
                text = text.slice(0, -1);
                self.text(text + '…');
                textLength = self.node().getComputedTextLength();
            }
        };
    };
    D3ChartHelper.addText = function (el, data, classSelector, xFn, yFn, textFn, textAnchor, width, rotateAngle, dx, dy) {
        var oldText = __WEBPACK_IMPORTED_MODULE_0_d3__["select"](el)
            .selectAll("text." + classSelector)
            .data(data);
        oldText.exit().remove();
        var text = oldText.enter()
            .append('text')
            .attr('class', classSelector)
            .attr('text-anchor', textAnchor || 'start')
            .attr('transform', "rotate(" + (rotateAngle || 0) + ")")
            .merge(oldText)
            .attr('y', yFn) // see https://github.com/Microsoft/TypeScript/issues/1805
            .attr('dy', "" + (dy || 0))
            .attr('x', xFn) // ^
            .attr('dx', "" + (dx || 0))
            .text(textFn); // -------^
        if (width) {
            text.each(D3ChartHelper.textTrimmer(width));
        }
        return text;
    };
    return D3ChartHelper;
}());

(function (D3ChartHelper) {
    var CategoricalGamma;
    (function (CategoricalGamma) {
        CategoricalGamma["category10"] = "category10";
        CategoricalGamma["category20"] = "category20";
        CategoricalGamma["category20b"] = "category20b";
        CategoricalGamma["category20c"] = "category20c";
        CategoricalGamma["schemeAccent"] = "schemeAccent";
        CategoricalGamma["schemeDark2"] = "schemeDark2";
        CategoricalGamma["schemePaired"] = "schemePaired";
        CategoricalGamma["schemePastel1"] = "schemePastel1";
        CategoricalGamma["schemePastel2"] = "schemePastel2";
        CategoricalGamma["schemeSet1"] = "schemeSet1";
        CategoricalGamma["schemeSet2"] = "schemeSet2";
        CategoricalGamma["schemeSet3"] = "schemeSet3";
    })(CategoricalGamma = D3ChartHelper.CategoricalGamma || (D3ChartHelper.CategoricalGamma = {}));
    var AssetLocation;
    (function (AssetLocation) {
        AssetLocation["left"] = "left";
        AssetLocation["bottom"] = "bottom";
        AssetLocation["right"] = "right";
    })(AssetLocation = D3ChartHelper.AssetLocation || (D3ChartHelper.AssetLocation = {}));
})(D3ChartHelper || (D3ChartHelper = {}));


/***/ }),

/***/ "../../../../../src/app/charts/gauge-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GaugeChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var INTERVALS = {
    minute: 60,
    hour: 60 * 60,
    day: 24 * 60 * 60,
};
var GaugeChartComponent = (function () {
    function GaugeChartComponent() {
        this.options = GaugeChartComponent_1.defaultOptions;
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_4__angular_common__["d" /* DecimalPipe */]('en-US');
    }
    GaugeChartComponent_1 = GaugeChartComponent;
    GaugeChartComponent.prototype.ngOnChanges = function (changes) {
        if ('options' in changes) {
            this.options = __WEBPACK_IMPORTED_MODULE_2_lodash__["defaults"](this.options, GaugeChartComponent_1.defaultOptions);
        }
        if (changes['progress']) {
            this.drawChart(changes['progress'].previousValue);
        }
        else if (this._svgElement) {
            this.drawChart();
        }
    };
    GaugeChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    GaugeChartComponent.prototype.drawChart = function (previousProgress) {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        svg.margin = {
            left: 10,
            right: 10,
            bottom: 60,
            top: 10,
        };
        var oldG = svg.chartArea.selectAll('g.progress-group').data([true]);
        oldG.exit().remove();
        var g = oldG
            .enter()
            .append('g')
            .attr('class', 'progress-group')
            .merge(oldG)
            .attr('transform', 'translate(' + (svg.margin.left + svg.chartSize.width / 2) + ',' + (20 + svg.margin.top + svg.chartSize.height / 2) + ')');
        this.outerRadius = Math.min(svg.chartSize.width / 2, svg.chartSize.height / 2) / 2;
        var progressArc = __WEBPACK_IMPORTED_MODULE_3_d3__["arc"]()
            .innerRadius(this.outerRadius - this.options.innerRadius)
            .outerRadius(this.outerRadius)
            .startAngle(this.degToRad(this.options.startAngle));
        // Add the background arc, from 0 to 100% (tau).
        if (!g.select('path.background').size()) {
            g.append('path')
                .attr('class', 'background')
                .datum({ endAngle: this.degToRad(this.options.endAngle) })
                .attr('d', progressArc);
        }
        // Add the foreground arc
        var oldForeground = g.select('path.foreground');
        var foreground = oldForeground.size()
            ? oldForeground.datum({ endAngle: this.degToRad(this.percToDeg(previousProgress || 0)) })
            : g.append('path')
                .attr('class', 'foreground')
                .datum({
                endAngle: this.degToRad(this.percToDeg(this.progress)),
            })
                .attr('d', progressArc);
        // Animate Progress
        foreground.transition()
            .duration(this.options.interval)
            .attrTween('d', this.arcTween(this.degToRad(this.percToDeg(this.progress)), progressArc));
        // Progress
        var oldProgressText = g.selectAll('text.progress-text').data([true]);
        oldProgressText.exit().remove();
        oldProgressText
            .enter()
            .append('text')
            .attr('dy', this.options.fontSize)
            .attr('class', 'progress-text')
            .attr('font-size', '1em')
            .attr('text-anchor', 'middle')
            .merge(oldProgressText)
            .text(this.formatFloat(this.progress * 100) + "%");
        // Global Progress
        var oldGlobalProgressText = g.selectAll('text.global-progress-text').data([true]);
        oldGlobalProgressText.exit().remove();
        oldGlobalProgressText
            .enter()
            .append('text')
            .attr('class', 'global-progress-text')
            .attr('font-size', this.options.fontSize)
            .attr('text-anchor', 'middle')
            .merge(oldGlobalProgressText)
            .text(this.formatFloat(this.globalProgress * 100) + "%");
        // Draw the tick marks
        var oldTicks = g.selectAll('path.arc-tick').data(__WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.options.numSections));
        oldTicks.exit().remove();
        oldTicks
            .enter()
            .append('path')
            .attr('class', 'arc-tick')
            .merge(oldTicks)
            .classed('active', function (_, tickIdx) { return (tickIdx / _this.options.numSections) <= _this.globalProgress; })
            .attr('d', function (_, tickIdx) { return _this.tickArc(tickIdx)(tickIdx); })
            .each(function (_, i) {
            var firstArcSection = /(^.+?)L/;
            var newArc = firstArcSection.exec(__WEBPACK_IMPORTED_MODULE_3_d3__["select"](this).attr('d'))[1];
            newArc = newArc.replace(/,/g, ' ');
            g.append('path')
                .attr('class', 'hiddenDonutArcs')
                .attr('id', 'donutArc' + i)
                .attr('d', newArc)
                .style('fill', 'none');
        });
        //Append the label names on the outside
        var textPath = g.selectAll('.donutText')
            .data(__WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.options.numSections));
        textPath
            .enter()
            .append('text')
            .attr('class', 'donutText')
            .classed('active', function (_, tickIdx) { return (tickIdx / _this.options.numSections) <= _this.globalProgress; })
            .attr('dy', -13)
            .append('textPath')
            .attr('startOffset', '50%')
            .style('text-anchor', 'middle')
            .attr('xlink:href', function (_, i) {
            return '#donutArc' + i;
        })
            .text(function (_, i) {
            return "" + _this.formatFloat((i / _this.options.numSections) * 100);
        });
        // label
        var oldTextLabel = svg.chartArea.selectAll('text.text-label').data([true]);
        oldTextLabel.enter()
            .append('text')
            .attr('class', 'text-label')
            .attr('text-anchor', 'start')
            .attr('x', 20)
            .attr('y', 15)
            .text("Training");
        var oldLineDelimiter = svg.chartArea.selectAll('line.delimiter').data([true]);
        oldLineDelimiter.enter()
            .append('line')
            .attr('class', 'delimiter')
            .attr('x1', 0)
            .attr('y1', 0)
            .attr('x2', svg.chartSize.width)
            .attr('y2', 0);
        var pathGroup = svg.chartArea.selectAll('g.path-group').data([true]);
        pathGroup.enter()
            .append('g')
            .attr('class', 'path-group')
            .attr('transform', "translate(" + (svg.chartSize.width - 30) + ", -10)");
        var oldPathDelimiter = pathGroup.selectAll('path.delimiter').data([true]);
        oldPathDelimiter.enter()
            .append('path')
            .attr('class', 'delimiter')
            .attr('d', 'M 0 10 L 30 10 L 25 15 L 5 15 Z');
        // estimate
        var len = this.outerRadius + this.options.ticksOffset;
        var oldEstimateLabel = g.selectAll('text.estimate-label').data([true]);
        oldEstimateLabel.enter()
            .append('text')
            .attr('class', 'estimate-label')
            .attr('text-anchor', 'end')
            .attr('dx', -1 * len)
            .attr('dy', len)
            .text("Estimate");
        var oldEstimate = g.selectAll('text.estimate').data([true]);
        var offset = Math.floor((Date.now() - Date.parse(this.estimate)) / 1000);
        var hours = ('0' + Math.floor((offset % INTERVALS.day) / INTERVALS.hour)).slice(-2), minutes = ('0' + Math.floor((offset % INTERVALS.hour) / INTERVALS.minute)).slice(-2), seconds = ('0' + offset % INTERVALS.minute).slice(-2);
        var label = hours + ":" + minutes + ":" + seconds;
        oldEstimate.enter()
            .append('text')
            .attr('class', 'estimate')
            .attr('text-anchor', 'end')
            .attr('dx', -1 * len)
            .attr('dy', len + 20)
            .merge(oldEstimate)
            .text(label);
        // Iterations
        var oldIterationLabel = g.selectAll('text.iteration-label').data([true]);
        oldIterationLabel.enter()
            .append('text')
            .attr('class', 'iteration-label')
            .attr('text-anchor', 'start')
            .attr('dx', len)
            .attr('dy', len)
            .text("Iteration");
        var oldIteration = g.selectAll('text.iteration').data([true]);
        oldIteration.enter()
            .append('text')
            .attr('class', 'iteration')
            .attr('text-anchor', 'start')
            .attr('dx', len)
            .attr('dy', len + 20)
            .merge(oldIteration)
            .text(this.iteration || 0);
        // Left Delimiter
        var oldLeftDelimiter = g.selectAll('path.left-delimiter').data([true]);
        oldLeftDelimiter.enter()
            .append('path')
            .attr('class', 'left-delimiter')
            .attr('d', "M " + -len + " " + len + " L " + -this.options.barWidth + " " + this.options.barWidth + " Z");
        // Right Delimiter
        var oldRightDelimiter = g.selectAll('path.right-delimiter').data([true]);
        oldRightDelimiter.enter()
            .append('path')
            .attr('class', 'right-delimiter')
            .attr('d', "M " + len + " " + len + " L " + this.options.barWidth + " " + this.options.barWidth + " Z");
    };
    GaugeChartComponent.prototype.percToDeg = function (perc) {
        return this.options.startAngle + perc * Math.abs(this.options.endAngle - this.options.startAngle);
    };
    GaugeChartComponent.prototype.degToRad = function (deg) {
        return deg * Math.PI / 180;
    };
    GaugeChartComponent.prototype.tickArc = function (tickIdx) {
        var radius = this.outerRadius + this.options.ticksOffset;
        var step = Math.abs(this.options.endAngle - this.options.startAngle) / this.options.numSections;
        return __WEBPACK_IMPORTED_MODULE_3_d3__["arc"]()
            .outerRadius(radius)
            .innerRadius(radius - this.options.barWidth)
            .startAngle(this.degToRad(this.options.startAngle + (step) * tickIdx + this.options.paddingAngle))
            .endAngle(this.degToRad(this.options.startAngle + (step) * (tickIdx + 1) - this.options.paddingAngle));
    };
    // Returns a tween for a transition’s "d" attribute, transitioning any selected
    // arcs from their current angle to the specified new angle.
    GaugeChartComponent.prototype.arcTween = function (newAngle, arc) {
        return function (d) {
            var interpolate = __WEBPACK_IMPORTED_MODULE_3_d3__["interpolate"](d.endAngle, newAngle);
            return function (t) {
                d.endAngle = interpolate(t);
                return arc(d);
            };
        };
    };
    GaugeChartComponent.prototype.formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-2');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], GaugeChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], GaugeChartComponent.prototype, "progress", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], GaugeChartComponent.prototype, "globalProgress", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], GaugeChartComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], GaugeChartComponent.prototype, "estimate", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], GaugeChartComponent.prototype, "iteration", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], GaugeChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], GaugeChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], GaugeChartComponent.prototype, "_svgElement", void 0);
    GaugeChartComponent = GaugeChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-gauge',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], GaugeChartComponent);
    return GaugeChartComponent;
    var GaugeChartComponent_1;
}());

(function (GaugeChartComponent) {
    GaugeChartComponent.defaultOptions = {
        seriesGamma: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma.category10,
        interval: 350,
        startAngle: -90,
        innerRadius: 5,
        ticksOffset: 40,
        fontSize: '1.5em',
        numSections: 10,
        endAngle: 90,
        barWidth: 10,
        paddingAngle: 4,
    };
})(GaugeChartComponent || (GaugeChartComponent = {}));


/***/ }),

/***/ "../../../../../src/app/charts/one-d-scatter-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OneDimScatterChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var OneDimScatterChartComponent = (function () {
    function OneDimScatterChartComponent() {
        this.options = OneDimScatterChartComponent_1.defaultOptions;
        this.selectionChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.styleHeight = '100%';
        this.styleWidth = '100%';
    }
    OneDimScatterChartComponent_1 = OneDimScatterChartComponent;
    OneDimScatterChartComponent.prototype.ngOnChanges = function (changes) {
        if ('options' in changes) {
            this.options = __WEBPACK_IMPORTED_MODULE_2_lodash__["defaults"](this.options, OneDimScatterChartComponent_1.defaultOptions);
        }
        if (this._svgElement) {
            this.drawChart();
        }
    };
    OneDimScatterChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    // TODO: draw all seriaes x groups
    OneDimScatterChartComponent.prototype.drawChart = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        var seriesRange = __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.series.length);
        var classifier = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareAttributesClassifier(this.data);
        var colorScale = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCategoricalGammaScale(classifier.range, this.options.seriesGamma);
        // Legend
        if (classifier.range.length > 1) {
            svg.pushLegend('class', __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].legendColor()
                .title(this.data.attributes[0].name)
                .titleWidth(120)
                .labels(classifier.labels)
                .scale(colorScale));
        }
        else {
            svg.removeLegend('class');
        }
        // Scales
        var _a = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareMetricScales(this.data, [svg.xRange, [1, this.options.circleRadius]], [this.options.domain], 2), xScale = _a[0], radiusScale = _a[1];
        // AXES
        var axes = [
            {
                location: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom,
                label: this.options.labelX || this.data.metrics[0].name,
                scale: xScale,
            },
        ];
        _b = svg.setAxes(axes), xScale = _b[1][0];
        var yScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scalePoint"]()
            .padding(0.5)
            .domain(classifier.range)
            .range(svg.yRange.reverse());
        var yJitter = this.options.yJitter
            ? __WEBPACK_IMPORTED_MODULE_3_d3__["randomNormal"](0, yScale.step() / 8)
            : function () { return 0; };
        // SERIES
        var oldSeriesGroup = svg.chartArea
            .selectAll('g.series')
            .data(seriesRange);
        oldSeriesGroup.exit().remove();
        var seriesGroup = oldSeriesGroup.enter()
            .append('g')
            .classed('series', true)
            .merge(oldSeriesGroup);
        // POINTS
        var oldPoints = seriesGroup.selectAll('circle')
            .data(function (i) { return _this.data.series[i].data; });
        oldPoints.exit().remove();
        var points = oldPoints.enter()
            .append('circle')
            .attr('fill', function (d) { return colorScale(classifier(d.attributes)); })
            .style('fill-opacity', 0.4)
            .attr('cx', function (d) { return xScale(d.values[0]); })
            .attr('cy', function (d) { return yScale(classifier(d.attributes)) + yJitter(); })
            .attr('r', this.options.circleRadius)
            .merge(oldPoints);
        points.transition()
            .duration(300)
            .attr('fill', function (d) { return colorScale(classifier(d.attributes)); })
            .attr('cx', function (d) { return xScale(d.values[0]); })
            .attr('cy', function (d) { return yScale(classifier(d.attributes)) + yJitter(); })
            .attr('r', this.options.circleRadius);
        points.order();
        // brush
        var brush = __WEBPACK_IMPORTED_MODULE_3_d3__["brushX"]();
        brush.extent([[0, 0], [svg.chartSize.width, svg.chartSize.height]]);
        var oldBrushEl = svg.chartArea.selectAll('g.brush')
            .data([1]);
        var brushEl = oldBrushEl.enter()
            .append('g')
            .attr('class', 'brush')
            .merge(oldBrushEl)
            .call(brush);
        var brushResizePath = function (d) {
            var e = +(d.type === 'e'), x = e ? 1 : -1, y = svg.chartSize.height / 2;
            return 'M' + (.5 * x) + ','
                + y + 'A6,6 0 0 ' + e + ' ' + (6.5 * x) + ','
                + (y + 6) + 'V' + (2 * y - 6)
                + 'A6,6 0 0 ' + e + ' ' + (.5 * x) + ','
                + (2 * y) + 'Z' + 'M' + (2.5 * x) + ','
                + (y + 8) + 'V' + (2 * y - 8) + 'M' + (4.5 * x) + ','
                + (y + 8) + 'V' + (2 * y - 8);
        };
        var oldHandles = brushEl.selectAll('.handle--custom')
            .data([{ type: 'w' }, { type: 'e' }]);
        var handles = oldHandles.enter()
            .append('path')
            .attr('display', 'none')
            .attr('class', 'handle--custom')
            .attr('stroke', '#000')
            .attr('cursor', 'ew-resize')
            .attr('d', brushResizePath)
            .merge(oldHandles);
        brush
            .on('brush', function () {
            _this._updateBrushExtras(svg, handles, xScale);
        })
            .on('end', function () {
            _this._updateBrushExtras(svg, handles, xScale);
            var selection = __WEBPACK_IMPORTED_MODULE_3_d3__["event"].selection;
            if (selection) {
                var selectionValues = selection
                    .map(function (_) { return xScale.invert(_); });
                if (!__WEBPACK_IMPORTED_MODULE_2_lodash__["isEqual"](selectionValues, _this.selection)) {
                    _this.selection = null;
                }
                _this.selectionChange.emit(selectionValues);
            }
            else {
                _this.selectionChange.emit(null);
            }
        });
        if (this.selection) {
            brush.move(brushEl.transition(), this.selection.map(function (_) { return xScale(_); }));
        }
        this._updateBrushExtras(svg, handles, xScale);
        //TITLE
        svg.appendTitle(this.options.title, 'title', 15);
        //SUB TITLE
        svg.appendTitle(this.options.subtitle, 'sub-title', 30);
        var _b;
    };
    OneDimScatterChartComponent.prototype._updateBrushExtras = function (svg, handles, xScale) {
        var selection = this._getEventSelection(svg);
        var circles = svg.chartArea.selectAll('g.series circle');
        if (selection === null) {
            circles.classed('active', false);
            handles.attr('display', 'none');
        }
        else {
            var _a = selection
                .map(function (_) { return xScale.invert(_); }), min_1 = _a[0], max_1 = _a[1];
            circles.classed('active', function (d) {
                return min_1 <= d.values[0] && d.values[0] <= max_1;
            });
            handles.attr('display', null).attr('transform', function (d, i) {
                if (selection[i] !== null) {
                    return 'translate(' + [selection[i], -svg.chartSize.height / 4] + ')';
                }
                return null;
            });
        }
    };
    OneDimScatterChartComponent.prototype._getEventSelection = function (svg) {
        if (__WEBPACK_IMPORTED_MODULE_3_d3__["event"]) {
            return __WEBPACK_IMPORTED_MODULE_3_d3__["event"].selection;
        }
        return __WEBPACK_IMPORTED_MODULE_3_d3__["brushSelection"](svg.chartArea.select('g.brush').node());
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], OneDimScatterChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], OneDimScatterChartComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], OneDimScatterChartComponent.prototype, "selection", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], OneDimScatterChartComponent.prototype, "selectionChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], OneDimScatterChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], OneDimScatterChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], OneDimScatterChartComponent.prototype, "_svgElement", void 0);
    OneDimScatterChartComponent = OneDimScatterChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-one-d-scatter',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
            styles: [
                ".title {\n      font-size: 16px;\n      text-decoration: underline;\n    }\n\n    .subtitle {\n      font-size: 10px;\n    }"
            ]
        }),
        __metadata("design:paramtypes", [])
    ], OneDimScatterChartComponent);
    return OneDimScatterChartComponent;
    var OneDimScatterChartComponent_1;
}());

(function (OneDimScatterChartComponent) {
    OneDimScatterChartComponent.defaultOptions = {
        circleRadius: 5,
        yJitter: false,
        seriesGamma: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma.category10,
    };
})(OneDimScatterChartComponent || (OneDimScatterChartComponent = {}));


/***/ }),

/***/ "../../../../../src/app/charts/progress-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProgressChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ProgressChartComponent = (function () {
    function ProgressChartComponent() {
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_2__angular_common__["d" /* DecimalPipe */]('en-US');
    }
    ProgressChartComponent.prototype.ngOnChanges = function (changes) {
        if (this._svgElement) {
            this.drawChart();
        }
    };
    ProgressChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    ProgressChartComponent.prototype.drawChart = function () {
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        svg.margin = { left: 10, right: 10, top: 10, bottom: 10 };
        var backgroundPath = svg.chartArea.selectAll('line.background').data([true]);
        backgroundPath.enter()
            .append('line')
            .attr('class', 'background')
            .merge(backgroundPath)
            .attr('x1', 0)
            .attr('x2', svg.chartSize.width)
            .attr('y1', 0)
            .attr('y2', 0);
        var foregroundPath = svg.chartArea.selectAll('line.foreground').data([true]);
        foregroundPath.enter()
            .append('line')
            .attr('class', 'foreground')
            .merge(foregroundPath)
            .attr('x1', 0)
            .attr('x2', svg.chartSize.width * this.progress)
            .attr('y1', 0)
            .attr('y2', 0);
        // Progress
        var oldLabelText = svg.chartArea.selectAll('text.progress-label').data([true]);
        oldLabelText
            .enter()
            .append('text')
            .attr('x', 0)
            .attr('dy', '1em')
            .attr('class', 'progress-label')
            .attr('font-size', '1em')
            .attr('text-anchor', 'start')
            .merge(oldLabelText)
            .text("" + this.label);
        // Progress
        var oldProgressText = svg.chartArea.selectAll('text.progress-text').data([true]);
        oldProgressText
            .enter()
            .append('text')
            .attr('x', svg.chartSize.width)
            .attr('dy', '1em')
            .attr('class', 'progress-text')
            .attr('font-size', '1em')
            .attr('text-anchor', 'end')
            .merge(oldProgressText)
            .text(this.formatFloat(this.progress * 100) + "%");
    };
    ProgressChartComponent.prototype.formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-2');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], ProgressChartComponent.prototype, "progress", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ProgressChartComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], ProgressChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], ProgressChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ProgressChartComponent.prototype, "_svgElement", void 0);
    ProgressChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'progress-bar',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        })
    ], ProgressChartComponent);
    return ProgressChartComponent;
}());



/***/ }),

/***/ "../../../../../src/app/charts/two-d-scatter-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TwoDimScatterChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var TwoDimScatterChartComponent = (function () {
    function TwoDimScatterChartComponent() {
        this.options = TwoDimScatterChartComponent_1.defaultOptions;
        this.selectionChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this._brushLock = false;
    }
    TwoDimScatterChartComponent_1 = TwoDimScatterChartComponent;
    TwoDimScatterChartComponent.prototype.ngOnChanges = function (changes) {
        if ('options' in changes) {
            this.options = __WEBPACK_IMPORTED_MODULE_2_lodash__["defaults"](this.options, TwoDimScatterChartComponent_1.defaultOptions);
        }
        if (this._svgElement) {
            this.drawChart();
        }
    };
    TwoDimScatterChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    // TODO: draw all seriaes x groups
    TwoDimScatterChartComponent.prototype.drawChart = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        if (this.options.margin) {
            svg.margin = this.options.margin;
        }
        var seriesRange = __WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.data.series.length);
        var classifier = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareAttributesClassifier(this.data);
        var colorScale = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareCategoricalGammaScale(classifier.range, this.options.seriesGamma);
        // Legend
        if (classifier.range.length > 1 && this.options.enableLegend) {
            svg.pushLegend('class', __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].legendColor()
                .title(this.data.attributes[0].name)
                .titleWidth(120)
                .labels(classifier.labels)
                .scale(colorScale));
        }
        var _a = __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].prepareMetricScales(this.data, [svg.xRange, svg.yRange, [1, 10]], [this.options.xDomain, this.options.yDomain], 3, [this.options.dotSize * 2, this.options.dotSize * 2]), xScale = _a[0], yScale = _a[1];
        // AXES
        var axes = [
            {
                location: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.left,
                label: ('labelY' in this.options) ? this.options.labelY : this.data.metrics[1].name,
                scale: yScale,
                options: this.options.integerYDomain
                    ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].integerAxisOptions(yScale)
                    : {},
            },
            {
                location: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].AssetLocation.bottom,
                label: ('labelX' in this.options) ? this.options.labelX : this.data.metrics[0].name,
                scale: xScale,
                options: this.options.integerXDomain
                    ? __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].integerAxisOptions(xScale)
                    : {},
            },
        ];
        _b = svg.setAxes(axes), _c = _b[1], yScale = _c[0], xScale = _c[1];
        // SERIES
        var oldSeriesGroup = svg.chartArea
            .selectAll('g.series')
            .data(seriesRange);
        oldSeriesGroup.exit().remove();
        var seriesGroup = oldSeriesGroup.enter()
            .append('g')
            .classed('series', true)
            .merge(oldSeriesGroup);
        // POINTS
        var oldPoints = seriesGroup.selectAll('rect')
            .data(function (i) { return _this.data.series[i].data; });
        oldPoints.exit().remove();
        var points = oldPoints.enter()
            .append('rect')
            .attr('x', function (d) { return xScale(d.values[0]) - _this.options.dotSize / 2; })
            .attr('y', function (d) { return yScale(d.values[1]) - _this.options.dotSize / 2; })
            .attr('width', this.options.dotSize)
            .attr('height', this.options.dotSize)
            .attr('fill', function (d) { return colorScale(classifier(d.attributes)); })
            .merge(oldPoints);
        points.transition()
            .duration(300)
            .attr('x', function (d) { return xScale(d.values[0]) - _this.options.dotSize / 2; })
            .attr('y', function (d) { return yScale(d.values[1]) - _this.options.dotSize / 2; });
        points.order();
        // brush
        var brush = __WEBPACK_IMPORTED_MODULE_3_d3__["brush"]()
            .on('brush', function () {
            _this._brushLock = true;
            _this._updateBrushExtras(svg, xScale, yScale);
        })
            .on('end', function () {
            _this._updateBrushExtras(svg, xScale, yScale);
            var selection = __WEBPACK_IMPORTED_MODULE_3_d3__["event"].selection;
            if (selection) {
                var selectionValues = [
                    [xScale.invert(selection[0][0]), yScale.invert(selection[1][1])],
                    [xScale.invert(selection[1][0]), yScale.invert(selection[0][1])],
                ];
                if (!__WEBPACK_IMPORTED_MODULE_2_lodash__["isEqual"](selectionValues, _this.selection)) {
                    _this.selection = null;
                }
                _this.selectionChange.emit(selectionValues);
            }
            else {
                _this.selectionChange.emit(null);
            }
            _this._brushLock = false;
        });
        brush.extent([[0, 0], [svg.chartSize.width, svg.chartSize.height]]);
        var oldBrushEl = svg.chartArea.selectAll('g.brush')
            .data([1]);
        var brushEl = oldBrushEl.enter()
            .append('g')
            .attr('class', 'brush')
            .merge(oldBrushEl)
            .call(brush);
        if (this.selection && !this._brushLock) {
            brush.move(brushEl.transition(), [
                [xScale(this.selection[0][0]), yScale(this.selection[1][1])],
                [xScale(this.selection[1][0]), yScale(this.selection[0][1])],
            ]);
        }
        this._updateBrushExtras(svg, xScale, yScale);
        var _b, _c;
    };
    TwoDimScatterChartComponent.prototype._updateBrushExtras = function (svg, xScale, yScale) {
        var selection = this._getEventSelection(svg);
        var rects = svg.chartArea.selectAll('g.series rect');
        if (selection === null) {
            rects.classed('active', false);
        }
        else {
            var minX_1 = xScale.invert(selection[0][0]), maxY_1 = yScale.invert(selection[0][1]), maxX_1 = xScale.invert(selection[1][0]), minY_1 = yScale.invert(selection[1][1]);
            rects.classed('active', function (d) {
                return minX_1 <= d.values[0] && d.values[0] <= maxX_1 && minY_1 <= d.values[1] && d.values[1] <= maxY_1;
            });
        }
    };
    TwoDimScatterChartComponent.prototype._getEventSelection = function (svg) {
        if (__WEBPACK_IMPORTED_MODULE_3_d3__["event"]) {
            return __WEBPACK_IMPORTED_MODULE_3_d3__["event"].selection;
        }
        return __WEBPACK_IMPORTED_MODULE_3_d3__["brushSelection"](svg.chartArea.select('g.brush').node());
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], TwoDimScatterChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], TwoDimScatterChartComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TwoDimScatterChartComponent.prototype, "selection", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], TwoDimScatterChartComponent.prototype, "selectionChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], TwoDimScatterChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], TwoDimScatterChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], TwoDimScatterChartComponent.prototype, "_svgElement", void 0);
    TwoDimScatterChartComponent = TwoDimScatterChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-two-d-scatter',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], TwoDimScatterChartComponent);
    return TwoDimScatterChartComponent;
    var TwoDimScatterChartComponent_1;
}());

(function (TwoDimScatterChartComponent) {
    TwoDimScatterChartComponent.defaultOptions = {
        dotSize: 5,
        seriesGamma: __WEBPACK_IMPORTED_MODULE_1__d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma.category10,
        enableLegend: true,
    };
})(TwoDimScatterChartComponent || (TwoDimScatterChartComponent = {}));


/***/ }),

/***/ "../../../../../src/app/components/app-block.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppBlockComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppBlockComponent = (function () {
    function AppBlockComponent(http) {
        this.http = http;
        this._blocked = http.active.debounceTime(500);
    }
    AppBlockComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-block',
            template: "\n    <div *ngIf=\"_blocked | async\" class=\"app-block-backdrop\">\n      <app-spinner [visibility]=\"true\" [height]=\"150\"></app-spinner>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_http_service__["a" /* AppHttp */]])
    ], AppBlockComponent);
    return AppBlockComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/deploy-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeployContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DeployContextComponent = (function () {
    function DeployContextComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
    }
    DeployContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-deploy-context',
            template: "Nothing here now",
        }),
        __metadata("design:paramtypes", [])
    ], DeployContextComponent);
    return DeployContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/deploy.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeployComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DeployComponent = (function () {
    function DeployComponent() {
    }
    DeployComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-deploy',
            template: "\n    <div></div>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], DeployComponent);
    return DeployComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/layout-desk-header.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LayoutDeskHeaderComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var LayoutDeskHeaderComponent = (function () {
    function LayoutDeskHeaderComponent(_user, events) {
        this._user = _user;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__["a" /* ActivityObserver */]();
        this.user.getStats();
        // Experimental
        this.passwordForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            oldPassword: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            newPassword: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].password]),
            newPassword2: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].password, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].equal('newPassword')]),
        });
    }
    LayoutDeskHeaderComponent.prototype.onPasswordSubmit = function () {
        var _this = this;
        this._savingObserver
            .observe(this.user.password(this.passwordForm.value))
            .subscribe(function () { return _this.passwordModal.hide(); });
    };
    Object.defineProperty(LayoutDeskHeaderComponent.prototype, "user", {
        get: function () {
            return this._user;
        },
        enumerable: true,
        configurable: true
    });
    LayoutDeskHeaderComponent.prototype.cleanMocks = function () {
        this.events.emit('CLEAN_MOCKS_REQUEST');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('passwordModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], LayoutDeskHeaderComponent.prototype, "passwordModal", void 0);
    LayoutDeskHeaderComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-layout-desk-header',
            template: "\n  <nav class=\"navbar navbar-default nav-header brand-header\" role=\"navigation\">\n    <div class=\"navbar-collapse navbar-ex1-collapse\">\n      <ul class=\"nav navbar-nav navbar-left\">\n        <li [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'library']\">Library</a>\n        </li>\n        <li [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'flows']\">Compose</a>\n        </li>\n        <li [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'albums']\">Label</a>\n        </li>\n        <li [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'train']\">Train</a>\n        </li>\n        <li *mocksOnly=\"true\" [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'diaa']\">DIAA</a>\n        </li>\n        <li *mocksOnly=\"true\" [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'optimization']\">Optimize</a>\n        </li>\n        <li *mocksOnly=\"true\" [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'visualize']\">Visualize</a>\n        </li>\n        <li [routerLinkActive]=\"['active']\">\n          <a [routerLink]=\"['/desk', 'play']\">Play</a>\n        </li>\n        <li class=\"disabled\"\n          tooltip data-toggle=\"tooltip\" data-placement=\"bottom\" data-original-title=\"Coming soon!\">\n          <a>Deploy</a>\n        </li>\n      </ul>\n      <ul class=\"nav navbar-nav navbar-right\">\n        <li class=\"nav-item\" [ngClass]=\"{disabled: true}\">\n          <a class=\"nav-link\">\n            <i class=\"iconapp iconapp-bell\"></i>\n              <span class=\"badge\">99</span>\n          </a>\n        </li>\n        <li class=\"nav-item\" [ngClass]=\"{disabled: true}\">\n          <a class=\"nav-link\">\n            <i class=\"iconapp iconapp-clock\"></i>\n          </a>\n        </li>\n        <li class=\"nav-item\" [ngClass]=\"{disabled: true}\">\n          <a class=\"nav-link\">\n            <i class=\"iconapp iconapp-dashboard\"></i>\n          </a>\n        </li>\n        <li class=\"dropdown\" dropdown>\n          <a class=\"nav-link\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n            <span style=\"padding-right: 20px;\">{{user.data.view.firstName}}</span>\n            <span class=\"glyphicon glyphicon-option-horizontal\"></span>\n          </a>\n\n          <ul class=\"dropdown-menu\">\n            <li><a (click)=\"passwordForm.reset(); passwordModal.show();\" class=\"link\">Change password</a></li>\n            <li role=\"separator\" class=\"divider\"></li>\n            <li><a (click)=\"user.signout()\" class=\"link\">Logout</a></li>\n            <li *mocksOnly=\"true\"><a (click)=\"cleanMocks()\" class=\"link\">Reset fixtures</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  </nav>\n  <app-modal #passwordModal\n    [title]=\"'Change password'\"\n    [buttons]=\"[{'class': 'btn-primary', 'title': 'Save', 'disabled': !passwordForm.valid || (_savingObserver.active | async)}]\"\n    (buttonClick)=\"onPasswordSubmit()\">\n    <div class=\"panel\">\n      <div class=\"panel-body\">\n        <form [formGroup]=\"passwordForm\" (ngSubmit)=\"passwordForm.valid && onPasswordSubmit()\">\n          <app-input [control]=\"passwordForm.controls['oldPassword']\" [type]=\"'password'\" [label]=\"'Old Password'\"\n            [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n          <app-input [control]=\"passwordForm.controls['newPassword']\" [type]=\"'password'\" [label]=\"'New Password'\"\n            [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n          <app-input [control]=\"passwordForm.controls['newPassword2']\" [type]=\"'password'\" [label]=\"'Confirm New Password'\"\n            [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n        </form>\n        <div>\n          Password should be minimum 10 characters and meet all following rules:\n          <ul><li>at least 1 upper case character</li><li>at least 1 lower case character</li><li>at least 1 special character</li><li>at least 1 digit</li></ul>\n        </div>\n      </div>\n    </div>\n  </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */]])
    ], LayoutDeskHeaderComponent);
    return LayoutDeskHeaderComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/layout-desk.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LayoutDeskComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var LayoutDeskComponent = (function () {
    function LayoutDeskComponent() {
    }
    LayoutDeskComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-layout-desk',
            template: "\n    <div class=\"container container-flex\" style=\"min-height: 650px;\">\n      <div class=\"row row-flex\">\n        <div class=\"col-md-2 left-side\">\n          <div class=\"logo img-logo\" [routerLink]=\"['/desk', 'library']\" role=\"button\"></div>\n          <router-outlet name=\"side\"></router-outlet>\n        </div>\n        <div class=\"col-md-10 brand-right-panel\">\n          <div class=\"header brand-header\">\n            <app-layout-desk-header></app-layout-desk-header>\n          </div>\n          <router-outlet></router-outlet>\n        </div>\n      </div>\n     </div>\n  ",
        })
    ], LayoutDeskComponent);
    return LayoutDeskComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/layout-splash.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LayoutSplashComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var LayoutSplashComponent = (function () {
    function LayoutSplashComponent() {
        this.appVersion = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].version;
    }
    LayoutSplashComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-layout-splash',
            template: "\n    <div class=\"container container-splash\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <div class=\"logo img-logo center-block\"></div>\n        </div>\n        <div class=\"col-md-12 text-center\">\n          <span class=\"app-version\">Version {{appVersion}}</span>\n        </div>\n      </div>\n      <ng-content></ng-content>\n    </div>\n  "
        })
    ], LayoutSplashComponent);
    return LayoutSplashComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/library-album-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryAlbumListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__library_list_abstract_component__ = __webpack_require__("../../../../../src/app/components/library-list-abstract.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









// TODO: synchronize dropdown ops with asset-operations.component (acl and etc.)
var LibraryAlbumListComponent = (function (_super) {
    __extends(LibraryAlbumListComponent, _super);
    function LibraryAlbumListComponent(albums, projects, shares, events, users) {
        var _this = _super.call(this, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, projects, events, shares, users) || this;
        _this.albums = albums;
        _this.options = {
            columns: [
                { name: 'Name', alias: 'name', style: 'width: 20%' },
                { name: 'Status', alias: 'status', style: 'width: 5%; text-align: center' },
                { name: 'Created', alias: 'created', style: 'width: 12%' },
                { name: 'Modified', alias: 'updated', style: 'width: 12%' },
                { name: 'Owner', style: 'width: 12%' },
                { name: 'Type', style: 'width: 12%' },
            ]
        };
        return _this;
    }
    LibraryAlbumListComponent.prototype.deleteAlbum = function (item) {
        this.albums.delete(item);
    };
    LibraryAlbumListComponent.prototype.removeAlbumFromProject = function (item) {
        this.projects.unlinkAlbum(this.project, item);
    };
    LibraryAlbumListComponent.prototype._loadItems = function (params) {
        return this.project ? this.projects.listAlbums(this.project.id, params) : this.albums.list(params);
    };
    LibraryAlbumListComponent.prototype._setItems = function (data) {
        this.albumsList = data;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryAlbumListComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], LibraryAlbumListComponent.prototype, "searchControl", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryAlbumListComponent.prototype, "project", void 0);
    LibraryAlbumListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-album-list',
            template: "\n    <asset-operations [type]=\"config.asset.values.ALBUM\"\n      [(selectedItems)]=\"selectedItems\"\n      [project]=\"project\">\n      <form class=\"form\" [formGroup]=\"form\">\n        <app-input [control]=\"searchControl\"\n          [iconBefore]=\"'glyphicon-search'\"\n          [iconAfter]=\"'glyphicon-remove'\"\n          (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n      </form>\n    </asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-xs-offset-7 col-xs-5\" *ngIf=\"albumsList\">\n              <div class=\"pull-right\">\n                {{albumsList.count || 0 | pluralize:({other: '{} albums', '0': 'No albums', '1': '{} album'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"albumsList.data.length\"\n                  [rowsCount]=\"albumsList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n          <tr style=\"white-space: nowrap\">\n            <th></th>\n            <th *ngFor=\"let item of options.columns\"\n              [grid-sort]=\"item\"\n              [grid-sort-control]=\"form.controls['order']\">\n              {{item.name}}\n            </th>\n            <th class=\"text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of albumsList.data; let i = index\">\n            <td>\n              <app-check\n                (checkedChange)=\"changeSelection(item, $event)\"\n                [checked]=\"isSelected(item) > -1\"\n                [name]=\"'selection' + item.id\" [type]=\"'checkbox'\"\n                [value]=\"item\"></app-check>\n            </td>\n            <td>\n              <a [routerLink]=\"['/desk', 'albums', item.id]\">{{item.name}}</a>\n            </td>\n            <td class=\"text-center\">\n              <i class=\"dot\" [flow-status-color]=\"item.status\"></i>\n            </td>\n            <td>{{item.created | date:'M/d/y'}}</td>\n            <td>{{item.updated | date:'M/d/y'}}</td>\n            <td [ngSwitch]=\"item.ownerId\">\n              <span *ngSwitchCase=\"currentUser.id\">Me</span>\n              <span *ngSwitchDefault=\"\">{{_sharedOwners[item.ownerId] | AppUserName:!_sharedOwnersLoader.loaded}}</span>\n            </td>\n            <td>{{config.album.type.labels[item.type]}}</td>\n            <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\">\n              <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n                style=\"font-size: 18px;\">\n                  <span class=\"glyphicon glyphicon-option-vertical\"></span>\n              </a>\n\n              <ul class=\"dropdown-menu dropdown-menu-right\">\n                <li><a *ngIf=\"item.status === config.album.status.values.ACTIVE\" [routerLink]=\"['/desk','albums', item.id]\"\n                  class=\"dropdown-item link\">\n                  Preview\n                </a></li>\n                <li><a\n                  (click)=\"deleteAlbum(item)\"\n                  class=\"dropdown-item link\">\n                  Trash\n                </a></li>\n                <li *ngIf=\"project\"><a\n                  (click)=\"removeAlbumFromProject(item)\"\n                  class=\"dropdown-item link\">\n                  Remove\n                </a></li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_5__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_6__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_8__services_user_service__["a" /* UserService */]])
    ], LibraryAlbumListComponent);
    return LibraryAlbumListComponent;
}(__WEBPACK_IMPORTED_MODULE_2__library_list_abstract_component__["a" /* LibraryListAbstractComponent */]));



/***/ }),

/***/ "../../../../../src/app/components/library-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__albums_upload_images_to_album_modal_component__ = __webpack_require__("../../../../../src/app/albums/upload-images-to-album-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tables_table_upload_modal_component__ = __webpack_require__("../../../../../src/app/tables/table-upload-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__project_edit_modal_component__ = __webpack_require__("../../../../../src/app/components/project-edit-modal.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












// TODO: opened and projectOpened should be refreshed after changing route and other (i.e. delete last project)
// TODO: UI for Projects (highlighting, margins, etc)
var LibraryContextComponent = (function () {
    function LibraryContextComponent(tables, router, projects, events, user, modals) {
        var _this = this;
        this.tables = tables;
        this.router = router;
        this.projects = projects;
        this.events = events;
        this.user = user;
        this.modals = modals;
        this.classes = 'fixed-width';
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.filters = {
            tables: [
                {
                    name: 'All',
                    route: ['/desk', 'library', 'tables', 'all']
                },
                {
                    name: 'Personal',
                    route: ['/desk', 'library', 'tables', 'personal']
                },
                {
                    name: 'Shared w/Me',
                    route: ['/desk', 'library', 'tables', 'shared']
                },
                {
                    name: 'Enterprise',
                    route: ['/desk', 'library', 'tables', 'enterprise'],
                    disabled: true
                },
                {
                    name: 'Third Party',
                    route: ['/desk', 'library', 'tables', 'thirdparty'],
                    disabled: true
                },
                {
                    name: 'Recent',
                    route: ['/desk', 'library', 'tables', 'recent'],
                    disabled: true
                }
            ],
            flows: [
                {
                    name: 'All',
                    route: ['/desk', 'library', 'flows', 'all']
                },
                {
                    name: 'Personal',
                    route: ['/desk', 'library', 'flows', 'personal']
                },
                {
                    name: 'Shared w/Me',
                    route: ['/desk', 'library', 'flows', 'shared']
                },
                {
                    name: 'Enterprise',
                    route: ['/desk', 'library', 'flows', 'enterprise'],
                    disabled: true
                },
                {
                    name: 'Third Party',
                    route: ['/desk', 'library', 'flows', 'thirdparty'],
                    disabled: true
                },
                {
                    name: 'Recent',
                    route: ['/desk', 'library', 'flows', 'recent'],
                    disabled: true
                }
            ],
            models: [
                {
                    name: 'All',
                    route: ['/desk', 'library', 'models', 'all']
                },
                {
                    name: 'Personal',
                    route: ['/desk', 'library', 'models', 'personal']
                },
                {
                    name: 'Shared w/Me',
                    route: ['/desk', 'library', 'models', 'shared']
                },
                {
                    name: 'Enterprise',
                    route: ['/desk', 'library', 'models', 'enterprise'],
                    disabled: true
                },
                {
                    name: 'Third Party',
                    route: ['/desk', 'library', 'models', 'thirdparty'],
                    disabled: true
                },
                {
                    name: 'Recent',
                    route: ['/desk', 'library', 'models', 'recent'],
                    disabled: true
                }
            ],
            cvmodels: [
                {
                    name: 'All',
                    route: ['/desk', 'library', 'cv-models', 'all']
                },
                {
                    name: 'Personal',
                    route: ['/desk', 'library', 'cv-models', 'personal']
                },
                {
                    name: 'Shared w/Me',
                    route: ['/desk', 'library', 'cv-models', 'shared']
                },
                {
                    name: 'Enterprise',
                    route: ['/desk', 'library', 'cv-models', 'enterprise'],
                    disabled: true
                },
                {
                    name: 'Third Party',
                    route: ['/desk', 'library', 'cv-models', 'thirdparty'],
                    disabled: true
                },
                {
                    name: 'Recent',
                    route: ['/desk', 'library', 'cv-models', 'recent'],
                    disabled: true
                }
            ],
            projects: [
                {
                    name: 'Tables',
                    baseRoute: ['/desk', 'library', 'projects'],
                    sufRoute: ['tables']
                },
                {
                    name: 'Flows',
                    baseRoute: ['/desk', 'library', 'projects'],
                    sufRoute: ['flows']
                },
                {
                    name: 'Models',
                    baseRoute: ['/desk', 'library', 'projects'],
                    sufRoute: ['models']
                },
                {
                    name: 'CV Models',
                    baseRoute: ['/desk', 'library', 'projects'],
                    sufRoute: ['cv-models']
                }
            ],
            albums: [
                {
                    name: 'All',
                    route: ['/desk', 'library', 'albums', 'all']
                },
                {
                    name: 'Personal',
                    route: ['/desk', 'library', 'albums', 'personal']
                },
                {
                    name: 'Shared w/Me',
                    route: ['/desk', 'library', 'albums', 'shared']
                },
                {
                    name: 'Third Party',
                    route: ['/desk', 'library', 'albums', 'thirdparty'],
                    disabled: true
                },
            ]
        };
        this.menu = [
            {
                id: 'tables',
                name: 'Tables',
                icon: 'iconapp iconapp-tables',
                route: ['/desk', 'library', 'tables'],
                disabled: false
            },
            {
                id: 'flows',
                name: 'Flows',
                route: ['/desk', 'library', 'flows'],
                icon: 'iconapp iconapp-flows',
                disabled: false
            },
            {
                id: 'models',
                name: 'Models',
                icon: 'iconapp iconapp-models',
                route: ['/desk', 'library', 'models'],
                disabled: false
            },
            {
                id: 'cvmodels',
                name: 'CV Models',
                icon: 'glyphicon glyphicon-blackboard',
                route: ['/desk', 'library', 'cv-models'],
                disabled: false
            },
            {
                id: 'albums',
                name: 'Albums',
                icon: 'glyphicon glyphicon-picture',
                route: ['/desk', 'library', 'albums'],
                disabled: false
            },
            {
                id: 'projects',
                name: 'Projects',
                icon: 'iconapp iconapp-projects',
                route: ['/desk', 'library', 'projects'],
                disabled: false
            },
            {
                id: 'robots',
                name: 'Robots',
                icon: 'iconapp iconapp-robots',
                route: ['/desk', 'deploy'],
                disabled: true
            },
            {
                id: 'visuals',
                name: 'Visuals',
                icon: 'iconapp iconapp-visuals',
                route: ['/desk', 'visualize'],
                disabled: true
            },
        ].filter(function (_) { return _; });
        this.currentRoute = '';
        this.opened = [true, true, true, false, false, false, false];
        this.projectOpened = [];
        this.projectList = [];
        this.stats = {};
        this.projectsLoader = new __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadProjectList(); });
        this.projectsLoader.subscribe(function (_) {
            _this.projectList = _.data;
            _this.projectOpened = _this.projectList.map(function (project) { return _this.isPartOf(['/desk', 'library', 'projects', project.id]); });
        });
        this.statsLoader = new __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.user.getStats(); });
        this.statsLoader.subscribe(function (stats) {
            _this.stats = {
                tables: 'tablesCount' in stats ? stats.tablesCount : 0,
                flows: 'flowsCount' in stats ? stats.flowsCount : 0,
                models: 'modelsCount' in stats ? stats.modelsCount : 0,
                cvmodels: 'cvModelsCount' in stats ? stats.cvModelsCount : 0,
                projects: 'projectsCount' in stats ? stats.projectsCount : 0,
                albums: 'albumsCount' in stats ? stats.albumsCount : 0
            };
        });
    }
    LibraryContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.currentRoute = this.router.url;
        this.opened = this.menu.map(function (menuItem) { return _this.isPartOf(menuItem.route); });
        this.routeSubscription = this.router.events.subscribe(function (event) {
            if (event instanceof __WEBPACK_IMPORTED_MODULE_1__angular_router__["b" /* NavigationEnd */]) {
                _this.currentRoute = event.urlAfterRedirects;
            }
        });
        this.projectsLoader.load();
        this.statsLoader.load();
        this.eventSubscription = this.events.subscribe(function (event) {
            var type = event.type;
            if (type === 'UPDATE_PROJECT_LIST') {
                _this.projectsLoader.load();
            }
            switch (event.type) {
                case 'UPDATE_TABLE_LIST':
                case 'UPDATE_FLOW_LIST':
                case 'UPDATE_MODEL_LIST':
                case 'UPDATE_CV_MODEL_LIST':
                case 'UPDATE_PROJECT_LIST':
                    _this.statsLoader.load();
                    break;
            }
        });
    };
    LibraryContextComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription && this.routeSubscription.unsubscribe();
        this.eventSubscription && this.eventSubscription.unsubscribe();
    };
    LibraryContextComponent.prototype.isPartOf = function (route) {
        return this.currentRoute.indexOf(route.join('/')) === 0;
    };
    LibraryContextComponent.prototype.deleteProject = function (project) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).flatMap(function () {
            return _this.projects.delete(project);
        }).subscribe(function () {
            // if we deletes current viewing project, then redirect
            if (_this.router.url.indexOf("projects/" + project.id) !== -1) {
                _this.router.navigate([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].routes.signinRedirect]);
            }
            _this.projectsLoader.load();
        });
    };
    LibraryContextComponent.prototype.createProject = function () {
        this.projectEditModal.open();
    };
    LibraryContextComponent.prototype.openUploadDialog = function () {
        this.tableUploadModal.open();
    };
    LibraryContextComponent.prototype.editProject = function (project) {
        this.projectEditModal.open(project);
    };
    LibraryContextComponent.prototype.openUploadModal = function () {
        this.uploadModal.open();
    };
    LibraryContextComponent.prototype._loadProjectList = function () {
        return this.projects.list();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], LibraryContextComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('projectEditModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_11__project_edit_modal_component__["a" /* ProjectEditModalComponent */])
    ], LibraryContextComponent.prototype, "projectEditModal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('uploadModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__albums_upload_images_to_album_modal_component__["a" /* UploadImagesToAlbumModalComponent */])
    ], LibraryContextComponent.prototype, "uploadModal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('tableUploadModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__tables_table_upload_modal_component__["a" /* TableUploadModalComponent */])
    ], LibraryContextComponent.prototype, "tableUploadModal", void 0);
    LibraryContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-library-context',
            template: "\n    <div class=\"group\">\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\"\n          (click)=\"openUploadDialog()\">Import Table</button>\n        <button type=\"button\" [routerLink]=\"['/desk', 'flows', 'create']\" class=\"btn btn-primary btn-alt btn-block\">Create Flow</button>\n        <button type=\"button\" (click)=\"createProject()\" class=\"btn btn-primary btn-alt btn-block\">Create Project</button>\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" [routerLink]=\"['/desk', 'albums', 'create']\">Create Album</button>\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" (click)=\"openUploadModal()\">Upload Images</button>\n    </div>\n    <upload-images-to-album-modal #uploadModal></upload-images-to-album-modal>\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li *ngFor=\"let item of menu; let i = index\"\n          class=\"top-level-menu\"\n          [ngClass]=\"{\n              'has-submenu': (item.id === 'projects' && projectList.length) || (item.id !== 'projects' && filters[item.id] && filters[item.id].length),\n              'open': opened[i],\n              'disabled': item.disabled || false\n            }\">\n            <a (click)=\"item.disabled || (item.id === 'projects' && !projectList.length) || (opened[i] = !opened[i])\">\n              <i *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></i>\n              <span>\n                {{item.name}}<ng-template [ngIf]=\"stats[item.id]\"\n                  >&nbsp;<span class=\"badge\">{{stats[item.id]}}</span></ng-template>\n              </span>\n            </a>\n            <ul class=\"nav submenu\" *ngIf=\"item.id !== 'projects' && filters[item.id] && filters[item.id].length\">\n              <li *ngFor=\"let subItem of filters[item.id]\"\n                [routerLinkActive]=\"['active']\"\n                [ngClass]=\"{'has-submenu': (subItem?.children || false),'open': subItem?.children && isPartOf(subItem.route), 'disabled': subItem.disabled}\">\n                <a [routerLink]=\"subItem.route\" *ngIf=\"!subItem.disabled\">\n                  <span>{{subItem.name}}</span>\n                </a>\n                <a *ngIf=\"subItem.disabled\">\n                  <span>{{subItem.name}}</span>\n                </a>\n              </li>\n            </ul>\n            <ul class=\"nav nav-pills submenu with-dropdown\" *ngIf=\"item.id === 'projects' && projectList.length\">\n              <li *ngFor=\"let project of projectList; let j = index\" class=\"has-submenu\"\n                [ngClass]=\"{'open': projectOpened[j]}\">\n                <span class=\"dropdown pull-right\" dropdown>\n                  <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                    <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                  </a>\n                  <ul class=\"dropdown-menu\">\n                    <li><a (click)=\"editProject(project)\" class=\"dropdown-item link\">Edit</a></li>\n                    <li><a (click)=\"deleteProject(project)\" class=\"dropdown-item link\">Trash</a></li>\n                  </ul>\n                </span>\n                <a (click)=\"(projectOpened[j] = !projectOpened[j])\">\n                  <span>{{project.name}}</span>\n                </a>\n                <ul class=\"nav nav-pills submenu\" *ngIf=\"filters[item.id] && filters[item.id].length\">\n                  <li *ngFor=\"let subItem of filters[item.id]\"\n                    [routerLinkActive]=\"['active']\"\n                    [ngClass]=\"{'disabled': subItem.disabled}\">\n                    <a [routerLink]=\"subItem.baseRoute.concat([project.id], subItem.sufRoute)\" *ngIf=\"!subItem.disabled\">\n                      <span>{{subItem.name}}</span>\n                    </a>\n                    <a *ngIf=\"subItem.disabled\">\n                      <span>{{subItem.name}}</span>\n                    </a>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n        </li>\n      </ul>\n    </div>\n    <project-edit-modal #projectEditModal></project-edit-modal>\n    <table-upload-modal #tableUploadModal></table-upload-modal>\n  ",
            styles: [
                'li.top-level-menu > a > i.glyphicon { font-size: 24px; width: 50px; padding-left: 12px; }'
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_6__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_8__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_9__services_modal_service__["a" /* ModalService */]])
    ], LibraryContextComponent);
    return LibraryContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/library-cv-model-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryCVModelListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__ = __webpack_require__("../../../../../src/app/components/library-list-abstract.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var LibraryCVModelListComponent = (function (_super) {
    __extends(LibraryCVModelListComponent, _super);
    function LibraryCVModelListComponent(projects, shares, events, users, cvmodels, modals) {
        var _this = _super.call(this, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL, projects, events, shares, users) || this;
        _this.cvmodels = cvmodels;
        _this.modals = modals;
        _this.options = {
            columns: [
                { name: 'Name', alias: 'name', style: 'width: 20%' },
                { name: 'Status', alias: 'status', style: 'width: 5%' },
                { name: 'Created', alias: 'created', style: 'width: 12%', reverse: true },
                { name: 'Modified', alias: 'updated', style: 'width: 12%', reverse: true },
                { name: 'Owner', style: 'width: 12%' },
            ]
        };
        return _this;
    }
    LibraryCVModelListComponent.prototype.removeModelFromProject = function (item) {
        this.projects.unlinkCVModel(this.project, item);
    };
    LibraryCVModelListComponent.prototype.deleteModel = function (item) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.cvmodels.delete(item);
        });
    };
    LibraryCVModelListComponent.prototype._loadItems = function (params) {
        return this.project ? this.projects.listCVModels(this.project.id, params) : this.cvmodels.list(params);
    };
    LibraryCVModelListComponent.prototype._setItems = function (data) {
        this.modelsList = data;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryCVModelListComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], LibraryCVModelListComponent.prototype, "searchControl", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryCVModelListComponent.prototype, "project", void 0);
    LibraryCVModelListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-cv-model-list',
            template: "\n    <asset-operations [type]=\"config.asset.values.CV_MODEL\"\n      [(selectedItems)]=\"selectedItems\"\n      [project]=\"project\">\n      <form class=\"form\" [formGroup]=\"form\">\n        <app-input [control]=\"searchControl\"\n          [iconBefore]=\"'glyphicon-search'\"\n          [iconAfter]=\"'glyphicon-remove'\"\n          (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n      </form>\n    </asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-xs-offset-7 col-xs-5\" *ngIf=\"modelsList\">\n              <div class=\"pull-right\">\n                {{modelsList.count || 0 | pluralize:({other: '{} CV models', '0': 'No CV models', '1': '{} model'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"modelsList.data.length\"\n                  [rowsCount]=\"modelsList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n        <tr style=\"white-space: nowrap\">\n          <th></th>\n          <th *ngFor=\"let item of options.columns\"\n            [grid-sort]=\"item\"\n            [grid-sort-control]=\"form.controls['order']\">\n            {{item.name}}\n          </th>\n          <th class=\"text-right\">Actions</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr *ngFor=\"let item of modelsList.data; let i = index\">\n          <td>\n            <app-check\n              (checkedChange)=\"changeSelection(item, $event)\"\n              [checked]=\"isSelected(item) > -1\"\n              [name]=\"'selection' + item.id\" [type]=\"'checkbox'\"\n              [value]=\"item\"></app-check>\n          </td>\n          <td>\n            <a [routerLink]=\"['/desk', 'train', 'cv', item.id]\">{{item.name}}</a>\n          </td>\n          <td class=\"text-center\">\n            <i class=\"dot\"\n              [cv-model-status-color]=\"item.status\"\n              tooltip\n              data-toggle=\"tooltip\"\n              [attr.data-original-title]=\"config.cvModel.status.labels[item.status]\"></i>\n          </td>\n          <td>{{item.created | date:'M/d/y'}}</td>\n          <td>{{item.updated | date:'M/d/y'}}</td>\n          <td [ngSwitch]=\"item.ownerId\">\n            <span *ngSwitchCase=\"currentUser.id\">Me</span>\n            <span *ngSwitchDefault=\"\">{{_sharedOwners[item.ownerId] | AppUserName:!_sharedOwnersLoader.loaded}}</span>\n          </td>\n          <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\">\n            <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n              style=\"font-size: 18px;\">\n              <span class=\"glyphicon glyphicon-option-vertical\"></span>\n            </a>\n\n            <ul class=\"dropdown-menu\">\n              <li><a *ngIf=\"item.status === config.cvModel.status.values.ACTIVE\"\n                [routerLink]=\"['/desk', 'train','cv', item.id]\"\n                class=\"dropdown-item link\">\n                Preview\n              </a></li>\n              <li *ngIf=\"item.status === config.cvModel.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n              <li><a\n                (click)=\"deleteModel(item)\" class=\"dropdown-item link\">\n                Trash\n              </a></li>\n              <li *ngIf=\"project\"><a\n                (click)=\"removeModelFromProject(item)\"\n                class=\"dropdown-item link\">\n                Remove\n              </a></li>\n            </ul>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_9__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_8__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_6__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_5__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_4__services_modal_service__["a" /* ModalService */]])
    ], LibraryCVModelListComponent);
    return LibraryCVModelListComponent;
}(__WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__["a" /* LibraryListAbstractComponent */]));



/***/ }),

/***/ "../../../../../src/app/components/library-flow-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryFlowListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__ = __webpack_require__("../../../../../src/app/components/library-list-abstract.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var LibraryFlowListComponent = (function (_super) {
    __extends(LibraryFlowListComponent, _super);
    function LibraryFlowListComponent(projects, shares, events, users, flows, modals) {
        var _this = _super.call(this, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW, projects, events, shares, users) || this;
        _this.flows = flows;
        _this.modals = modals;
        _this.options = {
            columns: [
                { name: 'Name', alias: 'name', style: 'width: 20%' },
                { name: 'Status', alias: 'status', style: 'width: 5%' },
                { name: 'Created', alias: 'created', style: 'width: 12%', reverse: true },
                { name: 'Modified', alias: 'updated', style: 'width: 12%', reverse: true },
                { name: 'Owner', style: 'width: 12%' },
            ]
        };
        return _this;
    }
    LibraryFlowListComponent.prototype.deleteFlow = function (item) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.flows.delete(item);
        });
    };
    LibraryFlowListComponent.prototype.removeFlowFromProject = function (item) {
        this.projects.unlinkFlow(this.project, item);
    };
    LibraryFlowListComponent.prototype._loadItems = function (params) {
        return this.project ? this.projects.listFlows(this.project.id, params) : this.flows.list(params);
    };
    LibraryFlowListComponent.prototype._setItems = function (data) {
        this.flowsList = data;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryFlowListComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], LibraryFlowListComponent.prototype, "searchControl", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryFlowListComponent.prototype, "project", void 0);
    LibraryFlowListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-flow-list',
            template: "\n    <asset-operations [type]=\"config.asset.values.FLOW\"\n      [(selectedItems)]=\"selectedItems\"\n      [project]=\"project\">\n      <form class=\"form\" [formGroup]=\"form\">\n        <app-input [control]=\"searchControl\"\n          [iconBefore]=\"'glyphicon-search'\"\n          [iconAfter]=\"'glyphicon-remove'\"\n          (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n      </form>\n    </asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-xs-offset-7 col-xs-5\" *ngIf=\"flowsList\">\n              <div class=\"pull-right\">\n                {{flowsList.count || 0 | pluralize:({other: '{} flows', '0': 'No flows', '1': '{} flow'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"flowsList.data.length\"\n                  [rowsCount]=\"flowsList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n          <tr style=\"white-space: nowrap\">\n            <th></th>\n            <th *ngFor=\"let item of options.columns\"\n              [grid-sort]=\"item\"\n              [grid-sort-control]=\"form.controls['order']\">\n              {{item.name}}\n            </th>\n            <th class=\"text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of flowsList.data; let i = index\">\n            <td>\n              <app-check\n                (checkedChange)=\"changeSelection(item, $event)\"\n                [checked]=\"isSelected(item) > -1\"\n                [name]=\"'selection' + item.id\" [type]=\"'checkbox'\"\n                [value]=\"item\"></app-check>\n            </td>\n            <td>\n              <a [routerLink]=\"['/desk', 'flows', item.id]\">{{item.name}}</a>\n            </td>\n            <td class=\"text-center\">\n              <i class=\"dot\"\n                [flow-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.flow.status.labels[item.status]\"></i>\n            </td>\n            <td>{{item.created | date:'M/d/y'}}</td>\n            <td>{{item.updated | date:'M/d/y'}}</td>\n            <td [ngSwitch]=\"item.ownerId\">\n              <span *ngSwitchCase=\"currentUser.id\">Me</span>\n              <span *ngSwitchDefault=\"\">{{_sharedOwners[item.ownerId] | AppUserName:!_sharedOwnersLoader.loaded}}</span>\n            </td>\n            <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\">\n              <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n                style=\"font-size: 18px;\">\n                  <span class=\"glyphicon glyphicon-option-vertical\"></span>\n              </a>\n\n              <ul class=\"dropdown-menu\">\n                <li><a *ngIf=\"item.status === config.flow.status.values.NEW || item.status === config.flow.status.values.DONE\" [routerLink]=\"[item.id]\"\n                  class=\"dropdown-item link\">\n                  Preview\n                </a></li>\n<!--                <li><a *ngIf=\"item.status === config.flow.status.values.DONE\"\n                  [href]=\"flows.exportUrl(item.id, user.token())\" download=\"{{item.name}}\"\n                  class=\"dropdown-item link\">\n                  Export\n                </a></li>-->\n                <li *ngIf=\"item.status === config.flow.status.values.NEW || item.status === config.flow.status.values.DONE\" role=\"separator\" class=\"divider\"></li>\n                <li><a\n                  (click)=\"deleteFlow(item)\"\n                  class=\"dropdown-item link\">\n                  Trash\n                </a></li>\n                <li *ngIf=\"project\"><a\n                  (click)=\"removeFlowFromProject(item)\"\n                  class=\"dropdown-item link\">\n                  Remove\n                </a></li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_5__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_7__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_8__services_modal_service__["a" /* ModalService */]])
    ], LibraryFlowListComponent);
    return LibraryFlowListComponent;
}(__WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__["a" /* LibraryListAbstractComponent */]));



/***/ }),

/***/ "../../../../../src/app/components/library-list-abstract.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryListAbstractComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var LibraryListAbstractComponent = (function () {
    function LibraryListAbstractComponent(assetType, projects, events, shares, users) {
        var _this = this;
        this.assetType = assetType;
        this.projects = projects;
        this.events = events;
        this.shares = shares;
        this.users = users;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.selectedItems = [];
        this._sharedOwners = {};
        this.currentUser = this.users.getUser();
        this.userSubscription = this.users.data.observable.subscribe(function (user) { return _this.currentUser = user; });
        this._sharedOwnersLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (items) { return _this._loadSharedOwners(items); });
        this._sharedOwnersLoader.subscribe(function (_) {
            Object.assign(_this._sharedOwners, _);
        });
        this._itemsLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (formData) {
            return _this._loadItems(formData).flatMap(function (items) {
                return _this._checkSharedItems(items.data).mapTo(items);
            });
        });
        this._itemsLoader.subscribe(function (data) {
            _this._setItems(data);
            _this.selectedItems = [];
        });
    }
    LibraryListAbstractComponent.prototype.ngOnInit = function () {
        var _this = this;
        this._itemsLoader.load(this.form.value);
        var eventClass = null;
        switch (this.assetType) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                eventClass = 'UPDATE_TABLE_LIST';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.FLOW:
                eventClass = 'UPDATE_FLOW_LIST';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                eventClass = 'UPDATE_MODEL_LIST';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.CV_MODEL:
                eventClass = 'UPDATE_CV_MODEL_LIST';
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM:
                eventClass = 'UPDATE_ALBUM_LIST';
                break;
        }
        if (eventClass) {
            this.eventSubscription = this.events.subscribe(function (event) {
                if (event.type === eventClass ||
                    (_this.project && event.type === 'UPDATE_PROJECT_ASSETS' && event.data === _this.project.id)) {
                    _this._itemsLoader.load(_this.form.value);
                }
            });
        }
        this.formSubscription = this.form.valueChanges.debounceTime(100).subscribe(function (data) {
            return _this._itemsLoader.load(data);
        });
    };
    LibraryListAbstractComponent.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
        this.eventSubscription && this.eventSubscription.unsubscribe();
        this.userSubscription.unsubscribe();
    };
    LibraryListAbstractComponent.prototype.changeSelection = function (item, checked) {
        var i = this.isSelected(item);
        if (checked) {
            i >= 0 || this.selectedItems.push(item);
        }
        else {
            i >= 0 && this.selectedItems.splice(i, 1);
        }
        this.selectedItems = this.selectedItems.slice();
    };
    LibraryListAbstractComponent.prototype.isSelected = function (currentItem) {
        return this.selectedItems.findIndex(function (item) { return item.id === currentItem.id; });
    };
    LibraryListAbstractComponent.prototype._loadSharedOwners = function (items) {
        var _this = this;
        var observables = items
            .filter(function (item) {
            return !_this._sharedOwners.hasOwnProperty(item.ownerId);
        })
            .map(function (item) {
            return _this.shares.getSharedAssetOwner(_this.assetType, item.id);
        });
        if (!observables.length) {
            return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of({});
        }
        return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].merge.apply(__WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */], observables).reduce(function (acc, item) {
            acc[item.id] = item;
            return acc;
        }, {});
    };
    LibraryListAbstractComponent.prototype._checkSharedItems = function (data) {
        var _this = this;
        var sharedItems = data.filter(function (_) {
            return _.ownerId !== _this.currentUser.id;
        });
        if (sharedItems.length) {
            return this.shares
                .ensureSharedAccessLoaded(this.assetType, sharedItems.map(function (_) { return _.id; }))
                .do(function () { return _this._sharedOwnersLoader.load(sharedItems); });
        }
        return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of(true);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryListAbstractComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryListAbstractComponent.prototype, "project", void 0);
    return LibraryListAbstractComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/library-model-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryModelListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__ = __webpack_require__("../../../../../src/app/components/library-list-abstract.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var LibraryModelListComponent = (function (_super) {
    __extends(LibraryModelListComponent, _super);
    function LibraryModelListComponent(projects, shares, events, users, models, modals) {
        var _this = _super.call(this, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL, projects, events, shares, users) || this;
        _this.models = models;
        _this.modals = modals;
        _this.options = {
            columns: [
                { name: 'Name', alias: 'name', style: 'width: 20%' },
                { name: 'Status', alias: 'status', style: 'width: 5%' },
                { name: 'Created', alias: 'created', style: 'width: 12%', reverse: true },
                { name: 'Modified', alias: 'updated', style: 'width: 12%', reverse: true },
                { name: 'Owner', style: 'width: 12%' },
            ]
        };
        return _this;
    }
    LibraryModelListComponent.prototype.removeModelFromProject = function (item) {
        this.projects.unlinkModel(this.project, item);
    };
    LibraryModelListComponent.prototype.deleteModel = function (item) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.models.delete(item);
        });
    };
    LibraryModelListComponent.prototype._loadItems = function (params) {
        return this.project ? this.projects.listModels(this.project.id, params) : this.models.list(params);
    };
    LibraryModelListComponent.prototype._setItems = function (data) {
        this.modelsList = data;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryModelListComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], LibraryModelListComponent.prototype, "searchControl", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryModelListComponent.prototype, "project", void 0);
    LibraryModelListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-model-list',
            template: "\n    <asset-operations [type]=\"config.asset.values.MODEL\"\n      [(selectedItems)]=\"selectedItems\"\n      [project]=\"project\">\n      <form class=\"form\" [formGroup]=\"form\">\n        <app-input [control]=\"searchControl\"\n          [iconBefore]=\"'glyphicon-search'\"\n          [iconAfter]=\"'glyphicon-remove'\"\n          (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n      </form>\n    </asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-xs-offset-7 col-xs-5\" *ngIf=\"modelsList\">\n              <div class=\"pull-right\">\n                {{modelsList.count || 0 | pluralize:({other: '{} models', '0': 'No models', '1': '{} model'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"modelsList.data.length\"\n                  [rowsCount]=\"modelsList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n          <tr style=\"white-space: nowrap\">\n            <th></th>\n            <th *ngFor=\"let item of options.columns\"\n              [grid-sort]=\"item\"\n              [grid-sort-control]=\"form.controls['order']\">\n              {{item.name}}\n            </th>\n            <th class=\"text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of modelsList.data; let i = index\">\n            <td>\n              <app-check\n                (checkedChange)=\"changeSelection(item, $event)\"\n                [checked]=\"isSelected(item) > -1\"\n                [name]=\"'selection' + item.id\" [type]=\"'checkbox'\"\n                [value]=\"item\"></app-check>\n            </td>\n            <td>\n              <a [routerLink]=\"['/desk', 'train', item.id]\">{{item.name}}</a>\n            </td>\n            <td class=\"text-center\">\n              <i class=\"dot\"\n                [model-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.model.status.labels[item.status]\"></i>\n            </td>\n            <td>{{item.created | date:'M/d/y'}}</td>\n            <td>{{item.updated | date:'M/d/y'}}</td>\n            <td [ngSwitch]=\"item.ownerId\">\n              <span *ngSwitchCase=\"currentUser.id\">Me</span>\n              <span *ngSwitchDefault=\"\">{{_sharedOwners[item.ownerId] | AppUserName:!_sharedOwnersLoader.loaded}}</span>\n            </td>\n            <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\">\n              <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n                style=\"font-size: 18px;\">\n                  <span class=\"glyphicon glyphicon-option-vertical\"></span>\n              </a>\n\n              <ul class=\"dropdown-menu\">\n                <li><a *ngIf=\"item.status === config.model.status.values.ACTIVE\" [routerLink]=\"['/desk', 'train', item.id]\"\n                  class=\"dropdown-item link\">\n                  Preview\n                </a></li>\n                <li *ngIf=\"item.status === config.model.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n                <li><a\n                  (click)=\"deleteModel(item)\" class=\"dropdown-item link\">\n                  Trash\n                </a></li>\n                <li *ngIf=\"project\"><a\n                  (click)=\"removeModelFromProject(item)\"\n                  class=\"dropdown-item link\">\n                  Remove\n                </a></li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_5__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_8__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_7__services_modal_service__["a" /* ModalService */]])
    ], LibraryModelListComponent);
    return LibraryModelListComponent;
}(__WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__["a" /* LibraryListAbstractComponent */]));



/***/ }),

/***/ "../../../../../src/app/components/library-table-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryTableListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__ = __webpack_require__("../../../../../src/app/components/library-list-abstract.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_components_asset_operations_component__ = __webpack_require__("../../../../../src/app/core/components/asset-operations.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var LibraryTableListComponent = (function (_super) {
    __extends(LibraryTableListComponent, _super);
    function LibraryTableListComponent(projects, events, shares, users, tables, processes, modals) {
        var _this = _super.call(this, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE, projects, events, shares, users) || this;
        _this.tables = tables;
        _this.processes = processes;
        _this.modals = modals;
        _this.options = {
            columns: [
                { name: 'Name', alias: 'name', style: 'width: 20%' },
                { name: 'Status', alias: 'status', style: 'width: 5%' },
                { name: 'Imported', alias: 'createdDate', style: 'width: 12%', reverse: true },
                { name: 'Modified', alias: 'modifiedDate', style: 'width: 12%', reverse: true },
                { name: 'Owner', style: 'width: 12%' },
                { name: 'Type', alias: 'datasetType', style: 'width: 12%' },
            ]
        };
        _this.downloadObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
        _this.saving = { tables: [] };
        return _this;
    }
    LibraryTableListComponent.prototype.ngOnDestroy = function () {
        this.saving.tables.forEach(function (item) {
            item.sub.unsubscribe();
        });
    };
    LibraryTableListComponent.prototype.share = function (item) {
        this.operations.shareModal.open(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE, [item]);
    };
    LibraryTableListComponent.prototype.clone = function (id, name) {
        this.operations.cloneModal.open(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE, id, name);
    };
    LibraryTableListComponent.prototype.deleteTable = function (item) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.tables.delete(item);
        });
    };
    LibraryTableListComponent.prototype.removeTableFromProject = function (item) {
        this.projects.unlinkTable(this.project, item);
    };
    LibraryTableListComponent.prototype._loadItems = function (params) {
        return this.project ? this.projects.listTables(this.project.id, params) : this.tables.list(params);
    };
    LibraryTableListComponent.prototype.download = function (id) {
        this.downloadObserver.observe(this.tables.download(id, this.users.token()));
    };
    LibraryTableListComponent.prototype._setItems = function (data) {
        var _this = this;
        this.tablesList = data;
        var savingTables = data.data
            .filter(function (table) { return table.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].table.status.values.SAVING; });
        savingTables.forEach(function (table) {
            if (!_this.saving.tables.find(function (that) { return that.id === table.id; })) {
                _this.processes.getByTarget(table.id, __WEBPACK_IMPORTED_MODULE_5__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (process) {
                    var subscription = _this.processes.subscribe(process, function () {
                        _this._itemsLoader.load(_this.form.value);
                    });
                    _this.saving.tables.push({
                        id: table.id,
                        sub: subscription
                    });
                });
            }
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], LibraryTableListComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], LibraryTableListComponent.prototype, "searchControl", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibraryTableListComponent.prototype, "project", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('operations'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_6__core_components_asset_operations_component__["a" /* AssetOperationsComponent */])
    ], LibraryTableListComponent.prototype, "operations", void 0);
    LibraryTableListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-table-list',
            template: "\n    <asset-operations #operations\n      [type]=\"config.asset.values.TABLE\"\n      [(selectedItems)]=\"selectedItems\"\n      [project]=\"project\" [scope]=\"form.value.scope\">\n      <form class=\"form\" [formGroup]=\"form\">\n        <app-input [control]=\"searchControl\"\n          [iconBefore]=\"'glyphicon-search'\"\n          [iconAfter]=\"'glyphicon-remove'\"\n          (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n      </form>\n    </asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"p0 form-control brand-control\">\n          <div class=\"row\">\n            <div class=\"col-xs-offset-7 col-xs-5\" *ngIf=\"tablesList\">\n              <div class=\"pull-right\">\n                {{tablesList.count || 0 | pluralize:({other: '{} tables', '0': 'No tables', '1': '{} table'})}}\n              </div>\n              <div class=\"pull-right\">\n                <app-pagination [page]=\"form.controls['page']\"\n                  [pageSize]=\"form.controls['page_size']\"\n                  [currentPageSize]=\"tablesList.data.length\"\n                  [rowsCount]=\"tablesList.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <app-spinner [visibility]=\"!_itemsLoader.loaded\"></app-spinner>\n      <table *ngIf=\"_itemsLoader.loaded\" class=\"table dataTable table-hover\">\n        <thead>\n          <tr style=\"white-space: nowrap\">\n            <th></th>\n            <th *ngFor=\"let item of options.columns\"\n              [grid-sort]=\"item\"\n              [grid-sort-control]=\"form.controls['order']\">\n              {{item.name}}\n            </th>\n            <th class=\"text-right\">Actions</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr *ngFor=\"let item of tablesList.data; let i = index\">\n            <td>\n              <app-check\n                (checkedChange)=\"changeSelection(item, $event)\"\n                [checked]=\"isSelected(item) > -1\"\n                [name]=\"'selection' + item.id\" [type]=\"'checkbox'\"\n                [value]=\"item\"></app-check>\n            </td>\n            <td>\n              <a [routerLink]=\"project ? [item.id] : ['table', item.id]\">{{item.name}}</a>\n            </td>\n            <td class=\"text-center\">\n              <i class=\"dot\"\n                [table-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.table.status.labels[item.status]\"></i>\n            </td>\n            <td>{{item.created | date:'M/d/y'}}</td>\n            <td>{{item.updated | date:'M/d/y'}}</td>\n            <td [ngSwitch]=\"item.ownerId\">\n              <span *ngSwitchCase=\"currentUser.id\">Me</span>\n              <span *ngSwitchDefault=\"\">{{_sharedOwners[item.ownerId] | AppUserName:!_sharedOwnersLoader.loaded}}</span>\n            </td>\n            <td>{{item.datasetType}}</td>\n            <td class=\"dropdown text-right text-muted\" dropdown [dropdownContainer]=\"'.table-scroll'\">\n              <a class=\"nav-link link-colorless\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\"\n                style=\"font-size: 18px;\">\n                  <span class=\"glyphicon glyphicon-option-vertical\"></span>\n              </a>\n\n              <ul class=\"dropdown-menu\">\n                <li><a *ngIf=\"item.status === config.table.status.values.ACTIVE\" [routerLink]=\"project ? [item.id] : ['table', item.id]\"\n                  class=\"dropdown-item link\">\n                  Preview\n                </a></li>\n                <li [ngClass]=\"{'disabled': downloadObserver.isActive}\"><a *ngIf=\"item.status === config.table.status.values.ACTIVE\"\n                  (click)=\"downloadObserver.isActive || download(item.id)\"\n                  class=\"dropdown-item link\">\n                  Download\n                </a></li>\n                <li><a *ngIf=\"item.status === config.table.status.values.ACTIVE\"\n                  (click)=\"share(item)\"\n                  class=\"dropdown-item link\">\n                  Share\n                </a></li>\n                <li><a *ngIf=\"item.status === config.table.status.values.ACTIVE\"\n                  (click)=\"clone(item.id, item.name)\"\n                  class=\"dropdown-item link\">\n                  Clone\n                </a></li>\n                <li *ngIf=\"item.status === config.table.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n                <li><a\n                  (click)=\"deleteTable(item)\"\n                  class=\"dropdown-item link\">\n                  Trash\n                </a></li>\n                <li *ngIf=\"project\"><a\n                  (click)=\"removeTableFromProject(item)\"\n                  class=\"dropdown-item link\">\n                  Remove\n                </a></li>\n              </ul>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  ",
            styles: ["\n    .dropdown-menu {\n      left: inherit;\n      right: 0;\n    }\n  "]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_8__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_10__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_11__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_12__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_13__services_modal_service__["a" /* ModalService */]])
    ], LibraryTableListComponent);
    return LibraryTableListComponent;
}(__WEBPACK_IMPORTED_MODULE_3__library_list_abstract_component__["a" /* LibraryListAbstractComponent */]));



/***/ }),

/***/ "../../../../../src/app/components/library.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibraryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var LibraryComponent = (function () {
    function LibraryComponent(route, router) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            type: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
            scope: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            search: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
            order: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
            page: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](1),
            page_size: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](20)
        });
        this.searchControl = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]();
        this.searchControl.valueChanges.debounceTime(500).subscribe(function (value) {
            _this.form.controls['search'].setValue(value);
        });
    }
    LibraryComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.data && this.route.data.forEach(function (data) {
            if (data.project) {
                _this.project = data.project;
            }
        });
        this.routeSubscription = this.route.params.subscribe(function (params) {
            var typeFilter = params['type'];
            var scope = params['scope'];
            if (!typeFilter || (!scope && !_this.project)) {
                // redirection when incomplete information
                _this.router.navigate(['/desk', 'library', typeFilter || 'tables', scope || 'personal']);
            }
            else {
                var paramType = Object // yeah, too bulky
                    .keys(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural)
                    .filter(function (item) { return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[item] === typeFilter; })
                    .pop() || _this.type || 'table';
                var oldParams = _this.form.value;
                if (oldParams.scope !== scope || oldParams.type !== paramType) {
                    _this.form.setValue(Object.assign({}, oldParams, {
                        'type': paramType,
                        'scope': scope || '',
                        'page': 1,
                    }));
                }
            }
        });
    };
    LibraryComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription && this.routeSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], LibraryComponent.prototype, "type", void 0);
    LibraryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-library',
            template: "\n    <div [ngSwitch]=\"form.value['type']\">\n      <library-flow-list *ngSwitchCase=\"config.asset.values.FLOW\"\n        [project]=\"project\"\n        [form]=\"form\" [searchControl]=\"searchControl\"></library-flow-list>\n      <library-table-list *ngSwitchCase=\"config.asset.values.TABLE\"\n        [project]=\"project\"\n        [form]=\"form\" [searchControl]=\"searchControl\"></library-table-list>\n      <library-model-list *ngSwitchCase=\"config.asset.values.MODEL\"\n        [project]=\"project\"\n        [form]=\"form\" [searchControl]=\"searchControl\"></library-model-list>\n      <library-cv-model-list *ngSwitchCase=\"config.asset.values.CV_MODEL\"\n        [project]=\"project\"\n        [form]=\"form\" [searchControl]=\"searchControl\"></library-cv-model-list>\n      <library-album-list *ngSwitchCase=\"config.asset.values.ALBUM\"\n        [project]=\"project\"\n        [form]=\"form\" [searchControl]=\"searchControl\"></library-album-list>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */]])
    ], LibraryComponent);
    return LibraryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/notification-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NotificationListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NotificationListComponent = (function () {
    function NotificationListComponent(_notifications) {
        this._notifications = _notifications;
    }
    Object.defineProperty(NotificationListComponent.prototype, "notifications", {
        get: function () {
            return this._notifications;
        },
        enumerable: true,
        configurable: true
    });
    NotificationListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'notification-list',
            template: "\n    <div *ngIf=\"notifications.data\" id=\"layout-notifications\">\n      <div *ngFor=\"let item of notifications.data\">\n        <app-notification [item]=\"item\"></app-notification>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_notification_service__["a" /* NotificationService */]])
    ], NotificationListComponent);
    return NotificationListComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/notification.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NotificationComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var NotificationComponent = (function () {
    function NotificationComponent(notifications) {
        this.notifications = notifications;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
    }
    NotificationComponent.prototype.mouseEnter = function () {
        if (this.item.options.timeout && this.item.options.pauseOnHover) {
            this.pausedDate = Date.now();
            this.prevTimeout = this.item.options.timeout;
            this.item.options.timeout = 0;
        }
    };
    NotificationComponent.prototype.mouseLeave = function () {
        if (this.item.options.pauseOnHover && this.pausedDate && this.prevTimeout) {
            this.item.options.timeout = Date.now() - this.pausedDate + this.prevTimeout;
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], NotificationComponent.prototype, "item", void 0);
    NotificationComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-notification',
            template: "\n    <div (mouseenter)=\"mouseEnter()\" (mouseleave)=\"mouseLeave()\" [ngSwitch]=\"item.type\"\n      [ngClass]=\"'alert alert-' + (item.data.level || 'info')\">\n      <button type=\"button\" class=\"close\" (click)=\"notifications.delete(item.id)\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n\n      <ng-template [ngSwitchCase]=\"config.notification.type.values.FILE_UPLOAD\" >\n        <div><strong>{{item.data.file.name}}</strong>:</div>\n        <div *ngIf=\"item.data.html\" [innerHTML]=\"item.data.html\"></div>\n        <div *ngIf=\"item.data.text\">{{item.data.text}}</div>\n        <progress class=\"progress progress-striped\" [value]=\"item.data.progress\" max=\"100\"></progress>\n      </ng-template>\n\n      <ng-template ngSwitchDefault>\n        <div *ngIf=\"item.data.html\" [innerHTML]=\"item.data.html\"></div>\n        <div *ngIf=\"item.data.text\">{{item.data.text}}</div>\n      </ng-template>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__services_notification_service__["a" /* NotificationService */]])
    ], NotificationComponent);
    return NotificationComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var PlayContextComponent = (function () {
    function PlayContextComponent(processService, predictionService, cvPredictionService, replayService, events, modals) {
        this.processService = processService;
        this.predictionService = predictionService;
        this.cvPredictionService = cvPredictionService;
        this.replayService = replayService;
        this.events = events;
        this.modals = modals;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.menuOpen = [true, true, true];
        this.predictions = [];
        this.cvPredictions = [];
        this.replays = [];
        this.progresses = { predictions: null, cvPredictions: null, replays: null };
        this.running = { predictions: [], cvPredictions: [], replays: [] };
    }
    PlayContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.progresses.predictions = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.PREDICTION]];
        this.refreshPredictions();
        this.watchPredictions = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_PREDICTIONS') {
                _this.refreshPredictions();
            }
        });
        this.progresses.cvPredictions = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_PREDICTION]];
        this.refreshCVPredictions();
        this.watchCVPredictions = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_CV_PREDICTIONS_LIST') {
                _this.refreshCVPredictions();
            }
        });
        this.progresses.replays = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW]];
        this.refreshReplays();
        this.watchReplays = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_REPLAYS') {
                _this.refreshReplays();
            }
        });
    };
    PlayContextComponent.prototype.ngOnDestroy = function () {
        this.running.predictions.forEach(function (_) { return _.sub.unsubscribe(); });
        this.running.predictions = [];
        this.running.replays.forEach(function (_) { return _.sub.unsubscribe(); });
        this.running.replays = [];
        this.watchPredictions.unsubscribe();
        this.watchReplays.unsubscribe();
    };
    PlayContextComponent.prototype.dropPrediction = function (prediction) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.predictionService.remove(prediction.id);
        });
    };
    PlayContextComponent.prototype.dropReplay = function (replay) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.replayService.remove(replay.id);
        });
    };
    PlayContextComponent.prototype.refreshPredictions = function () {
        var _this = this;
        this.predictionService.list().subscribe(function (data) {
            _this.predictions = data.data;
            var running = _this.predictions
                .filter(function (prediction) { return prediction.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flow.status.values.RUNNING; });
            running.forEach(function (prediction) {
                if (!_this.running.predictions.find(function (that) { return that.id === prediction.id; })) {
                    _this.processService.getByTarget(prediction.id, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.PREDICTION).subscribe(function (process) {
                        var subscription = _this.processService.subscribe(process, function () {
                            _this.refreshPredictions();
                        });
                        _this.running.predictions.push({
                            id: prediction.id,
                            sub: subscription
                        });
                    });
                }
            });
        });
    };
    PlayContextComponent.prototype.refreshCVPredictions = function () {
        var _this = this;
        this.cvPredictionService.list().subscribe(function (data) {
            _this.cvPredictions = data.data;
            var running = _this.predictions
                .filter(function (prediction) { return prediction.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvPrediction.status.values.RUNNING; });
            running.forEach(function (prediction) {
                if (!_this.running.cvPredictions.find(function (that) { return that.id === prediction.id; })) {
                    _this.processService.getByTarget(prediction.id, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.CV_PREDICTION).subscribe(function (process) {
                        var subscription = _this.processService.subscribe(process, function () {
                            _this.refreshPredictions();
                        });
                        _this.running.cvPredictions.push({
                            id: prediction.id,
                            sub: subscription
                        });
                    });
                }
            });
        });
    };
    PlayContextComponent.prototype.refreshReplays = function () {
        var _this = this;
        this.replayService.list().subscribe(function (data) {
            _this.replays = data.data;
            var running = _this.replays
                .filter(function (replay) { return replay.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flow.status.values.RUNNING; });
            running.forEach(function (replay) {
                if (!_this.running.replays.find(function (that) { return that.id === replay.id; })) {
                    _this.processService.getByTarget(replay.flowId, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.FLOW).subscribe(function (process) {
                        var subscription = _this.processService.subscribe(process, function () {
                            _this.refreshReplays();
                        });
                        _this.running.replays.push({
                            id: replay.id,
                            sub: subscription
                        });
                    });
                }
            });
        });
    };
    PlayContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-context',
            template: "\n    <div class=\"group\">\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" [routerLink]=\"['/desk', 'play', 'create']\">\n          Create New\n        </button>\n    </div>\n\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>Flows</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of replays\"  [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li [routerLinkActive]=\"['active']\">\n                    <a *ngIf=\"item.status === config.replay.status.values.DONE\"\n                      [routerLink]=\"['/desk', 'play','replays', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.replay.status.values.DONE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"dropReplay(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'play','replays', item.id]\"\n                [title]=\"item.name\"\n                [flow-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.replay.status.labels[item.status]\">\n                {{item.name | truncate}}\n                <span *ngIf=\"item.status === config.flow.status.values.RUNNING && progresses.replays[item.flowId]\">\n                  {{(progresses.replays[item.flowId].progress * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!replays.length\"><a>No Flows</a></li>\n          </ul>\n        </li>\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[1]}\">\n          <a (click)=\"menuOpen[1] = !menuOpen[1]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>Predictions</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of predictions\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a *ngIf=\"item.status === config.prediction.status.values.DONE\"\n                      [routerLink]=\"['/desk', 'play','predictions', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.prediction.status.values.DONE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"dropPrediction(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'play','predictions', item.id]\"\n                [title]=\"item.name\"\n                [model-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.model.status.labels[item.status]\">\n                {{item.name | truncate}}\n                <span *ngIf=\"item.status === config.prediction.status.values.RUNNING && progresses.predictions[item.id]\">\n                  {{(progresses.predictions[item.id].progress * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!predictions.length\"><a>No Predictions</a></li>\n          </ul>\n        </li>\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[2]}\">\n          <a (click)=\"menuOpen[2] = !menuOpen[2]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>CV Predictions</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of cvPredictions\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a *ngIf=\"item.status === config.cvPrediction.status.values.DONE\"\n                      [routerLink]=\"['/desk', 'play','predictions', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.cvPrediction.status.values.DONE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"dropPrediction(item.id)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'play','cv-predictions', item.id]\"\n                [title]=\"item.name\" model-status-color=\"{{item.status}}\">\n                {{item.name | truncate}}\n                <span *ngIf=\"item.status === config.cvPrediction.status.values.RUNNING && progresses.cvPredictions[item.id]\">\n                  {{(progresses.cvPredictions[item.id].progress * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!cvPredictions.length\"><a>No CV Predictions</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_7__services_prediction_service__["a" /* PredictionService */],
            __WEBPACK_IMPORTED_MODULE_6__services_cv_prediction_service__["a" /* CVPredictionService */],
            __WEBPACK_IMPORTED_MODULE_5__services_replay_service__["a" /* ReplayService */],
            __WEBPACK_IMPORTED_MODULE_4__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_3__services_modal_service__["a" /* ModalService */]])
    ], PlayContextComponent);
    return PlayContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var PlayCreateComponent = (function () {
    function PlayCreateComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.validity = false;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__["a" /* ActivityObserver */]();
    }
    PlayCreateComponent.prototype.clear = function () {
        this.selectedAsset = null;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('childComponent'),
        __metadata("design:type", Object)
    ], PlayCreateComponent.prototype, "childComponent", void 0);
    PlayCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-create',
            template: "\n    <asset-operations [type]=\"selectedAsset?.entity\" [selectedItems]=\"[]\"></asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <library-selector\n          [inputLabel]=\"'Play Asset'\"\n          [available]=\"[config.asset.values.FLOW, config.asset.values.MODEL, config.asset.values.CV_MODEL]\"\n          [(value)]=\"selectedAsset\"\n          [title]=\"'Select Asset'\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button class=\"btn btn-md btn-clear\"\n            (click)=\"childComponent?.clear && childComponent.clear(); clear();\">\n            Clear\n          </button>\n          <button class=\"btn btn-md btn-apply\" (click)=\"_savingObserver.observe(childComponent.submit())\"\n              [disabled]=\"!validity || (_savingObserver.active | async)\">\n              Play\n          </button>\n        </div>\n      </div>\n    </div>\n    <app-play-flow #childComponent *ngIf=\"selectedAsset?.entity === config.asset.values.FLOW\"\n      [flow]=\"selectedAsset.object\" (changeValidity)=\"validity = $event\"></app-play-flow>\n    <app-play-model #childComponent *ngIf=\"selectedAsset?.entity === config.asset.values.MODEL\"\n      [model]=\"selectedAsset.object\" (changeValidity)=\"validity = $event\"></app-play-model>\n    <app-play-cv-model #childComponent *ngIf=\"selectedAsset?.entity === config.asset.values.CV_MODEL\"\n      [model]=\"selectedAsset.object\" (changeValidity)=\"validity = $event\"></app-play-cv-model>\n  "
        })
    ], PlayCreateComponent);
    return PlayCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-cv-prediction-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayCVPredictionCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// TODO: add validator's errors
var PlayCVPredictionCreateComponent = (function () {
    function PlayCVPredictionCreateComponent(predictions, router) {
        this.predictions = predictions;
        this.router = router;
        this.changeValidity = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.activeTab = 0;
    }
    PlayCVPredictionCreateComponent.prototype.ngOnChanges = function (changes) {
        if ('model' in changes) {
            this.onModelChanged();
        }
    };
    PlayCVPredictionCreateComponent.prototype.submit = function () {
        var _this = this;
        var formValue = this.form.value;
        var prediction = {
            modelId: this.model.id,
            name: formValue.outputAlbumName,
            input: formValue.input,
            outputAlbumName: formValue.outputAlbumName,
        };
        return this.predictions.create(prediction).do(function (prediction) {
            _this.router.navigate(['/desk', 'play', 'cv-predictions', prediction.id]);
        });
    };
    PlayCVPredictionCreateComponent.prototype.clear = function () {
        this.initForm();
    };
    PlayCVPredictionCreateComponent.prototype.onModelChanged = function () {
        this.initForm();
    };
    PlayCVPredictionCreateComponent.prototype.initForm = function () {
        var _this = this;
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            input: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            outputAlbumName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
        });
        this.form.valueChanges.subscribe(function () {
            _this.changeValidity.emit(_this.form.valid);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PlayCVPredictionCreateComponent.prototype, "model", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], PlayCVPredictionCreateComponent.prototype, "changeValidity", void 0);
    PlayCVPredictionCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-cv-model',
            template: "\n    <form [formGroup]=\"form\" class=\"brand-tab\">\n      <!--{{form.value | json}}-->\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <library-selector\n            [inputLabel]=\"'Select Input Album'\"\n            [value]=\"{id: form.value['input'], entity: config.asset.values.ALBUM}\"\n            (valueChange)=\"form.controls['input'].setValue($event.id); activeTab = 1\"\n            [available]=\"[config.asset.values.ALBUM]\"\n            [title]=\"'Select Album'\"></library-selector>\n        </div>\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Results Name'\" [control]=\"form.controls['outputAlbumName']\"></app-input>\n        </div>\n      </div>\n      <app-tabs [tabs]=\"['Model Summary Statistics', 'Input']\" [(active)]=\"activeTab\" ></app-tabs>\n      <div class=\"tab-content brand-tab\">\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 0}\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <cv-model-summary [summary]=\"model?.summary\"></cv-model-summary>\n            </div>\n          </div>\n        </div>\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 1}\">\n          <album-view-embed *ngIf=\"form.value['input']\" [albumId]=\"form.value['input']\"></album-view-embed>\n        </div>\n      </div>\n    </form>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_cv_prediction_service__["a" /* CVPredictionService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */]])
    ], PlayCVPredictionCreateComponent);
    return PlayCVPredictionCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-cv-prediction-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayCVPredictionViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PlayCVPredictionViewComponent = (function () {
    function PlayCVPredictionViewComponent(route, router, models, albums, predictions, processService) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.models = models;
        this.albums = albums;
        this.predictions = predictions;
        this.processService = processService;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.activeTab = 2;
        this.progresses = [];
        this.progresses = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_PREDICTION]];
        this._loader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) {
            return _this.predictions.get(_).flatMap(function (prediction) {
                if (prediction.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].cvPrediction.status.values.DONE) {
                    return __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].forkJoin(_this.models.get(prediction.modelId), _this.albums.get(prediction.output)).map(function (_a) {
                        var model = _a[0], album = _a[1];
                        return [prediction, model, album];
                    });
                }
                else {
                    return __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].of([
                        prediction,
                        null,
                        null,
                    ]);
                }
            });
        });
        this._loader.subscribe(function (_a) {
            var prediction = _a[0], model = _a[1], album = _a[2];
            _this.refresh(prediction, model, album);
        });
    }
    PlayCVPredictionViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params.forEach(function (params) {
            _this.activeTab = 2;
            _this._loader.load(params['predictionId']);
        });
    };
    PlayCVPredictionViewComponent.prototype.ngOnDestroy = function () {
        this.closeSubscriptions();
    };
    PlayCVPredictionViewComponent.prototype.saveToLibrary = function () {
        var _this = this;
        this.predictions.save(this.prediction.id).subscribe(function () {
            _this.predictionAlbum = null;
            _this._loader.load(_this.prediction.id);
        });
    };
    PlayCVPredictionViewComponent.prototype._onPredictionDeleted = function () {
        this.router.navigate(['/desk', 'play']);
    };
    PlayCVPredictionViewComponent.prototype.refresh = function (prediction, model, album) {
        var _this = this;
        this.closeSubscriptions();
        this.prediction = prediction;
        this.predictionModel = model;
        this.predictionAlbum = album;
        if (this.prediction.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].cvPrediction.status.values.RUNNING) {
            this.processService.getByTarget(prediction.id, __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type.CV_PREDICTION).subscribe(function (process) {
                _this.processSubscription = _this.processService.subscribe(process, function () {
                    _this._loader.load(prediction.id);
                });
            });
        }
    };
    PlayCVPredictionViewComponent.prototype.closeSubscriptions = function () {
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    PlayCVPredictionViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-cv-prediction',
            template: "\n    <asset-operations [type]=\"config.asset.values.CV_PREDICTION\" [selectedItems]=\"[prediction]\"\n      (onDelete)=\"_onPredictionDeleted()\"></asset-operations>\n    <app-spinner [visibility]=\"!prediction\"></app-spinner>\n    <div *ngIf=\"prediction\" class=\"row brand-tab\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Prediction Name'\" [value]=\"prediction?.name\" [disabled]=\"true\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div  class=\"pull-right\">\n          <button *ngIf=\"predictionAlbum && !predictionAlbum.inLibrary\" type=\"button\" class=\"btn btn-md btn-apply\"\n            (click)=\"saveToLibrary()\" [disabled]=\"prediction.status !== config.cvPrediction.status.values.DONE\">\n            Save To Library\n          </button>\n        </div>\n      </div>\n    </div>\n    <div *ngIf=\"_loader.loaded && prediction\" [ngSwitch]=\"prediction.status\">\n      <!-- Error -->\n      <error-indicator *ngSwitchCase=\"config.cvPrediction.status.values.ERROR\"\n        [target]=\"'prediction'\" [process]=\"progresses[prediction.id]\"></error-indicator>\n      <!-- In progress -->\n      <process-indicator *ngSwitchCase=\"config.cvPrediction.status.values.RUNNING\"\n        [process]=\"progresses[prediction.id]\"></process-indicator>\n      <!--Complete-->\n      <div *ngSwitchCase=\"config.cvPrediction.status.values.DONE\">\n        <div class=\"tabpanel\">\n          <!-- Nav tabs -->\n          <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li *ngIf=\"predictionModel?.summary && predictionModel.status === config.cvModel.status.values.ACTIVE\"\n               role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n               <a (click)=\"activeTab = 0\">Model Summary Statistics</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n              <a (click)=\"activeTab = 1\">Input Album</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n              <a (click)=\"activeTab = 2\">Output Album</a>\n            </li>\n          </ul>\n        </div>\n        <!-- Tab panes -->\n        <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\">\n           <!-- Tab Model Summary Statistics -->\n           <div role=\"tabpanel\" class=\"tab-pane\" *ngIf=\"predictionModel?.summary\" [hidden]=\"activeTab !== 0\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <cv-model-summary [summary]=\"predictionModel?.summary\"></cv-model-summary>\n              </div>\n            </div>\n           </div>\n           <!-- Tab Input -->\n           <div class=\"flex-col\" *ngIf=\"prediction.input\" [hidden]=\"activeTab !== 1\">\n             <album-view-embed [albumId]=\"prediction.input\"></album-view-embed>\n           </div>\n           <!-- Tab Output -->\n           <div class=\"flex-col\" *ngIf=\"prediction.output\" [hidden]=\"activeTab !== 2\">\n             <album-view-embed [albumId]=\"prediction.output\"></album-view-embed>\n           </div>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_6__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_7__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_8__services_cv_prediction_service__["a" /* CVPredictionService */],
            __WEBPACK_IMPORTED_MODULE_9__services_process_service__["a" /* ProcessService */]])
    ], PlayCVPredictionViewComponent);
    return PlayCVPredictionViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-prediction-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayPredictionCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__train_model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








// TODO: add validator's errors
var PlayPredictionCreateComponent = (function () {
    function PlayPredictionCreateComponent(tables, models, predictions, router) {
        this.tables = tables;
        this.models = models;
        this.predictions = predictions;
        this.router = router;
        this.changeValidity = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.activeTab = 0;
        this.activeInputTab = 0;
    }
    PlayPredictionCreateComponent.prototype.ngOnChanges = function (changes) {
        if ('model' in changes) {
            this.onModelChanged();
        }
    };
    PlayPredictionCreateComponent.prototype.submit = function () {
        var _this = this;
        var formValue = this.form.value;
        var prediction = {
            modelId: formValue.id,
            name: formValue.outputTableName,
            input: formValue.tabs.reduce(function (acc, tab) { return acc.concat(tab.tableId); }, []),
            outputTableName: formValue.outputTableName,
            mappingType: formValue.mappingType,
            columnMappings: formValue.tabs.reduce(function (acc, tab) {
                return acc.concat(tab.columns.map(function (column) {
                    return {
                        sourceColumn: {
                            tableId: tab.tableId,
                            columnName: column.name
                        },
                        mappedColumn: {
                            tableId: tab.mappedTableId,
                            columnName: column.value
                        },
                    };
                }));
            }, [])
        };
        return this.predictions.create(prediction).do(function (prediction) {
            _this.router.navigate(['/desk', 'play', 'predictions', prediction.id]);
        });
    };
    PlayPredictionCreateComponent.prototype.clear = function () {
        this.initForm();
    };
    PlayPredictionCreateComponent.prototype.onChangeTableForMapping = function (table, formGroup) {
        formGroup.controls['mappedTableId'].setValue(table.id);
        var columns = table.columns;
        formGroup.controls['mappedColumns'] = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](columns);
        formGroup.controls['columns'].controls.forEach(function (columnControl) {
            var found = columns.find(function (column) { return column.name === columnControl.controls['name'].value; });
            columnControl.controls['value'].setValue(found ? found.name : null);
            columnControl.controls['value'].enable();
            columnControl.controls['value'].markAsDirty();
        });
    };
    PlayPredictionCreateComponent.prototype.onModelChanged = function () {
        var _this = this;
        this.initForm();
        if (this.model) {
            this.models.getPredictors(this.model.id).subscribe(function (predictors) {
                _this.modelPredictors = predictors;
                _this.form.controls['mappingType'].setValue(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.values[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.list[0]]);
            });
            this.tables.get(this.model.input).subscribe(function (table) {
                _this.inputMatrixTable = table;
            });
        }
    };
    PlayPredictionCreateComponent.prototype.initForm = function () {
        var _this = this;
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            id: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](this.model.id),
            outputTableName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            tabs: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
            mappingType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.values[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.list[0]])
        });
        this.form.valueChanges.subscribe(function () {
            _this.changeValidity.emit(_this.form.valid);
        });
        this.form.controls['mappingType'].valueChanges.subscribe(function (value) {
            _this.onChangeMappingType(value);
        });
    };
    PlayPredictionCreateComponent.prototype.onChangeMappingType = function (type) {
        switch (type) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.values.SOURCETABLES:
                this.generateTabsFromFlow(this.modelPredictors['flowPredictors']);
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].play.model.mappingType.values.INPUTMATRIX:
                this.generateTabFromTrainingData(this.modelPredictors['inputMatrixPredictors']);
                break;
            default:
                this.clearTabs();
                break;
        }
        this.activeTab = 0;
    };
    PlayPredictionCreateComponent.prototype.generateTabsFromFlow = function (predictors) {
        var _this = this;
        this.clearTabs();
        predictors.forEach(function (predictor) {
            _this.form.controls['tabs'].push(_this.createTabFromFlow(predictor));
        });
    };
    PlayPredictionCreateComponent.prototype.createTabFromFlow = function (predictor) {
        var formGroup = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({});
        formGroup.addControl('tableId', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](predictor.tableId));
        formGroup.addControl('tableName', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](predictor.tableName));
        formGroup.addControl('mappedTableId', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        formGroup.addControl('mappedColumns', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        formGroup.addControl('columns', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        predictor.columns.forEach(function (column) {
            var valueControl = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required);
            valueControl.disable();
            formGroup.controls['columns'].push(new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
                name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.name),
                dataType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.dataType),
                variableType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.variableType),
                value: valueControl
            }));
        });
        return formGroup;
    };
    PlayPredictionCreateComponent.prototype.generateTabFromTrainingData = function (predictors) {
        this.clearTabs();
        var formGroup = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({});
        formGroup.addControl('tableId', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](predictors[0].tableId));
        formGroup.addControl('mappedTableId', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        formGroup.addControl('mappedColumns', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        formGroup.addControl('columns', new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required));
        predictors.forEach(function (column) {
            var valueControl = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required);
            valueControl.disable();
            formGroup.controls['columns'].push(new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
                name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.columnName),
                dataType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.dataType),
                variableType: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](column.variableType),
                value: valueControl
            }));
        });
        this.form.controls['tabs'].push(formGroup);
    };
    PlayPredictionCreateComponent.prototype.clearTabs = function () {
        var predictorsCount = this.form.controls['tabs'].length;
        while (predictorsCount > 0) {
            this.form.controls['tabs'].removeAt(--predictorsCount);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PlayPredictionCreateComponent.prototype, "model", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], PlayPredictionCreateComponent.prototype, "changeValidity", void 0);
    PlayPredictionCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-model',
            template: "\n    <form [formGroup]=\"form\" class=\"brand-tab\">\n      <div class=\"row\" [ngSwitch]=\"!!modelPredictors?.flowPredictors\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Results Name'\" [control]=\"form.controls['outputTableName']\"></app-input>\n        </div>\n        <div class=\"col-md-6\" *ngSwitchCase=\"true\">\n          <div class=\"brand-control\">\n            <label>Mapping Type</label>\n            <app-check *ngFor=\"let item of config.play.model.mappingType.list\"\n              [control]=\"form.controls['mappingType']\"\n              [label]=\"config.play.model.mappingType.labels[item]\"\n              [checked]=\"config.play.model.mappingType.values[item] === form.controls['mappingType'].value\"\n              [name]=\"'mappingType'\"\n              [type]=\"'radio'\"\n              [value]=\"config.play.model.mappingType.values[item]\"></app-check>\n          </div>\n        </div>\n        <div class=\"col-md-6\" *ngSwitchCase=\"false\">\n          <app-input [label]=\"'Mapping Type'\"\n            [value]=\"config.play.model.mappingType.labels[config.play.model.mappingType.values.INPUTMATRIX]\"\n            [disabled]=\"true\"></app-input>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Response variable'\" [value]=\"model.responseColumn.name\" [disabled]=\"true\"></app-input>\n        </div>\n      </div>\n      <app-tabs [tabs]=\"['Model Summary Statistics', 'Input']\" [(active)]=\"activeTab\" ></app-tabs>\n      <div class=\"tab-content brand-tab\">\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 0}\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <model-summary [model]=\"model\"></model-summary>\n            </div>\n          </div>\n        </div>\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 1}\">\n          <div class=\"tabpanel\"\n            *ngIf=\"form.controls['mappingType'].value === config.play.model.mappingType.values.SOURCETABLES &&\n              form.controls['tabs'].value\">\n            <!-- Nav tabs -->\n            <ul class=\"nav nav-tabs\">\n              <li class=\"nav-item\"\n                *ngFor=\"let item of form.controls['tabs'].value; let i = index\" [ngClass]=\"{'active': activeInputTab === i}\">\n                <a class=\"nav-link\" [ngClass]=\"{'active': activeInputTab === i}\" (click)=\"activeInputTab = i\">\n                  Source {{i + 1}} ({{item.tableName}})\n                </a>\n              </li>\n            </ul>\n          </div>\n          <!-- Tab panes -->\n          <div class=\"tab-content brand-tab\">\n            <div role=\"tabpanel\" class=\"tab-pane\"\n              *ngFor=\"let source of form.controls['tabs']['controls']; let i = index\" [ngClass]=\"{'active': activeInputTab === i}\">\n                <div class=\"row\">\n                  <div class=\"col-xs-6\" [ngSwitch]=\"form.controls['mappingType'].value\">\n                    <a *ngSwitchCase=\"config.play.model.mappingType.values.INPUTMATRIX\">{{inputMatrixTable?.name || 'Input matrix:'}}</a>\n                    <a *ngSwitchDefault>Source {{i + 1}} ({{source.controls.tableName.value}})</a>\n                  </div>\n                  <div class=\"col-xs-6\">\n                    <library-selector\n                      [inputLabel]=\"'Select Mapping Table'\"\n                      [value]=\"{id: source.controls['mappedTableId'].value, entity: config.asset.values.TABLE}\"\n                      (valueChange)=\"onChangeTableForMapping($event.object, source)\"\n                      [available]=\"[config.asset.values.TABLE]\"\n                      [title]=\"'Select Asset'\"></library-selector>\n                  </div>\n                </div>\n                <div class=\"row\" *ngFor=\"let column of source.controls.columns.controls\">\n                  <div class=\"col-md-6\">\n                    <span dropdown class=\"pos-rel\">\n                      <a href=\"#\"\n                      class=\"dropdownColumn\"\n                      data-toggle=\"dropdown\"\n                      aria-haspopup=\"true\"\n                      aria-expanded=\"false\">\n                      {{ column.value.name }}\n                      </a>\n                      <div class=\"dropdown-menu font-weight-normal text-nowrap\" aria-labelledby=\"dropdownColumn\">\n                        <table class=\"table table-borderless-top table-no-margin-bottom\">\n                          <tr>\n                            <td>Var Type</td>\n                            <td>{{column.value.variableType}}</td>\n                          </tr>\n                          <tr>\n                            <td>Data Type</td>\n                            <td>{{column.value.dataType}}</td>\n                          </tr>\n                        </table>\n                      </div>\n                    </span>\n                  </div>\n                  <div class=\"col-md-6\">\n                    <app-select [control]=\"column.controls.value\"\n                      [options]=\"source.controls.mappedColumns.value | tableColumnSelectOptions\"></app-select>\n                  </div>\n                </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  ",
            styles: ["\n    .dropdown-menu {\n      left: 15px;\n    }\n  "]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_6__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_7__services_prediction_service__["a" /* PredictionService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */]])
    ], PlayPredictionCreateComponent);
    return PlayPredictionCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-prediction-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayPredictionViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var PlayPredictionViewComponent = (function () {
    function PlayPredictionViewComponent(route, router, models, tables, predictions, processService) {
        this.route = route;
        this.router = router;
        this.models = models;
        this.tables = tables;
        this.predictions = predictions;
        this.processService = processService;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.activeTab = 2;
        this.activeInnerTab = 0;
        this.tabs = ['Input Table', 'Output Table', 'Model Summary'];
        this.progresses = [];
        this.progresses = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PREDICTION]];
    }
    PlayPredictionViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.data.forEach(function (data) {
            _this.refresh(data.prediction);
        });
    };
    PlayPredictionViewComponent.prototype.ngOnDestroy = function () {
        this.closeSubscriptions();
    };
    PlayPredictionViewComponent.prototype.saveToLibrary = function () {
        var _this = this;
        this.predictions.save(this.prediction.id).subscribe(function () {
            _this.predictionTable = null;
            _this.refresh(_this.prediction);
        });
    };
    PlayPredictionViewComponent.prototype._onReplayDeleted = function () {
        this.router.navigate(['/desk', 'play']);
    };
    PlayPredictionViewComponent.prototype.refresh = function (prediction) {
        var _this = this;
        this.closeSubscriptions();
        if (this.prediction && (this.prediction.id === prediction.id)) {
            this.predictionModel = null;
            this.predictionTable = null;
        }
        this.prediction = prediction;
        if (this.prediction.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].prediction.status.values.DONE) {
            this.models.get(this.prediction.modelId).subscribe(function (model) {
                _this.predictionModel = model;
            });
            this.tables.get(this.prediction.output).subscribe(function (_) {
                _this.predictionTable = _;
            });
        }
        else if (this.prediction.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].prediction.status.values.RUNNING) {
            this.processService.getByTarget(prediction.id, __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.PREDICTION).subscribe(function (process) {
                _this.processSubscription = _this.processService.subscribe(process, function () {
                    _this.predictions.get(prediction.id).subscribe(function (newPrediction) { return _this.refresh(newPrediction); });
                });
            });
        }
    };
    PlayPredictionViewComponent.prototype.closeSubscriptions = function () {
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    PlayPredictionViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-prediction',
            template: "\n    <asset-operations [type]=\"config.asset.values.PREDICTION\" [selectedItems]=\"[prediction]\"\n      (onDelete)=\"_onReplayDeleted()\"></asset-operations>\n    <app-spinner [visibility]=\"!prediction\"></app-spinner>\n    <div class=\"row brand-tab\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Prediction Name'\" [value]=\"prediction?.name\" [disabled]=\"true\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div  class=\"pull-right\">\n          <button *ngIf=\"predictionTable && !predictionTable.inLibrary\" type=\"button\" class=\"btn btn-md btn-apply\"\n            (click)=\"saveToLibrary()\" [disabled]=\"prediction.status !== config.prediction.status.values.DONE\">\n            Save To Library\n          </button>\n        </div>\n      </div>\n    </div>\n    <div *ngIf=\"prediction\" [ngSwitch]=\"prediction.status\">\n      <!-- Error -->\n      <error-indicator *ngSwitchCase=\"config.prediction.status.values.ERROR\"\n        [target]=\"'model'\" [process]=\"progresses[prediction.id]\"></error-indicator>\n      <!-- In progress -->\n      <process-indicator *ngSwitchCase=\"config.prediction.status.values.RUNNING\"\n        [process]=\"progresses[prediction.id]\"></process-indicator>\n      <!--Complete-->\n      <div *ngSwitchCase=\"config.prediction.status.values.DONE\">\n        <div class=\"tabpanel\">\n          <!-- Nav tabs -->\n          <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li *ngIf=\"predictionModel?.summary && predictionModel.status === config.model.status.values.ACTIVE\"\n              role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n              <a (click)=\"activeTab = 0\">Model Summary Statistics</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n              <a (click)=\"activeTab = 1\">Input Table</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n              <a (click)=\"activeTab = 2\">Output table</a>\n            </li>\n          </ul>\n        </div>\n        <!-- Tab panes -->\n        <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\">\n           <!-- Tab Model Summary Statistics -->\n           <div role=\"tabpanel\" class=\"tab-pane\" *ngIf=\"predictionModel?.summary\" [hidden]=\"activeTab !== 0\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <model-summary [model]=\"predictionModel\"></model-summary>\n              </div>\n            </div>\n           </div>\n           <!-- Tab Input -->\n           <div class=\"flex-col\" *ngIf=\"prediction.input\" [hidden]=\"activeTab !== 1\">\n             <ul class=\"flex-static nav nav-tabs\" *ngIf=\"prediction.mappingType === config.play.model.mappingType.values.SOURCETABLES\">\n               <li class=\"nav-item\"\n                 *ngFor=\"let tableId of prediction.input; let i = index\">\n                 <a class=\"nav-link\" [ngClass]=\"{'active': activeInnerTab === i}\" (click)=\"activeInnerTab = i\">\n                   {{ 'Source ' + (i + 1) }}\n                 </a>\n               </li>\n             </ul>\n\n             <table-view-embed *ngFor=\"let tableId of prediction.input; let i = index\"\n              [hidden]=\"activeInnerTab !== i\" [id]=\"tableId\"></table-view-embed>\n           </div>\n           <!-- Tab Output -->\n           <div class=\"flex-col\" *ngIf=\"prediction.output\" [hidden]=\"activeTab !== 2\">\n             <table-view-embed [id]=\"prediction.output\"></table-view-embed>\n           </div>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_4__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_6__services_prediction_service__["a" /* PredictionService */],
            __WEBPACK_IMPORTED_MODULE_7__services_process_service__["a" /* ProcessService */]])
    ], PlayPredictionViewComponent);
    return PlayPredictionViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-replay-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayReplayCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var PlayReplayCreateComponent = (function () {
    function PlayReplayCreateComponent(flows, replays, router) {
        var _this = this;
        this.flows = flows;
        this.replays = replays;
        this.router = router;
        this.changeValidity = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.activeTab = 0;
        this.activeSource = 0;
        this.flowTables = [];
        this.sourceNames = [];
        this.derivedNames = [];
        this.derivedLabels = [];
        this.sourceTables = [];
        this.dataLoader = new __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__["a" /* ReactiveLoader */](function () {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].forkJoin(_this.flows.get(_this.flow.id), _this.flows.getTables(_this.flow.id), _this.flows.inputs(_this.flow.id), _this.flows.outputs(_this.flow.id));
        });
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            flowId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            outputTableNames: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([]),
            sources: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([])
        });
        //sends validity of the form back to parent
        this.form.valueChanges.subscribe(function () {
            _this.changeValidity.emit(_this.form.valid);
        });
        this.form.controls['name'].valueChanges.subscribe(function (value) {
            _this.form.controls['outputTableNames'].controls.forEach(function (group, i) {
                if (group.controls['newTableName'].pristine) {
                    var newValue = _this.derivedNames[i] + '_' + value;
                    group.controls['newTableName'].setValue(newValue);
                }
            });
        });
        this.dataLoader.subscribe(function (_) { return _this._setData(_); });
    }
    PlayReplayCreateComponent.prototype.ngOnChanges = function () {
        // load data
        this.dataLoader.load();
    };
    PlayReplayCreateComponent.prototype.submit = function () {
        var _this = this;
        return this.replays.create(this.form.value).do(function (replay) {
            _this.router.navigate(['/desk', 'play', 'replays', replay.id]);
        });
    };
    PlayReplayCreateComponent.prototype.findMatchingColumns = function (i) {
        var _this = this;
        this.form.controls['sources'].controls[i].controls['columnMappings']
            .controls
            .forEach(function (columnControl) {
            var found = _this.sourceTables[i].object.columns.find(function (column) {
                return column.name === columnControl.controls['sourceColumn'].controls['columnName'].value;
            });
            columnControl.controls['mappedColumn'].controls['columnName'].setValue(found ? found.name : null);
            columnControl.controls['mappedColumn'].controls['tableId'].setValue(_this.sourceTables[i].id);
            columnControl.markAsDirty();
            columnControl.enable();
        });
    };
    PlayReplayCreateComponent.prototype._setData = function (_a) {
        var _this = this;
        var flow = _a[0], tables = _a[1], inputs = _a[2], outputs = _a[3];
        this.form.controls['flowId'].setValue(this.flow.id);
        // need extended data
        Object.assign(this.flow, flow);
        this.flowTables = tables.data;
        // Inputs
        this.sourceNames = [];
        this._clearFromArray(this.form.controls['sources']);
        inputs.forEach(function (row, i) {
            _this.sourceNames.push('Source ' + (i + 1).toString() + ' (' + row.tableName + ')');
            var source = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                table: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
                columnMappings: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([])
            });
            row.columns.forEach(function (column) {
                var mappings = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    sourceColumn: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                        tableId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](row.tableId, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column.name, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
                    }),
                    mappedColumn: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                        tableId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
                    }),
                });
                mappings.disable();
                source.controls['columnMappings'].push(mappings);
            });
            _this.form.controls['sources'].push(source);
        });
        // outputs
        this.derivedLabels = [];
        this._clearFromArray(this.form.controls['outputTableNames']);
        outputs.forEach(function (table, i) {
            _this.derivedNames.push(table.tableName);
            _this.derivedLabels.push('Derived ' + (i + 1).toString() + ' (' + table.tableName + ')');
            _this.form.controls['outputTableNames'].push(new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                newTableName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](table.tableName, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                tableId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](table.tableId, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
            }));
        });
    };
    PlayReplayCreateComponent.prototype._clearFromArray = function (form) {
        var itemsCount = form.length;
        while (itemsCount > 0) {
            form.removeAt(--itemsCount);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PlayReplayCreateComponent.prototype, "flow", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], PlayReplayCreateComponent.prototype, "changeValidity", void 0);
    PlayReplayCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play-flow',
            template: "\n    <app-spinner [visibility]=\"!dataLoader.loaded\"></app-spinner>\n    <form *ngIf=\"dataLoader.loaded\" [formGroup]=\"form\" (ngSubmit)=\"form.valid && submit()\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'New Flow Name'\" [control]=\"form.controls['name']\"></app-input>\n        </div>\n      </div>\n      <app-tabs [tabs]=\"['Flow Summary', 'Input', 'Output']\" [(active)]=\"activeTab\" ></app-tabs>\n      <div class=\"tab-content brand-tab\">\n        <div role=\"tabpanel\" class=\"tab-pane graphic\" [ngClass]=\"{'active': activeTab === 0}\">\n          <svg flow-graph [flow]=\"flow\" [tables]=\"flowTables\" [container]=\"'.graphic'\"></svg>\n        </div>\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 1}\">\n          <app-tabs [tabs]=\"sourceNames\" [(active)]=\"activeSource\"></app-tabs>\n          <div class=\"tab-content brand-tab\">\n            <div class=\"tab-pane brand-tab\"\n              *ngFor=\"let source of form.controls['sources']['controls']; let i = index\"\n                [ngClass]=\"{'active': activeSource === i}\">\n                <div class=\"row\">\n                  <div class=\"col-xs-6\">\n                    <a>{{sourceNames[i]}}</a>\n                  </div>\n                  <div class=\"col-xs-6\">\n                    <library-selector\n                      [inputLabel]=\"'Select Mapping Table'\"\n                      [value]=\"sourceTables[i]\"\n                      (valueChange)=\"sourceTables[i] = $event; findMatchingColumns(i)\"\n                      [available]=\"[config.asset.values.TABLE]\"\n                      [title]=\"'Select Mapping Table'\"></library-selector>\n                  </div>\n                </div>\n                <div *ngFor=\"let column of source.controls.columnMappings.controls\" class=\"row\">\n                  <div class=\"col-xs-6\">\n                    {{column['controls'].sourceColumn.controls['columnName'].value}}\n                  </div>\n                  <div class=\"col-xs-6\">\n                    <app-select\n                      [control]=\"column['controls'].mappedColumn.controls['columnName']\"\n                      [options]=\"sourceTables[i]?.object['columns'] | tableColumnSelectOptions\"></app-select>\n                  </div>\n                </div>\n            </div>\n          </div>\n        </div>\n        <div role=\"tabpanel\" class=\"tab-pane\" [ngClass]=\"{'active': activeTab === 2}\">\n          <div *ngFor=\"let item of form.controls['outputTableNames']['controls']; let i = index\" class=\"row\">\n            <div class=\"col-xs-6\">\n              <a>{{derivedLabels[i]}}</a>\n            </div>\n            <div class=\"col-xs-6\">\n              <app-input [label]=\"'New Table Name'\" [control]=\"item.controls['newTableName']\"></app-input>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_8__services_replay_service__["a" /* ReplayService */], __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */]])
    ], PlayReplayCreateComponent);
    return PlayReplayCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play-replay-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayReplayViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__compose_flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PlayReplayViewComponent = (function () {
    function PlayReplayViewComponent(route, router, replays, flows, processes) {
        this.route = route;
        this.router = router;
        this.replays = replays;
        this.flows = flows;
        this.processes = processes;
        this.loading = false;
        this.flowTables = [];
        this.activeTab = 2;
        this.activeInput = 0;
        this.activeOutput = 0;
        this.outputNames = [];
        this.inputNames = [];
        this.inputs = [];
        this.outputs = [];
        this.flowstepForms = [];
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.flowProcesses = [];
        this.flowProcesses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.FLOW]];
    }
    PlayReplayViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.data.forEach(function (data) {
            _this.ngOnDestroy();
            _this.replay = data.replay;
            _this._loadReplay(data.replay);
            if (data.replay.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].replay.status.values.RUNNING) {
                _this.processes.getByTarget(data.replay.flowId, __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__["a" /* IAsset */].Type.FLOW).subscribe(function (process) {
                    _this.processSubscription = _this.processes.subscribe(process, function () {
                        _this.replays.get(_this.replay.id).subscribe(function (replay) {
                            _this.replay = replay;
                            _this._loadReplay(data.replay, true);
                        });
                    });
                });
            }
        });
    };
    PlayReplayViewComponent.prototype.ngOnDestroy = function () {
        if (this.processSubscription) {
            this.processSubscription.unsubscribe();
        }
    };
    PlayReplayViewComponent.prototype.saveToLibrary = function () {
        var _this = this;
        this.replays.save(this.replay.id).subscribe(function (_) {
            _this._loadReplay(_this.replay);
        });
    };
    PlayReplayViewComponent.prototype._onReplayDeleted = function () {
        this.router.navigate(['/desk', 'play']);
    };
    PlayReplayViewComponent.prototype._loadReplay = function (replay, silent) {
        var _this = this;
        if (!silent) {
            this.loading = true;
        }
        __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].forkJoin(this.flows.get(replay.flowId), this.flows.get(replay.originalFlowId)).subscribe(function (_a) {
            var flow = _a[0], originalFlow = _a[1];
            var done = flow.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].flow.status.values.DONE;
            __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].forkJoin(_this.flows.getTables(flow.id), done ? _this.flows.inputs(flow.id) : __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of([]), done ? _this.flows.outputs(flow.id) : __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of([])).subscribe(function (_a) {
                var flowTables = _a[0], flowInputs = _a[1], flowOutputs = _a[2];
                // flows
                _this.flow = flow;
                _this.originalFlow = originalFlow;
                _this.flowTables = flowTables.data;
                // inputs
                _this.inputNames = [];
                _this.inputs = [];
                flowInputs.forEach(function (table) {
                    _this.inputNames.push(table.tableName);
                    _this.inputs.push(table.tableId);
                });
                // outputs
                _this.outputNames = [];
                _this.outputs = [];
                flowOutputs.forEach(function (output, i) {
                    _this.outputNames[i] = output.tableName;
                    _this.outputs[i] = output.tableId;
                    var flowstep = _this.flow.steps.find(function (step) { return step.output === output.tableId; });
                    if (flowstep) {
                        _this.flowstepForms[i] = __WEBPACK_IMPORTED_MODULE_5__compose_flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */].prepareFlowstepForm(flowstep.type);
                        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].fillForm(_this.flowstepForms[i], flowstep, false);
                    }
                });
                _this.loading = false;
            });
        });
    };
    PlayReplayViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'play-replay',
            template: "\n    <asset-operations [type]=\"config.asset.values.REPLAY\" [selectedItems]=\"[replay]\"\n      (onDelete)=\"_onReplayDeleted()\"></asset-operations>\n    <div class=\"row brand-tab\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Replay Name'\" [value]=\"replay?.name\" [disabled]=\"true\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button *ngIf=\"flow && !flow.inLibrary\" class=\"btn btn-apply\" (click)=\"saveToLibrary()\"\n            [disabled]=\"replay.status !== config.replay.status.values.DONE\">\n              Save To Library\n          </button>\n        </div>\n      </div>\n    </div>\n    <app-spinner [visibility]=\"loading\"></app-spinner>\n    <div *ngIf=\"!loading\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Play Asset'\" [value]=\"originalFlow?.name\" [disabled]=\"true\"></app-input>\n        </div>\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'New Flow Name'\" [value]=\"flow?.name\" [disabled]=\"true\"></app-input>\n        </div>\n      </div>\n    </div>\n    <app-tabs [tabs]=\"['Flow Summary', 'Input', 'Output']\" [(active)]=\"activeTab\" ></app-tabs>\n    <div *ngIf=\"!loading\" class=\"flex-col brand-tab\" [adaptiveHeight]=\"{minHeight: 450}\">\n      <div class=\"flex-static graphic\" *ngIf=\"activeTab === 0\">\n        <svg flow-graph [flow]=\"flow\" [tables]=\"flowTables\" [container]=\"'.graphic'\"></svg>\n      </div>\n      <div class=\"flex-col\" [hidden]=\"activeTab !== 1\" [ngSwitch]=\"flow?.status\">\n        <div class=\"flex-col\" *ngSwitchCase=\"config.flow.status.values.DONE\">\n          <app-tabs [tabs]=\"inputNames\" [(active)]=\"activeInput\"></app-tabs>\n          <table-view-embed [hidden]=\"activeInput !== i\" *ngFor=\"let inputId of inputs;let i = index\" [id]=\"inputId\"></table-view-embed>\n        </div>\n        <div *ngSwitchCase=\"config.flow.status.values.RUNNING\">\n          <div class=\"row\">\n            <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n              <div>\n                <div class=\"p-y-3 p-x-3\">\n                  <h1 class=\"text-center text-muted\"><i class=\"icon-clock icons\"></i></h1>\n                  <h4 class=\"text-center text-muted\">Flow Is Running Input Tables Unavailable</h4>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flex-col\" [hidden]=\"activeTab !== 2\" [ngSwitch]=\"replay?.status\">\n        <div class=\"flex-col\" *ngSwitchCase=\"config.replay.status.values.DONE\">\n          <app-tabs [tabs]=\"outputNames\" [(active)]=\"activeOutput\"></app-tabs>\n          <form *ngIf=\"flowstepForms[activeOutput]\"\n            [formGroup]=\"flowstepForms[activeOutput]\" [ngSwitch]=\"flowstepForms[activeOutput]?.value.type\">\n            <flowstep-edit-insert *ngSwitchCase=\"config.flowstep.type.values.insert\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-insert>\n            <flowstep-edit-aggregate *ngSwitchCase=\"config.flowstep.type.values.aggregate\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-aggregate>\n            <flowstep-edit-join *ngSwitchCase=\"config.flowstep.type.values.join\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-join>\n            <flowstep-edit-cluster *ngSwitchCase=\"config.flowstep.type.values.cluster\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-cluster>\n            <flowstep-edit-query *ngSwitchCase=\"config.flowstep.type.values.query\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-query>\n            <flowstep-edit-filter *ngSwitchCase=\"config.flowstep.type.values.filter\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-filter>\n            <flowstep-edit-window *ngSwitchCase=\"config.flowstep.type.values.window\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-window>\n            <flowstep-edit-map *ngSwitchCase=\"config.flowstep.type.values.map\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-map>\n            <flowstep-edit-geojoin *ngSwitchCase=\"config.flowstep.type.values.geojoin\"\n              [form]=\"flowstepForms[activeOutput]\"></flowstep-edit-geojoin>\n          </form>\n          <table-view-embed [hidden]=\"activeOutput !== i\" *ngFor=\"let outputId of outputs;let i = index\" [id]=\"outputId\"></table-view-embed>\n        </div>\n        <process-indicator *ngSwitchCase=\"config.replay.status.values.RUNNING\" [target]=\"'Replay'\"\n          [process]=\"flowProcesses[replay.flowId]\"></process-indicator>\n        <error-indicator *ngSwitchCase=\"config.replay.status.values.ERROR\" [target]=\"'replay'\"\n          [process]=\"flowProcesses[replay.flowId]\"></error-indicator>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_7__services_replay_service__["a" /* ReplayService */],
            __WEBPACK_IMPORTED_MODULE_8__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_9__services_process_service__["a" /* ProcessService */]])
    ], PlayReplayViewComponent);
    return PlayReplayViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/play.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PlayComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var PlayComponent = (function () {
    function PlayComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
    }
    PlayComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-play',
            template: "\n    <router-outlet></router-outlet>\n  "
        })
    ], PlayComponent);
    return PlayComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/project-edit-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProjectEditModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ProjectEditModalComponent = (function () {
    function ProjectEditModalComponent(projects) {
        this.projects = projects;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.projectForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
        });
    }
    ProjectEditModalComponent.prototype.open = function (project) {
        if (project) {
            this.project = project;
            this.projectForm.reset({ name: this.project.name });
        }
        else {
            this.project = null;
            this.projectForm.reset({ name: '' });
        }
        this.modal.show();
    };
    ProjectEditModalComponent.prototype.editProject = function () {
        var _this = this;
        if (this.project) {
            this.projects.update(this.project.id, this.projectForm.value).subscribe(function () { return _this.modal.hide(); });
        }
        else {
            this.projects.create(this.projectForm.value).subscribe(function () { return _this.modal.hide(); });
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ProjectEditModalComponent.prototype, "modal", void 0);
    ProjectEditModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'project-edit-modal',
            template: "\n    <app-modal #modal\n      [title]=\"project ? 'Edit the Project' : 'Create a Project'\"\n      [buttons]=\"[{'class': 'btn-primary', 'title': 'Save', 'disabled': projectForm.invalid || projectForm.pristine}]\"\n      (buttonClick)=\"editProject()\">\n      <form [formGroup]=\"projectForm\">\n        <div class=\"form-group\">\n          <app-input [label]=\"'Project Name'\" [control]=\"projectForm['controls'].name\"></app-input>\n        </div>\n      </form>\n    </app-modal>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_project_service__["a" /* ProjectService */]])
    ], ProjectEditModalComponent);
    return ProjectEditModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/signin-password-confirmation.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SigninPasswordConfirmationComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SigninPasswordConfirmationComponent = (function () {
    function SigninPasswordConfirmationComponent(router, route, user) {
        this.router = router;
        this.route = route;
        this.user = user;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.passwordResetConfirmationForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            secretCode: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](this.route.snapshot.queryParams['secretCode']),
            email: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](this.route.snapshot.queryParams['email'], [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].email]),
            newPassword: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].password]),
            newPassword2: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].password, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].equal('newPassword')]),
        });
    }
    SigninPasswordConfirmationComponent.prototype.onSubmit = function () {
        var _this = this;
        this.user.passwordResetConfirmation(this.passwordResetConfirmationForm.value).subscribe(function () {
            _this.router.navigate([__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].routes.signin]);
        });
    };
    SigninPasswordConfirmationComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-signin-password-confirmation',
            template: "\n    <app-layout-splash>\n      <div class=\"row\">\n        <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3\">\n\n            <h5 class=\"text-center\">Password reset</h5>\n            <form [formGroup]=\"passwordResetConfirmationForm\" class=\"m-t-1\">\n              <div class=\"card\">\n                <ul class=\"list-group list-group-flush form-table\">\n                  <li class=\"list-group-item form-group\">\n                    {{passwordResetConfirmationForm.controls['email'].value}}\n                  </li>\n                  <li class=\"list-group-item\">\n                    <app-input label=\"New Password\"\n                      type=\"password\"\n                      [control]=\"passwordResetConfirmationForm.controls['newPassword']\"\n                      [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n                    <app-input label=\"Confirm New Password\"\n                      type=\"password\"\n                      [control]=\"passwordResetConfirmationForm.controls['newPassword2']\"\n                      [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n                  </li>\n                </ul>\n              </div>\n              <div>\n                Password should be minimum 10 characters and meet all following rules:\n                <ul><li>at least 1 upper case character</li><li>at least 1 lower case character</li><li>at least 1 special character</li><li>at least 1 digit</li></ul>\n              </div>\n              <button\n                type=\"button\"\n                (click)=\"onSubmit()\"\n                [disabled]=\"!passwordResetConfirmationForm.valid\"\n                class=\"btn btn-block btn-primary-outline\">Update password</button>\n            </form>\n            <!--\n            <div class=\"m-t-3 text-center\">\n              <a [routerLink]=\"[config.routes.signin]\">Back to signin</a>.\n            </div>\n            -->\n        </div>\n      </div>\n    </app-layout-splash>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_5__services_user_service__["a" /* UserService */]])
    ], SigninPasswordConfirmationComponent);
    return SigninPasswordConfirmationComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/signin-password.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SigninPasswordComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SigninPasswordComponent = (function () {
    function SigninPasswordComponent(router, user) {
        this.router = router;
        this.user = user;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.passwordResetForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            type: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('password', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            email: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].email]),
        });
    }
    SigninPasswordComponent.prototype.onSubmit = function () {
        var _this = this;
        ((this.passwordResetForm.value.type === 'password')
            ? this.user.passwordReset({ email: this.passwordResetForm.value.email })
            : this.user.usernameReset({ email: this.passwordResetForm.value.email })).subscribe(function () {
            _this.router.navigate([__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].routes.signin]);
        });
    };
    SigninPasswordComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-signin-password',
            template: "\n    <app-layout-splash>\n      <div class=\"row\">\n        <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3\">\n          <h3 class=\"text-center\">Why are you having trouble logging in?</h3>\n          <div class=\"card\">\n            <form [formGroup]=\"passwordResetForm\">\n              <ul class=\"list-group list-group-flush form-table\">\n                <li class=\"list-group-item\">\n                  <div [formControlValidator]=\"passwordResetForm.controls['type']\" class=\"form-group\">\n                    <app-check [label]=\"'I forgot my password'\" [name]=\"'type'\" [value]=\"'password'\"\n                      [type]=\"'radio'\"\n                      [control]=\"passwordResetForm.controls['type']\"></app-check>\n                    <app-check [label]=\"'I forgot my username'\" [name]=\"'type'\" [value]=\"'username'\"\n                        [type]=\"'radio'\"\n                      [control]=\"passwordResetForm.controls['type']\"></app-check>\n                  </div>\n                </li>\n                <li class=\"list-group-item\">\n                  <app-input [control]=\"passwordResetForm.controls['email']\" [type]=\"'email'\" [label]=\"'Email'\"></app-input>\n                  <button\n                    (click)=\"onSubmit()\"\n                    [disabled]=\"!passwordResetForm.valid\"\n                    type=\"button\"\n                    class=\"btn btn-block btn-apply\">\n                    Restore access\n                  </button>\n                </li>\n                <li class=\"list-group-item text-center\">\n                  <a [routerLink]=\"['/signup']\">Sign up here</a>\n                  &#8226;\n                  <a [routerLink]=\"['/signin']\">Sign in</a>\n                </li>\n              </ul>\n            </form>\n          </div>\n        </div>\n      </div>\n    </app-layout-splash>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_5__services_user_service__["a" /* UserService */]])
    ], SigninPasswordComponent);
    return SigninPasswordComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/signin.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SigninComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var SigninComponent = (function () {
    function SigninComponent(router, user) {
        this.router = router;
        this.user = user;
        this._loginObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
        this.signinForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            username: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            password: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            remember: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
        });
        this.user.isAuthenticated() && this.router.navigate([__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].routes.signinRedirect]);
    }
    SigninComponent.prototype.onSubmit = function () {
        var _this = this;
        // TEMP TEMP TEMP
        this._loginObserver.observe(this.user.signin(this.signinForm.value).flatMap(function () {
            return _this.user.authenticate();
        })).subscribe(function (user) {
            user && _this.router.navigate([__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].routes.signinRedirect]);
            // Gerald, do something...
        });
    };
    SigninComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-default-signin',
            template: "\n    <app-layout-splash>\n      <div class=\"row\">\n        <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3\">\n\n          <h3 class=\"text-center\">Signin to your account</h3>\n          <div class=\"card\">\n            <ul class=\"list-group list-group-flush form-table\">\n              <li class=\"list-group-item\">\n                <form [formGroup]=\"signinForm\" (ngSubmit)=\"signinForm.valid && onSubmit()\" class=\"m-t-1\">\n                  <app-input [control]=\"signinForm.controls['username']\" [type]=\"'text'\" [label]=\"'Username'\"\n                    [iconAfter]=\"'glyphicon-user'\" [showErrors]=\"false\"></app-input>\n                  <app-input [control]=\"signinForm.controls['password']\" [type]=\"'password'\" [label]=\"'Password'\"\n                    [iconAfter]=\"'glyphicon-asterisk'\" [showErrors]=\"false\"></app-input>\n                  <button class=\"btn btn-block btn-apply\"\n                    [disabled]=\"_loginObserver.active | async\"\n                    (click)=\"signinForm.updateValueAndValidity();\"\n                    type=\"submit\"\n                    >Login</button>\n                </form>\n              </li>\n              <li class=\"list-group-item text-center\">\n                <a [routerLink]=\"['/signup']\">Sign up here</a>\n                &#8226;\n                <a [routerLink]=\"['/signin/password']\">Trouble logging in?</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </app-layout-splash>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_5__services_user_service__["a" /* UserService */]])
    ], SigninComponent);
    return SigninComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/signup.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SignupComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var SignupComponent = (function () {
    function SignupComponent(route, router, user) {
        this.route = route;
        this.router = router;
        this.user = user;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.termsModalButtons = [
            { agree: true, title: 'I Agree', 'class': 'btn-primary' },
            { agree: false, title: 'I Disagree' },
        ];
        this.signupForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            firstName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            lastName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            username: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            email: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].email]),
            password: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            password2: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].equal('password')]),
            confirmation: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](false, __WEBPACK_IMPORTED_MODULE_4__utils_validators__["a" /* AppValidators */].isTrue),
        });
    }
    SignupComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.queryParams.forEach(function (params) {
            _this.signInEmail = params['email'];
            if (_this.signInEmail) {
                _this.signupForm.controls['email'].setValue(_this.signInEmail);
            }
        });
    };
    SignupComponent.prototype.onSubmit = function () {
        var _this = this;
        // TEMP TEMP TEMP
        this.user.signup(this.signupForm.value).subscribe(function (user) {
            user && _this.router.navigate([__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].routes.signin]);
            // Gerald, do something...
        });
    };
    SignupComponent.prototype.onTermsButton = function (button) {
        this.signupForm.controls['confirmation'].setValue(button.agree);
        this.termsModal.hide();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('termsModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], SignupComponent.prototype, "termsModal", void 0);
    SignupComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-signup',
            template: "\n    <app-layout-splash>\n      <div class=\"row\">\n        <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3\">\n          <h3 class=\"text-center\">Signup</h3>\n            <div class=\"card\">\n            <form [formGroup]=\"signupForm\" (ngSubmit)=\"signupForm.valid && onSubmit()\" autocomplete=\"off\">\n              <ul class=\"list-group list-group-flush\">\n                <!-- Yeah, minor trade-offs to highlight row with names -->\n                <li class=\"list-group-item\">\n                  <app-input [control]=\"signupForm.controls['firstName']\" [showErrors]=\"false\" [type]=\"'text'\"\n                    [label]=\"'First name'\" [iconAfter]=\"'glyphicon-user'\"></app-input>\n                  <app-input [control]=\"signupForm.controls['lastName']\" [showErrors]=\"false\" [type]=\"'text'\"\n                    [label]=\"'Last name'\" [iconAfter]=\"'glyphicon-user'\"></app-input>\n                  <app-input [control]=\"signupForm.controls['username']\" [showErrors]=\"false\" [type]=\"'text'\"\n                    [label]=\"'Username'\" [iconAfter]=\"'glyphicon-user'\"></app-input>\n                  <app-input [control]=\"signupForm.controls['email']\" [readonly]=\"!!this.signInEmail\" [showErrors]=\"false\"\n                    [type]=\"'email'\" [label]=\"'Email'\" [iconAfter]=\"'glyphicon-envelope'\"></app-input>\n                  <app-input [control]=\"signupForm.controls['password']\" [showErrors]=\"false\" [type]=\"'password'\"\n                    [label]=\"'Password'\" [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n                  <app-input [control]=\"signupForm.controls['password2']\" [showErrors]=\"false\" [type]=\"'password'\"\n                    [label]=\"'Confirm password'\" [iconAfter]=\"'glyphicon-asterisk'\"></app-input>\n                  <div [formControlValidator]=\"signupForm.controls['confirmation']\" class=\"checkbox\">\n                    <label class=\"label-bare\">\n                      <input type=\"checkbox\" formControlName=\"confirmation\">\n                      I accept\n                    </label>\n                    <a href=\"#\" prevent-default-click (click)=\"termsModal.show()\">terms and conditions</a>\n                  </div>\n                  <button (click)=\"signupForm.updateValueAndValidity();\" type=\"submit\"\n                    class=\"btn btn-block btn-apply\">Register\n                  </button>\n                </li>\n                <li class=\"list-group-item text-center\">\n                  Already registered? Please <a [routerLink]=\"[config.routes.signin]\">sign in</a>.\n                </li>\n              </ul>\n            </form>\n          </div>\n        </div>\n        <app-modal #termsModal\n          [modalId]=\"'termsModal'\"\n          [title]=\"'DeepCortex Terms and Conditions'\"\n          [buttons]=\"termsModalButtons\"\n          [sizeClass]=\"config.modal.size.LARGE\"\n          (buttonClick)=\"onTermsButton($event)\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <div class=\"embed-responsive embed-responsive-4by3\">\n                <iframe class=\"embed-responsive-item\" src=\"assets/html/signup.terms.html\"></iframe>\n              </div>\n            </div>\n          </div>\n        </app-modal>\n      </div>\n    </app-layout-splash>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_6__services_user_service__["a" /* UserService */]])
    ], SignupComponent);
    return SignupComponent;
}());



/***/ }),

/***/ "../../../../../src/app/components/table-list.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableListComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


//import { UserService } from '../services/user.service';
//import { TableService } from '../services/table.service';
var TableListComponent = (function () {
    function TableListComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
    }
    TableListComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'table-list',
            template: "\n    <app-library [type]=\"config.asset.values.TABLE\"></app-library>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], TableListComponent);
    return TableListComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/cluster-graph.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ClusterGraphDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js__ = __webpack_require__("../../../../chart.js/src/chart.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_chart_js__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Usage:
 * <canvas cluster-graph [results]></svg>
 */
var ClusterGraphDirective = (function () {
    function ClusterGraphDirective(el, zone) {
        this.zone = zone;
        this.data = null;
        this.axisLabels = [];
        this.groupColors = ['#ff3300', '#009933', '#0066ff', '#ff6600', '#006600', '#000099', '#800000', '#00ff00', '#0099cc', '#996600'];
        this.centerColors = ['#7f1900', '#004d19', '#00337f', '#7f3300', '#003300', '#00004d', '#400000', '#007f00', '#004d66', '#4d3300'];
        this.el = el.nativeElement;
    }
    ClusterGraphDirective.prototype.ngOnChanges = function () {
        var _this = this;
        if (this.data) {
            this.destroy();
            var result_1 = [];
            var pointGroups_1 = [];
            var centers = this.data.centers.map(function (center) {
                var coords = center.slice(0, -1);
                var clusterNo = center.slice(-1)[0];
                return { coords: coords, clusterNo: clusterNo };
            });
            //Still need it because of centers disorder
            centers.sort(function (a, b) {
                return (a.clusterNo < b.clusterNo) ? -1 : 1;
            });
            centers.forEach(function (center) {
                pointGroups_1[center.clusterNo] = [];
            });
            //Add points to groups
            this.data.points.forEach(function (point) {
                var coords = point.slice(0, -1);
                var clusterNo = point.slice(-1)[0];
                pointGroups_1[clusterNo].push({ x: coords[0], y: coords[1] || 0 });
            });
            centers.forEach(function (center) {
                var color = _this.groupColor(center.clusterNo);
                var centerColor = _this.centerColor(center.clusterNo);
                //Add group centers (stars) to legend
                result_1.push({
                    label: "Cluster #" + center.clusterNo + " center",
                    pointStyle: 'crossRot',
                    pointRadius: 10,
                    pointBorderWidth: 3,
                    pointHoverRadius: 12,
                    data: [{ x: center.coords[0], y: center.coords[1] || 0 }],
                    showLine: false,
                    borderColor: centerColor,
                    backgroundColor: centerColor,
                    hoverBackgroundColor: centerColor
                }); //Add groups to legend
                result_1.push({
                    label: "Cluster #" + center.clusterNo,
                    pointRadius: 2,
                    pointBorderWidth: 1,
                    pointHoverRadius: 3,
                    data: pointGroups_1[center.clusterNo],
                    showLine: false,
                    borderColor: color,
                    backgroundColor: color,
                    hoverBackgroundColor: color
                });
            });
            this.init(result_1);
        }
    };
    ClusterGraphDirective.prototype.ngOnDestroy = function () {
        this.destroy();
    };
    ClusterGraphDirective.prototype.groupColor = function (i) {
        return this.groupColors[i % this.groupColors.length];
    };
    ClusterGraphDirective.prototype.centerColor = function (i) {
        return this.centerColors[i % this.centerColors.length];
    };
    ClusterGraphDirective.prototype.init = function (result) {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            _this.chart = new __WEBPACK_IMPORTED_MODULE_1_chart_js__(_this.el, {
                type: 'line',
                data: {
                    datasets: result
                },
                options: {
                    legend: {
                        labels: {
                            usePointStyle: true,
                        }
                    },
                    animation: {
                        duration: 0,
                    },
                    hover: {
                        mode: 'single',
                        animationDuration: 0,
                    },
                    maintainAspectRatio: false,
                    tooltips: {
                        enabled: true,
                        callbacks: {
                            title: function () {
                                return '';
                            },
                            label: function (tooltipItem) {
                                return _this.axisLabels.length === 2 ? tooltipItem.xLabel + ", " + tooltipItem.yLabel : "" + tooltipItem.xLabel;
                            }
                        }
                    },
                    scales: {
                        yAxes: [{
                                display: _this.axisLabels.length === 2,
                                type: 'linear',
                                position: 'left',
                                scaleLabel: {
                                    display: true,
                                    labelString: _this.axisLabels.length === 2 ? _this.axisLabels[1] : null,
                                }
                            }],
                        xAxes: [{
                                type: 'linear',
                                position: 'bottom',
                                scaleLabel: {
                                    display: true,
                                    labelString: _this.axisLabels[0]
                                }
                            }]
                    },
                },
            });
        });
    };
    ClusterGraphDirective.prototype.destroy = function () {
        if (this.chart) {
            this.chart.destroy();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('cluster-data'),
        __metadata("design:type", Object)
    ], ClusterGraphDirective.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ClusterGraphDirective.prototype, "axisLabels", void 0);
    ClusterGraphDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[cluster-graph]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], ClusterGraphDirective);
    return ClusterGraphDirective;
}());



/***/ }),

/***/ "../../../../../src/app/compose/clustering-results.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ClusteringResultsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_flowstep_service__ = __webpack_require__("../../../../../src/app/services/flowstep.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ClusteringResultsComponent = (function () {
    function ClusteringResultsComponent(flowsteps, tables, processes) {
        this.flowsteps = flowsteps;
        this.tables = tables;
        this.processes = processes;
        this.classes = 'flex-col';
        this.styleHeight = '100%';
        this.overflow = 'hidden';
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.clusteringResults = null;
    }
    ClusteringResultsComponent_1 = ClusteringResultsComponent;
    ClusteringResultsComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.clusteringResults = null;
        if (this.flowstepId && this.flow) {
            this.flowstep = this.flow.steps.find(function (step) { return step.id === _this.flowstepId; });
            //Validate Dimentions Count
            if (this.flowstep.options.columns.length > __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].clusteringResults.maxDimensions) {
                this.clusteringResults = { centers: [], points: [] };
                return;
            }
            this.tables.get(this.flowstep.output).subscribe(function (table) {
                if (table.status === _this.config.table.status.values.ERROR) {
                    _this.clusteringResults = { centers: [], points: [] };
                }
                if (table.status === _this.config.table.status.values.SAVING) {
                    _this.processes.getByTarget(table.id, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (data) {
                        _this.processSubscription && _this.processSubscription.unsubscribe();
                        _this.processSubscription = _this.processes.subscribe(data, function (process) {
                            if (process.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].process.status.values.COMPLETED) {
                                _this.loadClusteringResults();
                            }
                            else {
                                _this.ngOnChanges();
                            }
                        });
                    });
                }
                if (table.status === _this.config.table.status.values.ACTIVE) {
                    _this.loadClusteringResults();
                }
            });
        }
    };
    ClusteringResultsComponent.prototype.ngOnDestroy = function () {
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    ClusteringResultsComponent.prototype.loadClusteringResults = function () {
        var _this = this;
        this.flowsteps.clusteringResults(this.flow.id, this.flowstep.id).subscribe(function (clusteringResults) {
            // Currently validates on Backend Side
            if (ClusteringResultsComponent_1.validateClusteringResults(clusteringResults)) {
                _this.clusteringResults = clusteringResults;
            }
            else {
                _this.clusteringResults = { centers: [], points: [] };
            }
        });
    };
    ClusteringResultsComponent.validateClusteringResults = function (clusteringResults) {
        return clusteringResults &&
            clusteringResults.centers[0].length - 1 <= __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].clusteringResults.maxDimensions &&
            clusteringResults.points.length <= __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].clusteringResults.maxPoints;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], ClusteringResultsComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], ClusteringResultsComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.overflow'),
        __metadata("design:type", Object)
    ], ClusteringResultsComponent.prototype, "overflow", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ClusteringResultsComponent.prototype, "flow", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ClusteringResultsComponent.prototype, "flowstepId", void 0);
    ClusteringResultsComponent = ClusteringResultsComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'clustering-results',
            template: "\n    <app-spinner [visibility]=\"!clusteringResults\"></app-spinner>\n    <canvas *ngIf=\"clusteringResults && clusteringResults.centers.length\"\n      cluster-graph\n      [axisLabels]=\"flowstep.options['columns']\"\n      [cluster-data]=\"clusteringResults\"></canvas>\n    <error-indicator *ngIf=\"clusteringResults && !clusteringResults.centers.length\" [title]=\"'Not Supported'\"\n      [message]=\"'This clustering can not be visualized in two-dimensional space or exceeds points number limitations'\"\n      ></error-indicator>",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_flowstep_service__["a" /* FlowstepService */], __WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_6__services_process_service__["a" /* ProcessService */]])
    ], ClusteringResultsComponent);
    return ClusteringResultsComponent;
    var ClusteringResultsComponent_1;
}());



/***/ }),

/***/ "../../../../../src/app/compose/compose.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ComposeModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flowstep_service__ = __webpack_require__("../../../../../src/app/services/flowstep.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__flow_context_component__ = __webpack_require__("../../../../../src/app/compose/flow-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__flow_compose_component__ = __webpack_require__("../../../../../src/app/compose/flow-compose.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__flow_graph_component__ = __webpack_require__("../../../../../src/app/compose/flow-graph.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__flow_create_component__ = __webpack_require__("../../../../../src/app/compose/flow-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__flow_edit_component__ = __webpack_require__("../../../../../src/app/compose/flow-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__flowstep_edit_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__flowstep_edit_form_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-form.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__flowstep_edit_o_insert_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-insert.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__flowstep_edit_o_aggregate_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-aggregate.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__flowstep_edit_o_join_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-join.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__flowstep_edit_o_cluster_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-cluster.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__flowstep_edit_o_query_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-query.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__flowstep_edit_o_filter_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-filter.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__flowstep_edit_o_window_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-window.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__flowstep_edit_o_map_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-map.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__flowstep_edit_o_geojoin_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-geojoin.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__flowstep_edit_o_geojoin_condition_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-geojoin-condition.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__flowstep_edit_o_geojoin_geometry_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o-geojoin-geometry.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__flowstep_options_pass_columns_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-options-pass-columns.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__flowstep_navigation__ = __webpack_require__("../../../../../src/app/compose/flowstep-navigation.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__flow_info_component__ = __webpack_require__("../../../../../src/app/compose/flow-info.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__flow_table_view_component__ = __webpack_require__("../../../../../src/app/compose/flow-table-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__flow_status_color_directive__ = __webpack_require__("../../../../../src/app/compose/flow-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__flowstep_status_color_directive__ = __webpack_require__("../../../../../src/app/compose/flowstep-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__flow_graph_directive__ = __webpack_require__("../../../../../src/app/compose/flow-graph.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__clustering_results_component__ = __webpack_require__("../../../../../src/app/compose/clustering-results.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__cluster_graph_directive__ = __webpack_require__("../../../../../src/app/compose/cluster-graph.directive.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




































var ComposeModule = (function () {
    function ComposeModule() {
    }
    ComposeModule_1 = ComposeModule;
    ComposeModule.forRoot = function () {
        return {
            ngModule: ComposeModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_7__services_flow_service__["a" /* FlowService */],
                __WEBPACK_IMPORTED_MODULE_6__services_flowstep_service__["a" /* FlowstepService */],
            ],
        };
    };
    ComposeModule = ComposeModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
                __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__["a" /* TablesModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_8__flow_layout_component__["b" /* FlowLayoutComponent */],
                __WEBPACK_IMPORTED_MODULE_9__flow_context_component__["a" /* FlowContextComponent */],
                __WEBPACK_IMPORTED_MODULE_10__flow_compose_component__["a" /* FlowComposeComponent */],
                __WEBPACK_IMPORTED_MODULE_11__flow_graph_component__["a" /* FlowGraphComponent */],
                __WEBPACK_IMPORTED_MODULE_12__flow_create_component__["a" /* FlowCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_13__flow_edit_component__["a" /* FlowEditComponent */],
                __WEBPACK_IMPORTED_MODULE_14__flowstep_edit_component__["a" /* FlowstepEditComponent */],
                __WEBPACK_IMPORTED_MODULE_15__flowstep_edit_form_component__["a" /* FlowstepEditFormComponent */],
                __WEBPACK_IMPORTED_MODULE_16__flowstep_edit_o_insert_component__["a" /* FlowstepEditOptionsInsertComponent */],
                __WEBPACK_IMPORTED_MODULE_17__flowstep_edit_o_aggregate_component__["a" /* FlowstepEditOptionsAggregateComponent */],
                __WEBPACK_IMPORTED_MODULE_18__flowstep_edit_o_join_component__["a" /* FlowstepEditOptionsJoinComponent */],
                __WEBPACK_IMPORTED_MODULE_19__flowstep_edit_o_cluster_component__["a" /* FlowstepEditOptionsClusterComponent */],
                __WEBPACK_IMPORTED_MODULE_20__flowstep_edit_o_query_component__["a" /* FlowstepEditOptionsQueryComponent */],
                __WEBPACK_IMPORTED_MODULE_21__flowstep_edit_o_filter_component__["a" /* FlowstepEditOptionsFilterComponent */],
                __WEBPACK_IMPORTED_MODULE_22__flowstep_edit_o_window_component__["a" /* FlowstepEditOptionsWindowComponent */],
                __WEBPACK_IMPORTED_MODULE_23__flowstep_edit_o_map_component__["a" /* FlowstepEditOptionsMapComponent */],
                __WEBPACK_IMPORTED_MODULE_24__flowstep_edit_o_geojoin_component__["a" /* FlowstepEditOptionsGeoJoinComponent */],
                __WEBPACK_IMPORTED_MODULE_25__flowstep_edit_o_geojoin_condition_component__["a" /* FlowstepEditOptionsGeoJoinConditionComponent */],
                __WEBPACK_IMPORTED_MODULE_26__flowstep_edit_o_geojoin_geometry_component__["a" /* FlowstepEditOptionsGeoJoinGeometryComponent */],
                __WEBPACK_IMPORTED_MODULE_27__flowstep_options_pass_columns_component__["a" /* FlowstepOptionsPassColumnsComponent */],
                __WEBPACK_IMPORTED_MODULE_28__flowstep_navigation__["a" /* FlowstepNavigationComponent */],
                __WEBPACK_IMPORTED_MODULE_29__flow_info_component__["a" /* FlowInfoComponent */],
                __WEBPACK_IMPORTED_MODULE_30__flow_table_view_component__["a" /* FlowTableViewComponent */],
                __WEBPACK_IMPORTED_MODULE_31__flow_status_color_directive__["a" /* FlowStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_32__flowstep_status_color_directive__["a" /* FlowstepStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_33__flow_graph_directive__["a" /* FlowGraphDirective */],
                __WEBPACK_IMPORTED_MODULE_34__clustering_results_component__["a" /* ClusteringResultsComponent */],
                __WEBPACK_IMPORTED_MODULE_35__cluster_graph_directive__["a" /* ClusterGraphDirective */],
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_16__flowstep_edit_o_insert_component__["a" /* FlowstepEditOptionsInsertComponent */],
                __WEBPACK_IMPORTED_MODULE_17__flowstep_edit_o_aggregate_component__["a" /* FlowstepEditOptionsAggregateComponent */],
                __WEBPACK_IMPORTED_MODULE_18__flowstep_edit_o_join_component__["a" /* FlowstepEditOptionsJoinComponent */],
                __WEBPACK_IMPORTED_MODULE_19__flowstep_edit_o_cluster_component__["a" /* FlowstepEditOptionsClusterComponent */],
                __WEBPACK_IMPORTED_MODULE_20__flowstep_edit_o_query_component__["a" /* FlowstepEditOptionsQueryComponent */],
                __WEBPACK_IMPORTED_MODULE_21__flowstep_edit_o_filter_component__["a" /* FlowstepEditOptionsFilterComponent */],
                __WEBPACK_IMPORTED_MODULE_22__flowstep_edit_o_window_component__["a" /* FlowstepEditOptionsWindowComponent */],
                __WEBPACK_IMPORTED_MODULE_23__flowstep_edit_o_map_component__["a" /* FlowstepEditOptionsMapComponent */],
                __WEBPACK_IMPORTED_MODULE_24__flowstep_edit_o_geojoin_component__["a" /* FlowstepEditOptionsGeoJoinComponent */],
                __WEBPACK_IMPORTED_MODULE_25__flowstep_edit_o_geojoin_condition_component__["a" /* FlowstepEditOptionsGeoJoinConditionComponent */],
                __WEBPACK_IMPORTED_MODULE_26__flowstep_edit_o_geojoin_geometry_component__["a" /* FlowstepEditOptionsGeoJoinGeometryComponent */],
                __WEBPACK_IMPORTED_MODULE_15__flowstep_edit_form_component__["a" /* FlowstepEditFormComponent */],
                __WEBPACK_IMPORTED_MODULE_31__flow_status_color_directive__["a" /* FlowStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_32__flowstep_status_color_directive__["a" /* FlowstepStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_33__flow_graph_directive__["a" /* FlowGraphDirective */],
            ],
        })
    ], ComposeModule);
    return ComposeModule;
    var ComposeModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/compose/compose.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return composeRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__flow_compose_component__ = __webpack_require__("../../../../../src/app/compose/flow-compose.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flow_context_component__ = __webpack_require__("../../../../../src/app/compose/flow-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flow_create_component__ = __webpack_require__("../../../../../src/app/compose/flow-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flow_info_component__ = __webpack_require__("../../../../../src/app/compose/flow-info.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flow_edit_component__ = __webpack_require__("../../../../../src/app/compose/flow-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__flow_graph_component__ = __webpack_require__("../../../../../src/app/compose/flow-graph.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__flowstep_edit_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__flow_table_view_component__ = __webpack_require__("../../../../../src/app/compose/flow-table-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__tables_table_view_component__ = __webpack_require__("../../../../../src/app/tables/table-view.component.ts");










var composeRoutes = [
    {
        path: 'flows',
        redirectTo: 'flows/compose',
    },
    {
        path: 'flows/compose',
        component: __WEBPACK_IMPORTED_MODULE_0__flow_compose_component__["a" /* FlowComposeComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__flow_context_component__["a" /* FlowContextComponent */],
    },
    {
        path: 'flows/create',
        component: __WEBPACK_IMPORTED_MODULE_2__flow_create_component__["a" /* FlowCreateComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__flow_context_component__["a" /* FlowContextComponent */],
    },
    // TODO: remove?
    {
        path: 'tables/:tableId',
        component: __WEBPACK_IMPORTED_MODULE_9__tables_table_view_component__["a" /* TableViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__flow_context_component__["a" /* FlowContextComponent */],
    },
    {
        path: 'flows/:flowId',
        component: __WEBPACK_IMPORTED_MODULE_6__flow_layout_component__["b" /* FlowLayoutComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__flow_context_component__["a" /* FlowContextComponent */],
        children: [
            {
                path: '',
                redirectTo: 'info',
                pathMatch: 'full',
            },
            {
                path: 'info',
                component: __WEBPACK_IMPORTED_MODULE_3__flow_info_component__["a" /* FlowInfoComponent */],
            },
            {
                path: 'graph',
                component: __WEBPACK_IMPORTED_MODULE_5__flow_graph_component__["a" /* FlowGraphComponent */],
            },
            {
                path: 'edit',
                component: __WEBPACK_IMPORTED_MODULE_4__flow_edit_component__["a" /* FlowEditComponent */],
            },
            {
                path: 'tables/:tableId',
                component: __WEBPACK_IMPORTED_MODULE_8__flow_table_view_component__["a" /* FlowTableViewComponent */],
            },
            {
                path: 'steps/create',
                redirectTo: 'info',
            },
            {
                path: 'steps/create/:type',
                component: __WEBPACK_IMPORTED_MODULE_7__flowstep_edit_component__["a" /* FlowstepEditComponent */],
            },
            {
                path: 'steps/:stepId',
                component: __WEBPACK_IMPORTED_MODULE_7__flowstep_edit_component__["a" /* FlowstepEditComponent */],
            },
        ],
    },
];


/***/ }),

/***/ "../../../../../src/app/compose/flow-compose.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowComposeComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var FlowComposeComponent = (function () {
    function FlowComposeComponent(router, flows) {
        this.router = router;
        this.flows = flows;
        if (this.flows.data.view) {
            // if there is the existing selected flow
            this.router.navigate(['/desk', 'flows', this.flows.data.view.id]);
        }
        else {
            // if there is no previously selected flow
            this.router.navigate(['/desk', 'flows', 'create']);
        }
    }
    FlowComposeComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-compose',
            template: 'Redirecting...'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_2__services_flow_service__["a" /* FlowService */]])
    ], FlowComposeComponent);
    return FlowComposeComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var FlowContextComponent = (function () {
    function FlowContextComponent(flows, router, user, tables, events, route) {
        var _this = this;
        this.flows = flows;
        this.router = router;
        this.user = user;
        this.tables = tables;
        this.events = events;
        this.route = route;
        this.classes = 'fixed-width';
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.flowList = [];
        this.menuOpen = [true];
        this.flowTables = [];
        this.downloadObserver = new __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__["a" /* ActivityObserver */]();
        this._subscriptions = [];
        this._flowTablesLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (flowId) { return _this.flows.getTables(flowId); });
        this._flowTablesLoader.subscribe(function (tablesList) {
            _this.flowTables = tablesList.data;
        });
        this._userFlowsLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.user.getFlows(); });
        this._userFlowsLoader.subscribe(function (flowList) {
            _this.updateUserFlowList(flowList);
        });
        this._subscriptions.push(this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_FLOW_TABLES' && event.data === _this.flowId) {
                _this._flowTablesLoader.load(_this.flowId);
            }
            if (event.type === 'UPDATE_FLOW_LIST') {
                _this._userFlowsLoader.load();
            }
            if (event.type === 'UPDATE_USER_FLOWLIST') {
                _this.updateUserFlowList(event.data);
            }
        }));
        this._subscriptions.push(this.route.params.subscribe(function (params) {
            _this.flowId = params['flowId'];
            if (_this.flowId) {
                _this._flowTablesLoader.load(_this.flowId);
            }
            else {
                _this.flowTables = [];
            }
        }));
        this._userFlowsLoader.load();
    }
    FlowContextComponent.prototype.updateUserFlowList = function (flowList) {
        this.flowList = flowList.data.map(function (flow) {
            return {
                id: flow.id,
                text: flow.name
            };
        });
    };
    FlowContextComponent.prototype.ngOnDestroy = function () {
        this._subscriptions.forEach(function (sub) { return sub.unsubscribe(); });
    };
    FlowContextComponent.prototype.switchFlow = function (id) {
        if (id) {
            this.router.navigate(['/desk', 'flows', id]);
        }
        else {
            this.router.navigate(['/desk', 'flows', 'create']);
        }
    };
    FlowContextComponent.prototype.removeTable = function (id) {
        var _this = this;
        this.flows.removeTables(this.flows.data.view.id, id).subscribe(function () {
            if (_this.router.url === "/desk/flows/" + _this.flows.data.view.id + "/tables/" + id) {
                _this.router.navigate(['/desk', 'flows', _this.flows.data.view.id, 'info']);
            }
        });
    };
    FlowContextComponent.prototype.download = function (id) {
        this.downloadObserver.observe(this.tables.download(id, this.user.token()));
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], FlowContextComponent.prototype, "classes", void 0);
    FlowContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-flow-context',
            template: "\n    <div class=\"group\">\n      <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" (click)=\"switchFlow(null)\">\n        Create New Flow\n      </button>\n    </div>\n    <div style=\"min-height:40px; position: relative\">\n      <app-spinner [visibility]=\"!_userFlowsLoader.loaded\" [height]=\"40\"></app-spinner>\n      <app-select *ngIf=\"flowList\"\n        [placeholder]=\"'- Select Flow -'\"\n        [value]=\"flowId\"\n        (valueChange)=\"switchFlow($event)\"\n        [options]=\"flowList\"></app-select>\n    </div>\n    <div class=\"menu\">\n      <app-spinner [visibility]=\"flowId && !_flowTablesLoader.loaded\" [height]=\"40\"></app-spinner>\n      <ul class=\"nav nav-stacked\" *ngIf=\"flowId && flowTables.length\">\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n            <i class=\"iconapp iconapp-tables\"></i>\n            <span>Tables</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of flowTables\" [routerLinkActive]=\"['active']\">\n            <span class=\"dropdown pull-right\" dropdown>\n              <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n              </a>\n              <ul class=\"dropdown-menu\">\n                <ng-template [ngIf]=\"item.status === config.table.status.values.ACTIVE\">\n                  <li>\n                    <a [routerLink]=\"['/desk', 'flows', flowId, 'tables', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li>\n                    <a (click)=\"downloadObserver.isActive || download(item.id)\"\n                      class=\"dropdown-item link\">\n                      Download\n                    </a>\n                  </li>\n                  <li role=\"separator\" class=\"divider\"></li>\n                </ng-template>\n                <li>\n                  <a (click)=\"removeTable(item.id)\" class=\"dropdown-item link\">\n                    Remove\n                  </a>\n                </li>\n              </ul>\n            </span>\n              <a [title]=\"item.name\"\n                [routerLink]=\"['/desk', 'flows', flowId, 'tables', item.id]\"\n                [table-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.table.status.labels[item.status]\">\n                {{item.name}}\n              </a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_7__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_8__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */]])
    ], FlowContextComponent);
    return FlowContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var FlowCreateComponent = (function () {
    function FlowCreateComponent(router, user, flows) {
        this.router = router;
        this.user = user;
        this.flows = flows;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__["a" /* ActivityObserver */]();
        this.flowCreateForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            description: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](''),
        });
    }
    FlowCreateComponent.prototype.ngOnInit = function () {
        // init data
        this.flows.view();
    };
    FlowCreateComponent.prototype.onSubmit = function () {
        var _this = this;
        this._savingObserver
            .observe(this.flows.create(this.flowCreateForm.value))
            .do(function () { return _this.user.getFlows(); })
            .subscribe(function (flow) { return _this.router.navigate(['/desk', 'flows', flow.id]); });
    };
    FlowCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-create',
            template: "\n  <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n    <h3 class=\"text-center\">Create A New Flow</h3>\n    <form [formGroup]=\"flowCreateForm\" (ngSubmit)=\"flowCreateForm.valid && onSubmit()\">\n      <app-input [label]=\"'Name'\" [control]=\"flowCreateForm.controls['name']\"></app-input>\n      <app-input [label]=\"'Description'\" [control]=\"flowCreateForm.controls['description']\"></app-input>\n      <button type=\"submit\" [disabled]=\"!flowCreateForm.valid || (_savingObserver.active | async)\" class=\"btn btn-success pull-right\">Create</button>\n    </form>\n  </div>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_5__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_4__services_flow_service__["a" /* FlowService */]])
    ], FlowCreateComponent);
    return FlowCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-edit.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var FlowEditComponent = (function () {
    function FlowEditComponent(flowData, user, flows, acl) {
        this.flowData = flowData;
        this.user = user;
        this.flows = flows;
        this.acl = acl;
        this.flowEditForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            id: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            description: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](''),
        });
    }
    FlowEditComponent.prototype.ngOnInit = function () {
        var _this = this;
        // init data
        this.flowData.forEach(function (flow) {
            _this.fillFlowForm(_this.flowEditForm, flow);
        });
    };
    FlowEditComponent.prototype.onSubmit = function () {
        var _this = this;
        this.flows.update(this.flowEditForm.value).subscribe(function () {
            _this.user.getFlows();
        });
    };
    FlowEditComponent.prototype.fillFlowForm = function (form, flow) {
        var canUpdate = this.acl.canUpdateFlow(flow);
        __WEBPACK_IMPORTED_MODULE_2__utils_misc__["a" /* MiscUtils */].fillForm(form, flow, !canUpdate);
    };
    FlowEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-edit',
            template: "\n    <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n      <h3 class=\"text-center\">Edit Flow</h3>\n      <form [formGroup]=\"flowEditForm\" (ngSubmit)=\"flowEditForm.valid && onSubmit()\">\n        <app-input [label]=\"'Name'\" [control]=\"flowEditForm.controls['name']\"></app-input>\n        <app-input [label]=\"'Description'\" [control]=\"flowEditForm.controls['description']\"></app-input>\n        <button type=\"submit\" [disabled]=\"!flowEditForm.valid\" class=\"btn btn-success pull-right\">Update</button>\n      </form>\n    </div>\n  ",
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__flow_layout_component__["a" /* FlowData */],
            __WEBPACK_IMPORTED_MODULE_6__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_5__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_4__services_acl_service__["a" /* AclService */]])
    ], FlowEditComponent);
    return FlowEditComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-graph.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowGraphComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};







var FlowGraphComponent = (function () {
    function FlowGraphComponent(flowData, flows, processes) {
        var _this = this;
        this.flowData = flowData;
        this.flows = flows;
        this.processes = processes;
        this.flowTables = [];
        this._flowTablesLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (flowId) { return _this.flows.getTables(flowId); });
        this._flowTablesLoader.subscribe(function (tablesList) {
            _this.flowTables = tablesList.data;
        });
    }
    FlowGraphComponent.prototype.doesFlowContainCorrectStep = function () {
        return this.flow.steps.some(function (step) {
            return step.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.DONE;
        });
    };
    FlowGraphComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.flowProcesses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW]];
        this.flowData.forEach(function (flow) {
            _this.setFlow(flow);
        });
    };
    FlowGraphComponent.prototype.ngOnDestroy = function () {
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    FlowGraphComponent.prototype.setFlow = function (flow) {
        var _this = this;
        this.flow = flow;
        if (flow.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flow.status.values.RUNNING) {
            this.processes.getByTarget(flow.id, __WEBPACK_IMPORTED_MODULE_5__interfaces_common_interface__["a" /* IAsset */].Type.FLOW).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, null);
            });
        }
        this.flowTables = [];
        this._flowTablesLoader.load(flow.id);
    };
    FlowGraphComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-graph',
            template: "\n    <div *ngIf=\"flow && flow.steps.length && flowTables.length\" class=\"graphic\">\n      <svg flow-graph [flow]=\"flow\" [tables]=\"flowTables\" [container]=\"'.graphic'\"></svg>\n    </div>\n\n    <div *ngIf=\"flow && !flow.steps.length\">\n      <h1 class=\"text-center text-muted\"><i class=\"icon-exclamation icons\"></i></h1>\n      <h4 class=\"text-center text-muted\">Empty flow</h4>\n      <div><h4 class=\"text-center text-muted text-light\">There are no steps yet</h4></div>\n    </div>\n\n    <div class=\"row\" *ngIf=\"flow && flow.steps.length && !doesFlowContainCorrectStep() && flowProcesses[flow.id]\">\n      <process-indicator [process]=\"flowProcesses[flow.id]\"></process-indicator>\n    </div>\n  ",
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__flow_layout_component__["a" /* FlowData */],
            __WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_3__services_process_service__["a" /* ProcessService */]])
    ], FlowGraphComponent);
    return FlowGraphComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-graph.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowGraphDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__ = __webpack_require__("../../../../@xuzijian/dagre-d3/dist/dagre-d3.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/**
 * Usage:
 *  <svg flow-graph [flow]="IFlow" [tables]="ITable[]" [options]="any"></svg>
 */
var FlowGraphDirective = (function () {
    function FlowGraphDirective(el) {
        this.flow = null;
        this.tables = null;
        this.options = null;
        this.container = null;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.el = el.nativeElement;
    }
    FlowGraphDirective_1 = FlowGraphDirective;
    FlowGraphDirective.prototype.ngOnChanges = function () {
        // for rendering: we should have non-empty steps list, tables list and some step should has DONE status
        if (this.flow && this.flow.steps.length > 0 &&
            this.tables && this.tables.length > 0 &&
            this.flow.steps.some(function (step) { return step.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.DONE; })) {
            this.options = Object.assign({}, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].graph.flow, this.options);
            this.init() && this.render();
        }
    };
    FlowGraphDirective.prototype.ngOnDestroy = function () {
        this.destroy();
    };
    FlowGraphDirective.prototype.init = function () {
        var _this = this;
        if (!__WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__ || !__WEBPACK_IMPORTED_MODULE_2_d3__)
            return false;
        var g = new __WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__["graphlib"].Graph().setGraph({});
        var tablesHash = this.tables.reduce(function (acc, table) {
            acc[table.id] = table;
            return acc;
        }, {});
        // Traverse Steps
        this.flow.steps.forEach(function (step) {
            if (step.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.DONE) {
                // Add step node
                var stepId_1 = step.id;
                g.setNode(stepId_1, Object.assign({}, _this.options.templates.stepNode, {
                    label: __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.type.labels[step.type],
                }));
                // Add tables nodes (with relations)
                step.input.forEach(function (inputId) {
                    var inputTable = tablesHash[inputId];
                    g.setNode(inputId, Object.assign({}, _this.options.templates.inputNode, {
                        label: inputTable ? inputTable.name : inputId,
                    }));
                    g.setEdge(inputId, stepId_1, Object.assign({}, _this.options.templates.inputEdge));
                });
                var outputId = step.output;
                var outputTable = tablesHash[outputId];
                g.setNode(outputId, Object.assign({}, _this.options.templates.outputNode, {
                    label: outputTable ? outputTable.name : outputId,
                }));
                g.setEdge(stepId_1, outputId, Object.assign({}, _this.options.templates.outputEdge));
            }
        });
        this.graph = g;
        return true;
    };
    FlowGraphDirective.prototype.beautify = function (step) {
        var html = "<table class='graph-info'>";
        switch (step.type) {
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.query:
                var queryTransformer = step.options;
                html = "<tr><td>Query:</td><td>" + queryTransformer.expression + "</td></tr>";
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.insert:
                var insertOptions = step.options;
                html += "<tr><td>Column Name:</td><td>" + insertOptions.name + "</td></tr>";
                html += "<tr><td>Formula:</td><td>" + insertOptions.formula + "</td></tr>";
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.cluster:
                var clusterOptions = step.options;
                html += "<tr><td>type:</td><td>" + clusterOptions.type + "</td></tr>";
                html += "<tr><td>Groups:</td><td>" + clusterOptions.groups + "</td></tr>";
                html += "<tr><td>Iterations:</td><td>" + clusterOptions.iterations + "</td></tr>";
                html += this.beautifyList(step, 'Columns', clusterOptions.columns);
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.aggregate:
                var aggregateOptions = step.options;
                html += "<tr><td>Operand Column:</td><td>" + aggregateOptions.operandColumn + "</td></tr>";
                html += "<tr><td>Operator:</td><td>" + aggregateOptions.operator + "</td></tr>";
                html += "<tr><td>New Column Name:</td><td>" + aggregateOptions.name + "</td></tr>";
                html += this.beautifyList(step, 'Group By Columns', aggregateOptions.groupByColumns);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.filter:
                var filterOptions_1 = step.options;
                html += this.beautifyList(step, 'Filters', filterOptions_1.conditions, ['Column', 'Relational Operator', 'Value', 'Logical Operator'], ['columnName', function (item) {
                        return __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.filter.operator.labels[item.operator];
                    }, 'value', function (item, i) {
                        if (i !== filterOptions_1.conditions.length - 1) {
                            return item.operatorGroup;
                        }
                        else {
                            return '';
                        }
                    }]);
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.join:
                var joinOptions = step.options;
                var type = '';
                switch (joinOptions.type) {
                    case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].JoinType.NORMAL:
                        type = 'Exact Match';
                        break;
                    case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].JoinType.FUZZY:
                        type = 'Fuzzy Match';
                        break;
                    default:
                        type = 'Unexpected Join Type';
                }
                html += "<tr><td>Left Join Type</td><td>" + type + "</td></tr>";
                html += "<tr><td>Left Prefix</td><td>" + joinOptions.leftPrefix + "</td></tr>";
                html += "<tr><td>Right Prefix</td><td>" + joinOptions.rightPrefix + "</td></tr>";
                html += this.beautifyList(step, 'Joined Columns', joinOptions.columns, ['From', 'To'], ['from', 'to']);
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.window:
                var windowOptions = step.options;
                html += "<tr>";
                html += "<td>Aggregator:</td><td>" + windowOptions.aggregator + "</td>";
                html += "</tr>";
                if (windowOptions.aggregatorArg) {
                    html += "<tr>";
                    html += "<td>Aggregator Arg:</td><td>" + windowOptions.aggregatorArg + "</td>";
                    html += "</tr>";
                }
                html += "<tr>";
                html += "<td>New Column Name:</td><td>" + windowOptions.newColName + "</td>";
                html += "</tr>";
                if (windowOptions.partitionBy) {
                    html += this.beautifyList(step, 'Partition By', windowOptions.partitionBy);
                }
                if (windowOptions.orderBy) {
                    html += this.beautifyList(step, 'Order By', windowOptions.orderBy);
                }
                if (windowOptions.orderBy || windowOptions.withinGroupExpression) {
                    html += "<tr>";
                    html += "<td>isDesc:</td><td>" + windowOptions.isDesc + "</td>";
                    html += "</tr>";
                }
                if (windowOptions.withinGroupExpression) {
                    html += this.beautifyList(step, 'Within Group', windowOptions.withinGroupExpression);
                }
                if (windowOptions.respectNulls) {
                    html += "<tr>";
                    html += "<td>Respect Nulls:</td><td>" + windowOptions.respectNulls + "</td>";
                    html += "</tr>";
                }
                if (windowOptions.ignoreNulls) {
                    html += "<tr>";
                    html += "<td>Ignore Nulls:</td><td>" + windowOptions.ignoreNulls + "</td>";
                    html += "</tr>";
                }
                if (windowOptions.listaggDelimiter) {
                    html += "<tr>";
                    html += "<td>Delimiter:</td><td>" + windowOptions.listaggDelimiter + "</td>";
                    html += "</tr>";
                }
                if (windowOptions.ntileGroupsCount) {
                    html += "<tr>";
                    html += "<td>Groups count:</td><td>" + windowOptions.ntileGroupsCount + "</td>";
                    html += "</tr>";
                }
                if (windowOptions.percentile) {
                    html += "<tr>";
                    html += "<td>Percentile Value:</td><td>" + windowOptions.percentile + "</td>";
                    html += "</tr>";
                }
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.geojoin:
                var geoJoinOptions = step.options;
                html += "<tr><td>Left Prefix</td><td>" + geoJoinOptions.leftPrefix + "</td></tr>";
                html += "<tr><td>Right Prefix</td><td>" + geoJoinOptions.rightPrefix + "</td></tr>";
                html += this.beautifyList(step, 'Join Conditions', geoJoinOptions.joinConditions, [''], [function (item) {
                        var innerHtml = '';
                        var configGeo = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.geojoin;
                        var geometryA = FlowGraphDirective_1._geometrySummary(item.left);
                        var geometryB = FlowGraphDirective_1._geometrySummary(item.right);
                        var relationArguments = item.relation.relationBase === configGeo.relationBase.values.LEFT
                            ? "(" + geometryA + ", " + geometryB + ")"
                            : "(" + geometryB + ", " + geometryA + ")";
                        var summary = configGeo.relation.labels[item.relation.relType] + " " + relationArguments;
                        if (FlowGraphDirective_1.relationHasParameter(item.relation.relType)) {
                            summary += " " + configGeo.operator.labels[item.relation.operator] + " " + item.relation.value;
                        }
                        innerHtml += "<tr><td colspan=\"2\">" + summary + "</td></tr>";
                        return innerHtml;
                    }]);
                html += this.stepPassColumns(step);
                break;
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.map:
                var mapOptions = step.options;
                html += "<tr><td>Accept Only Renamed</td><td>" + mapOptions.onlyRenamed + "</td></tr>";
                html += this.beautifyList(step, 'Renamings', mapOptions.changes, ['Origin Name', 'New Name'], ['value', 'name']);
                break;
            default:
                html += "<tr>";
                html += "<td>Unexpected Transformer Type</td>";
                html += "</tr>";
        }
        html += '</table>';
        return html;
    };
    FlowGraphDirective.prototype.stepPassColumns = function (step) {
        var _this = this;
        if (step.options.passColumns && step.options.passColumns.length) {
            return this.beautifyList(step, 'Selected Columns', step.options.passColumns, ['Column Name', 'Alias', 'Table'], ['columnName', 'newColumnName', function (item) {
                    var table = _this.tables.find(function (table) { return table.id === step.input[item.tableReference]; });
                    return table ? table.name : step.input[item.tableReference];
                }]);
        }
        return '';
    };
    FlowGraphDirective.prototype.tryGetDisplayName = function (step, columnName, i) {
        var table = this.tables.find(function (_) { return _.id === step.input[i]; });
        if (!table) {
            return columnName;
        }
        var column = table.columns.find(function (_) { return _.name === columnName; });
        if (!column) {
            return columnName;
        }
        return "" + column.displayName;
    };
    FlowGraphDirective.prototype.beautifyList = function (step, listName, array, labels, properties) {
        var _this = this;
        var html = '';
        (array || []).forEach(function (column, i) {
            if (i === 0) {
                html += '<tr>';
                html += "<td>" + listName + ":</td>";
                if (labels) {
                    labels.forEach(function (label) {
                        html += "<td>" + label + "</td>";
                    });
                }
                html += '</tr>';
            }
            html += '<tr>';
            html += '<td></td>';
            if (!properties) {
                html += "<td>" + _this.tryGetDisplayName(step, column, 0) + "</td>";
            }
            else {
                properties.forEach(function (property, j) {
                    if (typeof property === 'function') {
                        html += "<td>" + _this.tryGetDisplayName(step, property(column, j), j) + "</td>";
                    }
                    else {
                        html += "<td>" + _this.tryGetDisplayName(step, column[property], j) + "</td>";
                    }
                });
            }
            html += '</tr>';
        });
        return html;
    };
    FlowGraphDirective.prototype.render = function () {
        var _this = this;
        this.destroy();
        var dagreRender = new __WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__["render"](), svg = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.el).attr('class', 'rendered'), inner = svg.append('g');
        dagreRender(inner, this.graph);
        var padding = { vertical: 0, horizontal: 40 };
        svg.attr('viewBox', "0 0 " + (this.graph.graph().width + padding.horizontal) + " " + (this.graph.graph().height + padding.vertical));
        svg.attr('width', (this.graph.graph().width + padding.horizontal) * this.options.maxScale);
        // append tooltips
        inner.selectAll('g.node.operation-template')
            .attr('title', function (v) {
            var currentShape = _this.graph.node(v);
            var step = _this.flow.steps.find(function (step) { return step.id === v; });
            $(currentShape.elem).attr('data-html', 'true');
            $(currentShape.elem).attr('data-placement', 'bottom');
            $(currentShape.elem).attr('data-original-title', _this.beautify(step));
            $(currentShape.elem).attr('data-container', _this.container ? _this.container : 'body');
            $(currentShape.elem).tooltip();
        });
    };
    FlowGraphDirective.prototype.destroy = function () {
        if (!__WEBPACK_IMPORTED_MODULE_3__xuzijian_dagre_d3_dist_dagre_d3__ || !__WEBPACK_IMPORTED_MODULE_2_d3__)
            return;
        var svg = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.el), inner = svg.select('g');
        svg.classed('rendered', false);
        if (inner)
            inner.remove();
    };
    FlowGraphDirective._geometrySummary = function (value) {
        var args = value.coordinates.map(function (point) {
            return point.lat + ", " + point.lon;
        }).join(', ');
        return __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.geojoin.geometry.labels[value.geoType] + "(" + args + ")";
    };
    FlowGraphDirective.relationHasParameter = function (relationType) {
        return __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.geojoin.relationsWithParameter.indexOf(relationType) >= 0;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowGraphDirective.prototype, "flow", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], FlowGraphDirective.prototype, "tables", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowGraphDirective.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], FlowGraphDirective.prototype, "container", void 0);
    FlowGraphDirective = FlowGraphDirective_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[flow-graph]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], FlowGraphDirective);
    return FlowGraphDirective;
    var FlowGraphDirective_1;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-info.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowInfoComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};


var FlowInfoComponent = (function () {
    function FlowInfoComponent(flowData) {
        this.flowData = flowData;
        this.flow = null;
    }
    FlowInfoComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.flowData.forEach(function (flow) {
            _this.flow = flow;
        });
    };
    FlowInfoComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-info',
            template: "\n    <div class=\"row\" *ngIf=\"flow\">\n      <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n        <h3 class=\"text-center\">{{flow.name}}</h3>\n        <div class=\"card\">\n          <table class=\"table table-bordered\">\n            <tr>\n              <td class=\"text-center text-muted\" width=\"50%\">\n                <div class=\"h3\">{{flow.steps.length}}</div>\n                <div>{{flow.steps.length || 0 | pluralize: 'Step' : 'Steps'}}</div>\n              </td>\n              <td class=\"text-center text-muted\" width=\"50%\">\n                <div class=\"h3\">{{(flow.tables || []).length}}</div>\n                <div>{{(flow.tables || {}).length || 0 | pluralize: 'Table' : 'Tables'}}</div>\n              </td>\n            </tr>\n          </table>\n        </div>\n        <div class=\"card m-t-2\">\n          <table class=\"table table-bordered\">\n            <tr>\n              <td [routerLink]=\"['/desk', 'flows', flow.id, 'graph']\" class=\"text-center link\" width=\"33%\">\n                <a class=\"link\">\n                  <i class=\"imgaction imgaction-visualize center-block h3\"></i>\n                  <div style=\"color: #333\">Visualize</div>\n                </a>\n              </td>\n              <td [routerLink]=\"['/desk', 'flows', flow.id, 'edit']\" class=\"text-center link\" width=\"33%\">\n                <a class=\"link\">\n                  <i class=\"imgaction imgaction-preview center-block h3\"></i>\n                  <div style=\"color: #333\">Edit</div>\n                </a>\n              </td>\n            </tr>\n          </table>\n        </div>\n        </div>\n    </div>\n  ",
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__flow_layout_component__["a" /* FlowData */]])
    ], FlowInfoComponent);
    return FlowInfoComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-layout.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowData; });
/* unused harmony export FlowDataSubject */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return FlowLayoutComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};











var FlowData = (function (_super) {
    __extends(FlowData, _super);
    function FlowData() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    return FlowData;
}(__WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */]));

var FlowDataSubject = (function (_super) {
    __extends(FlowDataSubject, _super);
    function FlowDataSubject() {
        return _super.call(this, 1) || this;
    }
    return FlowDataSubject;
}(__WEBPACK_IMPORTED_MODULE_3_rxjs_ReplaySubject__["a" /* ReplaySubject */]));

var FlowLayoutComponent = (function () {
    function FlowLayoutComponent(flows, processes, route, router, events, flowData, acl, cdRef) {
        var _this = this;
        this.flows = flows;
        this.processes = processes;
        this.route = route;
        this.router = router;
        this.events = events;
        this.flowData = flowData;
        this.acl = acl;
        this.cdRef = cdRef;
        this.config = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */];
        this.subscriptions = [];
        this.flowLoader = new __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__["a" /* ReactiveLoader */](function (flowId) {
            return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].forkJoin(_this.flows.get(flowId), _this.flows.getTables(flowId)).map(function (_a) {
                var flow = _a[0], tables = _a[1];
                return flow;
            });
        });
        this.flowLoader.subscribe(function (flow) {
            _this.flow = flow;
            flowData.next(flow);
            if (_this.flow.status === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].flow.status.values.RUNNING) {
                _this.processes.getByTarget(_this.flow.id, __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__["a" /* IAsset */].Type.FLOW).subscribe(function (process) {
                    _this.processSubscription && _this.processSubscription.unsubscribe();
                    _this.processSubscription = _this.processes.subscribe(process, function () {
                        _this.flowLoader.load(flow.id);
                    });
                });
            }
        });
        this.subscriptions.push(this.events.filter(function (e) {
            return _this.flow && (e.type === 'UPDATE_FLOW' ||
                e.type === 'UPDATE_FLOW_STEPS' ||
                e.type === 'UPDATE_FLOW_TABLES') && e.data === _this.flow.id;
        }).subscribe(function () {
            _this.flowLoader.load(_this.flow.id);
        }));
    }
    FlowLayoutComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.routeSubscription = this.route.params.subscribe(function (params) {
            if (!_this.flow || _this.flow.id !== params['flowId']) {
                _this.flowLoader.load(params['flowId']);
            }
        });
    };
    FlowLayoutComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription && this.routeSubscription.unsubscribe();
        this.subscriptions.forEach(function (sub) { return sub.unsubscribe(); });
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    FlowLayoutComponent.prototype.submit = function () {
        this.subComponent.submit();
    };
    FlowLayoutComponent.prototype._onFlowDeleted = function () {
        this.router.navigate(['/desk', 'flows', 'create']);
    };
    FlowLayoutComponent.prototype.onActivate = function (component) {
        this.subComponent = component;
        this.cdRef.detectChanges();
    };
    FlowLayoutComponent.prototype.onAddTable = function (table) {
        this.flows.addTables(this.flow.id, table.id);
    };
    FlowLayoutComponent.prototype._isInvalidForm = function (status) {
        return status.debounceTime(0).map(function (_) {
            return _ !== 'VALID';
        });
    };
    FlowLayoutComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-default',
            template: "\n    <asset-operations [type]=\"config.asset.values.FLOW\" [selectedItems]=\"[flow]\"\n      (onAddTable)=\"onAddTable($event)\" (onDelete)=\"_onFlowDeleted()\"></asset-operations>\n    <div class=\"bg-gray\" style=\"padding: 5px 15px;\" *ngIf=\"flow && acl.canUpdateFlow(flow)\">\n      <div class=\"row\">\n        <div class=\"col-xs-12 col-sm-12 col-md-8 col-lg-8 text-left\">\n          <label class=\"text-uppercase\" style=\"padding-left: 15px\">Add STEP:</label>\n          <div class=\"btn-group btnssettings\">\n            <button *ngFor=\"let type of config.flowstep.type.list\"\n              [routerLinkActive]=\"['active']\"\n              [routerLink]=\"['/desk', 'flows', flow.id, 'steps', 'create', type]\"\n              [ngClass]=\"{'active': subComponent && subComponent?.flowstepEditForm?.value.type === type}\"\n              type=\"button\" class=\"btn btn-default\" tooltip data-toggle=\"tooltip\" data-placement=\"bottom\"\n              [attr.data-original-title]=\"config.flowstep.type.labels[type]\">\n              <i class=\"{{config.flowstep.type.icons[type]}}\"></i>\n              <div>{{config.flowstep.type.labels[type]}}</div>\n            </button>\n          </div>\n        </div>\n        <div class=\"col-xs-12 col-sm-12 col-md-4 col-lg-4 text-right pt5\" *ngIf=\"subComponent?.flowstepEditForm\">\n          <button type=\"button\"\n            [disabled]=\"(subComponent.flowstepEditForm.statusChanges | apply: _isInvalidForm | async) || (subComponent.saving | async)\"\n            (click)=\"submit()\"\n            class=\"btn btn-md btn-apply\">{{!subComponent.flowstepEditForm.controls['id'].value ? 'Execute' : 'Update'}}\n          </button>\n        </div>\n      </div>\n    </div>\n    <router-outlet (activate)=\"onActivate($event)\"></router-outlet>\n    <flowstep-navigation *ngIf=\"flow && flow.steps.length\" [flow]=\"flow\"></flowstep-navigation>\n  ",
            providers: [{
                    provide: FlowData,
                    useClass: FlowDataSubject,
                }]
        }),
        __param(5, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["z" /* Inject */])(FlowData)),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_8__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_9__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_3_rxjs_ReplaySubject__["a" /* ReplaySubject */],
            __WEBPACK_IMPORTED_MODULE_10__services_acl_service__["a" /* AclService */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["k" /* ChangeDetectorRef */]])
    ], FlowLayoutComponent);
    return FlowLayoutComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var FlowStatusColorDirective = (function () {
    function FlowStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    FlowStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = this.flowStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flow.status.values.ERROR ? 'dot-danger' :
            this.flowStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flow.status.values.RUNNING ? 'dot-warning' : 'dot-primary';
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('flow-status-color'),
        __metadata("design:type", String)
    ], FlowStatusColorDirective.prototype, "flowStatusColor", void 0);
    FlowStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[flow-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], FlowStatusColorDirective);
    return FlowStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flow-table-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowTableViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var FlowTableViewComponent = (function () {
    function FlowTableViewComponent(route) {
        this.route = route;
    }
    FlowTableViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.tableId = params['tableId'];
        });
    };
    FlowTableViewComponent.prototype.ngOnDestroy = function () {
        this.routeSubscription.unsubscribe();
    };
    FlowTableViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flow-table-view',
            template: "\n    <app-spinner [visibility]=\"!tableId\"></app-spinner>\n    <table-view-embed [id]=\"tableId\" [adaptiveHeight]=\"{minHeight: 450, pageMargin: 70}\"></table-view-embed>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */]])
    ], FlowTableViewComponent);
    return FlowTableViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-form.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditFormComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var FlowstepEditFormComponent = (function () {
    function FlowstepEditFormComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditFormComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditFormComponent.prototype, "flow", void 0);
    FlowstepEditFormComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-form',
            template: "\n    <ng-container [ngSwitch]=\"form.value.type\"\n      class=\"pt15\">\n      <flowstep-edit-insert *ngSwitchCase=\"config.flowstep.type.values.insert\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-insert>\n      <flowstep-edit-aggregate *ngSwitchCase=\"config.flowstep.type.values.aggregate\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-aggregate>\n      <flowstep-edit-join *ngSwitchCase=\"config.flowstep.type.values.join\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-join>\n      <flowstep-edit-cluster *ngSwitchCase=\"config.flowstep.type.values.cluster\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-cluster>\n      <flowstep-edit-query *ngSwitchCase=\"config.flowstep.type.values.query\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-query>\n      <flowstep-edit-filter *ngSwitchCase=\"config.flowstep.type.values.filter\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-filter>\n      <flowstep-edit-window *ngSwitchCase=\"config.flowstep.type.values.window\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-window>\n      <flowstep-edit-map *ngSwitchCase=\"config.flowstep.type.values.map\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-map>\n      <flowstep-edit-geojoin *ngSwitchCase=\"config.flowstep.type.values.geojoin\"\n        [flow]=\"flow\"\n        [form]=\"form\"></flowstep-edit-geojoin>\n      <div *ngSwitchDefault>\n        <error-indicator message=\"This flow step type in not supported\"></error-indicator>\n      </div>\n    </ng-container>\n  ",
        })
    ], FlowstepEditFormComponent);
    return FlowstepEditFormComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-aggregate.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsAggregateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__tables_tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var FlowstepEditOptionsAggregateComponent = (function (_super) {
    __extends(FlowstepEditOptionsAggregateComponent, _super);
    function FlowstepEditOptionsAggregateComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.inputColumnOptions = [];
        _this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        _this.aggregateConfig = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].flowstep.option.aggregate;
        _this.operators = __WEBPACK_IMPORTED_MODULE_8__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(_this.aggregateConfig.type.list, _this.aggregateConfig.type.labels);
        _this.tableColumnSelectOptionsPipe = new __WEBPACK_IMPORTED_MODULE_4__tables_tables_pipes__["b" /* TableColumnSelectOptionsPipe */]();
        return _this;
    }
    FlowstepEditOptionsAggregateComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) { return _this.getColumns(table); });
        }
    };
    FlowstepEditOptionsAggregateComponent.prototype.onInputTableSelect = function ($event) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[0].setValue($event.id);
        this.getColumns($event.object);
    };
    FlowstepEditOptionsAggregateComponent.prototype.getColumns = function (table) {
        this.inputColumnOptions = this.tableColumnSelectOptionsPipe.transform(table.columns);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsAggregateComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsAggregateComponent.prototype, "flow", void 0);
    FlowstepEditOptionsAggregateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-aggregate',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'New column name'\" [control]=\"form.controls['options']['controls'].name\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'Operator'\" [control]=\"form.controls['options']['controls'].operator\"\n          [options]=\"operators\"></app-select>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'Operand column'\" [control]=\"form.controls['options']['controls'].operandColumn\"\n          [options]=\"inputColumnOptions\"></app-select>\n      </div>\n      <div class=\"col-md-6\">\n        <app-select [multiple]=\"true\" [label]=\"'Group by columns'\"\n          [control]=\"form.controls['options']['controls'].groupByColumns\"\n          [options]=\"inputColumnOptions\"></app-select>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsAggregateComponent);
    return FlowstepEditOptionsAggregateComponent;
}(__WEBPACK_IMPORTED_MODULE_2__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-cluster.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsClusterComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var FlowstepEditOptionsClusterComponent = (function (_super) {
    __extends(FlowstepEditOptionsClusterComponent, _super);
    function FlowstepEditOptionsClusterComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.clusterTypes = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.cluster.type.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.cluster.type.labels);
        return _this;
    }
    FlowstepEditOptionsClusterComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) {
                _this.table = table;
            });
        }
    };
    FlowstepEditOptionsClusterComponent.prototype.onInputTableSelect = function ($event) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[0].setValue($event.id);
        this.table = $event.object;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsClusterComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsClusterComponent.prototype, "flow", void 0);
    FlowstepEditOptionsClusterComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-cluster',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event);\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-select\n          [label]=\"'Type'\"\n          [control]=\"form.controls['options']['controls'].type\"\n          [options]=\"clusterTypes\"\n        ></app-select>\n      </div>\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Groups'\" [type]=\"'number'\" [control]=\"form.controls['options']['controls'].groups\"></app-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Iterations'\" [type]=\"'number'\"\n          [control]=\"form.controls['options']['controls'].iterations\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <app-select [multiple]=\"true\" [label]=\"'Columns'\" [control]=\"form.controls['options']['controls'].columns\"\n          [options]=\"table?.columns | filter : numericFilteringFn  | tableColumnSelectOptions\"></app-select>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsClusterComponent);
    return FlowstepEditOptionsClusterComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-filter.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsFilterComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__tables_tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var FlowstepEditOptionsFilterComponent = (function (_super) {
    __extends(FlowstepEditOptionsFilterComponent, _super);
    function FlowstepEditOptionsFilterComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        _this.filterConfig = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].flowstep.option.filter;
        _this.boolOperators = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(_this.filterConfig.operator.booleanList, _this.filterConfig.operator.labels);
        _this.operators = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(_this.filterConfig.operator.list, _this.filterConfig.operator.labels);
        _this.operatorGroups = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(_this.filterConfig.operatorGroup.list, _this.filterConfig.operatorGroup.labels);
        _this.boolOptions = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(_this.filterConfig.booleanValue.list, _this.filterConfig.booleanValue.labels);
        _this.inputColumnOptions = [];
        _this.tableColumnSelectOptionsPipe = new __WEBPACK_IMPORTED_MODULE_6__tables_tables_pipes__["b" /* TableColumnSelectOptionsPipe */]();
        _this.getColumnValuesLoader = function (search, columnName) {
            if (_this.inputTable) {
                var column = _this.inputTable.columns.find(function (column) { return column.name === columnName; });
                if (column && column.variableType === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.values.CATEGORICAL) {
                    return _this.tables
                        .values(_this.inputTable.id, {
                        column_name: columnName,
                        search: search || '',
                        limit: 20
                    })
                        .map(function (result) { return result.data; });
                }
            }
            return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of([]);
        };
        return _this;
    }
    FlowstepEditOptionsFilterComponent.prototype.getColumnDataType = function (columnName) {
        if (this.inputTable) {
            var column = this.inputTable.columns.find(function (column) { return column.name === columnName; });
            if (column && column.hasOwnProperty('dataType')) {
                return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.controlDataTypes[column.dataType];
            }
        }
        return '';
    };
    FlowstepEditOptionsFilterComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) {
                _this.getColumns(table);
            });
        }
    };
    FlowstepEditOptionsFilterComponent.prototype.newColumnsFormControl = function () {
        var currentFormGroup = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            column: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](this.filterConfig.operator.values.EQ, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            operatorGroup: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](this.filterConfig.operatorGroup.values.AND, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
        });
        this.form.controls['options'].controls['conditions'].push(currentFormGroup);
    };
    FlowstepEditOptionsFilterComponent.prototype.removeColumnsFormControl = function (index) {
        this.form.controls['options'].controls['conditions'].removeAt(index);
    };
    FlowstepEditOptionsFilterComponent.prototype.onInputTableSelect = function (event) {
        this.form.markAsDirty();
        this.getColumns(event.object);
        this.form.controls['input']['controls'][0].setValue(event.object.id);
        var condIndex = this.form.controls['options'].controls['conditions'].length;
        while (condIndex) {
            this.removeColumnsFormControl(--condIndex);
        }
        this.newColumnsFormControl();
    };
    FlowstepEditOptionsFilterComponent.prototype.onConditionColumnSelect = function (formGroup) {
        formGroup.controls['value'].reset();
    };
    FlowstepEditOptionsFilterComponent.prototype.getColumns = function (table) {
        this.inputTable = table;
        this.inputColumnOptions = this.tableColumnSelectOptionsPipe.transform(table.columns);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsFilterComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsFilterComponent.prototype, "flow", void 0);
    FlowstepEditOptionsFilterComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-filter',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6 col-sm-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event);\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div *ngIf=\"form.controls['input']['controls'][0].value\">\n      <div class=\"row brand-margin-bottom\">\n        <div class=\"col-md-4\">\n          <label>Conditions</label>\n          <button *ngIf=\"!form.controls['id'].value\"\n            (click)=\"newColumnsFormControl()\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n        </div>\n      </div>\n      <div class=\"row pt5\"\n        *ngFor=\"let controlGroup of form.controls['options']['controls'].conditions.controls; let i = index;let isLast = last\">\n        <div class=\"col-md-4\">\n          <app-select [label]=\"'Column'\"\n            [control]=\"controlGroup['controls'].column\"\n            [options]=\"inputColumnOptions\"\n            (valueChange)=\"onConditionColumnSelect(controlGroup);\"></app-select>\n        </div>\n        <div class=\"col-md-2\">\n          <app-select [control]=\"controlGroup['controls'].operator\"\n            [options]=\"getColumnDataType(controlGroup['controls'].column.value) === 'boolean' ? boolOperators: operators\"\n            ></app-select>\n        </div>\n        <div *ngIf=\"!form.controls['id'].value\"\n          class=\"col-md-3\"\n          [ngSwitch]=\"getColumnDataType(controlGroup['controls'].column.value)\">\n            <app-select *ngSwitchCase=\"'boolean'\"\n              [label]=\"'Value'\"\n              [control]=\"controlGroup['controls'].value\"\n              [options]=\"boolOptions\"></app-select>\n            <app-input *ngSwitchCase=\"'number'\"\n              [type]=\"'number'\"\n              [label]=\"'Value'\"\n              [control]=\"controlGroup['controls'].value\"></app-input>\n            <app-input-suggestion *ngSwitchCase=\"'text'\"\n              [label]=\"'Select Value'\"\n              [disabled]=\"!controlGroup['controls'].column.value\"\n              [control]=\"controlGroup['controls'].value\"\n              [suggestions]=\"{ fn: getColumnValuesLoader, args: [controlGroup['controls'].column.value] }\"\n              ></app-input-suggestion>\n            <app-input *ngSwitchDefault [disabled]=\"true\"></app-input>\n        </div>\n        <div class=\"col-md-3\" *ngIf=\"form.controls['id'].value\">\n          <app-input\n            [label]=\"'Value'\"\n            [control]=\"controlGroup['controls'].value\"></app-input>\n        </div>\n        <div class=\"col-md-2\">\n           <app-select *ngIf=\"!isLast\"\n             [control]=\"controlGroup['controls'].operatorGroup\"\n             [options]=\"operatorGroups\"\n           ></app-select>\n        </div>\n        <div class=\"col-md-1\">\n          <button *ngIf=\"form.controls['options']['controls'].conditions.controls.length > 1\"\n            [disabled]=\"form.controls['id'].value\"\n            class=\"btn btn-default\" (click)=\"removeColumnsFormControl(i)\"\n            title=\"Remove\">\n              <i class=\"glyphicon glyphicon-remove\"></i>\n          </button>\n        </div>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsFilterComponent);
    return FlowstepEditOptionsFilterComponent;
}(__WEBPACK_IMPORTED_MODULE_4__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-geojoin-condition.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsGeoJoinConditionComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var FlowstepEditOptionsGeoJoinConditionComponent = (function () {
    function FlowstepEditOptionsGeoJoinConditionComponent() {
        this.disabled = false;
        this.geoConfig = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin;
        this.relationTypes = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.geoConfig.relation.list, this.geoConfig.relation.labels);
        this.operators = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.geoConfig.operator.list, this.geoConfig.operator.labels);
        this.summary = '...';
        this.expanded = false;
        this.ready = false;
    }
    FlowstepEditOptionsGeoJoinConditionComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('control' in changes) {
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.controlSubscription = this.control.valueChanges.subscribe(function () {
                _this._updateSummary();
            });
        }
        this.ready = !!(this.leftTable && this.rightTable);
        this._updateSummary();
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype.ngOnDestroy = function () {
        this.controlSubscription && this.controlSubscription.unsubscribe();
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype.setRelationType = function (relationType) {
        if (!this.relationHasParameter(relationType)) {
            this.control.controls['relation'].controls['operator'].setValue('eq');
            this.control.controls['relation'].controls['value'].setValue('true');
        }
        else {
            this.control.controls['relation'].controls['operator'].reset('eq');
            this.control.controls['relation'].controls['value'].reset(null);
        }
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype.toggleExpand = function () {
        if (!this.disabled) {
            this.expanded = !this.expanded;
        }
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype._updateSummary = function () {
        if (!this.ready) {
            this.summary = '-- Please select tables first --';
            return;
        }
        if (!this.disabled && !this.control.valid) {
            this.summary = '-- Please select --';
            return;
        }
        var value = this.control.value;
        var geometryA = this._geometrySummary(value.left);
        var geometryB = this._geometrySummary(value.right);
        var relationArguments = value.relation.relationBase === this.geoConfig.relationBase.values.LEFT
            ? "(" + geometryA + ", " + geometryB + ")"
            : "(" + geometryB + ", " + geometryA + ")";
        this.summary = this.geoConfig.relation.labels[value.relation.relType] + " " + relationArguments;
        if (this.relationHasParameter(value.relation.relType)) {
            this.summary += " " + this.geoConfig.operator.labels[value.relation.operator] + " " + value.relation.value;
        }
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype._geometrySummary = function (value) {
        var args = value.coordinates.map(function (point) {
            return point.lat + ", " + point.lon;
        }).join(', ');
        return this.geoConfig.geometry.labels[value.geoType] + "(" + args + ")";
    };
    FlowstepEditOptionsGeoJoinConditionComponent.prototype.relationHasParameter = function (relationType) {
        return this.geoConfig.relationsWithParameter.indexOf(relationType) >= 0;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], FlowstepEditOptionsGeoJoinConditionComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsGeoJoinConditionComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsGeoJoinConditionComponent.prototype, "leftTable", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsGeoJoinConditionComponent.prototype, "rightTable", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], FlowstepEditOptionsGeoJoinConditionComponent.prototype, "disabled", void 0);
    FlowstepEditOptionsGeoJoinConditionComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-geojoin-condition',
            template: "\n    <div class=\"form-group p0\" [formControlValidator]=\"control\">\n      <div class=\"input-group\" (click)=\"toggleExpand()\" >\n        <label *ngIf=\"!!label\" class=\"input-group-addon input-group-label\" [ngClass]=\"{'active': expanded, 'disabled': !ready || disabled}\"\n          >{{label}}</label>\n        <input type=\"text\" [disabled]=\"!ready || disabled\" [readonly]=\"ready && !disabled\" class=\"form-control\" [ngClass]=\"{'active': expanded, 'has-label': !!label}\" value=\"{{summary}}\"/>\n        <span class=\"input-group-addon\"  [ngClass]=\"{'active': expanded, 'disabled': !ready || disabled}\"\n          ><i class=\"glyphicon\" [ngClass]=\"expanded ? 'glyphicon-triangle-top' : 'glyphicon-triangle-bottom'\"\n            ></i></span>\n      </div>\n      <div class=\"pt5\" [formControlValidatorFeedback]=\"control\"></div>\n    </div>\n    <div  *ngIf=\"ready && expanded\" class=\"panel\" style=\"padding: 15px; border: 1px #0d47a1 solid;\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <flowstep-edit-geojoin-geometry\n            [table]=\"leftTable\"\n            [label]=\"'Geometry #A'\"\n            [control]=\"control.controls['left']\"\n            ></flowstep-edit-geojoin-geometry>\n        </div>\n        <div class=\"col-md-6\">\n          <flowstep-edit-geojoin-geometry\n            [table]=\"rightTable\"\n            [label]=\"'Geometry #B'\"\n            [control]=\"control.controls['right']\"\n            ></flowstep-edit-geojoin-geometry>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <app-select\n            [label]=\"'Relation'\"\n            [control]=\"control.controls['relation']['controls'].relType\" [options]=\"relationTypes\"\n            (valueChange)=\"setRelationType($event)\"\n            ></app-select>\n        </div>\n        <div class=\"col-md-4\">\n          <app-select\n            [label]=\"'Operand #1'\"\n            [control]=\"control.controls['relation']['controls'].relationBase\"\n            [options]=\"[{id: geoConfig.relationBase.values.LEFT, text: 'Geometry A'}, {id: geoConfig.relationBase.values.RIGHT, text: 'Geometry B'}]\"\n            ></app-select>\n        </div>\n        <div class=\"col-md-4\">\n          <app-select\n            [label]=\"'Operand #2'\"\n            [control]=\"control.controls['relation']['controls'].relationBase\"\n            [options]=\"[{id: geoConfig.relationBase.values.LEFT, text: 'Geometry B'}, {id: geoConfig.relationBase.values.RIGHT, text: 'Geometry A'}]\"\n            ></app-select>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"relationHasParameter(control.controls['relation']['controls'].relType.value)\">\n        <div class=\"col-md-4 col-md-offset-4\">\n          <app-select\n            [label]=\"'Operator'\"\n            [control]=\"control.controls['relation']['controls'].operator\" [options]=\"operators\"\n            ></app-select>\n        </div>\n        <div class=\"col-md-4\">\n          <app-input\n            [label]=\"'Value (meters)'\" [type]=\"'number'\"\n            [control]=\"control.controls['relation']['controls'].value\"\n            ></app-input>\n        </div>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], FlowstepEditOptionsGeoJoinConditionComponent);
    return FlowstepEditOptionsGeoJoinConditionComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-geojoin-geometry.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsGeoJoinGeometryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_forms__ = __webpack_require__("../../../../../src/app/utils/forms.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsGeoJoinGeometryComponent = (function () {
    function FlowstepEditOptionsGeoJoinGeometryComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin;
        this.geometryTypes = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.config.geometry.list, this.config.geometry.labels);
        this.summary = '...';
        this.columnOptions = [];
    }
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.control.valueChanges.subscribe(function () { return _this._updateSummary(); });
        this._updateSummary();
    };
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype.ngOnChanges = function (changes) {
        if ('table' in changes) {
            this.columnOptions = (this.table ? this.table.columns : []).map(function (column) {
                return {
                    id: column.name,
                    text: column.displayName
                };
            });
        }
    };
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype.openModal = function () {
        this.modal.show();
    };
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype.setGeometryType = function (geoType) {
        var coordsControls = this.control.controls['coordinates'];
        if (geoType === this.config.geometry.values.POINT) {
            while (coordsControls.length > 1) {
                coordsControls.removeAt(1);
            }
        }
        else if (geoType === this.config.geometry.values.POLYGON) {
            while (coordsControls.length < 3) {
                coordsControls.push(this.newPointControl());
            }
        }
    };
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype._updateSummary = function () {
        if (!this.control.valid) {
            this.summary = '-- Please select --';
            return;
        }
        var value = this.control.value;
        var args = value.coordinates.map(function (point) {
            return point.lat + ", " + point.lon;
        }).join(', ');
        this.summary = this.config.geometry.labels[value.geoType] + "(" + args + ")";
    };
    FlowstepEditOptionsGeoJoinGeometryComponent.prototype.newPointControl = function () {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            lat: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            lon: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], FlowstepEditOptionsGeoJoinGeometryComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_6__utils_forms__["b" /* AppFormGroup */])
    ], FlowstepEditOptionsGeoJoinGeometryComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsGeoJoinGeometryComponent.prototype, "table", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], FlowstepEditOptionsGeoJoinGeometryComponent.prototype, "modal", void 0);
    FlowstepEditOptionsGeoJoinGeometryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-geojoin-geometry',
            template: "\n    <app-input\n      [label]=\"label\"\n      [readonly]=\"true\" [value]=\"summary\"\n      (click)=\"openModal()\"\n    ></app-input>\n    <app-modal #modal [title]=\"label\" [buttons]=\"[{'class': 'btn-apply', 'title': 'OK'}]\" (buttonClick)=\"modal.hide()\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-select\n            [label]=\"'Geometry Type'\"\n            [control]=\"control.controls['geoType']\" [options]=\"geometryTypes\"\n            (valueChange)=\"setGeometryType($event)\"\n          ></app-select>\n        </div>\n      </div>\n      <div *ngIf=\"control.controls['geoType'].value !== config.geometry.values.POINT\" class=\"row brand-margin-bottom\">\n        <div class=\"col-md-10\">\n          <label>Points</label>\n          <button type=\"button\" (click)=\"control.controls['coordinates'].push(newPointControl())\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n        </div>\n      </div>\n      <div class=\"row\"\n        *ngFor=\"let controlGroup of control.controls['coordinates'].controls;let i = index; let isLast = last\">\n        <div [class]=\"control.controls['geoType'].value !== config.geometry.values.POINT ? 'col-md-5' : 'col-md-6'\">\n          <app-select\n            [label]=\"'Latitude'\"\n            [control]=\"controlGroup.controls.lat\" [options]=\"columnOptions\"\n          ></app-select>\n        </div>\n        <div [class]=\"control.controls['geoType'].value !== config.geometry.values.POINT ? 'col-md-5' : 'col-md-6'\">\n          <app-select\n            [label]=\"'Longitude'\"\n            [control]=\"controlGroup.controls.lon\" [options]=\"columnOptions\"\n          ></app-select>\n        </div>\n        <div class=\"col-md-2 text-right\" *ngIf=\"control.controls['geoType'].value !== config.geometry.values.POINT\">\n          <button type=\"button\" (click)=\"control.controls['coordinates'].removeAt(i)\"\n            [disabled]=\"control.controls['coordinates'].length <= 3\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-remove\"></i></button>\n        </div>\n      </div>\n    </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], FlowstepEditOptionsGeoJoinGeometryComponent);
    return FlowstepEditOptionsGeoJoinGeometryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-geojoin.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsGeoJoinComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsGeoJoinComponent = (function (_super) {
    __extends(FlowstepEditOptionsGeoJoinComponent, _super);
    function FlowstepEditOptionsGeoJoinComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.tablesList = [null, null];
        return _this;
    }
    FlowstepEditOptionsGeoJoinComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        this.form.controls['input'].controls.forEach(function (control, i) {
            if (control.value) {
                _this.tables.get(control.value).subscribe(function (table) { return _this.updateColumnList(table, i); });
            }
        });
    };
    FlowstepEditOptionsGeoJoinComponent.prototype.onInputTableSelect = function ($event, index) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[index].setValue($event.id);
        this.updateColumnList($event.object, index);
    };
    FlowstepEditOptionsGeoJoinComponent.prototype.updateColumnList = function (table, index) {
        this.tablesList[index] = table;
        // force children to update
        this.tablesList = this.tablesList.slice();
    };
    FlowstepEditOptionsGeoJoinComponent.prototype.newJoinConditionFormControl = function () {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            left: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                geoType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.geometry.values.POINT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                coordinates: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([
                    new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                        lat: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        lon: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    })
                ], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
            }),
            right: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                geoType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.geometry.values.POINT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                coordinates: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([
                    new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                        lat: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        lon: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    })
                ], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
            }),
            relation: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                relType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.relation.values.ST_DISTANCE, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.operator.values.LT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                relationBase: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.relationBase.values.LEFT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            }),
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsGeoJoinComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsGeoJoinComponent.prototype, "flow", void 0);
    FlowstepEditOptionsGeoJoinComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-geojoin',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table #A'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event, 0)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table #B'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][1].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event, 1)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Left Table Alias'\" [control]=\"form.controls['options']['controls'].leftPrefix\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n         <app-input [label]=\"'Right Table Alias'\" [control]=\"form.controls['options']['controls'].rightPrefix\"></app-input>\n      </div>\n    </div>\n\n    <div class=\"row brand-margin-bottom\">\n      <div class=\"col-md-6\">\n          <label>Join Conditions</label>\n          <button *ngIf=\"!form.controls['id'].value\"\n            (click)=\"form.controls['options']['controls'].joinConditions.push(newJoinConditionFormControl())\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n      </div>\n    </div>\n    <div *ngFor=\"let joinCondition of form.controls['options']['controls'].joinConditions.controls;let i = index\"\n      class=\"row\">\n      <div class=\"col-md-10 col-lg-11\">\n      <flowstep-edit-geojoin-condition\n        [leftTable]=\"tablesList[0]\" [rightTable]=\"tablesList[1]\"\n        [control]=\"joinCondition\"\n        [disabled]=\"!!form.controls['id'].value\"\n        ></flowstep-edit-geojoin-condition>\n      </div>\n      <div class=\"col-md-2 col-lg-1\" *ngIf=\"!form.controls['id'].value\">\n        <button type=\"button\" [disabled]=\"form.controls['options']['controls'].joinConditions.controls.length <= 1\"\n          (click)=\"form.controls['options']['controls'].joinConditions.removeAt(i)\"\n          class=\"btn btn-default\"><i class=\"glyphicon glyphicon-remove\"></i></button>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_6__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsGeoJoinComponent);
    return FlowstepEditOptionsGeoJoinComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-insert.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsInsertComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsInsertComponent = (function (_super) {
    __extends(FlowstepEditOptionsInsertComponent, _super);
    function FlowstepEditOptionsInsertComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        return _this;
    }
    FlowstepEditOptionsInsertComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) {
                _this.inputTable = table;
            });
        }
    };
    FlowstepEditOptionsInsertComponent.prototype.onInputTableSelect = function ($event) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[0].setValue($event.id);
        this.inputTable = $event.object;
        this.form.controls['options']['controls'].table.setValue($event.object);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsInsertComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsInsertComponent.prototype, "flow", void 0);
    FlowstepEditOptionsInsertComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-insert',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n      <div class=\"col-md-6 pull-right\">\n        <div class=\"form-group brand-control p0\" [formControlValidator]=\"form.controls['options']['controls'].formula\"\n          [ngClass]=\"{'disabled': form.controls['options']['controls'].formula.disabled}\">\n          <label class=\"input-group-label\" for=\"formula\"\n            [ngClass]=\"{'disabled': form.controls['id'].value}\">Formula</label>\n          <span class=\"pull-right elegant-icons\" [ngClass]=\"{'disabled': form.controls['id'].value}\">&#xe00a;</span>\n          <textarea [formControl]=\"form.controls['options']['controls'].formula\"\n            id=\"formula\"\n            code=\"{{ config.code.mode.EXCEL }}\"\n            [codeReadonly]=\"form.controls['id'].value\"\n            [codeTables]=\"[inputTable]\"\n            [field]=\"form.controls['options']['controls'].formula\"\n            [placeholder]=\"form.controls['input']['controls'][0].value ? 'ex. ExampleInput' : 'Choose table first'\"\n          ></textarea>\n        </div>\n      </div>\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'New Column Name'\" [disabled]=\"form.controls['id'].value\"\n          [control]=\"form.controls['options']['controls'].name\"></app-input>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsInsertComponent);
    return FlowstepEditOptionsInsertComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-join.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsJoinComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tables_tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var FlowstepEditOptionsJoinComponent = (function (_super) {
    __extends(FlowstepEditOptionsJoinComponent, _super);
    function FlowstepEditOptionsJoinComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.flatColumnOptions = [null, null];
        _this.joinTypes = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.join.type.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.join.type.labels);
        _this.tableColumnSelectOptionsPipe = new __WEBPACK_IMPORTED_MODULE_5__tables_tables_pipes__["b" /* TableColumnSelectOptionsPipe */]();
        return _this;
    }
    FlowstepEditOptionsJoinComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        this.form.controls['input'].controls.forEach(function (control, i) {
            if (control.value) {
                _this.tables.get(control.value).subscribe(function (table) { return _this.updateColumnList(table, i); });
            }
        });
    };
    FlowstepEditOptionsJoinComponent.prototype.onInputTableSelect = function ($event, index) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[index].setValue($event.id);
        this.updateColumnList($event.object, index);
    };
    FlowstepEditOptionsJoinComponent.prototype.updateColumnList = function (table, index) {
        this.flatColumnOptions[index] = this.tableColumnSelectOptionsPipe.transform(table.columns);
    };
    FlowstepEditOptionsJoinComponent.prototype.newColumnsFormControl = function () {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            from: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            to: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            type: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.join.type.values.NORMAL),
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsJoinComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsJoinComponent.prototype, "flow", void 0);
    FlowstepEditOptionsJoinComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-join',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table #A'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event, 0)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table #B'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][1].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event, 1)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Left Table Alias'\" [control]=\"form.controls['options']['controls'].leftPrefix\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n         <app-input [label]=\"'Right Table Alias'\" [control]=\"form.controls['options']['controls'].rightPrefix\"></app-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'Values Matching'\" [control]=\"form.controls['options']['controls'].type\"\n          [options]=\"joinTypes\"></app-select>\n      </div>\n    </div>\n    <div class=\"row\"\n      *ngFor=\"let controlGroup of form.controls['options']['controls'].columns.controls; let i = index\">\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'From'\" [control]=\"controlGroup.controls.from\"\n          [disabled]=\"!form.controls['input']['controls'][0].value || !form.controls['input']['controls'][1].value\"\n          [options]=\"flatColumnOptions[0]\"></app-select>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"row\">\n          <div class=\"col-md-8\">\n            <app-select [label]=\"'To'\" [control]=\"controlGroup.controls.to\"\n              [disabled]=\"!form.controls['input']['controls'][0].value || !form.controls['input']['controls'][1].value\"\n              [options]=\"flatColumnOptions[1]\"></app-select>\n          </div>\n          <div class=\"col-md-4\" *ngIf=\"!form.controls['id'].value\">\n            <button *ngIf=\"i < form.controls['options']['controls'].columns.controls.length - 1\"\n              (click)=\"form.controls['options']['controls'].columns.removeAt(i)\"\n              class=\"btn btn-default\"><i class=\"glyphicon glyphicon-remove\"></i></button>\n            <button *ngIf=\"i === form.controls['options']['controls'].columns.controls.length - 1\"\n              (click)=\"form.controls['options']['controls'].columns.push(newColumnsFormControl())\"\n              class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsJoinComponent);
    return FlowstepEditOptionsJoinComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-map.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsMapComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsMapComponent = (function (_super) {
    __extends(FlowstepEditOptionsMapComponent, _super);
    function FlowstepEditOptionsMapComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.inputColumnOptions = [];
        _this.collapseMappings = false;
        _this.columnUsed = {};
        return _this;
    }
    FlowstepEditOptionsMapComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        this.additionalFormSubscription && this.additionalFormSubscription.unsubscribe();
        this.additionalFormSubscription = this.form.controls['options'].valueChanges.subscribe(function () {
            return _this._updateActiveColumns();
        });
        this._updateActiveColumns();
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) {
                _this.setInputColumnOptions(table);
            });
        }
    };
    FlowstepEditOptionsMapComponent.prototype.ngOnDestroy = function () {
        this.additionalFormSubscription && this.additionalFormSubscription.unsubscribe();
    };
    FlowstepEditOptionsMapComponent.prototype._updateActiveColumns = function () {
        var _this = this;
        this.columnUsed = {};
        this.form.controls['options'].controls['changes'].value
            .filter(function (_) { return !!_.value; })
            .forEach(function (_) {
            _this.columnUsed[_.value] = true;
        });
    };
    FlowstepEditOptionsMapComponent.prototype._addNewColumnFormControl = function (column) {
        if (column === void 0) { column = null; }
        this.form.controls['options'].controls['changes'].push(new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            'value': new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column ? column.name : null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            'name': new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column ? column.displayName : null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
        }));
    };
    FlowstepEditOptionsMapComponent.prototype.onInputTableSelect = function ($event) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[0].setValue($event.id);
        this._inputTableChanged($event.object);
    };
    FlowstepEditOptionsMapComponent.prototype.setInputColumnOptions = function (table) {
        this.inputColumnOptions = table.columns.map(function (column) {
            return {
                id: column.name,
                text: column.displayName
            };
        });
    };
    FlowstepEditOptionsMapComponent.prototype._inputTableChanged = function (table) {
        var _this = this;
        if (this.form.controls['id'].value) {
            return;
        }
        var changesControl = this.form.controls['options'].controls['changes'];
        while (changesControl.length) {
            changesControl.removeAt(0);
        }
        if (table) {
            this.inputColumnOptions = table.columns.map(function (column) {
                _this._addNewColumnFormControl(column);
                return {
                    id: column.name,
                    text: column.displayName
                };
            });
        }
        else {
            this.inputColumnOptions = [];
            this._addNewColumnFormControl();
        }
    };
    FlowstepEditOptionsMapComponent.prototype.setColumn = function (name, controlGroup) {
        var control = controlGroup.controls['name'];
        control.setValue(name);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsMapComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsMapComponent.prototype, "flow", void 0);
    FlowstepEditOptionsMapComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-map',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6 col-sm-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event);\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n    </div>\n    <div class=\"row brand-margin-bottom\">\n      <div class=\"col-xs-12\">\n          <label>Result Columns</label>\n          <button *ngIf=\"!form.controls['id'].value\"\n            (click)=\"collapseMappings = false; _addNewColumnFormControl()\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n          <button class=\"btn btn-default  pull-right\"\n            (click)=\"collapseMappings = !collapseMappings\"\n            [title]=\"collapseMappings ? 'Show mappings' : 'Hide mappings'\">\n            <i class=\"glyphicon\" [ngClass]=\"collapseMappings ? 'glyphicon-eye-open' : 'glyphicon-eye-close'\"></i>\n          </button>\n      </div>\n    </div>\n    <div [hidden]=\"collapseMappings\" class=\"row\" *ngFor=\"let controlGroup of form.controls['options']['controls'].changes.controls;let i = index\">\n      <div class=\"col-md-6\">\n        <app-input *ngIf=\"form.controls['id'].value\" [label]=\"'Column Name'\" [control]=\"controlGroup.controls.value\" [disabled]=\"true\">\n        </app-input>\n        <app-select *ngIf=\"!form.controls['id'].value\" [label]=\"'Column Name'\" [control]=\"controlGroup.controls.value\"\n          (valueChange)=\"setColumn($event, controlGroup)\"\n          [options]=\"inputColumnOptions\"></app-select>\n      </div>\n      <div class=\"col-xs-10 col-md-5\">\n        <app-input [label]=\"'New Column Name'\"\n          [control]=\"controlGroup.controls.name\"\n          [disabled]=\"form.controls['id'].value || !controlGroup.controls.value.value\">\n        </app-input>\n      </div>\n      <div class=\"col-xs-2 col-md-1\" *ngIf=\"!form.controls['id'].value\">\n        <a (click)=\"form.controls['options']['controls'].changes.removeAt(i)\"\n          class=\"btn btn-default pull-right\"><i class=\"glyphicon glyphicon-remove\"></i></a>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_6__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsMapComponent);
    return FlowstepEditOptionsMapComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-query.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsQueryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsQueryComponent = (function (_super) {
    __extends(FlowstepEditOptionsQueryComponent, _super);
    function FlowstepEditOptionsQueryComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.filledTables = [];
        _this.codeTables = [];
        _this.counter = 0;
        return _this;
    }
    FlowstepEditOptionsQueryComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        this.additionalFormSubscription && this.additionalFormSubscription.unsubscribe();
        if (this.form.value.input && this.form.value.input.length) {
            this.tables.getMany(this.form.value.input.filter(function (_) { return _; })).subscribe(function (manyTables) {
                _this.codeTables = manyTables;
                _this._updateCodeTablesForCompletion();
            });
        }
        this.additionalFormSubscription = this.form.controls['options'].controls['inputAliases'].valueChanges.subscribe(function () {
            _this._updateCodeTablesForCompletion();
        });
    };
    FlowstepEditOptionsQueryComponent.prototype.ngOnDestroy = function () {
        this.additionalFormSubscription && this.additionalFormSubscription.unsubscribe();
    };
    FlowstepEditOptionsQueryComponent.prototype.onTableSelect = function ($event, i) {
        this.form.markAsDirty();
        this.form.controls['input']['controls'][i].setValue($event.id);
        this.setCodeTable(i, $event);
        if (i === 0) {
            this.generateSql();
        }
    };
    FlowstepEditOptionsQueryComponent.prototype.addControls = function () {
        this.form.controls['input'].push(this.newTableAlias());
        this.counter++;
        this.form.controls['options'].controls['inputAliases'].push(this.newTableAlias('Table' + (this.counter + 1)));
        this.codeTables.push(null);
        this._updateCodeTablesForCompletion();
    };
    FlowstepEditOptionsQueryComponent.prototype.removeControls = function (i) {
        this.form.controls['input'].removeAt(i);
        this.form.controls['options'].controls['inputAliases'].removeAt(i);
        this.codeTables.splice(i, 1);
        this._updateCodeTablesForCompletion();
    };
    FlowstepEditOptionsQueryComponent.prototype.generateSql = function () {
        if (!this.form.controls['options']['controls'].expression.value) {
            var tableAlias = this.form.controls['options'].controls['inputAliases'].controls[0].value;
            if (tableAlias) {
                this.form.controls['options']['controls'].expression.setValue("SELECT * FROM \"" + tableAlias + "\"");
            }
        }
    };
    FlowstepEditOptionsQueryComponent.prototype._updateCodeTablesForCompletion = function () {
        var _this = this;
        this.filledTables = this.codeTables.filter(function (_) { return _; }).map(function (table, i) {
            return Object.assign({}, table, {
                columns: table.columns.map(function (column) {
                    return {
                        name: _this.form.controls['options'].controls['inputAliases'].controls[i].value + '.' + column.name,
                        displayName: column.displayName,
                        dataType: column.dataType,
                        variableType: column.variableType,
                        align: column.align
                    };
                })
            });
        });
    };
    FlowstepEditOptionsQueryComponent.prototype.setCodeTable = function (i, event) {
        this.codeTables[i] = event.object;
        this._updateCodeTablesForCompletion();
    };
    FlowstepEditOptionsQueryComponent.prototype.newTableAlias = function (name) {
        if (name === void 0) { name = null; }
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](name, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsQueryComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsQueryComponent.prototype, "flow", void 0);
    FlowstepEditOptionsQueryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-query',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"form-group brand-control p0\" [formControlValidator]=\"form.controls['options']['controls'].expression\"\n            [ngClass]=\"{'disabled': form.controls['options']['controls'].expression.disabled}\">\n            <label class=\"input-group-label\" for=\"formula\"\n              [ngClass]=\"{'disabled': form.controls['id'].value}\">Query</label>\n            <span class=\"pull-right elegant-icons\" [ngClass]=\"{'disabled': form.controls['id'].value}\">&#xe00a;</span>\n            <textarea [formControl]=\"form.controls['options']['controls'].expression\"\n              id=\"Query\"\n              code=\"{{ config.code.mode.SQL }}\"\n              [codeReadonly]=\"form.controls['id'].value\"\n              [codeTables]=\"filledTables\"\n              [field]=\"form.controls['options']['controls'].expression\"\n              class=\"form-control input-sm\"\n              [placeholder]=\"form.controls['input']['controls'][0].value ? 'ex. ExampleInput' : 'Choose table first'\"></textarea>\n          </div>\n      </div>\n    </div>\n    <div class=\"row brand-margin-bottom\">\n      <div class=\"col-md-12\">\n        <label>Select Input Tables and set Aliases</label>\n        <button *ngIf=\"!form.controls['id'].value\" (click)=\"addControls()\" class=\"btn btn-default\">\n          <i class=\"glyphicon glyphicon-plus\"></i>\n        </button>\n      </div>\n    </div>\n    <div class=\"row\" *ngFor=\"let control of form.controls['options']['controls'].inputAliases.controls; let i = index\">\n      <div class=\"col-md-6\">\n        <library-selector\n          [disabled]=\"form.controls['id'].value\"\n          [inputLabel]=\"'Table'\"\n          [flowId]=\"flow?.id\"\n          [value]=\"{id: form.controls['input']['controls'][i].value, entity: config.asset.values.TABLE}\"\n          (valueChange)=\"onTableSelect($event,i)\"\n          [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n      <div class=\"col-md-5\">\n        <app-input *ngIf=\"i === 0\" [label]=\"'Table Alias'\" [control]=\"control\" (blur)=\"generateSql()\"></app-input>\n        <app-input *ngIf=\"i !== 0\" [label]=\"'Table Alias'\" [control]=\"control\"></app-input>\n      </div>\n      <div class=\"col-md-1\">\n        <button *ngIf=\"!form.controls['id'].value && i < form.controls['input']['controls'].length && form.controls['input']['controls'].length > 1\"\n          (click)=\"removeControls(i)\" class=\"btn btn-default\">\n            <i class=\"glyphicon glyphicon-remove\"></i>\n        </button>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_4__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsQueryComponent);
    return FlowstepEditOptionsQueryComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o-window.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsWindowComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepEditOptionsWindowComponent = (function (_super) {
    __extends(FlowstepEditOptionsWindowComponent, _super);
    function FlowstepEditOptionsWindowComponent(flows, tables) {
        var _this = _super.call(this, flows) || this;
        _this.tables = tables;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.isDescList = [
            { id: 'false', text: 'Asc' },
            { id: 'true', text: 'Desc' }
        ];
        _this.helpText = "<div class=\"tooltip-inner-html\">The window frame is defined as <b>between x preceding and y following</b>.<br />\n  Putting <b>0</b> in either of the fields means <b>current row</b> for the respective bound</div>";
        return _this;
    }
    FlowstepEditOptionsWindowComponent.prototype.ngOnChanges = function () {
        var _this = this;
        _super.prototype.ngOnChanges.call(this);
        var tableId = this.form.controls['input'].controls[0].value;
        if (tableId) {
            this.tables.get(tableId).subscribe(function (table) { return _this.table = table; });
        }
    };
    FlowstepEditOptionsWindowComponent.prototype.changeIsDesc = function (value) {
        this.form.controls['options'].controls['isDesc'].setValue(value === 'true');
    };
    FlowstepEditOptionsWindowComponent.prototype.onInputTableSelect = function ($event) {
        this.form.markAsDirty();
        this.form.controls['input'].controls[0].setValue($event.id);
        this.table = $event.object;
    };
    FlowstepEditOptionsWindowComponent.prototype._isParameterAvailable = function (parameterName) {
        var currentOperator = this.form.controls['options'].controls['aggregator'].value;
        return (this.config.flowstep.option.window.aggregator.options[currentOperator] || []).indexOf(parameterName) > -1;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsWindowComponent.prototype, "form", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepEditOptionsWindowComponent.prototype, "flow", void 0);
    FlowstepEditOptionsWindowComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit-window',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n         <library-selector\n           *ngIf=\"!form.controls['id'].value\"\n           [inputLabel]=\"'Input Table'\"\n           [flowId]=\"flow?.id\"\n           [value]=\"{id: form.controls['input']['controls'][0].value, entity: config.asset.values.TABLE}\"\n           (valueChange)=\"onInputTableSelect($event)\"\n           [available]=\"[config.asset.values.TABLE]\"></library-selector>\n      </div>\n      <!--New Column Name-->\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'New Column Name'\"\n          [control]=\"form.controls['options']['controls'].newColName\"></app-input>\n      </div>\n    </div>\n    <div class=\"row\">\n      <!--Operator-->\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'Operator'\" [control]=\"form.controls['options']['controls'].aggregator\"\n          [options]=\"config.flowstep.option.window.aggregator.list\"></app-select>\n      </div>\n      <!--Column-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('aggregatorArg')\">\n        <app-select [label]=\"'Argument Column'\"\n          [control]=\"form.controls['options']['controls'].aggregatorArg\"\n          [options]=\"table?.columns | filter : numericFilteringFn | tableColumnSelectOptions\"></app-select>\n      </div>\n      <!--Partition By-->\n      <div class=\"col-md-6\">\n          <app-select [multiple]=\"true\" [label]=\"'Partition by'\" [control]=\"form.controls['options']['controls'].partitionBy\"\n            [options]=\"table?.columns | tableColumnSelectOptions\"></app-select>\n      </div>\n    </div>\n    <app-form-group *ngIf=\"_isParameterAvailable('windowUpperBound')\"\n      [title]=\"'Window Bounds'\"\n      [helpText]=\"helpText\"\n    >\n      <div class=\"row\">\n        <!-- Window Lower Bound -->\n        <div class=\"col-md-6\">\n          <app-input [type]=\"'number'\"\n            [label]=\"'Preceding'\"\n            [control]=\"form.controls['options']['controls'].windowLowerBound\"\n            [placeholder]=\"'Unbounded'\"></app-input>\n        </div>\n        <!-- Window Upper Bound -->\n        <div class=\"col-md-6\">\n          <app-input [type]=\"'number'\"\n            [label]=\"'Following'\"\n            [control]=\"form.controls['options']['controls'].windowUpperBound\"\n            [placeholder]=\"'Unbounded'\"></app-input>\n        </div>\n      </div>\n    </app-form-group>\n    <div class=\"row\">\n      <!--ignoreNulls-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('ignoreNulls')\">\n        <app-check [type]=\"'radio'\" [label]=\"'Nulls Ignore'\"\n          (checkedChange)=\"form.controls['options']['controls'].respectNulls.setValue(false)\"\n          [value]=\"true\"\n          [control]=\"form.controls['options']['controls'].ignoreNulls\"></app-check>\n      </div>\n      <!--respectNulls-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('respectNulls')\">\n        <app-check [type]=\"'radio'\" [label]=\"'Nulls Respect'\"\n          (checkedChange)=\"form.controls['options']['controls'].ignoreNulls.setValue(false)\"\n          [value]=\"true\"\n          [control]=\"form.controls['options']['controls'].respectNulls\"></app-check>\n      </div>\n    </div>\n    <div class=\"row\" *ngIf=\"_isParameterAvailable('orderBy') || _isParameterAvailable('withinGroupExpression')\">\n      <!--Order By-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('orderBy')\">\n        <app-select [multiple]=\"true\" [label]=\"'Order By'\" [control]=\"form.controls['options']['controls'].orderBy\"\n            [options]=\"table?.columns | tableColumnSelectOptions\"></app-select>\n      </div>\n      <!--withinGroupExpression-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('withinGroupExpression')\">\n        <app-select [multiple]=\"true\" [label]=\"'Within Group'\"\n          [control]=\"form.controls['options']['controls'].withinGroupExpression\"\n          [options]=\"table?.columns | tableColumnSelectOptions\"></app-select>\n      </div>\n      <!--isDesc-->\n      <div class=\"col-md-6\">\n        <app-select [label]=\"'Asc/Desc'\"\n          [value]=\"form.controls['options']['controls'].isDesc.value === true ? 'true': 'false'\"\n          [disabled]=\"form.controls['options']['controls'].isDesc.disabled\"\n          (valueChange)=\"changeIsDesc($event)\"\n          [options]=\"isDescList\"></app-select>\n      </div>\n    </div>\n    <div class=\"row\">\n      <!--Offset-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('offset')\">\n        <app-input [label]=\"'Offset'\" [control]=\"form.controls['options']['controls'].offset\" [type]=\"'number'\"></app-input>\n      </div>\n      <!--ntileGroupsCount-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('ntileGroupsCount')\">\n        <app-input [label]=\"'Groups count'\" [control]=\"form.controls['options']['controls'].ntileGroupsCount\"></app-input>\n      </div>\n      <!--percentile-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('percentile')\">\n        <app-input [type]=\"'number'\"\n           [label]=\"'Percentile Value'\"\n           [step]=\"'any'\"\n           [control]=\"form.controls['options']['controls'].percentile\"></app-input>\n      </div>\n      <!--listaggDelimiter-->\n      <div class=\"col-md-6\" *ngIf=\"_isParameterAvailable('listaggDelimiter')\">\n        <app-input [label]=\"'Delimiter'\" [control]=\"form.controls['options']['controls'].listaggDelimiter\"></app-input>\n      </div>\n    </div>\n    <flowstep-options-pass-columns\n      [control]=\"form.controls['options']['controls'].passColumns\"\n      [tableIds]=\"form.controls['input'].value\"\n      [readOnly]=\"!!form.controls['id'].value\"\n    ></flowstep-options-pass-columns>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_4__services_table_service__["a" /* TableService */]])
    ], FlowstepEditOptionsWindowComponent);
    return FlowstepEditOptionsWindowComponent;
}(__WEBPACK_IMPORTED_MODULE_3__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */]));



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit-o.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var FlowstepEditOptionsComponent = (function () {
    function FlowstepEditOptionsComponent(flows) {
        this.flows = flows;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
    }
    FlowstepEditOptionsComponent.prototype.ngOnChanges = function () {
        this._enableForm(this.form);
    };
    FlowstepEditOptionsComponent.prototype.numericFilteringFn = function (column) {
        return __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].table.column.dataType.numericTypes.includes(column.dataType);
    };
    FlowstepEditOptionsComponent.prototype._enableForm = function (form) {
        var idControl = this.form.controls['id'];
        form.controls['input'].controls.forEach(function (ctrl) {
            if (ctrl) {
                (idControl.value ? ctrl.disable() : ctrl.enable());
            }
        });
        // @todo: isn' there a proper way to make a for by elements?
        Object.keys(form.controls['options'].controls).forEach(function (ctrlName) {
            var ctrl = form.controls['options'].get(ctrlName);
            if (ctrl) {
                if (idControl.value) {
                    ctrl.disable();
                }
                else {
                    ctrl.enable();
                }
            }
        });
    };
    FlowstepEditOptionsComponent.prepareFlowstepForm = function (type, name) {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            id: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
            type: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](type, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](name || '', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            input: FlowstepEditOptionsComponent.getFlowStepInputForm(type),
            output: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            options: FlowstepEditOptionsComponent.getFlowStepOptionsForm(type),
        });
    };
    FlowstepEditOptionsComponent.getFlowStepInputForm = function (type) {
        switch (type) {
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.join:
            case __WEBPACK_IMPORTED_MODULE_4__interfaces_flow_interface__["c" /* IFlowstep */].Type.geojoin:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required), new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)]);
            default:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)]);
        }
    };
    FlowstepEditOptionsComponent.getFlowStepOptionsForm = function (type) {
        switch (type) {
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.aggregate:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    operandColumn: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    groupByColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.cluster:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    type: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.cluster.type.values.K_MEANS, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    groups: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('1', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required])),
                    iterations: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('1', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required])),
                    columns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.join:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    type: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.join.type.values.NORMAL),
                    leftPrefix: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('l_alias', __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].notEqual('options.rightPrefix', 'Right Table Alias')),
                    rightPrefix: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('r_alias', __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].notEqual('options.leftPrefix', 'Left Table Alias')),
                    columns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            from: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            to: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        })]),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.filter:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    conditions: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            column: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.filter.operator.values.LT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            operatorGroup: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.filter.operatorGroup.values.AND, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                        })]),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.insert:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    formula: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    table: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
            // case config.flowstep.type.values.MAP: //@todo
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.window:
                var aggregatorControl_1 = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.window.aggregator.list[0], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
                var ifControlIsAvailable = function (controlName, validator) {
                    return function (control) {
                        var availableOptions = (__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.window.aggregator.options[aggregatorControl_1.value] || []);
                        return (availableOptions.indexOf(controlName) > -1)
                            ? validator(control)
                            : null;
                    };
                };
                var ifAggregatorIs = function (aggregatorNames, validator) {
                    return function (control) {
                        return (aggregatorNames.indexOf(aggregatorControl_1.value) >= 0)
                            ? validator(control)
                            : null;
                    };
                };
                var formGroup_1 = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    aggregator: aggregatorControl_1,
                    newColName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    aggregatorArg: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, ifControlIsAvailable('aggregatorArg', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)),
                    percentile: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, ifControlIsAvailable('percentile', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([
                        __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required,
                        __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].float,
                        __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].min(0),
                        __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].max(1),
                    ]))),
                    orderBy: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([]),
                    partitionBy: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([]),
                    windowLowerBound: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number),
                    windowUpperBound: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number),
                    isDesc: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
                    withinGroupExpression: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], [
                        ifAggregatorIs([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.window.aggregator.values.PERCENTILE_CONT, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.window.aggregator.values.PERCENTILE_DISC], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([
                            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required,
                            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1),
                            __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].maxLength(1),
                        ])),
                    ]),
                    listaggDelimiter: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](''),
                    ntileGroupsCount: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, ifControlIsAvailable('ntileGroupsCount', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number]))),
                    offset: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('1', [
                        ifControlIsAvailable('offset', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([
                            __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number,
                            __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].min(0)
                        ])),
                        ifAggregatorIs([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.window.aggregator.values.NTH_VALUE], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].compose([
                            __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].number,
                            __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].min(1)
                        ])),
                    ]),
                    ignoreNulls: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
                    respectNulls: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](true),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
                aggregatorControl_1.valueChanges.subscribe(function () {
                    Object.keys(formGroup_1.controls).forEach(function (key) {
                        key === 'aggregator' || formGroup_1.controls[key].updateValueAndValidity();
                    });
                });
                return formGroup_1;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.query:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    expression: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    inputAliases: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('Table1', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)]),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.map:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    changes: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
                        })], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
                    onlyRenamed: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](true, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                });
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.geojoin:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    leftPrefix: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('l_alias', __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].notEqual('options.rightPrefix', 'Right Table Alias')),
                    rightPrefix: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('r_alias', __WEBPACK_IMPORTED_MODULE_3__utils_validators__["a" /* AppValidators */].notEqual('options.leftPrefix', 'Left Table Alias')),
                    joinConditions: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([
                        new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            left: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                                geoType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.geometry.values.POINT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                coordinates: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([
                                    new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                                        lat: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                        lon: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                    })
                                ], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
                            }),
                            right: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                                geoType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.geometry.values.POINT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                coordinates: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([
                                    new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                                        lat: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                        lon: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                    })
                                ], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
                            }),
                            relation: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                                relType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.relation.values.ST_DISTANCE, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.operator.values.LT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                                relationBase: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.geojoin.relationBase.values.LEFT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                            }),
                        }),
                    ], __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)),
                    passColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
                        })]),
                });
            default:
                return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({});
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */])
    ], FlowstepEditOptionsComponent.prototype, "form", void 0);
    return FlowstepEditOptionsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-edit.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__flowstep_edit_o_component__ = __webpack_require__("../../../../../src/app/compose/flowstep-edit-o.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__flow_layout_component__ = __webpack_require__("../../../../../src/app/compose/flow-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_flowstep_service__ = __webpack_require__("../../../../../src/app/services/flowstep.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__services_storage_service__ = __webpack_require__("../../../../../src/app/services/storage.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var __param = (this && this.__param) || function (paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
};














var FlowstepEditComponent = (function () {
    function FlowstepEditComponent(flowData, route, router, flows, flowsteps, processes, acl, storage) {
        this.flowData = flowData;
        this.route = route;
        this.router = router;
        this.flows = flows;
        this.flowsteps = flowsteps;
        this.processes = processes;
        this.acl = acl;
        this.storage = storage;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.activeTableTab = 0;
        this.oldTemplate = null;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
    }
    FlowstepEditComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.flowSubscription = this.flowData.subscribe(function (flow) {
            _this.flow = flow;
            _this.routeSubscription && _this.routeSubscription.unsubscribe();
            if (!flow)
                return;
            _this.routeSubscription = _this.route.params.subscribe(function (params) {
                _this.paramId = params['stepId'];
                var flowstep = _this.paramId
                    ? _this.flow.steps.find(function (_) { return _.id === _this.paramId; })
                    : null;
                _this.paramType = flowstep ? flowstep['type'] : params['type'];
                if (!_this.paramId && !_this.paramType && _this.flow.steps.length) {
                    _this.router.navigate(['/desk', 'flows', _this.flow.id, 'steps', _this.flow.steps[0].id]);
                }
                else {
                    _this.createFlowstepForm(flowstep);
                    _this.activeTableTab = _this.paramId ? -1 : 0;
                    _this.oldTemplate = _this.storage.get(_this.paramType);
                    if (_this.oldTemplate && !_this.paramId && _this.paramType) {
                        _this.modal.show();
                    }
                }
            });
        });
    };
    FlowstepEditComponent.prototype.ngOnDestroy = function () {
        this.flowSubscription && this.flowSubscription.unsubscribe();
        this.routeSubscription && this.routeSubscription.unsubscribe();
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    FlowstepEditComponent.prototype.onConfirmation = function (button) {
        if (button.title === 'Yes') {
            this.createFlowstepForm(this.oldTemplate);
        }
        else {
            this.storage.remove(this.paramType);
        }
        this.modal.hide();
    };
    FlowstepEditComponent.prototype.submit = function () {
        var _this = this;
        this.storage.remove(this.flowstepEditForm.value['type']);
        // experimental / skip server side validation for update
        if (this.flowstepEditForm.value['id']) {
            return this.update();
        }
        if (this.flowstepEditForm.value['type'] === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.type.values.insert) {
            this._savingObserver.observe(this.flowsteps.sqlParsingInsert({
                expression: this.flowstepEditForm.value['options']['formula'],
                dataSetId: (this.flowstepEditForm.value['options']['table'] || { id: null }).id,
                newColumnName: this.flowstepEditForm.value['options']['name'],
            })).subscribe(function () {
                _this.update();
            });
        }
        else {
            this.update();
        }
    };
    FlowstepEditComponent.prototype.update = function () {
        var _this = this;
        var flow = this.flow;
        // always call "update" that redirects to "create" for new steps
        this._savingObserver.observe(this.flowsteps.update(flow.id, this.flowstepEditForm.value)).subscribe(function (flowstep) {
            // TODO: remove querying for flow
            _this.flows.get(flow.id).subscribe(function () {
                _this.router.navigate(['/desk', 'flows', flow.id, 'steps', flowstep.id]);
            });
            if (flowstep.status === _this.config.flowstep.status.values.RUNNING) {
                // TODO: temp. should subscribe to "flowstep" process, not "table" process
                _this.processes.getByTarget(flowstep.output, __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (data) {
                    _this.processes.subscribe(data, function () {
                        // would be great to get only steps, not the whole flow, but there is no choice
                        _this.flows.get(flow.id).subscribe(function () {
                            _this.router.navigate(['/desk', 'flows', flow.id, 'steps', flowstep.id]);
                            // refresh flowstep
                            flowstep = flow.steps.find(function (_) { return _.id === flowstep.id; });
                            _this.fillFlowstepForm(_this.flowstepEditForm, flowstep, flow);
                        });
                    });
                });
            }
        });
    };
    Object.defineProperty(FlowstepEditComponent.prototype, "saving", {
        get: function () {
            return this._savingObserver.active;
        },
        enumerable: true,
        configurable: true
    });
    FlowstepEditComponent.prototype.fillFlowstepForm = function (form, flowstep, flow) {
        var canUpdate = this.acl.canUpdateFlowstep(flowstep, flow);
        __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(form, flowstep, !canUpdate);
    };
    FlowstepEditComponent.prototype.createFlowstepForm = function (flowstep) {
        var _this = this;
        var defaultName = 'Step' + (this.flow.steps.length + 1);
        this.formSubscription && this.formSubscription.unsubscribe();
        // create form
        this.flowstepEditForm = __WEBPACK_IMPORTED_MODULE_5__flowstep_edit_o_component__["a" /* FlowstepEditOptionsComponent */].prepareFlowstepForm(this.paramType, defaultName);
        // prefill form / create mode
        if (!this.paramId && this.paramType) {
            this.formSubscription = this.flowstepEditForm.valueChanges.filter(function () {
                return _this.flowstepEditForm.dirty;
            }).debounceTime(50).distinctUntilChanged().subscribe(function () {
                _this.storage.set(_this.paramType, _this.flowstepEditForm.value);
            });
        }
        // prefill form / edit mode
        if (flowstep) {
            this.fillFlowstepForm(this.flowstepEditForm, flowstep, this.flow);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('confirmModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_7__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], FlowstepEditComponent.prototype, "modal", void 0);
    FlowstepEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-edit',
            template: "\n    <ng-template [ngIf]=\"flowstepEditForm\">\n      <form class=\"pt15\">\n        <div class=\"row\">\n          <div class=\"col-md-6 col-sm-6\">\n            <app-input [label]=\"'Step Name'\" [control]=\"flowstepEditForm.controls['name']\"></app-input>\n          </div>\n          <div class=\"col-md-6 col-sm-6\" *ngIf=\"!flowstepEditForm.controls['id'].value\">\n            <app-input [label]=\"'Output Table Name'\" [control]=\"flowstepEditForm.controls['output']\"></app-input>\n          </div>\n        </div>\n        <flowstep-edit-form\n          [flow]=\"flow\"\n          [form]=\"flowstepEditForm\"></flowstep-edit-form>\n      </form>\n      <div class=\"tabpanel\">\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li class=\"nav-item\" *ngFor=\"let control of flowstepEditForm.controls['input']['controls']; let i = index\"\n              role=\"presentation\" [ngClass]=\"{'active': activeTableTab === i}\">\n                <a class=\"nav-link\" (click)=\"activeTableTab = i\">Input {{i+1}}</a>\n            </li>\n            <li class=\"nav-item\" role=\"presentation\" [ngClass]=\"{'active': activeTableTab === -1}\" *ngIf=\"flowstepEditForm.controls['id'].value\">\n                <a class=\"nav-link\" (click)=\"activeTableTab = -1\">Output Table</a>\n            </li>\n            <li class=\"nav-item\" role=\"presentation\" [ngClass]=\"{'active': activeTableTab === -2}\"\n              *ngIf=\"flowstepEditForm.controls['id'].value && flowstepEditForm.controls['type'].value === config.flowstep.type.values.cluster\">\n                <a class=\"nav-link\" (click)=\"activeTableTab = -2\">Cluster Results Visualization</a>\n            </li>\n        </ul>\n      </div>\n      <!-- Tab panes -->\n      <div class=\"flex-col\" [adaptiveHeight]=\"{property: 'height', minHeight: 150, targetHeight: 500, pageMargin: flow.steps.length ? 70 : 15, trigger: flowstepEditForm.value}\">\n        <div class=\"flex-col\" [hidden]=\"activeTableTab !== i\"\n          *ngFor=\"let control of flowstepEditForm.controls['input']['controls']; let i = index\">\n            <div *ngIf=\"!control.value\" style=\"min-height: 10em;background: white;padding-top: 1px;\">\n              <h4 class=\"text-center text-muted text-light brand-tab\">No Table Selected</h4>\n            </div>\n\n            <table-view-embed *ngIf=\"control.value\"\n              [id]=\"control.value\"></table-view-embed>\n        </div>\n        <div class=\"flex-col\" [hidden]=\"activeTableTab !== -1\">\n          <table-view-embed *ngIf=\"flowstepEditForm.controls['id'].value\"\n            [id]=\"flowstepEditForm.controls['output'].value\"\n            ></table-view-embed>\n        </div>\n        <clustering-results\n            *ngIf=\"paramId && flowstepEditForm.value.type === config.flowstep.type.values.cluster && activeTableTab === -2\"\n            [flow]=\"flow\"\n            [flowstepId]=\"paramId\"\n            ></clustering-results>\n      </div>\n    </ng-template>\n    <app-modal #confirmModal [title]=\"'You have unsaved data for ' + paramType\"\n      [buttons]=\"[{'class': 'btn-clear', 'title': 'No'},{'class': 'btn-apply', 'title': 'Yes'}]\"\n      (buttonClick)=\"onConfirmation($event)\">\n      Would you like to continue with unsaved parameters?\n    </app-modal>\n  ",
            styles: [' .tabpanel {margin-top: 10px;}']
        }),
        __param(0, Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["w" /* Host */])()),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__flow_layout_component__["a" /* FlowData */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_9__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_10__services_flowstep_service__["a" /* FlowstepService */],
            __WEBPACK_IMPORTED_MODULE_11__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_12__services_acl_service__["a" /* AclService */],
            __WEBPACK_IMPORTED_MODULE_13__services_storage_service__["a" /* StorageService */]])
    ], FlowstepEditComponent);
    return FlowstepEditComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-navigation.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepNavigationComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_flowstep_service__ = __webpack_require__("../../../../../src/app/services/flowstep.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepNavigationComponent = (function () {
    function FlowstepNavigationComponent(flows, flowsteps, router, renderer, cd, modals) {
        this.flows = flows;
        this.flowsteps = flowsteps;
        this.router = router;
        this.renderer = renderer;
        this.cd = cd;
        this.modals = modals;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.hScroll = false;
        this.hScrollLeftDisabled = false;
        this.hScrollRightDisabled = false;
    }
    FlowstepNavigationComponent.prototype.ngOnChanges = function () {
        var _this = this;
        setTimeout(function () { return _this.updateView(); });
    };
    FlowstepNavigationComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.cd.detach();
        this.updateView();
        this.listener = this.renderer.listenGlobal('window', 'resize', function () { return _this.updateView(); });
    };
    FlowstepNavigationComponent.prototype.ngOnDestroy = function () {
        this.listener && this.listener();
    };
    FlowstepNavigationComponent.prototype.deleteFlowstep = function (flowId, flowstep) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).flatMap(function () {
            return _this.flowsteps.delete(flowId, flowstep);
        }).subscribe(function () {
            _this.flows.get(flowId);
            _this.router.navigate(['/desk', 'flows', flowId]);
        });
    };
    FlowstepNavigationComponent.prototype.scroll = function (right) {
        var $area = $(this.scrollArea.nativeElement);
        var areaWidth = $area.width();
        var scrollPosition = right ? Math.max(0, $area.scrollLeft() + (areaWidth / 4)) : Math.max(0, $area.scrollLeft() - (areaWidth / 4));
        $area.stop().animate({ scrollLeft: scrollPosition }, 500);
        this.hScrollLeftDisabled = scrollPosition <= 0;
        this.hScrollRightDisabled = (areaWidth + scrollPosition) >= $area.get(0).scrollWidth;
        this.cd.detectChanges();
    };
    FlowstepNavigationComponent.prototype.updateView = function () {
        if (this.container) {
            $(this.container.nativeElement).css('width', ($(this.flexWrapper.nativeElement).width() + 30) + 'px');
        }
        if (this.scrollArea) {
            var $area = $(this.scrollArea.nativeElement);
            var areaWidth = $area.width();
            var scrollPosition = $area.scrollLeft();
            this.hScroll = $area.get(0).scrollWidth > $area.width();
            this.hScrollLeftDisabled = scrollPosition <= 0;
            this.hScrollRightDisabled = (areaWidth + scrollPosition) === $area.get(0).scrollWidth;
        }
        this.cd.detectChanges();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], FlowstepNavigationComponent.prototype, "flow", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('flexWrapper'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], FlowstepNavigationComponent.prototype, "flexWrapper", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('container'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], FlowstepNavigationComponent.prototype, "container", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('scrollArea'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], FlowstepNavigationComponent.prototype, "scrollArea", void 0);
    FlowstepNavigationComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-navigation',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <div #flexWrapper *ngIf=\"flow\" class=\"flex-static\" style=\"height: 60px\">\n      <div #container class=\"brand-right-panel groupsteps-container\">\n        <ul #scrollArea class=\"nav nav-tabs groupsteps\" role=\"tablist\" [ngClass]=\"{'with-scroll': hScroll}\">\n          <li role=\"presentation\" [routerLinkActive]=\"['active']\" *ngFor=\"let step of flow.steps\">\n            <a [routerLink]=\"['/desk','flows', flow.id, 'steps', step.id]\"\n              [attr.aria-controls]=\"step.id\" role=\"tab\" data-toggle=\"tab\">\n              <span class=\"stepicon\" [ngClass]=\"config.flowstep.type.icons[step.type] || 'iconapp iconapp-question'\"></span>{{step.name}}\n            </a>\n            <a (click)=\"deleteFlowstep(flow.id, step)\"\n              class=\"icon-el remove_tab\" title=\"Remove Step\"><i class=\"glyphicon glyphicon-remove\"></i></a>\n          </li>\n        </ul>\n        <div *ngIf=\"hScroll\" class=\"groupsteps-scroll\">\n          <button class=\"btn btn-link\" type=\"button\" [disabled]=\"hScrollLeftDisabled\" (click)=\"scroll()\"><i class=\"glyphicon glyphicon-triangle-left\"></i></button>\n          <button class=\"btn btn-link\" type=\"button\" [disabled]=\"hScrollRightDisabled\" (click)=\"scroll(true)\"><i class=\"glyphicon glyphicon-triangle-right\"></i></button>\n        </div>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_4__services_flowstep_service__["a" /* FlowstepService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["k" /* ChangeDetectorRef */],
            __WEBPACK_IMPORTED_MODULE_5__services_modal_service__["a" /* ModalService */]])
    ], FlowstepNavigationComponent);
    return FlowstepNavigationComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-options-pass-columns.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepOptionsPassColumnsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var FlowstepOptionsPassColumnsComponent = (function () {
    function FlowstepOptionsPassColumnsComponent(tables) {
        var _this = this;
        this.tables = tables;
        this.readOnly = false;
        this.tableIds = [];
        this.position = 'relative';
        this.minHeight = '35px';
        this.display = 'block';
        this.inputColumnOptions = [];
        this.tablesLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function (tableIds) {
            // return Observable.empty();
            var tableIdsFiltered = tableIds.filter(function (_) { return !!_; });
            return tableIdsFiltered.length
                ? __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].forkJoin(tableIdsFiltered.map(function (tableId) { return _this.tables.get(tableId); }))
                : __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].of([]);
        });
        this.tablesLoader.subscribe(function (tables) {
            _this.inputColumnOptions = tables
                .map(function (table, i) {
                return {
                    id: table.id,
                    text: table.name,
                    children: table.columns.map(function (column) {
                        return {
                            id: i + ':' + column.name,
                            text: column.displayName
                        };
                    }),
                };
            });
        });
    }
    FlowstepOptionsPassColumnsComponent.prototype.ngOnChanges = function (changes) {
        if ('tableIds' in changes) {
            this.tablesLoader.load(this.tableIds);
        }
        if ('control' in changes) {
            if (this.control.controls.length === 1 && !this.control.controls[0].controls['columnName'].value) {
                this.control.removeAt(0);
            }
            this.control.controls.forEach(function (group) {
                group.controls.tmp.setValue((group.value.tableReference || '0') + ':' + group.value.columnName);
            });
        }
    };
    FlowstepOptionsPassColumnsComponent.prototype.newPassColumnsFormControl = function () {
        return new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            newColumnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            columnName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            tableReference: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            tmp: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('') // tableReferrer+colName
        });
    };
    FlowstepOptionsPassColumnsComponent.prototype.setPassColumn = function (value, controlGroup) {
        if (value) {
            var _a = value.split(':'), tableRef = _a[0], columnName = _a[1];
            var selectedOption = this.inputColumnOptions.reduce(function (acc, tableGroup) {
                return acc || tableGroup.children.find(function (_) { return _.id === value; });
            }, null);
            var newColumnName = selectedOption ? selectedOption.text : columnName;
            controlGroup.controls['tableReference'].setValue(parseInt(tableRef));
            controlGroup.controls['columnName'].setValue(columnName);
            controlGroup.controls['newColumnName'].setValue(newColumnName);
            controlGroup.controls['newColumnName'].setValidators(__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
        }
        else {
            controlGroup.controls['tableReference'].setValue(null);
            controlGroup.controls['columnName'].setValue(null);
            controlGroup.controls['newColumnName'].setValue(null);
            controlGroup.controls['newColumnName'].clearValidators();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], FlowstepOptionsPassColumnsComponent.prototype, "readOnly", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */])
    ], FlowstepOptionsPassColumnsComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], FlowstepOptionsPassColumnsComponent.prototype, "tableIds", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.position'),
        __metadata("design:type", Object)
    ], FlowstepOptionsPassColumnsComponent.prototype, "position", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.min-height'),
        __metadata("design:type", Object)
    ], FlowstepOptionsPassColumnsComponent.prototype, "minHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.display'),
        __metadata("design:type", Object)
    ], FlowstepOptionsPassColumnsComponent.prototype, "display", void 0);
    FlowstepOptionsPassColumnsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'flowstep-options-pass-columns',
            template: "\n    <div class=\"row brand-margin-bottom\" *ngIf=\"!readOnly || !!control.controls.length\">\n      <div class=\"col-md-4\">\n          <label>Select Result Columns (optional)</label>\n          <button *ngIf=\"!readOnly\"\n            (click)=\"control.push(newPassColumnsFormControl())\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n      </div>\n    </div>\n    <app-spinner *ngIf=\"control.controls.length\" [visibility]=\"!tablesLoader.loaded\" [height]=\"40\"></app-spinner>\n    <ng-template [ngIf]=\"tablesLoader.loaded\">\n      <div class=\"row\" *ngFor=\"let controlGroup of control.controls; let i = index\">\n        <div class=\"col-md-6\">\n          <app-input *ngIf=\"readOnly\" [label]=\"'Column Name'\" [control]=\"controlGroup['controls'].columnName\"\n            [disabled]=\"true\">\n          </app-input>\n          <app-select *ngIf=\"!readOnly\" [label]=\"'Column Name'\" [control]=\"controlGroup['controls'].tmp\"\n            (valueChange)=\"setPassColumn($event, controlGroup)\"\n            [options]=\"inputColumnOptions\"></app-select>\n        </div>\n        <div class=\"col-md-4\">\n          <app-input [label]=\"'New Column Name'\"\n            [control]=\"controlGroup['controls'].newColumnName\"\n            [disabled]=\"readOnly || !controlGroup['controls'].tmp.value\">\n          </app-input>\n        </div>\n        <div class=\"col-md-2\" *ngIf=\"!readOnly\">\n          <a (click)=\"control.removeAt(i)\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-remove\"></i></a>\n        </div>\n      </div>\n    </ng-template>\n",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_table_service__["a" /* TableService */]])
    ], FlowstepOptionsPassColumnsComponent);
    return FlowstepOptionsPassColumnsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/compose/flowstep-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var FlowstepStatusColorDirective = (function () {
    function FlowstepStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    FlowstepStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = 'dot-primary';
        switch (this.flowstepStatusColor) {
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.ERROR:
                cssClass = 'dot-danger';
                break;
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.NEW:
            case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.status.values.RUNNING:
                cssClass = 'dot-warning';
        }
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('flowstep-status-color'),
        __metadata("design:type", String)
    ], FlowstepStatusColorDirective.prototype, "flowstepStatusColor", void 0);
    FlowstepStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[flowstep-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], FlowstepStatusColorDirective);
    return FlowstepStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["b"] = describeEnum;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interfaces_optimization_interface__ = __webpack_require__("../../../../../src/app/interfaces/optimization.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__interfaces_dashboard_interface__ = __webpack_require__("../../../../../src/app/interfaces/dashboard.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__visualize_charts_chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");







var hostname = window.location.hostname;
var api = {
    // 'localhost': 'http://vm-ab-req20161017.z1.netpoint-dc.com/api/insilico/v1.4/',
    'in-1747.exp.deepcortex.ai': 'http://develop.exp.deepcortex.ai/api/insilico/v1.4/',
    '192.168.1.234': 'http://192.168.1.144:9000/api/insilico/v1.4/',
    'localhost': 'https://dev.deepcortex.ai/api/insilico/v1.4/',
    'dev.deepcortex.ai': 'https://dev.deepcortex.ai/api/insilico/v1.4/',
    'staging.deepcortex.ai': 'https://staging.deepcortex.ai/api/insilico/v1.4/',
    'insilico-test.sentrana.com': 'https://insilico-test.sentrana.com/api/insilico/v1.4/',
    'insilico-dev.sentrana.com': 'https://insilico-dev.sentrana.com/api/insilico/v1.4/',
    'insilico-staging.sentrana.com': 'https://insilico-staging.sentrana.com/api/insilico/v1.4/',
    'insilico.sentrana.com': 'https://insilico.sentrana.com/api/insilico/v1.4/'
};
function describeEnum(enumeration, descriptions) {
    return Object.assign({
        values: enumeration,
        list: Object.keys(enumeration)
    }, descriptions);
}
(function (describeEnum) {
    function ensureType(description) {
        return description;
    }
    describeEnum.ensureType = ensureType;
})(describeEnum || (describeEnum = {}));
var config = {
    version: '2.2.0',
    api: {
        base: api[hostname] || ('http://' + hostname + '/api/insilico/v1.4/'),
        tokenLabel: 'Authorization',
        tokenValue: function (token) { return 'Bearer ' + token; },
        contentType: 'application/json; charset=UTF-8',
    },
    deletionMessage: 'Are you sure want to delete?',
    chart: {
        type: describeEnum(__WEBPACK_IMPORTED_MODULE_1__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType, {
            labels: {
                BAR: 'Bar Chart',
                LINE: 'Line Chart',
                PIE: 'Pie Chart',
                SCATTER: 'Scatter',
                GEO: 'Geo',
                TABLE: 'Table',
                ONEDSCATTER: 'One-D Scatter'
            }
        }),
        options: {
            orientation: {
                values: {
                    HORIZONTAL: 'HORIZONTAL',
                    VERTICAL: 'VERTICAL'
                },
                list: ['HORIZONTAL', 'VERTICAL'],
                labels: {
                    HORIZONTAL: 'Horizontal',
                    VERTICAL: 'Vertical',
                }
            },
            drawMethod: describeEnum(__WEBPACK_IMPORTED_MODULE_3__visualize_charts_chart_interfaces__["a" /* DashboardCharts */].DrawMethod, {
                labels: {
                    AREA: 'Area',
                    BUBBLE: 'Bubble',
                }
            }),
            geoType: describeEnum(__WEBPACK_IMPORTED_MODULE_3__visualize_charts_chart_interfaces__["a" /* DashboardCharts */].GeoHeatMapType, {
                labels: {
                    STATE: 'State Code',
                    COUNTY: 'County Name',
                    ZIP: 'Zip Code',
                }
            }),
            aggregationType: describeEnum(__WEBPACK_IMPORTED_MODULE_1__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardAggregationType, {
                labels: {
                    SUM: 'SUM',
                    MIN: 'MIN',
                    MAX: 'MAX',
                    AVG: 'AVG',
                    COUNT: 'COUNT',
                    NO_AGGREGATE: 'NO AGGREGATION',
                },
            }),
            type: {
                values: {
                    STACKED: 'STACKED',
                    GROUPED: 'GROUPED'
                },
                list: ['GROUPED', 'STACKED'],
                labels: {
                    STACKED: 'Stacked',
                    GROUPED: 'Grouped',
                }
            },
            gamma: describeEnum(__WEBPACK_IMPORTED_MODULE_3__visualize_charts_chart_interfaces__["a" /* DashboardCharts */].Gamma, {
                labels: {
                    'RAINBOW': 'Rainbow',
                    'MAGMA': 'Magma',
                    'BLUES': 'Blues',
                    'GREENS': 'Greens',
                    'REDS': 'Reds',
                    'GREYS': 'Greys',
                    'RED_BLUE': 'Red/Blue',
                },
            })
        }
    },
    library: {
        scope: {
            values: {
                ALL: 'all',
                PERSONAL: 'personal',
                CORPORATE: 'corporate',
                SHARED: 'shared',
                RECENT: 'recent',
            },
            labels: {
                'all': 'All',
                'personal': 'Personal',
                'corporate': 'Corporate',
                'shared': 'Shared',
                'recent': 'Recent',
            },
            list: [
                'all', 'personal', /*'corporate',*/ 'shared' /*, 'recent'*/
            ],
        },
    },
    storage: {
        user: 'user',
        token: 'token',
        preferences: 'preferences',
    },
    routes: {
        signin: '/signin',
        signinRedirect: '/desk/library',
        signoutRedirect: '/',
    },
    validatorErrors: {
        notEqual: 'Field should differ from "%value%"',
        required: 'This field is required'
    },
    asset: describeEnum(__WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type, {
        labels: {
            'FLOW': 'Flow',
            'TABLE': 'Table',
            'MODEL': 'Model',
            'PREDICTION': 'Prediction',
            'REPLAY': 'Replay',
            'TABLE_STATS': 'Table Stats',
            'ALBUM': 'Album',
            'PICTURE': 'Picture',
            'CV_MODEL': 'CV Model',
            'CV_PREDICTION': 'CV Prediction',
            'DASHBOARD': 'Dashboard',
            'OPTIMIZATION': 'Optimization',
            'DIAA': 'DIAA',
        },
        labelsPlural: {
            'FLOW': 'Flows',
            'TABLE': 'Tables',
            'MODEL': 'Models',
            'PREDICTION': 'Predictions',
            'REPLAY': 'Replays',
            'TABLE_STATS': 'Table Stats',
            'ALBUM': 'Albums',
            'PICTURE': 'Pictures',
            'CV_MODEL': 'CV Models',
            'CV_PREDICTION': 'CV Predictions',
            'DASHBOARD': 'Dashboards',
            'OPTIMIZATION': 'Optimizations',
            'DIAA': 'DIAAs',
        },
        aliases: {
            'FLOW': 'flow',
            'TABLE': 'table',
            'MODEL': 'model',
            'PREDICTION': 'prediction',
            'REPLAY': 'replay',
            'TABLE_STATS': 'table-stats',
            'ALBUM': 'album',
            'PICTURE': 'picture',
            'CV_MODEL': 'cv-model',
            'CV_PREDICTION': 'cv-prediction',
            'DASHBOARD': 'dashboard',
            'OPTIMIZATION': 'optimization',
            'DIAA': 'diaa',
        },
        aliasesPlural: {
            'FLOW': 'flows',
            'TABLE': 'tables',
            'MODEL': 'models',
            'PREDICTION': 'predictions',
            'REPLAY': 'replays',
            'TABLE_STATS': 'table-stats',
            'ALBUM': 'albums',
            'PICTURE': 'pictures',
            'CV_MODEL': 'cv-models',
            'CV_PREDICTION': 'cv-predictions',
            'DASHBOARD': 'dashboards',
            'OPTIMIZATION': 'optimizations',
            'DIAA': 'diaas',
        }
    }),
    album: {
        labelMode: describeEnum(__WEBPACK_IMPORTED_MODULE_2__interfaces_album_interface__["a" /* IAlbum */].LabelMode, {
            labels: {
                LOCALIZATION: 'Localization',
                CLASSIFICATION: 'Classification',
            },
        }),
        type: {
            values: {
                SOURCE: 'SOURCE',
                DERIVED: 'DERIVED',
                TRAINRESULTS: 'TRAINRESULTS',
            },
            labels: {
                SOURCE: 'Source',
                DERIVED: 'Derived',
                TRAINRESULTS: 'Train Results',
            },
        },
        status: describeEnum(__WEBPACK_IMPORTED_MODULE_2__interfaces_album_interface__["a" /* IAlbum */].Status, {
            labels: {
                ACTIVE: 'Active',
                INACTIVE: 'Inactive',
                SAVING: 'Saving',
                UPDATING: 'Updating',
                UPLOADING: 'Uploading',
                ERROR: 'Error',
            },
            hasProcess: {
                ACTIVE: false,
                INACTIVE: false,
                SAVING: true,
                UPDATING: true,
                UPLOADING: true,
                ERROR: false,
            },
        }),
    },
    flow: {
        status: describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["b" /* IFlow */].Status, {
            labels: {
                NEW: 'New',
                RUNNING: 'Running',
                ERROR: 'Error',
                PARTLY_DONE: 'Partly done',
                DONE: 'Done',
                DELETED: 'Deleted',
                QUEUED: 'Queued',
            },
        }),
    },
    flowstep: {
        type: describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["c" /* IFlowstep */].Type, {
            labels: {
                insert: 'Insert',
                cluster: 'Cluster',
                filter: 'Filter',
                aggregate: 'Aggregate',
                join: 'Left Join',
                query: 'Query',
                window: 'Window',
                map: 'Rename',
                geojoin: 'Geospatial',
            },
            icons: {
                insert: 'iconapp iconapp-arrows',
                aggregate: 'iconapp iconapp-formula',
                join: 'iconapp iconapp-link',
                cluster: 'iconapp iconapp-dot',
                query: 'iconapp iconapp-map',
                filter: 'iconapp iconapp-round',
                window: 'iconapp iconapp-rotate',
                map: 'glyphicon glyphicon-list',
                geojoin: 'glyphicon glyphicon-globe',
            },
        }),
        status: describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["c" /* IFlowstep */].Status, {
            labels: {
                NEW: 'NEW',
                RUNNING: 'RUNNING',
                ERROR: 'ERROR',
                PARTLY_DONE: 'PARTLY_DONE',
                DONE: 'DONE',
                DELETED: 'DELETED',
                QUEUED: 'QUEUED',
            },
        }),
        option: {
            aggregate: {
                type: {
                    values: {
                        COUNT: 'count',
                        COUNT_UNIQUE: 'count_unique',
                        COUNT_IF: 'count_if',
                        MAX: 'max',
                        MIN: 'min',
                        SUM: 'sum',
                        SUM_IF: 'sum_if',
                        MEAN: 'mean',
                        MEDIAN: 'median',
                        AVERAGE_IF: 'average_if',
                        DEVIATION: 'deviation',
                    },
                    labels: {
                        'count': 'Count',
                        'max': 'Max',
                        'min': 'Min',
                        'sum': 'Sum',
                        'mean': 'Mean',
                        'deviation': 'Deviation',
                    },
                    list: ['count', 'min', 'max', 'sum', 'mean', 'deviation'],
                }
            },
            join: {
                type: describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["c" /* IFlowstep */].JoinType, {
                    labels: {
                        NORMAL: 'Exact match',
                        FUZZY: 'Fuzzy match',
                    },
                }),
            },
            cluster: {
                type: describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["c" /* IFlowstep */].ClusterType, {
                    labels: {
                        K_MEANS: 'K-Means',
                        FUZZY_C_MEANS: 'Fuzzy-C-Means',
                    },
                }),
            },
            filter: {
                operator: Object.assign(describeEnum(__WEBPACK_IMPORTED_MODULE_5__interfaces_flow_interface__["c" /* IFlowstep */].FilterRelationalOperator, {
                    labels: {
                        'EQ': '=',
                        'NE': '!=',
                        'LT': '<',
                        'GT': '>',
                        'GTE': '>=',
                        'LTE': '<=',
                        'CONTAINS': 'contains',
                    },
                }), { booleanList: ['EQ', 'NE'], }),
                booleanValue: {
                    values: {
                        TRUE: 't',
                        FALSE: 'f',
                    },
                    labels: {
                        't': 'true',
                        'f': 'false',
                    },
                    list: ['t', 'f'],
                },
                operatorGroup: {
                    values: {
                        AND: 'AND',
                        OR: 'OR',
                    },
                    labels: {
                        'AND': 'AND',
                        'OR': 'OR',
                    },
                    list: ['AND', 'OR'],
                },
            },
            window: {
                aggregator: {
                    values: {
                        AVG: 'avg',
                        COUNT: 'count',
                        CUME_DIST: 'cume_dist',
                        DENSE_RANK: 'dense_rank',
                        FIRST_VALUE: 'first_value',
                        LAST_VALUE: 'last_value',
                        LAG: 'lag',
                        LEAD: 'lead',
                        LISTAGG: 'listagg',
                        MAX: 'max',
                        MEDIAN: 'median',
                        MIN: 'min',
                        NTH_VALUE: 'nth_value',
                        NTILE: 'ntile',
                        PERCENT_RANK: 'percent_rank',
                        PERCENTILE_CONT: 'percentile_cont',
                        PERCENTILE_DISC: 'percentile_disc',
                        RANK: 'rank',
                        RATIO_TO_REPORT: 'ratio_to_report',
                        ROW_NUMBER: 'row_number',
                        STDDEV: 'stddev',
                        STDDEV_SAMP: 'stddev_samp',
                        STDDEV_POP: 'stddev_pop',
                        SUM: 'sum',
                        VARIANCE: 'variance',
                        VAR_SAMP: 'var_samp',
                        VAR_POP: 'var_pop',
                    },
                    list: [
                        'avg', 'count', 'cume_dist', 'dense_rank', 'first_value', 'last_value',
                        'lag', 'lead', 'listagg', 'max', 'median', 'min', 'nth_value', 'ntile',
                        'percent_rank', 'percentile_cont', 'percentile_disc', 'rank', 'ratio_to_report',
                        'row_number', 'stddev', 'stddev_samp', 'stddev_pop', 'sum', 'variance',
                        'var_samp', 'var_pop',
                    ],
                    options: {
                        'median': ['aggregatorArg', 'windowUpperBound'],
                        'avg': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'count': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'cume_dist': ['orderBy'],
                        'dense_rank': ['orderBy'],
                        'first_value': ['aggregatorArg', 'ignoreNulls', 'respectNulls', 'orderBy', 'windowUpperBound'],
                        'last_value': ['aggregatorArg', 'ignoreNulls', 'respectNulls', 'orderBy', 'windowUpperBound'],
                        'lag': ['aggregatorArg', 'ignoreNulls', 'respectNulls', 'offset', 'orderBy'],
                        'lead': ['aggregatorArg', 'ignoreNulls', 'respectNulls', 'offset', 'orderBy'],
                        'listagg': ['aggregatorArg', 'listaggDelimiter', 'withinGroupExpression'],
                        'max': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'min': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'nth_value': ['aggregatorArg', 'orderBy', 'offset', 'ignoreNulls', 'respectNulls', 'windowUpperBound'],
                        'ntile': ['ntileGroupsCount', 'orderBy'],
                        'percentile_cont': ['percentile', 'withinGroupExpression', 'windowUpperBound'],
                        'percentile_disc': ['percentile', 'withinGroupExpression', 'windowUpperBound'],
                        'percent_rank': ['orderBy', 'windowUpperBound'],
                        'rank': ['orderBy', 'windowUpperBound'],
                        'row_number': ['orderBy', 'windowUpperBound'],
                        'ratio_to_report': [],
                        'stddev': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'stddev_samp': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'stddev_pop': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'sum': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'variance': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'var_samp': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                        'var_pop': ['aggregatorArg', 'orderBy', 'windowUpperBound'],
                    }
                },
            },
            geojoin: {
                relation: {
                    values: {
                        ST_DISTANCE: 'ST_DISTANCE',
                        ST_CONTAINS: 'ST_CONTAINS',
                    },
                    labels: {
                        'ST_DISTANCE': 'Distance',
                        'ST_CONTAINS': 'Contains',
                    },
                    list: ['ST_DISTANCE', 'ST_CONTAINS'],
                },
                relationBase: {
                    values: {
                        LEFT: 'LEFT',
                        RIGHT: 'RIGHT',
                    },
                    labels: {
                        'LEFT': 'Left',
                        'RIGHT': 'Right',
                    },
                    list: ['LEFT', 'RIGHT'],
                },
                geometry: {
                    values: {
                        POINT: 'POINT',
                        POLYGON: 'POLYGON',
                    },
                    labels: {
                        'POINT': 'Point',
                        'POLYGON': 'Polygon',
                    },
                    list: ['POINT', 'POLYGON'],
                },
                operator: {
                    values: {
                        EG: 'EG',
                        NE: 'NE',
                        LT: 'LT',
                        GT: 'GT',
                        LTE: 'LTE',
                        GTE: 'GTE',
                    },
                    labels: {
                        'EG': '=',
                        'NE': '!=',
                        'LT': '<',
                        'GT': '>',
                        'LTE': '<=',
                        'GTE': '>=',
                    },
                    list: ['EG', 'NE', 'LT', 'GT', 'LTE', 'GTE'],
                },
                relationsWithParameter: ['ST_DISTANCE']
            },
        },
    },
    tableStats: {
        status: {
            values: {
                DONE: 'DONE',
                PENDING: 'PENDING',
                ERROR: 'ERROR',
            },
            labels: {
                'DONE': 'Done',
                'PENDING': 'Pending',
                'ERROR': 'Error',
            }
        },
    },
    table: {
        status: describeEnum(__WEBPACK_IMPORTED_MODULE_6__interfaces_table_interface__["a" /* ITable */].Status, {
            labels: {
                'ACTIVE': 'Active',
                'INACTIVE': 'Inactive',
                'SAVING': 'Saving',
                'UPDATING': 'Updating',
                'ERROR': 'Error',
            }
        }),
        datasetType: {
            values: {
                SOURCE: 'Source',
                DERIVED: 'Derived',
            }
        },
        column: {
            columnType: {
                values: {
                    METRIC: 'METRIC',
                    ATTRIBUTE: 'ATTRIBUTE'
                },
                labels: {
                    METRIC: 'Metric',
                    ATTRIBUTE: 'Attribute',
                },
                list: [
                    'METRIC', 'ATTRIBUTE'
                ],
            },
            dataType: {
                values: {
                    STRING: 'String',
                    INTEGER: 'Integer',
                    DOUBLE: 'Double',
                    BOOLEAN: 'Boolean',
                    TIMESTAMP: 'Timestamp',
                    LONG: 'Long',
                },
                labels: {
                    'String': 'String',
                    'Integer': 'Integer',
                    'Double': 'Double',
                    'Boolean': 'Boolean',
                    'Timestamp': 'Timestamp',
                    'Long': 'Long',
                },
                list: [
                    'String', 'Integer', 'Double', 'Boolean', 'Timestamp', 'Long'
                ],
                controlDataTypes: {
                    'Integer': 'number',
                    'Double': 'number',
                    'Long': 'number',
                    'String': 'text',
                    'Timestamp': 'text',
                    'Boolean': 'boolean',
                },
                variableTypes: {
                    'String': ['Categorical'],
                    'Integer': ['Categorical', 'Continuous'],
                    'Double': ['Continuous'],
                    'Boolean': ['Boolean'],
                    'Timestamp': ['Categorical'],
                    'Long': ['Categorical', 'Continuous'],
                },
                columnTypes: {
                    'String': ['ATTRIBUTE'],
                    'Integer': ['METRIC', 'ATTRIBUTE'],
                    'Double': ['METRIC', 'ATTRIBUTE'],
                    'Boolean': ['METRIC', 'ATTRIBUTE'],
                    'Timestamp': ['ATTRIBUTE'],
                    'Long': ['METRIC', 'ATTRIBUTE'],
                },
                numericTypes: [
                    'Integer',
                    'Double',
                    'Long'
                ]
            },
            variableType: {
                values: {
                    CONTINUOUS: 'Continuous',
                    CATEGORICAL: 'Categorical',
                    BOOLEAN: 'Boolean',
                },
                labels: {
                    'Continuous': 'Continuous',
                    'Categorical': 'Categorical',
                    'Boolean': 'Boolean',
                },
                list: [
                    'Continuous', 'Categorical', 'Boolean'
                ],
            },
            align: {
                values: {
                    LEFT: 'LEFT',
                    RIGHT: 'RIGHT',
                    CENTER: 'CENTER',
                },
                labels: {
                    'LEFT': 'Left',
                    'RIGHT': 'Right',
                    'CENTER': 'Center',
                },
                list: [
                    'Left', 'Right', 'Center'
                ],
            },
        },
        'import': {
            extension: {
                list: ['.csv', '.xls', '.xlsx'],
            },
            sizeLimit: 3221225472,
        },
        view: {
            pageSize: {
                tableView: 50,
                tableViewEmbed: 20,
            },
        },
    },
    model: {
        status: {
            values: {
                ACTIVE: 'ACTIVE',
                TRAINING: 'TRAINING',
                PREDICTING: 'PREDICTING',
                ERROR: 'ERROR',
                CANCELLED: 'CANCELLED',
            },
            labels: {
                ACTIVE: 'Active',
                TRAINING: 'Training',
                PREDICTING: 'Predicting',
                ERROR: 'Error',
                CANCELLED: 'Cancelled',
            }
        },
        type: {
            values: {
                LINEAR: 'Linear',
                LOGISTIC: 'Logistic',
            },
            labels: {
                'Linear': 'Linear',
                'Logistic': 'Logistic',
            },
            icons: {
                'Linear': 'icon-layers',
                'Logistic': 'icon-layers',
            },
            list: ['Linear', 'Logistic'],
        },
        column: {
            covariate: {
                values: {
                    RESPONSE: 'response',
                    PREDICTOR: 'predictor',
                    IGNORE: 'ignore',
                },
                labels: {
                    'response': 'Response',
                    'predictor': 'Predictor',
                    'ignore': 'Ignore',
                },
                list: ['response', 'predictor', 'ignore'],
            },
        },
    },
    cvModel: {
        status: {
            values: {
                ACTIVE: 'ACTIVE',
                TRAINING: 'TRAINING',
                PREDICTING: 'PREDICTING',
                ERROR: 'ERROR',
                CANCELLED: 'CANCELLED',
            },
            labels: {
                ACTIVE: 'Active',
                TRAINING: 'Training',
                PREDICTING: 'Predicting',
                ERROR: 'Error',
                CANCELLED: 'Cancelled',
            }
        },
        type: {
            values: {
                TAGS: 'TAGS',
                CAPTIONS: 'CAPTIONS',
            },
            labels: {
                TAGS: 'Labels',
                CAPTIONS: 'Caption',
            },
            list: ['TAGS', 'CAPTIONS'],
        },
    },
    notification: {
        interval: 3000,
        level: {
            values: {
                INFO: 'info',
                SUCCESS: 'success',
                WARNING: 'warning',
                DANGER: 'danger',
            },
        },
        type: {
            values: {
                DEFAULT: 'DEFAULT',
                ERROR: 'ERROR',
                WARNING: 'WARNING',
                FILE_UPLOAD: 'FILE_UPLOAD',
                FLOW_PLAY: 'FLOW_PLAY',
                FLOWSTEP_PLAY: 'FLOWSTEP_PLAY',
            },
        },
        defaults: {
            timeout: 7000,
            dismissButton: false,
            dismissOnClick: true,
            onDismiss: null,
            pauseOnHover: true,
        }
    },
    process: {
        // pass
        interval: 5000,
        status: {
            values: {
                RUNNING: 'RUNNING',
                COMPLETED: 'COMPLETED',
                CANCELLED: 'CANCELLED',
                FAILED: 'FAILED',
                QUEUED: 'QUEUED'
            },
            labels: {
                'RUNNING': 'In Progress',
                'COMPLETED': 'Completed',
                'CANCELLED': 'Cancelled',
                'FAILED': 'Failed',
                'QUEUED': 'Queued'
            },
        }
    },
    code: {
        mode: {
            SQL: 'sql',
            EXCEL: 'excel'
        }
    },
    dnd: {
        zone: {
            FLOW_TABLE_LIST: 'flow-table-list',
            FLOWSTEP_TABLE: 'flowstep-table',
        }
    },
    clusteringResults: {
        maxPoints: 40000,
        maxDimensions: 2
    },
    graph: {
        flow: {
            maxScale: 1.5,
            templates: {
                inputNode: {
                    shape: 'rect',
                    rx: 0,
                    ry: 0,
                    'class': 'input-template'
                },
                outputNode: {
                    shape: 'rect',
                    rx: 0,
                    ry: 0,
                    'class': 'output-template'
                },
                stepNode: {
                    shape: 'diamond',
                    'class': 'operation-template'
                },
                inputEdge: { arrowhead: 'undirected' },
                outputEdge: { arrowhead: 'normal' }
            }
        },
    },
    play: {
        model: {
            mappingType: {
                values: {
                    SOURCETABLES: 'SOURCETABLES',
                    INPUTMATRIX: 'INPUTMATRIX'
                },
                labels: {
                    SOURCETABLES: 'Source Tables',
                    INPUTMATRIX: 'Training Matrix'
                },
                list: ['INPUTMATRIX', 'SOURCETABLES']
            }
        }
    },
    prediction: {
        status: {
            values: {
                NEW: 'NEW',
                RUNNING: 'RUNNING',
                ERROR: 'ERROR',
                DONE: 'DONE',
                INCOMPLETE: 'INCOMPLETE',
            },
            labels: {
                'NEW': 'New',
                'RUNNING': 'Running',
                'ERROR': 'Error',
                'DONE': 'DONE',
                'INCOMPLETE': 'Incomplete',
            },
        },
    },
    cvPrediction: {
        status: {
            values: {
                NEW: 'NEW',
                RUNNING: 'RUNNING',
                ERROR: 'ERROR',
                DONE: 'DONE',
                INCOMPLETE: 'INCOMPLETE',
            },
            labels: {
                'NEW': 'New',
                'RUNNING': 'Running',
                'ERROR': 'Error',
                'DONE': 'DONE',
                'INCOMPLETE': 'Incomplete',
            },
        },
    },
    replay: {
        status: {
            values: {
                NEW: 'NEW',
                RUNNING: 'RUNNING',
                ERROR: 'ERROR',
                DONE: 'DONE',
                INCOMPLETE: 'INCOMPLETE',
            },
            labels: {
                'NEW': 'New',
                'RUNNING': 'Running',
                'ERROR': 'Error',
                'DONE': 'DONE',
                'INCOMPLETE': 'Incomplete',
            },
        },
    },
    modal: {
        size: {
            LARGE: 'modal-lg',
            SMALL: 'modal-sm'
        }
    },
    pictureArchive: {
        'import': {
            extension: {
                list: ['.zip', '.tar', '.gz'],
            },
        }
    },
    picture: {
        'import': {
            extension: {
                list: ['.png', '.jpg', '.gif'],
            },
        },
        labels: {
            extension: {
                list: ['.csv'],
            },
        }
    },
    optimization: {
        status: {
            values: {
                RUNNING: 'RUNNING',
                ERROR: 'ERROR',
                DONE: 'DONE',
            },
            labels: {
                'RUNNING': 'Running',
                'ERROR': 'Error',
                'DONE': 'DONE',
            }
        },
        type: describeEnum(__WEBPACK_IMPORTED_MODULE_0__interfaces_optimization_interface__["a" /* IOptimization */].OptimizationType, {
            labels: {
                PREDICTOR_TUNING: 'Predictor Tuning',
                OBJECTIVE_FUNCTION: 'Objective Function',
            },
        }),
        goal: describeEnum(__WEBPACK_IMPORTED_MODULE_0__interfaces_optimization_interface__["a" /* IOptimization */].ObjectiveGoal, {
            labels: {
                MIN: 'Min',
                MAX: 'Max'
            },
        }),
        metric: describeEnum(__WEBPACK_IMPORTED_MODULE_0__interfaces_optimization_interface__["a" /* IOptimization */].ObjectiveMetric, {
            labels: {
                AUROC: 'AUC',
                KS: 'KS',
                RMSE: 'RMSE'
            },
        }),
    }
};
/* harmony default export */ __webpack_exports__["a"] = (config);


/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-check.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppCheckComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppCheckComponent = (function () {
    function AppCheckComponent() {
        this.disabled = false;
        this.readonly = false;
        this.label = null;
        this.name = 'iCheck' + Math.random().toString();
        this.type = 'checkbox';
        this.checked = false;
        this.control = null;
        this.checkedChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.defaultOptions = {
            checkboxClass: 'icheckbox_minimal',
            radioClass: 'iradio_minimal',
            increaseArea: '20%'
        };
    }
    AppCheckComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('control' in changes) {
            this.controlSubscription && this.controlSubscription.unsubscribe();
            if (this.control) {
                switch (this.type) {
                    case 'radio':
                        this.checked = this.control.value === this.value;
                        break;
                    case 'checkbox':
                        this.checked = !!this.control.value;
                        break;
                }
                this.controlSubscription = this.control.valueChanges.distinctUntilChanged().subscribe(function (value) {
                    switch (_this.type) {
                        case 'radio':
                            _this.checked = value === _this.value;
                            break;
                        case 'checkbox':
                            _this.checked = !!value;
                            break;
                    }
                    _this.syncElementProps();
                });
            }
        }
        if (this.element) {
            if ('checked' in changes || 'disabled' in changes) {
                this.syncElementProps();
            }
            this.initPlugin(); // TODO: remove
        }
    };
    AppCheckComponent.prototype.syncElementProps = function () {
        if (this.element) {
            this.element.prop('checked', this.checked);
            this.element.prop('disabled', this.disabled);
            this.element.prop('readonly', this.readonly);
            this.element.iCheck('update');
        }
    };
    AppCheckComponent.prototype.ngAfterViewInit = function () {
        this.initPlugin();
    };
    AppCheckComponent.prototype.ngOnDestroy = function () {
        this.controlSubscription && this.controlSubscription.unsubscribe();
        this.destroyPlugin();
    };
    AppCheckComponent.prototype.initPlugin = function () {
        var _this = this;
        this.destroyPlugin();
        this.element = jQuery(this.selector.nativeElement);
        this.element.iCheck(this.defaultOptions);
        if (this.type === 'radio') {
            this.element.on('ifChecked', function () {
                _this.checkedChange.emit(_this.value);
                if (_this.control) {
                    _this.control.markAsDirty();
                    _this.control.setValue(_this.value);
                }
            });
        }
        else {
            this.element.on('ifToggled', function () {
                _this.checked = _this.selector.nativeElement.checked;
                _this.checkedChange.emit(_this.checked);
                if (_this.control) {
                    _this.control.markAsDirty();
                    _this.control.setValue(_this.checked);
                }
            });
        }
    };
    AppCheckComponent.prototype.destroyPlugin = function () {
        if (this.element) {
            this.element.off('ifToggled');
            this.element.iCheck('destroy');
            this.element.html('');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppCheckComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppCheckComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppCheckComponent.prototype, "readonly", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppCheckComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppCheckComponent.prototype, "name", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppCheckComponent.prototype, "type", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppCheckComponent.prototype, "checked", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], AppCheckComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppCheckComponent.prototype, "helpText", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppCheckComponent.prototype, "checkedChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('selector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], AppCheckComponent.prototype, "selector", void 0);
    AppCheckComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-check',
            template: "\n    <div [ngClass]=\"{'checkbox': type ==='checkbox', 'radio': type === 'radio'}\">\n      <label class=\"ellipsis\" [ngClass]=\"{'checkbox': type ==='checkbox', 'radio': type === 'radio'}\">\n        <input #selector\n          [name]=\"name\"\n          [value]=\"value\"\n          [attr.type]=\"type\"\n          [checked]=\"checked\"\n          [disabled]=\"disabled\"\n          [readonly]=\"readonly\"\n        ><span *ngIf=\"label !== null\" class=\"label-text\" [title]=\"label\">{{label}}</span>\n      </label>\n      <i *ngIf=\"helpText\"\n        class=\"helpText glyphicon glyphicon-question-sign\"\n        tooltip\n        data-toggle=\"tooltip\"\n        data-html=\"true\"\n        data-placement=\"right\"\n        [tooltipTitle]=\"helpText\"></i>\n      <div style=\"clear:both\"></div>\n    </div>\n  "
        })
    ], AppCheckComponent);
    return AppCheckComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-fake-control.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppFakeControlComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var AppFakeControlComponent = (function () {
    function AppFakeControlComponent() {
        this.label = null;
        this.value = null;
        this.iconBefore = null;
        this.iconAfter = 'glyphicon-ok';
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppFakeControlComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppFakeControlComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppFakeControlComponent.prototype, "iconBefore", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppFakeControlComponent.prototype, "iconAfter", void 0);
    AppFakeControlComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-fake-control',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <div class=\"form-group p0\">\n      <div class=\"input-group\">\n        <label class=\"input-group-addon input-group-label disabled\"\n          *ngIf=\"label || iconBefore\"\n          [ngClass]=\"{'label-bare': iconBefore && !label}\">\n          <i *ngIf=\"iconBefore\" class=\"glyphicon\" [ngClass]=\"iconBefore\"></i>\n          {{label}}\n        </label>\n        <input class=\"form-control\"\n          [ngClass]=\"{'has-label': label}\"\n          [value]=\"value\" disabled>\n        <span *ngIf=\"iconAfter\" class=\"input-group-addon disabled\">\n          <i class=\"glyphicon\" [ngClass]=\"iconAfter\"></i>\n        </span>\n      </div>\n    </div>\n  ",
        })
    ], AppFakeControlComponent);
    return AppFakeControlComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-form-group.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppFormGroupComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var AppFormGroupComponent = (function () {
    function AppFormGroupComponent() {
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppFormGroupComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppFormGroupComponent.prototype, "helpText", void 0);
    AppFormGroupComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-form-group',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "<div class=\"brand-form-group\">\n    <div class=\"brand-form-group-label\" *ngIf=\"title\">\n      {{title}} <i class=\"glyphicon glyphicon-question-sign\" *ngIf=\"helpText\"\n      tooltip\n      data-toggle=\"tooltip\"\n      data-html=\"true\"\n      [tooltipTitle]=\"helpText\"></i>\n    </div>\n    <div class=\"brand-form-group-body\">\n      <ng-content></ng-content>\n    </div>\n  </div>"
        })
    ], AppFormGroupComponent);
    return AppFormGroupComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-input-suggestion.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppInputSuggestionComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




// @TODO: should we merge typeahead functionality with app-input component?
var AppInputSuggestionComponent = (function () {
    function AppInputSuggestionComponent() {
        var _this = this;
        this.label = null;
        this.value = null;
        this.type = 'text'; //text or number
        this.disabled = false;
        this.showErrors = true;
        this.readonly = false;
        this.iconBefore = null;
        this.iconAfter = 'glyphicon-edit';
        this.iconAfterClick = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.click = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.keydown = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.focus = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.blur = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.firstRequestSend = false;
        this.id = 'appinputsuggestion_' + Math.random().toString();
        this.suggestionsLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function (query) {
            if (query === _this.cachedQuery && _this.cachedSuggestionsLoaderArgs === _this.suggestions.args && _this.cachedSuggestions) {
                return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].of(_this.cachedSuggestions);
            }
            else {
                _this.firstRequestSend = true;
                return (_a = _this.suggestions).fn.apply(_a, [query].concat(_this.suggestions.args));
            }
            var _a;
        });
        this.suggestionsLoader.subscribe(function (suggestions) {
            _this.cachedQuery = _this.control.value;
            _this.cachedSuggestions = suggestions;
            _this.cachedSuggestionsLoaderArgs = _this.suggestions.args;
            _this.typeaheadObserver && _this.typeaheadObserver.next(suggestions);
        });
        // note that 'dataSource' for [typeahead] should be created before initializing of typeahead, in constructor
        this.dataSource = __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].create(function (observer) {
            _this.typeaheadObserver = observer;
            _this.suggestionsLoader.load(_this.control.value);
        });
    }
    AppInputSuggestionComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('control' in changes && this.control) {
            this.value = this.control.value; // when control is set before init view of app-select
            this.controlSubscription = this.control.valueChanges.subscribe(function (value) {
                _this.value = value;
            });
        }
        else if (!this.control) {
            this.control = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]({ value: this.value, disabled: this.disabled });
        }
        if ('value' in changes) {
            this.control.setValue(this.value);
        }
        if ('disabled' in changes) {
            this.disabled ? this.control.disable() : this.control.enable();
        }
    };
    AppInputSuggestionComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.element = jQuery(this.input.nativeElement);
        this.element
            .on('focus', function () {
            $(_this.element).parent().find('.input-group-addon').addClass('active');
        })
            .on('blur', function () {
            $(_this.element).parent().find('.input-group-addon').removeClass('active');
        });
    };
    AppInputSuggestionComponent.prototype.onIconAfterClick = function (event) {
        this.iconAfterClick.emit(event);
    };
    AppInputSuggestionComponent.prototype.ngOnDestroy = function () {
        this.controlSubscription && this.controlSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], AppInputSuggestionComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "suggestions", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputSuggestionComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputSuggestionComponent.prototype, "type", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputSuggestionComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputSuggestionComponent.prototype, "showErrors", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputSuggestionComponent.prototype, "readonly", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputSuggestionComponent.prototype, "iconBefore", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputSuggestionComponent.prototype, "iconAfter", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "iconAfterClick", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "click", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "keydown", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "focus", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputSuggestionComponent.prototype, "blur", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('input'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], AppInputSuggestionComponent.prototype, "input", void 0);
    AppInputSuggestionComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-input-suggestion',
            template: "\n  <div class=\"form-group p0\" [formControlValidator]=\"control\">\n     <div class=\"input-group\" [formGroup]=\"control.parent\">\n        <label class=\"input-group-addon input-group-label\"\n          *ngIf=\"label || iconBefore\"\n          [attr.for]=\"id\"\n          [ngClass]=\"{'disabled': control.disabled || disabled, 'label-bare': iconBefore}\">\n          <i *ngIf=\"iconBefore\" class=\"glyphicon\" [ngClass]=\"iconBefore\"></i>\n          {{label}}</label\n        >\n        <input #input class=\"form-control\"\n          formControlName=\"value\"\n          [id]=\"id\"\n          [attr.type]=\"type\"\n          [readonly]=\"readonly\"\n          [ngClass]=\"{'has-label': label}\"\n          [typeahead]=\"dataSource\"\n          [typeaheadMinLength]=\"0\"\n          [typeaheadOptionsLimit]=\"20\"\n          [typeaheadWaitMs]=\"100\"\n          (blur)=\"blur.emit($event)\"\n          (keydown)=\"keydown.emit($event)\"\n          (focus)=\"focus.emit($event)\"\n          (click)=\"click.emit($event)\">\n        <span class=\"input-group-addon\"\n          [ngClass]=\"{'disabled': control.disabled || disabled}\"\n          (click)=\"onIconAfterClick($event)\">\n          <i class=\"glyphicon\" [ngClass]=\"iconAfter\">\n            <app-spinner [visibility]=\"!suggestionsLoader.loaded && firstRequestSend\"\n              [height]=\"34\" [backgroundColor]=\"'#e2e6ef'\" [color]=\"'#ffc65c'\"></app-spinner>\n          </i>\n        </span>\n      </div>\n      <div class=\"pt5\" *ngIf=\"showErrors\" [formControlValidatorFeedback]=\"control\"></div>\n  </div>"
        }),
        __metadata("design:paramtypes", [])
    ], AppInputSuggestionComponent);
    return AppInputSuggestionComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-input.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppInputComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppInputComponent = (function () {
    function AppInputComponent(zone) {
        this.zone = zone;
        this.label = null;
        this.value = null;
        this.type = 'text'; //text or number
        this.step = null;
        this.disabled = false;
        this.showErrors = true;
        this.readonly = false;
        this.iconBefore = null;
        this.iconAfter = 'glyphicon-edit';
        this.placeholder = '';
        this.iconAfterClick = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.click = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.keyDown = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.focus = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.blur = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.id = 'appinput_' + Math.random().toString();
    }
    AppInputComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('control' in changes && this.control) {
            this.value = this.control.value; // when control is set before init view of app-select
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.controlSubscription = this.control.valueChanges.subscribe(function (value) {
                _this.value = value;
            });
        }
        else if (!this.control) {
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.control = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]({ value: this.value, disabled: this.disabled });
        }
        if ('value' in changes) {
            this.control.setValue(this.value);
        }
    };
    AppInputComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.element = jQuery(this.selector.nativeElement);
        this.zone.runOutsideAngular(function () {
            _this.element.on('focus', function () {
                _this.readonly || $(_this.element).parent().find('.input-group-addon').addClass('active');
            });
            _this.element.on('blur', function () {
                _this.element.parent().find('.input-group-addon').removeClass('active');
            });
        });
    };
    AppInputComponent.prototype.onInputChange = function () {
        this.value = this.element.val();
        this.control.markAsDirty();
        this.control.setValue(this.value);
        this.valueChange.emit(this.value);
    };
    AppInputComponent.prototype.onIconAfterClick = function (event) {
        this.iconAfterClick.emit(event);
    };
    AppInputComponent.prototype.ngOnDestroy = function () {
        this.controlSubscription && this.controlSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], AppInputComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppInputComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputComponent.prototype, "type", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppInputComponent.prototype, "step", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputComponent.prototype, "showErrors", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppInputComponent.prototype, "readonly", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputComponent.prototype, "iconBefore", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputComponent.prototype, "iconAfter", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppInputComponent.prototype, "placeholder", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppInputComponent.prototype, "min", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppInputComponent.prototype, "max", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputComponent.prototype, "iconAfterClick", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppInputComponent.prototype, "click", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], AppInputComponent.prototype, "keyDown", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], AppInputComponent.prototype, "focus", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], AppInputComponent.prototype, "blur", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], AppInputComponent.prototype, "valueChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('selector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], AppInputComponent.prototype, "selector", void 0);
    AppInputComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-input',
            template: "\n    <div class=\"form-group p0\" [formControlValidator]=\"control\">\n      <div class=\"input-group\">\n        <label class=\"input-group-addon input-group-label\"\n          *ngIf=\"label || iconBefore\"\n          [attr.for]=\"id\"\n          [ngClass]=\"{'disabled': control.disabled || disabled, 'label-bare': iconBefore && !label}\">\n          <i *ngIf=\"iconBefore\" class=\"glyphicon\" [ngClass]=\"iconBefore\"></i>\n          {{label}}</label\n        >\n        <input #selector [id]=\"id\" [attr.type]=\"type\" class=\"form-control\"\n          [attr.step]=\"step\"\n          [ngClass]=\"{'has-label': label}\"\n          [readonly]=\"readonly\"\n          [disabled]=\"disabled || control.disabled\"\n          [placeholder]=\"placeholder\"\n          [min]=\"min\"\n          [max]=\"max\"\n          [value]=\"value || ''\"\n          (input)=\"onInputChange()\"\n          (blur)=\"blur.emit($event)\"\n          (keydown)=\"keyDown.emit($event)\"\n          (focus)=\"focus.emit($event)\"\n          (click)=\"click.emit($event)\"\n        />\n        <span *ngIf=\"iconAfter\" [ngClass]=\"{'disabled': control.disabled || disabled}\" class=\"input-group-addon\"\n          (click)=\"onIconAfterClick($event)\"><i class=\"glyphicon\" [ngClass]=\"iconAfter\"></i></span>\n      </div>\n      <div class=\"pt5\" *ngIf=\"showErrors\" [formControlValidatorFeedback]=\"control\"></div>\n    </div>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], AppInputComponent);
    return AppInputComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-select.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return AppSelectOptionData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppSelectComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_multiselect__ = __webpack_require__("../../../../bootstrap-multiselect/dist/js/bootstrap-multiselect.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_multiselect___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_bootstrap_multiselect__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var AppSelectOptionData;
(function (AppSelectOptionData) {
    function isOptionData(x) {
        return x && x.hasOwnProperty('id');
    }
    AppSelectOptionData.isOptionData = isOptionData;
    AppSelectOptionData.fromList = function (list, labels) {
        if (Array.isArray(labels)) {
            return list.map(function (id, idx) {
                return { id: id, text: labels[idx] || String(id) };
            });
        }
        if (labels) {
            return list.map(function (id) {
                return { id: id, text: labels[id] || String(id) };
            });
        }
        return list.map(function (id) {
            return { id: id, text: String(id) };
        });
    };
})(AppSelectOptionData || (AppSelectOptionData = {}));
var AppSelectComponent = (function () {
    function AppSelectComponent(zone, el) {
        var _this = this;
        this.zone = zone;
        this.el = el;
        this.disabled = false;
        this.showErrors = true;
        this.label = null;
        this.multiple = false;
        this.allowNull = false;
        this.placeholder = '-Select-';
        this.options = [];
        this.iconBefore = null;
        this.nullSelectedText = 'None';
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        // refers to http://davidstutz.github.io/bootstrap-multiselect/
        this.defaultOptions = {
            maxHeight: 200,
            disableIfEmpty: true,
            includeSelectAllOption: true,
            selectAllJustVisible: false,
            enableClickableOptGroups: false,
            enableCollapsibleOptGroups: true,
            enableFiltering: true,
            includeFilterClearBtn: false,
            filterPlaceholder: 'Search...',
            enableCaseInsensitiveFiltering: true,
            buttonClass: 'btn btn-default btn-select',
            buttonWidth: '100%',
            delimiterText: '; ',
            allSelectedText: 'All Options Selected',
            nonSelectedText: 'No Option Selected',
            //buttonContainer: '<div class="input-group-btn" />',
            templates: {
                filter: '<li class="multiselect-item filter"><div class="search-input-group"><input class="form-control multiselect-search" type="text" /></div></li>',
            },
            onChange: function () {
                _this.zone.run(function () {
                    _this.value = _this.getElementValue();
                    _this.control.markAsDirty();
                    _this.control.setValue(_this.value);
                    _this.valueChange.emit(_this.value);
                });
            },
            onDropdownShow: function () {
                _this.element.parent().find('.input-group-addon').addClass('active');
            },
            onDropdownHide: function () {
                _this.element.parent().find('.input-group-addon').removeClass('active');
            },
        };
        this._preparedOptions = [];
        this._selectionMap = {};
    }
    AppSelectComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (changes.hasOwnProperty('options')) {
            this._prepareOptionsMapping();
            this.syncPluginData();
        }
        if (changes.hasOwnProperty('control') && this.control) {
            this.value = this.control.value;
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.controlSubscription = this.control.valueChanges.subscribe(function (value) {
                _this.value = value;
                _this.syncElementValue();
            });
            this.syncElementValue();
        }
        else if (!this.control) {
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.control = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]({ value: this.value, disabled: this.disabled });
        }
        if (changes.hasOwnProperty('value')) {
            this.control.setValue(this.value);
            this.syncElementValue();
        }
        this.syncPluginAvailability();
    };
    AppSelectComponent.prototype.ngAfterViewInit = function () {
        this.element = jQuery(this.el.nativeElement).find('select');
        this.initPlugin();
    };
    AppSelectComponent.prototype.ngOnDestroy = function () {
        this.destroyPlugin();
        this.controlSubscription && this.controlSubscription.unsubscribe();
    };
    AppSelectComponent.prototype.activateSelect = function (event) {
        event.stopPropagation();
        jQuery(this.el.nativeElement).find('.btn-select').dropdown('toggle');
    };
    AppSelectComponent.prototype.initPlugin = function () {
        var _this = this;
        this.destroyPlugin();
        this.zone.runOutsideAngular(function () {
            if (_this.element) {
                _this.element.multiselect(Object.assign({}, _this.defaultOptions, { nonSelectedText: _this.placeholder }));
            }
            _this.syncElementValue();
        });
        this.syncPluginData();
        this.syncPluginAvailability();
    };
    AppSelectComponent.prototype.syncPluginAvailability = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            if (_this.element) {
                (_this.disabled || _this.control.disabled)
                    ? _this.element.multiselect('disable')
                    : _this.element.multiselect('enable');
            }
        });
    };
    AppSelectComponent.prototype.syncPluginData = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            if (_this.element && _this._preparedOptions) {
                _this.element.multiselect('dataprovider', _this._preparedOptions);
                _this.syncElementValue();
            }
        });
    };
    AppSelectComponent.prototype.destroyPlugin = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            if (_this.element) {
                _this.element.multiselect('destroy');
            }
        });
    };
    AppSelectComponent.prototype.getElementValue = function () {
        var _this = this;
        if (!this.element) {
            throw new Error('No element available');
        }
        if (this.multiple) {
            return (this.element.val() || []).map(function (_) { return _this._mapSelectionToValue(_); });
        }
        else {
            return this._mapSelectionToValue(this.element.val());
        }
    };
    AppSelectComponent.prototype.syncElementValue = function () {
        var _this = this;
        if (!this.element) {
            return;
        }
        this.zone.runOutsideAngular(function () {
            if (_this.multiple) {
                if (Array.isArray(_this.value)) {
                    var values = _this.value.map(function (_) { return _this._mapValueToSelection(_); });
                    _this.element.val(values).multiselect('refresh');
                }
            }
            else {
                var value = _this._mapValueToSelection(_this.value);
                _this.element.val(value).multiselect('refresh');
            }
            _this.element.multiselect('refresh');
        });
    };
    // these three functions are here to prepare uniform options for multiselect with string IDs
    AppSelectComponent.prototype._prepareOptionsMapping = function () {
        var reducer = function (options, prefix) {
            if (prefix === void 0) { prefix = ''; }
            return options.reduce(function (_a, option, idx) {
                var accOptions = _a[0], accMap = _a[1];
                var id = prefix + String(idx);
                if (AppSelectOptionData.isOptionData(option)) {
                    var out = { value: id, label: option.text };
                    accOptions.push(out);
                    accMap[id] = option.id;
                    if (option.children) {
                        var _b = reducer(option.children, id + ":"), childrenOptions = _b[0], childrenMap = _b[1];
                        out.children = childrenOptions;
                        Object.assign(accMap, childrenMap);
                    }
                }
                else {
                    accOptions.push({ value: id, label: String(option) });
                    accMap[id] = option;
                }
                return [accOptions, accMap];
            }, [[], {}]);
        };
        var options = this.allowNull ? [{ id: null, text: this.nullSelectedText }].concat(this.options) : this.options;
        _a = reducer(options || []), this._preparedOptions = _a[0], this._selectionMap = _a[1];
        var _a;
    };
    AppSelectComponent.prototype._mapValueToSelection = function (x) {
        return __WEBPACK_IMPORTED_MODULE_2_lodash__["findKey"](this._selectionMap, function (_) { return _ === x; });
    };
    AppSelectComponent.prototype._mapSelectionToValue = function (x) {
        return this._selectionMap[x];
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppSelectComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSelectComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSelectComponent.prototype, "showErrors", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppSelectComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSelectComponent.prototype, "multiple", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSelectComponent.prototype, "allowNull", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppSelectComponent.prototype, "placeholder", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], AppSelectComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], AppSelectComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppSelectComponent.prototype, "iconBefore", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppSelectComponent.prototype, "nullSelectedText", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppSelectComponent.prototype, "valueChange", void 0);
    AppSelectComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-select',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <div class=\"form-group p0\" [formControlValidator]=\"control\">\n      <div class=\"input-group\" [ngClass]=\"{'has-label': label}\">\n        <label class=\"input-group-addon input-group-label\"\n          *ngIf=\"label || iconBefore\"\n          [ngClass]=\"{'disabled': control.disabled || disabled, 'label-bare': iconBefore && !label}\">\n          <i *ngIf=\"iconBefore\" class=\"glyphicon\" [ngClass]=\"iconBefore\"></i>\n          {{label}}</label>\n        <select [multiple]=\"multiple\"></select>\n        <span [ngClass]=\"{'disabled': control.disabled || disabled}\" class=\"input-group-addon\" (click)=\"activateSelect($event)\">\n          <i class=\"glyphicon\" [ngClass]=\"{'glyphicon-th': multiple, 'glyphicon-chevron-down': !multiple}\"></i>\n        </span>\n      </div>\n      <div class=\"pt5\" *ngIf=\"showErrors\" [formControlValidatorFeedback]=\"control\"></div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], AppSelectComponent);
    return AppSelectComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/app-slider.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppSliderComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppSliderComponent = (function () {
    function AppSliderComponent(zone) {
        var _this = this;
        this.zone = zone;
        this.value = [];
        this.disabled = false;
        this.label = null;
        this.options = [];
        this.min = 0;
        this.max = 10;
        this.step = 1;
        this.range = false;
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_1__angular_common__["d" /* DecimalPipe */]('en-US');
        this._formatValue = function (value) {
            if (_this.formatter) {
                return _this.formatter(value);
            }
            return value
                .map(function (_) { return _this._decimalPipe.transform(_, '1.0-1'); })
                .join(' - ');
        };
    }
    AppSliderComponent.prototype.ngOnChanges = function (changes) {
        this.initPlugin();
        // console.log('changes', changes);
        if ('value' in changes) {
            this.value = this.value || [this.min, this.max];
            this.syncElementValue();
        }
        if ('disabled' in changes) {
            if (this.disabled) {
                $(this.selector.nativeElement).slider('disable');
            }
            else {
                $(this.selector.nativeElement).slider('enable');
            }
        }
    };
    AppSliderComponent.prototype.syncElementValue = function () {
        if (this.selector && typeof this.value !== 'undefined') {
            $(this.selector.nativeElement).slider({ values: this.value });
        }
    };
    AppSliderComponent.prototype.ngAfterViewInit = function () {
        this.initPlugin();
        this.syncElementValue();
    };
    AppSliderComponent.prototype.ngOnDestroy = function () {
        this.destroyPlugin();
    };
    AppSliderComponent.prototype.initPlugin = function () {
        var _this = this;
        this.destroyPlugin();
        this.zone.runOutsideAngular(function () {
            $(_this.selector.nativeElement).slider({
                range: _this.range,
                min: _this.min,
                step: _this.step,
                max: _this.max,
                values: _this.value,
                stop: function (event, ui) {
                    _this.value = ui.values;
                    _this.valueChange.emit(_this.value);
                }
            });
        });
        this.valueChange.emit(this.value);
    };
    AppSliderComponent.prototype.destroyPlugin = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            if (_this.selector && $(_this.selector.nativeElement).slider('instance')) {
                $(_this.selector.nativeElement).slider('destroy');
            }
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], AppSliderComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSliderComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AppSliderComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AppSliderComponent.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppSliderComponent.prototype, "min", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppSliderComponent.prototype, "max", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], AppSliderComponent.prototype, "step", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], AppSliderComponent.prototype, "range", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Function)
    ], AppSliderComponent.prototype, "formatter", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AppSliderComponent.prototype, "valueChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('selector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], AppSliderComponent.prototype, "selector", void 0);
    AppSliderComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-slider',
            template: "\n    <span *ngIf=\"!!label\">{{label}}:</span>\n    <span style=\"padding:2px;\">{{value | apply: _formatValue}}</span>\n    <div #selector style=\"margin:10px;\"></div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], AppSliderComponent);
    return AppSliderComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ModalComponent = (function () {
    function ModalComponent(el, renderer) {
        var _this = this;
        this.el = el;
        this.renderer = renderer;
        this.id = '';
        this.sizeClass = '';
        this.buttonClick = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onClosed = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.shown = false;
        this.keyPressSubscription = renderer.listenGlobal('body', 'keyup', function (event) {
            if (event.keyCode === 27) {
                _this.hide();
            }
        });
    }
    ModalComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.modalEl = $(this.el.nativeElement).children('.modal');
        this.modalEl.on('hidden.bs.modal', function () {
            _this.shown = false;
            _this.onClosed.emit();
        });
        this.shown && this.show();
    };
    ModalComponent.prototype.ngOnDestroy = function () {
        this.keyPressSubscription();
    };
    ModalComponent.prototype.onButton = function (button) {
        this.buttonClick.emit(button);
    };
    ModalComponent.prototype.show = function () {
        this.shown = true;
        this.modalEl && this.modalEl.modal({
            show: true,
            backdrop: 'static',
            keyboard: false,
        });
    };
    ModalComponent.prototype.hide = function () {
        this.modalEl && this.modalEl.modal('hide');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('modalId'),
        __metadata("design:type", String)
    ], ModalComponent.prototype, "id", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ModalComponent.prototype, "preTitle", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ModalComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ModalComponent.prototype, "sizeClass", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ModalComponent.prototype, "buttons", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModalComponent.prototype, "buttonClick", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModalComponent.prototype, "onClosed", void 0);
    ModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-modal',
            styles: ["\n    .modal-content {\n      background: linear-gradient(to right, #e7e8ed 0%, #f3f4f9 20%);\n      border-radius: 0;\n    }\n    .modal-header {\n      border-bottom: 0;\n    }\n    .modal-title {\n      text-transform: uppercase;\n      font-family: \"Montserrat\", sans-serif;\n      font-size: 12px;\n      font-weight: bold;\n    }\n    .modal-title .pre-title {\n      color: #5b6f9a;\n    }\n    :host /deep/ .tab-pane {\n      background: white;\n      padding-top: 1px;\n    }\n  "],
            template: "\n    <div class=\"modal fade\" [id]=\"id\" role=\"dialog\">\n      <div class=\"modal-dialog {{sizeClass}}\" role=\"document\">\n        <div class=\"modal-content\" *ngIf=\"shown\">\n          <div class=\"modal-header\">\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <i class=\"glyphicon glyphicon-remove-circle\" aria-hidden=\"true\"></i>\n            </button>\n            <h4 class=\"modal-title\"><span class=\"pre-title\" *ngIf=\"preTitle\">{{preTitle + ': '}}</span>{{title}}</h4>\n          </div>\n          <div class=\"modal-body\">\n            <ng-content></ng-content>\n          </div>\n          <div *ngIf=\"buttons\" class=\"modal-footer\">\n            <button *ngFor=\"let button of buttons\" type=\"button\" (click)=\"onButton(button)\" [disabled]=\"button.disabled\" class=\"btn {{button.class || 'btn-default'}}\">{{button.title}}</button>\n          </div>\n        </div><!-- /.modal-content -->\n      </div><!-- /.modal-dialog -->\n    </div><!-- /.modal -->\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */]])
    ], ModalComponent);
    return ModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/pagination.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PaginationComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var PaginationComponent = (function () {
    function PaginationComponent() {
        this.currentPageSize = 0;
        this.pageSizeOptions = [10, 20, 50, 100, 500];
    }
    PaginationComponent.prototype.setPageSize = function (value) {
        this.pageSize.setValue(value);
        this.page.setValue(1);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], PaginationComponent.prototype, "page", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], PaginationComponent.prototype, "pageSize", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], PaginationComponent.prototype, "currentPageSize", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], PaginationComponent.prototype, "rowsCount", void 0);
    PaginationComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-pagination',
            template: "\n    <div class=\"btn-toolbar pull-right\" role=\"toolbar\">\n      <div class=\"btn-group btn-group-tight\" role=\"group\">\n        <button type=\"button\" class=\"btn btn-link\"\n          (click)=\"page.setValue(page.value - 1)\"\n          [disabled]=\"page.value === 1\"><i class=\"glyphicon glyphicon-arrow-left\"></i></button>\n        <span class=\"btn btn-text\">{{(page.value - 1) * pageSize.value + 1}} - {{(page.value - 1) * pageSize.value + currentPageSize}}</span>\n        <button type=\"button\" class=\"btn btn-link\"\n          (click)=\"page.setValue(page.value + 1)\"\n          [disabled]=\"(page.value * pageSize.value) >= rowsCount\"><i class=\"glyphicon glyphicon-arrow-right\"></i></button>\n        <div class=\"btn-group\">\n          <button class=\"btn btn-link dropdown-toggle\" type=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n            {{pageSize.value}} per page\n            <span class=\"caret\"></span>\n          </button>\n          <ul class=\"dropdown-menu\">\n            <li *ngFor=\"let value of pageSizeOptions\" class=\"link\" [ngClass]=\"{'active': pageSize.value === value}\"><a (click)=\"setPageSize(value)\">{{value}}</a></li>\n          </ul>\n        </div>\n      </div>\n    </div>"
        })
    ], PaginationComponent);
    return PaginationComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/sort-columns.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SortColumnsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_forms__ = __webpack_require__("../../../../../src/app/utils/forms.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var SortColumnsComponent = (function () {
    function SortColumnsComponent(changeDetector) {
        var _this = this;
        this.changeDetector = changeDetector;
        this.ascDesc = ['asc', 'desc'];
        this.conditions = new __WEBPACK_IMPORTED_MODULE_4__utils_forms__["a" /* AppFormArray */]([this.newCondition()]);
        this.conditions.valueChanges.subscribe(function () {
            // dunno why it needs to be done
            // but template is not updated in terms of conditions.invalid
            _this.changeDetector.markForCheck();
        });
    }
    SortColumnsComponent.prototype.open = function () {
        if (this.control.value) {
            var valueParsed = this.control.value.split(',').map(function (item) {
                return (item[0] === '-')
                    ? { column: item.substring(1), order: 'desc' }
                    : { column: item, order: 'asc' };
            });
            __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.conditions, valueParsed);
        }
        else {
            __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.conditions, [
                { column: '', order: 'asc' },
            ]);
        }
        this.modal.show();
    };
    SortColumnsComponent.prototype.newCondition = function () {
        return new __WEBPACK_IMPORTED_MODULE_4__utils_forms__["b" /* AppFormGroup */]({
            column: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            order: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('asc', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
        });
    };
    SortColumnsComponent.prototype.onButtonClick = function (button) {
        if (button.title === 'Sort') {
            var resultOrder = this.conditions.value.map(function (condition) {
                var order = condition.order === 'desc' ? '-' : '';
                return "" + order + condition.column;
            });
            this.control.setValue(resultOrder.join(','));
            this.modal.hide();
        }
        if (button.title === 'Cancel') {
            this.modal.hide();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], SortColumnsComponent.prototype, "columns", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], SortColumnsComponent.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2__modal_component__["a" /* ModalComponent */])
    ], SortColumnsComponent.prototype, "modal", void 0);
    SortColumnsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'sort-columns',
            template: "\n    <button class=\"btn btn-secondary btn-xs\" title=\"Sort\" (click)=\"open()\">\n      <i class=\"glyphicon glyphicon-sort\"></i></button>\n    <app-modal #modal\n      [title]=\"'Select columns to sort'\"\n      [buttons]=\"[\n        {'class': 'btn-primary', 'title': 'Sort', 'disabled': conditions.invalid},\n        {'class': 'btn-secondary', 'title': 'Cancel', 'disabled': false}\n      ]\"\n      (buttonClick)=\"onButtonClick($event)\">\n      <!--{{conditions.value | json}}-->\n      <div class=\"row\">\n        <div class=\"col-xs-12\">\n          <label>Add Sort Column</label>\n          <button title=\"Add Sort Column\"\n            (click)=\"conditions.push(newCondition())\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-plus\"></i></button>\n        </div>\n      </div>\n      <div class=\"row\" *ngFor=\"let condition of conditions.controls;let i = index;let last = last\">\n        <div class=\"col-xs-5\">\n          <app-select [options]=\"columns\" [control]=\"condition.controls.column\"></app-select>\n        </div>\n        <div class=\"col-xs-5\">\n          <app-select [options]=\"ascDesc\" [control]=\"condition.controls.order\"></app-select>\n        </div>\n        <div class=\"col-xs-2\">\n          <button type=\"button\"\n            title=\"Remove Sort Column\"\n            (click)=\"conditions.removeAt(i)\"\n            class=\"btn btn-default\"><i class=\"glyphicon glyphicon-remove\"></i></button>\n        </div>\n      </div>\n    </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["k" /* ChangeDetectorRef */]])
    ], SortColumnsComponent);
    return SortColumnsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/spinner.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SpinnerComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

// Usage as attribute or as tag
// <div [visibility]="loading">html part</div>
// <app-spinner [visibility]="loading">html part</app-spinner>
var SpinnerComponent = (function () {
    function SpinnerComponent() {
        this.visibility = false;
        this.color = '#0d47a1';
        this.backgroundColor = '#0d47a1';
        this.height = 100;
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], SpinnerComponent.prototype, "visibility", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], SpinnerComponent.prototype, "color", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], SpinnerComponent.prototype, "backgroundColor", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], SpinnerComponent.prototype, "height", void 0);
    SpinnerComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-spinner',
            template: "<div *ngIf=\"visibility\" class=\"spinner-wrapper\" [ngStyle]=\"{'margin-top': -height/2 + 'px', 'margin-left': -height/2 + 'px'}\">\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\"\n     [attr.width]=\"height + 'px'\" [attr.height]=\"height + 'px'\" viewBox=\"0 0 40 40\" enable-background=\"new 0 0 40 40\" xml:space=\"preserve\">\n      <path opacity=\"0.2\" [attr.fill]=\"backgroundColor\" d=\"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n        s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n        c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z\"/>\n      <path [attr.fill]=\"color\" d=\"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n        C22.32,8.481,24.301,9.057,26.013,10.047z\">\n        <animateTransform attributeType=\"xml\"\n          attributeName=\"transform\"\n          type=\"rotate\"\n          from=\"0 20 20\"\n          to=\"360 20 20\"\n          dur=\"0.5s\"\n          repeatCount=\"indefinite\"/>\n      </path>\n    </svg>\n    <ng-content></ng-content>\n  </div>"
        })
    ], SpinnerComponent);
    return SpinnerComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/components/tabs.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TabsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var TabsComponent = (function () {
    function TabsComponent() {
        this.active = 0;
        this.editable = false;
        this.placeholders = [];
        this.hiddenTabs = [];
        this.activeChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onTabEdit = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.editTab = [];
    }
    TabsComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.editTab = [];
        this.tabs.forEach(function (_, i) {
            _this.editTab[i] = false;
        });
    };
    TabsComponent.prototype.setActive = function (i) {
        var _this = this;
        this.active = i;
        this.activeChange.emit(i);
        this.tabs.forEach(function (_, i) {
            if (_this.active !== i) {
                _this.editTab[i] = false;
            }
        });
    };
    TabsComponent.prototype._onTabEdit = function (event, i) {
        this.tabs[i] = event.target.value;
        this.onTabEdit.emit({ value: event.target.value, index: i });
        this.editTab[i] = false;
    };
    TabsComponent.prototype._onKeyPress = function (event, i) {
        if (event.key === 'Enter') {
            this._onTabEdit(event, i);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TabsComponent.prototype, "tabs", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], TabsComponent.prototype, "active", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], TabsComponent.prototype, "editable", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TabsComponent.prototype, "placeholders", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TabsComponent.prototype, "hiddenTabs", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], TabsComponent.prototype, "activeChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], TabsComponent.prototype, "onTabEdit", void 0);
    TabsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-tabs',
            template: "\n    <div class=\"tabpanel\">\n      <ul class=\"nav nav-tabs\">\n        <ng-template ngFor let-tab let-i=\"index\" [ngForOf]=\"tabs\">\n          <li class=\"nav-item brand-tab-hover\" [ngClass]=\"{'active': active === i}\"\n            *ngIf=\"hiddenTabs.indexOf(i) === -1\">\n            <a class=\"nav-link\" (click)=\"setActive(i)\">\n              <span *ngIf=\"!editTab[i]\">{{tab}}</span>\n              <input *ngIf=\"editable && editTab[i]\"\n                (change)=\"_onTabEdit($event, i)\"\n                (blur)=\"editTab[i] = false\"\n                (keypress)=\"_onKeyPress($event, i)\"\n                [value]=\"tab\"\n                [placeholder]=\"placeholders[i]\">\n              <i *ngIf=\"editable && !editTab[i]\" class=\"glyphicon glyphicon-edit pull-right brand-edit-tab\"\n                (click)=\"editTab[i] = true\"></i>\n            </a>\n          </li>\n        </ng-template>\n      </ul>\n    </div>\n    <ng-content></ng-content>\n  "
        })
    ], TabsComponent);
    return TabsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/core-ui.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CoreUIModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ng2_dnd__ = __webpack_require__("../../../../ng2-dnd/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_ngx_bootstrap_typeahead__ = __webpack_require__("../../../../ngx-bootstrap/typeahead/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__ = __webpack_require__("../../../../../src/app/core-ui/core-ui.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_spinner_component__ = __webpack_require__("../../../../../src/app/core-ui/components/spinner.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_pagination_component__ = __webpack_require__("../../../../../src/app/core-ui/components/pagination.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_tabs_component__ = __webpack_require__("../../../../../src/app/core-ui/components/tabs.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__components_app_form_group_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-form-group.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__components_app_input_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-input.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__components_app_input_suggestion_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-input-suggestion.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__components_app_check_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-check.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__components_app_slider_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-slider.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__components_sort_columns_component__ = __webpack_require__("../../../../../src/app/core-ui/components/sort-columns.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__components_app_fake_control_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-fake-control.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__directives_form_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/form.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__directives_formValidatorFeedback_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/formValidatorFeedback.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__directives_code_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/code.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__directives_timer_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/timer.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__directives_dnd_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/dnd.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__directives_dropdown_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/dropdown.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__directives_dropdown_context_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/dropdown-context.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__directives_prevent_default_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/prevent-default.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__directives_tooltip_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/tooltip.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__directives_adaptive_height_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/adaptive-height.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__directives_sticky_header_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/sticky-header.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__directives_grid_sort_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/grid-sort.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__directives_draggable_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/draggable.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__directives_resizable_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/resizable.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__directives_capture_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/capture.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__directives_if_once_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/if-once.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__directives_ng_var_directive__ = __webpack_require__("../../../../../src/app/core-ui/directives/ng-var.directive.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};




































var CORE_UI_DECLARATIONS = [
    // Components
    __WEBPACK_IMPORTED_MODULE_7__components_modal_component__["a" /* ModalComponent */],
    __WEBPACK_IMPORTED_MODULE_8__components_spinner_component__["a" /* SpinnerComponent */],
    __WEBPACK_IMPORTED_MODULE_9__components_pagination_component__["a" /* PaginationComponent */],
    __WEBPACK_IMPORTED_MODULE_10__components_tabs_component__["a" /* TabsComponent */],
    __WEBPACK_IMPORTED_MODULE_11__components_app_select_component__["a" /* AppSelectComponent */],
    __WEBPACK_IMPORTED_MODULE_12__components_app_form_group_component__["a" /* AppFormGroupComponent */],
    __WEBPACK_IMPORTED_MODULE_13__components_app_input_component__["a" /* AppInputComponent */],
    __WEBPACK_IMPORTED_MODULE_14__components_app_input_suggestion_component__["a" /* AppInputSuggestionComponent */],
    __WEBPACK_IMPORTED_MODULE_15__components_app_check_component__["a" /* AppCheckComponent */],
    __WEBPACK_IMPORTED_MODULE_16__components_app_slider_component__["a" /* AppSliderComponent */],
    __WEBPACK_IMPORTED_MODULE_17__components_sort_columns_component__["a" /* SortColumnsComponent */],
    __WEBPACK_IMPORTED_MODULE_18__components_app_fake_control_component__["a" /* AppFakeControlComponent */],
    // Pipes
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["h" /* SafePipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["g" /* PluralizePipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["i" /* TruncatePipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["b" /* DateAgoPipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["f" /* NumberTitlePipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["e" /* MapPipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["a" /* ApplyPipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["d" /* FormatBytesPipe */],
    __WEBPACK_IMPORTED_MODULE_5__core_ui_pipes__["c" /* FilterPipe */],
    // Directives
    __WEBPACK_IMPORTED_MODULE_19__directives_form_directive__["a" /* FormControlValidatorDirective */],
    __WEBPACK_IMPORTED_MODULE_20__directives_formValidatorFeedback_directive__["a" /* FormControlValidatorFeedbackDirective */],
    __WEBPACK_IMPORTED_MODULE_21__directives_code_directive__["a" /* CodeDirective */],
    __WEBPACK_IMPORTED_MODULE_22__directives_timer_directive__["a" /* TimerDirective */],
    __WEBPACK_IMPORTED_MODULE_23__directives_dnd_directive__["a" /* DragImageDirective */],
    __WEBPACK_IMPORTED_MODULE_24__directives_dropdown_directive__["a" /* DropDownDirective */],
    __WEBPACK_IMPORTED_MODULE_25__directives_dropdown_context_directive__["a" /* DropDownContextDirective */],
    __WEBPACK_IMPORTED_MODULE_26__directives_prevent_default_directive__["a" /* PreventDefaultClickDirective */],
    __WEBPACK_IMPORTED_MODULE_27__directives_tooltip_directive__["a" /* TooltipDirective */],
    __WEBPACK_IMPORTED_MODULE_28__directives_adaptive_height_directive__["a" /* AdaptiveHeightDirective */],
    __WEBPACK_IMPORTED_MODULE_29__directives_sticky_header_directive__["a" /* StickyHeaderDirective */],
    __WEBPACK_IMPORTED_MODULE_30__directives_grid_sort_directive__["a" /* GridSortDirective */],
    __WEBPACK_IMPORTED_MODULE_31__directives_draggable_directive__["a" /* DraggableDirective */],
    __WEBPACK_IMPORTED_MODULE_32__directives_resizable_directive__["a" /* ResizableDirective */],
    __WEBPACK_IMPORTED_MODULE_33__directives_capture_directive__["a" /* CaptureDirective */],
    __WEBPACK_IMPORTED_MODULE_34__directives_if_once_directive__["a" /* IfOnceDirective */],
    __WEBPACK_IMPORTED_MODULE_35__directives_ng_var_directive__["a" /* VarDirective */],
];
var CoreUIModule = (function () {
    function CoreUIModule() {
    }
    CoreUIModule_1 = CoreUIModule;
    CoreUIModule.forRoot = function () {
        return {
            ngModule: CoreUIModule_1,
            providers: __WEBPACK_IMPORTED_MODULE_3_ng2_dnd__["a" /* DndModule */].forRoot().providers,
        };
    };
    CoreUIModule = CoreUIModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_6__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                __WEBPACK_IMPORTED_MODULE_3_ng2_dnd__["a" /* DndModule */],
                __WEBPACK_IMPORTED_MODULE_4_ngx_bootstrap_typeahead__["a" /* TypeaheadModule */],
            ],
            declarations: CORE_UI_DECLARATIONS,
            exports: [
                CORE_UI_DECLARATIONS,
                __WEBPACK_IMPORTED_MODULE_3_ng2_dnd__["a" /* DndModule */],
            ]
        })
    ], CoreUIModule);
    return CoreUIModule;
    var CoreUIModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/core-ui.pipes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DateAgoPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return TruncatePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return PluralizePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return SafePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return NumberTitlePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return MapPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return FilterPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ApplyPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return FormatBytesPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_observable_interval__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/interval.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var secondsPer = {
    minute: 60,
    hour: 3600,
    day: 86400,
    week: 604800,
    month: 2592000,
    year: 31536000
}, getOffset = function (date) {
    return Math.floor(Date.now() / 1000) - (Math.floor(Date.parse(date) / 1000));
};
var DateAgoPipe = (function () {
    function DateAgoPipe() {
    }
    DateAgoPipe_1 = DateAgoPipe;
    DateAgoPipe.prototype.transform = function (value) {
        // TODO: it seems that observable interval is deleted when pipe is destroyed. it needs clarity about it
        if (value)
            return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].interval(1000).startWith(0).map(function () { return DateAgoPipe_1.getLeftTime(value); });
    };
    DateAgoPipe.getLeftTime = function (value) {
        var result, delta = getOffset(value), years = Math.floor(delta / secondsPer.year), months = Math.floor((delta % secondsPer.year) / secondsPer.month), weeks = Math.floor((delta % secondsPer.month) / secondsPer.week), days = Math.floor((delta % secondsPer.week) / secondsPer.day), hours = Math.floor((delta % secondsPer.day) / secondsPer.hour), minutes = Math.floor((delta % secondsPer.hour) / secondsPer.minute);
        // TODO: we can implement float plural -s
        if (years > 0) {
            result = years + ' years' + (months ? ' and ' + months + ' months' : '');
        }
        else if (months > 0) {
            result = months + ' months' + (weeks ? ' and ' + weeks + ' weeks' : '');
        }
        else if (weeks > 0) {
            result = weeks + ' weeks' + (days ? ' and ' + days + ' days' : '');
        }
        else if (days > 0) {
            result = days + ' days';
        }
        else if (hours > 0) {
            result = hours + ' hours' + (hours < 2 && minutes ? ' and ' + minutes + ' minutes' : '');
        }
        else if (minutes > 0) {
            result = minutes + ' minutes';
        }
        else {
            result = 'less than a minute';
        }
        return result + ' ago';
    };
    DateAgoPipe = DateAgoPipe_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'dateAgo' })
    ], DateAgoPipe);
    return DateAgoPipe;
    var DateAgoPipe_1;
}());

var TruncatePipe = (function () {
    function TruncatePipe() {
    }
    // TODO: warning - there is just .toString transformation, so, for null you'll get 'null' string and etc
    // TODO: should user able to use limitTo as 0? Exp "0 || 15" causes 15
    // TODO: should user able to use suffix as ''? In this case suffix will be '...' (default)
    /**
     * Pipe for string truncation.
     * @param value
     * @param args
     *  arg[0] - limitTo value
     *  arg[1] - suffix
     * @returns {string}
     */
    TruncatePipe.prototype.transform = function (value) {
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var valueStr = String(value), limitTo = parseInt(args[0]) || 15, suffix = args[1] ? String(args[1]) : '...';
        return valueStr.length <= limitTo
            ? valueStr : valueStr.substring(0, limitTo) + suffix;
    };
    TruncatePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'truncate' })
    ], TruncatePipe);
    return TruncatePipe;
}());

var PluralizePipe = (function () {
    function PluralizePipe() {
    }
    /**
     *
     * @param value
     * @param label
     * @param plural
     * There are 3 variants of usage:
     *  with label like 'item' -> returns 'item' for 1 and 'items' for other
     *  with label like 'child' and plural like 'children' -> returns 'child' for 1 and 'children' for other
     *  with label like complex object { '0': 'No items', '1': 'Just one', 'other': '{} items' }
     *    -> returns 'No items' for 0
     *    -> returns 'Just one' for 1 (and you can specify any other specific count)
     *    -> returns '8 items' for 8 and etc
     * @returns {any}
     */
    PluralizePipe.prototype.transform = function (value, label, plural) {
        // TODO: some util func for this isObject checking?
        if (typeof label === 'object') {
            var pattern = label[value] ? label[value] : label['other'];
            return (pattern.indexOf('{}') !== -1) ? pattern.replace('{}', value) : pattern;
        }
        // TODO: is it normal that we use plural for 0 count?
        return value === 1 ? label : (plural ? plural : label + 's');
    };
    PluralizePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'pluralize' })
    ], PluralizePipe);
    return PluralizePipe;
}());

var SafePipe = (function () {
    function SafePipe(sanitizer) {
        this.sanitizer = sanitizer;
        this.sanitizer = sanitizer;
    }
    SafePipe.prototype.transform = function (style) {
        return this.sanitizer.bypassSecurityTrustStyle(style);
    };
    SafePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'safe' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["b" /* DomSanitizer */]])
    ], SafePipe);
    return SafePipe;
}());

var NumberTitlePipe = (function () {
    function NumberTitlePipe() {
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_1__angular_common__["d" /* DecimalPipe */]('en-US');
    }
    NumberTitlePipe.prototype.transform = function (value, pattern) {
        if (pattern === void 0) { pattern = '1.0-3'; }
        try {
            var float = parseFloat(value);
            var str = String(float);
            var decimal = this.decimalPipe.transform(float, pattern);
            return decimal.length < str.length ? str : '';
        }
        catch (e) {
            return '';
        }
    };
    NumberTitlePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'numberTitle' })
    ], NumberTitlePipe);
    return NumberTitlePipe;
}());

var MapPipe = (function () {
    function MapPipe() {
    }
    /**
     *
     * @param value
     * @param func
     * @returns []
     */
    MapPipe.prototype.transform = function (value, func) {
        return value ? value.map(func) : [];
    };
    MapPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'map' })
    ], MapPipe);
    return MapPipe;
}());

var FilterPipe = (function () {
    function FilterPipe() {
    }
    /**
     * @param value
     * @param func
     * @returns []
     */
    FilterPipe.prototype.transform = function (value, func) {
        return value ? value.filter(func) : [];
    };
    FilterPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'filter' })
    ], FilterPipe);
    return FilterPipe;
}());

var ApplyPipe = (function () {
    function ApplyPipe() {
    }
    /**
     *
     * @param value
     * @param func
     * @param args
     * @returns value
     */
    ApplyPipe.prototype.transform = function (value, func) {
        var args = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            args[_i - 2] = arguments[_i];
        }
        return func.apply(void 0, [value].concat(args));
    };
    ApplyPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'apply' })
    ], ApplyPipe);
    return ApplyPipe;
}());

var FormatBytesPipe = (function () {
    function FormatBytesPipe() {
    }
    /**
     *
     * @param value
     * @param func
     * @returns []
     */
    FormatBytesPipe.prototype.transform = function (value) {
        return value ? __WEBPACK_IMPORTED_MODULE_5__utils_misc__["a" /* MiscUtils */].formatBytes(value) : '';
    };
    FormatBytesPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'formatBytes' })
    ], FormatBytesPipe);
    return FormatBytesPipe;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/adaptive-height.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdaptiveHeightDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var defaultOptions = {
    minHeight: 0,
    pageMargin: 15,
    property: 'max-height',
};
var AdaptiveHeightDirective = (function () {
    function AdaptiveHeightDirective(el, zone) {
        var _this = this;
        this.zone = zone;
        this._updateHeightBound = function () { return _this._updateHeight(); };
        this.el = el.nativeElement;
    }
    AdaptiveHeightDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.addEventListener('scroll', _this._updateHeightBound);
            window.addEventListener('resize', _this._updateHeightBound);
        });
        this._updateHeight();
    };
    AdaptiveHeightDirective.prototype.ngOnChanges = function () {
        var _this = this;
        this.options = Object.assign({}, defaultOptions, this.options);
        this._updateHeight();
        this.zone.runOutsideAngular(function () {
            window.setTimeout(function () { return _this._updateHeight(); });
        });
    };
    AdaptiveHeightDirective.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.removeEventListener('scroll', _this._updateHeightBound);
            window.removeEventListener('resize', _this._updateHeightBound);
        });
    };
    AdaptiveHeightDirective.prototype._updateHeight = function () {
        if ($(this.el).is(':visible')) {
            var windowHeight = $(window).height() + $(window).scrollTop();
            var elementOffset = $(this.el).offset().top;
            var height = Math.max(this.options.minHeight, windowHeight - elementOffset - this.options.pageMargin);
            $(this.el).css(this.options.property, height + "px");
            if ('targetHeight' in this.options) {
                var elementMargin = Math.max(this.options.targetHeight - height, 0);
                $(this.el).css('margin-bottom', elementMargin + "px");
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('adaptiveHeight'),
        __metadata("design:type", Object)
    ], AdaptiveHeightDirective.prototype, "options", void 0);
    AdaptiveHeightDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[adaptiveHeight]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], AdaptiveHeightDirective);
    return AdaptiveHeightDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/capture.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CaptureDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var CaptureDirective = (function () {
    function CaptureDirective() {
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('capture'),
        __metadata("design:type", Object)
    ], CaptureDirective.prototype, "value", void 0);
    CaptureDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[capture]',
            exportAs: 'capture'
        })
    ], CaptureDirective);
    return CaptureDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/code.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CodeDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__ = __webpack_require__("../../../../../src/app/utils/code.constants.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var CodeMirror = __webpack_require__("../../../../codemirror/lib/codemirror.js");
/**
 * Usage:
 *  <textarea formControlName="field" code="excel" code-table="ITable" code-options="any"></textarea>
 *  <input formControlName="field" code="sql" code-options="any">
 */
var CodeDirective = (function () {
    function CodeDirective(el) {
        var _this = this;
        this.DEFAULT_OPTIONS = {
            // lineWrapping: true,
            height: 65
        };
        this.CI_AC_CODE_NODE_TYPES = {
            'var': 'var',
            'fn': 'fn',
            'op': 'op',
            'delimiter': 'del'
        };
        this.CI_AC_CODE_NODE_FA_ICONS = {
            'var': 'icon-shuffle',
            'fn': 'icon-size-actual',
            'op': 'icon-energy'
        };
        this.columnSuggestions = [];
        this.excelSuggestions = [];
        this.sqlFnSuggestions = [];
        this.sqlOpSuggestions = [];
        this.hint = function (cm) {
            return new Promise(function (resolve) {
                setTimeout(function () {
                    var cursor = cm.getCursor(), line = cm.getLine(cursor.line);
                    var start = cursor.ch, end = cursor.ch;
                    while (start && /\w/.test(line.charAt(start - 1)))
                        --start;
                    while (end < line.length && /\w/.test(line.charAt(end)))
                        ++end;
                    var word = line.slice(start, end).toLowerCase();
                    var suggestionLists = [
                        _this.columnSuggestions
                    ];
                    if (_this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.EXCEL) {
                        suggestionLists.push(_this.excelSuggestions);
                    }
                    if (_this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.SQL) {
                        suggestionLists.push(_this.sqlFnSuggestions);
                        suggestionLists.push(_this.sqlOpSuggestions);
                    }
                    // Init total auto-completion list
                    var filteredSuggestionList = suggestionLists
                        .map(function (_) {
                        return _.filter(function (item) {
                            return item.text.toLowerCase().indexOf(word) === 0 || item.text === '';
                        });
                    })
                        .filter(function (_) { return _.length > 0; })
                        .reduce(function (acc, list) {
                        if (acc.length) {
                            acc.push(_this.newSuggestion('', null, _this.CI_AC_CODE_NODE_TYPES.delimiter));
                        }
                        return acc.concat(list);
                    }, []);
                    if (filteredSuggestionList.length > 0) {
                        return resolve({
                            list: filteredSuggestionList,
                            from: CodeMirror.Pos(cursor.line, start),
                            to: CodeMirror.Pos(cursor.line, end)
                        });
                    }
                    else {
                        return resolve(null);
                    }
                }, 100);
            })
                .then(function (result) {
                // Callback for moving cursor left by one char when function inserted
                if (result) {
                    CodeMirror.on(result, 'pick', function (comp) {
                        if (comp.typeOfCodeNode === _this.CI_AC_CODE_NODE_TYPES.fn) {
                            var cursor = cm.getCursor();
                            if (comp.text.indexOf('()') !== -1) {
                                cursor.ch -= 1;
                                cm.doc.setCursor(cursor);
                            }
                            else {
                                cursor.ch += 1;
                                cm.doc.setCursor(cursor);
                            }
                        }
                    });
                    CodeMirror.on(result, 'close', function () {
                        _this.removeTooltips('.CodeMirror-Excel-tooltip-autocomplete');
                        cm.curOp && _this.hintUsage(cm);
                    });
                    CodeMirror.on(result, 'select', function (completion, el) {
                        _this.removeTooltips();
                        // show tooltip
                        if (completion.brief) {
                            _this.tooltip(el.parentNode.getBoundingClientRect().right + window.pageXOffset, el.getBoundingClientRect().top + window.pageYOffset, completion.brief, true);
                        }
                    });
                }
                else {
                    // Force logic after closing auto-completion dropdown, cause we have no suggestionList
                    _this.removeTooltips('.CodeMirror-Excel-tooltip-autocomplete');
                    cm.curOp && _this.hintUsage(cm);
                }
                return result;
            });
        };
        this._hintRender = function (el, data, cursor) {
            if (cursor.typeOfCodeNode) {
                var icon = document.createElement('i');
                switch (cursor.typeOfCodeNode) {
                    case _this.CI_AC_CODE_NODE_TYPES.op:
                        icon.className = _this.CI_AC_CODE_NODE_FA_ICONS.op;
                        break;
                    case _this.CI_AC_CODE_NODE_TYPES.var:
                        icon.className = _this.CI_AC_CODE_NODE_FA_ICONS.var;
                        break;
                    case _this.CI_AC_CODE_NODE_TYPES.fn:
                        icon.className = _this.CI_AC_CODE_NODE_FA_ICONS.fn;
                        break;
                    case _this.CI_AC_CODE_NODE_TYPES.delimiter:
                        icon.className = '';
                }
                if (icon.className !== '') {
                    el.appendChild(icon);
                    el.appendChild(document.createTextNode('\u00A0'));
                }
                if (cursor.typeOfCodeNode !== _this.CI_AC_CODE_NODE_TYPES.delimiter) {
                    el.appendChild(document.createTextNode(cursor.displayText));
                }
                else {
                    el.appendChild(document.createElement('hr'));
                }
            }
            el.addEventListener('mouseover', function () {
                if (el.hintId !== null && _this.instance && _this.instance.state.completionActive.widget) {
                    var widget = _this.instance.state.completionActive.widget;
                    widget.changeActive(el.hintId);
                }
            });
        };
        this.el = el.nativeElement;
    }
    CodeDirective.prototype.ngOnInit = function () {
        var _this = this;
        if (!CodeMirror)
            return false;
        var options = this.setOptions();
        this.instance = CodeMirror.fromTextArea(this.el, options);
        options.value && this.instance.setValue(options.value);
        this.instance.on('change', function (editor) {
            if (editor.getDoc()) {
                var value = editor.getDoc().getValue();
                value !== _this.field.value && _this.field.setValue(value);
            }
        });
        this.instance.setSize(null, options.height); // only for height
        // if (this.mode === config.code.mode.EXCEL) {
        //   // now disallow adding newlines in the following simple way
        //   this.instance.on('beforeChange', function (instance, change) {
        //     let newtext = change.text.join('').replace(/\n/g, ''); // remove ALL \n !
        //     change.update(change.from, change.to, [newtext]);
        //     return true;
        //   });
        // }
        if (options.hintOptions) {
            this.instance.on('blur', function () {
                _this.removeTooltips();
            });
            this.instance.on('focus', function (cm) {
                !cm.state.completionActive && cm.showHint(cm);
            });
            this.instance.on('keyup', function (cm, event) {
                // Preventing auto-completion when hitting ignoring keys
                if (event.keyCode < 65 || event.keyCode > 90)
                    return; // Only letter key codes
                // Preventing auto-completion when selecting row from dropdown
                if (cm.state.completionActive && cm.state.completionActive.widget)
                    return;
                cm.showHint(cm);
            });
            this.instance.on('cursorActivity', function (cm) { return !_this.codeReadonly && _this.hintUsage(cm); });
        }
        //excel
        this.excelSuggestions = __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["a" /* EXCEL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).map(function (func) {
            return _this.newSuggestion(func.name, func.brief, _this.CI_AC_CODE_NODE_TYPES.fn);
        });
        //sql
        this.sqlFnSuggestions = __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["b" /* SQL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).map(function (func) {
            return _this.newSuggestion(func.name, func.brief, _this.CI_AC_CODE_NODE_TYPES.fn);
        });
        this.sqlOpSuggestions = __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["c" /* SQL_SUPPORTER_OPERATORS */].map(function (op) {
            return _this.newSuggestion(op.name, 'SQL', _this.CI_AC_CODE_NODE_TYPES.op);
        });
    };
    CodeDirective.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (this.instance) {
            this.instance.setOption('readOnly', this.codeReadonly ? 'nocursor' : false);
            if (this.codeOptions) {
                Object.keys(this.codeOptions).forEach(function (key) { return _this.instance.setOption(key, _this.codeOptions[key]); });
            }
        }
        if ('field' in changes) {
            if (this.instance && this.field.value !== this.instance.getValue()) {
                this.instance.setValue(this.field.value);
            }
            this.fieldSubscription && this.fieldSubscription.unsubscribe();
            this.fieldSubscription = this.field.valueChanges.subscribe(function (value) {
                if (_this.instance && value !== _this.instance.getValue()) {
                    _this.instance.setValue(value);
                }
            });
        }
        //common
        this.columnSuggestions = [];
        if (this.codeTables && this.codeTables.length) {
            this.codeTables.forEach(function (codeTable) {
                if (codeTable && codeTable.columns) {
                    codeTable.columns.forEach(function (column) {
                        _this.columnSuggestions.push(_this.newSuggestion(column.name, column.displayName, _this.CI_AC_CODE_NODE_TYPES.var, column.dataType));
                    });
                }
            });
        }
    };
    CodeDirective.prototype.ngOnDestroy = function () {
        this.removeTooltips();
        this.fieldSubscription && this.fieldSubscription.unsubscribe();
        this.instance = undefined;
    };
    // Set options for CodeMirror constructor
    CodeDirective.prototype.setOptions = function () {
        var options = Object.assign({}, this.DEFAULT_OPTIONS, this.codeOptions);
        delete options.mode;
        if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.SQL) {
            Object.assign(options, {
                extraKeys: { 'Ctrl-Space': 'autocomplete' },
                mode: 'text/x-pgsql',
                hintOptions: {
                    hint: this.hint.bind(this),
                    completeSingle: false,
                    closeOnUnfocus: true
                }
            });
        }
        if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.EXCEL) {
            Object.assign(options, {
                extraKeys: { 'Ctrl-Space': 'autocomplete' },
                hintOptions: {
                    hint: this.hint.bind(this),
                    completeSingle: false,
                    closeOnUnfocus: true
                }
            });
        }
        Object.assign(options, {
            readOnly: this.codeReadonly ? 'nocursor' : false
        });
        return options;
    };
    CodeDirective.prototype.newSuggestion = function (name, brief, type, valueType) {
        return {
            text: type === this.CI_AC_CODE_NODE_TYPES.fn ? name + '()' : name,
            displayText: type === this.CI_AC_CODE_NODE_TYPES.fn ? name + ': ' + 'Function' : (valueType ? name + ': ' + valueType : name),
            typeOfCodeNode: type,
            brief: brief,
            render: this._hintRender,
        };
    };
    CodeDirective.prototype.hintUsage = function (cm) {
        // Preventing usage hint when there is auto-completion
        if (cm.state.completionActive && cm.state.completionActive.widget) {
            return;
        }
        this.removeTooltips();
        var word = this.findWord(cm);
        var fn = '';
        if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.EXCEL) {
            fn = word ? __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["a" /* EXCEL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).find(function (func) { return func.name === word; }) : '';
        }
        if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.SQL) {
            fn = word ? __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["b" /* SQL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).find(function (func) { return func.name === word; }) : '';
        }
        if (fn) {
            // Cursor is placed at the function name
            var place = cm.cursorCoords(null, 'page');
            this.tooltip(place.right + 1, place.bottom, this.makeFnHint(fn, -1));
        }
        else {
            // Trying to find is the cursor placed within function arguments
            // Getting current function name
            var cursor = cm.getCursor(), line = cm.getLine(cursor.line);
            var point = cursor.ch;
            var countRightBrackets = 0;
            var countCommas = 0;
            while (point > 0) {
                if (line.charAt(point - 1) === ')') {
                    countRightBrackets++;
                }
                else if (line.charAt(point - 1) === '(') {
                    if (countRightBrackets === 0) {
                        break;
                    }
                    else {
                        countRightBrackets--;
                    }
                }
                else if (line.charAt(point - 1) === ',') {
                    !countRightBrackets && countCommas++;
                }
                point--;
            }
            if (point !== 0) {
                var start = point - 1, end = point - 1;
                while (start && /\w/.test(line.charAt(start - 1)))
                    --start;
                while (end < line.length && /\w/.test(line.charAt(end)))
                    ++end;
                var word_1 = line.slice(start, end);
                if (word_1) {
                    if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.EXCEL) {
                        fn = __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["a" /* EXCEL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).find(function (func) { return func.name === word_1; });
                    }
                    if (this.mode === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].code.mode.SQL) {
                        fn = __WEBPACK_IMPORTED_MODULE_3__utils_code_constants__["b" /* SQL_SUPPORTED_FUNCTIONS */].filter(function (func) { return !func['disabled']; }).find(function (func) { return func.name === word_1; });
                    }
                    if (fn) {
                        // Making tooltip
                        var place = cm.cursorCoords(null, 'page');
                        this.tooltip(place.right + 1, place.bottom, this.makeFnHint(fn, countCommas));
                    }
                }
            }
        }
    };
    CodeDirective.prototype.findWord = function (cm) {
        // Getting word - range of start-end positions ( [s : e) ) - at the current cursor
        var cursor = cm.getCursor(), line = cm.getLine(cursor.line);
        var start = cursor.ch, end = cursor.ch;
        while (start && /\w/.test(line.charAt(start - 1)))
            --start;
        while (end < line.length && /\w/.test(line.charAt(end)))
            ++end;
        return line.slice(start, end);
    };
    CodeDirective.prototype.tooltip = function (x, y, content, autocomplete) {
        if (autocomplete === void 0) { autocomplete = false; }
        var el = this.createElement('div', 'CodeMirror-Excel-tooltip', content);
        autocomplete && el.classList.add('CodeMirror-Excel-tooltip-autocomplete');
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        document.body.appendChild(el);
        return el;
    };
    CodeDirective.prototype.makeFnHint = function (fn, highlightArgIndex) {
        if (highlightArgIndex === void 0) { highlightArgIndex = 0; }
        var hint = this.createElement('div', null);
        (highlightArgIndex > fn.arguments.length - 1) && (highlightArgIndex = fn.arguments.length - 1);
        // Fn signature
        var signature = this.createElement('div', null);
        signature.appendChild(this.createElement('span', null, fn.name));
        signature.appendChild(this.createElement('span', null, '('));
        for (var i = 0; i < fn.arguments.length; i++) {
            signature.appendChild(this.createElement(i === highlightArgIndex ? 'strong' : 'span', null, fn.arguments[i].title + (fn.arguments[i].type ? ': ' + fn.arguments[i].type : '')));
            i !== fn.arguments.length - 1 && signature.appendChild(this.createElement('span', null, ', '));
        }
        signature.appendChild(this.createElement('span', null, ')'));
        fn.type && signature.appendChild(this.createElement('span', null, ': ' + fn.type));
        hint.appendChild(signature);
        // Fn description
        /*
         let descr = this.createElement('div', null, fn.description);
         hint.appendChild(descr);
         */
        // Fn arguments
        /*
         for (let i = 0; i < fn.arguments.length; i++) {
         hint.appendChild(document.createElement('br'));
         hint.appendChild(this.createElement('div', null, fn.arguments[i].title + ': ' + fn.arguments[i].type));
         hint.appendChild(this.createElement('div', null, fn.arguments[i].description));
         }
         */
        return hint;
    };
    CodeDirective.prototype.removeTooltips = function (selector) {
        var _this = this;
        if (selector === void 0) { selector = '.CodeMirror-Excel-tooltip'; }
        Array.prototype.slice.call(document.querySelectorAll(selector)).forEach(function (el) { return _this.removeElement(el); });
    };
    CodeDirective.prototype.removeElement = function (el) {
        el.remove();
    };
    CodeDirective.prototype.createElement = function (tagname, cls) {
        var els = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            els[_i - 2] = arguments[_i];
        }
        var el = document.createElement(tagname);
        if (cls) {
            el.className = cls;
        }
        for (var i = 0; i < els.length; ++i) {
            var elArgument = els[i];
            if (typeof elArgument === 'string') {
                elArgument = document.createTextNode(elArgument);
                el.appendChild(elArgument);
            }
            if (typeof elArgument === 'object') {
                el.appendChild(elArgument);
            }
        }
        return el;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('code'),
        __metadata("design:type", String)
    ], CodeDirective.prototype, "mode", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], CodeDirective.prototype, "codeOptions", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], CodeDirective.prototype, "codeTables", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], CodeDirective.prototype, "codeReadonly", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], CodeDirective.prototype, "field", void 0);
    CodeDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[code]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], CodeDirective);
    return CodeDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/dnd.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DragImageDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ng2_dnd__ = __webpack_require__("../../../../ng2-dnd/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_dnd__ = __webpack_require__("../../../../../src/app/utils/dnd.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DragImageDirective = (function () {
    function DragImageDirective(elRef) {
        var _this = this;
        this.dragStart = function (event) {
            _this.dragImageElement = __WEBPACK_IMPORTED_MODULE_2__utils_dnd__["a" /* DndUtil */].getDragImageElement(_this.title);
            document.body.appendChild(_this.dragImageElement);
            event.dataTransfer.setDragImage((new __WEBPACK_IMPORTED_MODULE_1_ng2_dnd__["b" /* DragImage */](_this.dragImageElement)).imageElement, _this.dragImageElement.offsetWidth / 2, _this.dragImageElement.offsetHeight / 2);
        };
        this.dragEnd = function (event) {
            _this.dragImageElement && _this.dragImageElement.parentNode.removeChild(_this.dragImageElement);
        };
        this.el = elRef.nativeElement;
    }
    DragImageDirective.prototype.ngOnInit = function () {
        this.el.addEventListener('dragstart', this.dragStart);
        this.el.addEventListener('dragend', this.dragEnd);
    };
    DragImageDirective.prototype.ngOnDestroy = function () {
        this.el.removeEventListener('dragstart', this.dragStart);
        this.el.removeEventListener('dragend', this.dragEnd);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('dragImage'),
        __metadata("design:type", String)
    ], DragImageDirective.prototype, "title", void 0);
    DragImageDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[dragImage]' // lets keep "dnd" library naming convention
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], DragImageDirective);
    return DragImageDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/draggable.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DraggableDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DraggableDirective = (function () {
    function DraggableDirective(el, zone) {
        this.zone = zone;
        this.onDragStop = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.el = el.nativeElement;
    }
    DraggableDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            $(_this.el).draggable && $(_this.el).draggable(_this.options ? {
                containment: _this.options.container,
                snap: true,
                stop: function (event, ui) {
                    var _a = ui.position, top = _a.top, left = _a.left;
                    if (_this.options.boxWidth) {
                        $(_this.el).css('left', 100 * left / _this.options.boxWidth + "%");
                    }
                    if (_this.options.boxHeight) {
                        $(_this.el).css('top', 100 * top / _this.options.boxHeight + "%");
                    }
                    _this.onDragStop.emit(ui);
                }
            } : {});
        });
    };
    DraggableDirective.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            $(_this.el).draggable && $(_this.el).draggable('destroy');
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('draggable'),
        __metadata("design:type", Object)
    ], DraggableDirective.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], DraggableDirective.prototype, "onDragStop", void 0);
    DraggableDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[draggable]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], DraggableDirective);
    return DraggableDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/dropdown-context.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DropDownContextDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_dropdown_context_service__ = __webpack_require__("../../../../../src/app/services/dropdown-context.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DropDownContextDirective = (function () {
    function DropDownContextDirective(el, renderer, service) {
        this.renderer = renderer;
        this.service = service;
        this.listeners = [];
        this.el = el.nativeElement;
        this.parentEl = el.nativeElement.parentElement;
    }
    DropDownContextDirective.prototype.ngOnInit = function () {
        var _this = this;
        // Initiating handlers
        this.listeners.push(this.renderer.listen(this.el, 'contextmenu', function (event) {
            event.preventDefault();
            _this.renderer.setElementClass(_this.parentEl, 'open', !_this.parentEl.classList.contains('open'));
        }));
        // Register in service for clearing
        this.service.register(this.parentEl);
    };
    DropDownContextDirective.prototype.ngOnDestroy = function () {
        this.listeners.map(function (fn) { return fn(); });
        this.service.deregister(this.parentEl);
    };
    DropDownContextDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[dropdown-context]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */],
            __WEBPACK_IMPORTED_MODULE_1__services_dropdown_context_service__["a" /* DropdownContextService */]])
    ], DropDownContextDirective);
    return DropDownContextDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/dropdown.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DropDownDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

// TODO: should we create our own dropdown directive to exclude jQuery bootstrap code using
// also we should combine this dropdown directive and dropdown-context directive
// also we should use some listener here to resolve the issue changing window size (dynamic add and drop 'dropup' class)
var DropDownDirective = (function () {
    function DropDownDirective(_renderer, _el) {
        var _this = this;
        this._renderer = _renderer;
        this._el = _el;
        /** container selector that is expected to have overflow limitations */
        this.container = null;
        this._onShowBound = function (event) { return _this._onShow(event); };
        this._onHideBound = function (event) { return _this._onHide(event); };
    }
    DropDownDirective.prototype.ngOnInit = function () {
        $(this._el.nativeElement)
            .on('show.bs.dropdown', this._onShowBound)
            .on('hide.bs.dropdown', this._onHideBound);
    };
    DropDownDirective.prototype.ngOnDestroy = function () {
        $(this._el.nativeElement)
            .off('show.bs.dropdown', this._onShowBound)
            .off('hide.bs.dropdown', this._onHideBound);
    };
    DropDownDirective.prototype._onShow = function (eventObject) {
        var dropdownElement = eventObject.currentTarget, container = this.container ? $(dropdownElement).closest(this.container).get(0) : null;
        var fitToContainer = container &&
            (container.scrollHeight !== container.offsetHeight ||
                container.scrollWidth !== container.offsetWidth ||
                container.style.overflowY === 'scroll');
        var dropdownElementTop = dropdownElement.getBoundingClientRect().top, dorpdownElementHeight = dropdownElement.getBoundingClientRect().height, menuHeight = $(dropdownElement).find('.dropdown-menu').outerHeight(), windowHeight = $(window).height(), minTopPosition = fitToContainer ?
            Math.max(container.getBoundingClientRect().top, 0) : 0, maxBottomPosition = fitToContainer ?
            Math.min(container.getBoundingClientRect().bottom, windowHeight) : windowHeight;
        var isDropUp = 
        // menu can be placed above
        (dropdownElementTop > menuHeight) && (minTopPosition < dropdownElementTop - menuHeight)
            && ((maxBottomPosition - dropdownElementTop) < (dorpdownElementHeight + menuHeight));
        // in total, if viewable scroll area is small for rendering dropdown-menu
        // and we can scroll up and down for layout then we prefer non-dropup mode
        this._renderer.setElementClass(this._el.nativeElement.parentElement, 'dropup', isDropUp);
        // force layout overflow to visible
        if (this.container && !fitToContainer) {
            $(this.container).addClass('dropdown-container-overflow');
        }
    };
    DropDownDirective.prototype._onHide = function (eventObject) {
        // reset layout overflow to auto
        if (this.container) {
            var dropdownElement = eventObject.currentTarget;
            $(dropdownElement).closest(this.container).removeClass('dropdown-container-overflow');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('dropdownContainer'),
        __metadata("design:type", String)
    ], DropDownDirective.prototype, "container", void 0);
    DropDownDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[dropdown]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], DropDownDirective);
    return DropDownDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/form.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FormControlValidatorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var FormControlValidatorDirective = (function () {
    function FormControlValidatorDirective(el) {
        this.el = el;
        this.el = el.nativeElement;
    }
    FormControlValidatorDirective.prototype._getForm = function (control) {
        // find root control recursively
        return control === control.root ? control : this._getForm(control.root);
    };
    FormControlValidatorDirective.prototype.ngOnChanges = function () {
        var _this = this;
        this.form = this._getForm(this.field);
        this._isValid(this.field);
        this.field.statusChanges.subscribe(function () {
            _this._isValid(_this.field);
        });
        this.field.root.statusChanges.subscribe(function () {
            _this._isValid(_this.field);
        });
    };
    FormControlValidatorDirective.prototype._isValid = function (field) {
        var el = $(this.el);
        // @todo we disable submit button when not valid form but we can revert it any time /*&& field.root.submitted*/
        if (!field.valid && (!field.pristine || field.root.submitted)) {
            el.addClass('has-error');
        }
        else {
            el.removeClass('has-error');
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('formControlValidator'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], FormControlValidatorDirective.prototype, "field", void 0);
    FormControlValidatorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[formControlValidator]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], FormControlValidatorDirective);
    return FormControlValidatorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/formValidatorFeedback.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FormControlValidatorFeedbackDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var FormControlValidatorFeedbackDirective = (function () {
    function FormControlValidatorFeedbackDirective(el) {
        this.el = el.nativeElement;
    }
    FormControlValidatorFeedbackDirective.prototype.ngOnChanges = function () {
        var _this = this;
        this.field.valueChanges.subscribe(function () {
            _this._printError();
        });
        this._printError();
    };
    FormControlValidatorFeedbackDirective.prototype._printError = function () {
        if (this.field.invalid && !this.field.pristine) {
            var errors = Object.keys(this.field.errors || {}); // @todo sort by priority
            var key = errors.filter(function (_) { return _ in __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].validatorErrors; }).shift();
            if (key) {
                var message = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].validatorErrors[key].replace('%value%', this.field.errors[key].actualValue), errorDiv = "<div class=\"alert alert-danger\">" + message + "</div>";
                $(this.el).html(errorDiv).show();
            }
            else {
                $(this.el).html('').hide();
            }
        }
        else {
            $(this.el).html('').hide();
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('formControlValidatorFeedback'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], FormControlValidatorFeedbackDirective.prototype, "field", void 0);
    FormControlValidatorFeedbackDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[formControlValidatorFeedback]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], FormControlValidatorFeedbackDirective);
    return FormControlValidatorFeedbackDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/grid-sort.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GridSortDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var GridSortDirective = (function () {
    function GridSortDirective(renderer, el) {
        this.renderer = renderer;
        this.el = el;
    }
    GridSortDirective.prototype.onClick = function () {
        if (this.item.alias) {
            var newSort = this.item.reverse
                ? (this.control.value === '-' + this.item.alias ? '' : '-') + this.item.alias
                : (this.control.value === this.item.alias ? '-' : '') + this.item.alias;
            this.control.setValue(newSort);
            this.updateStyle();
        }
    };
    GridSortDirective.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('control' in changes) {
            this.controlSubscription && this.controlSubscription.unsubscribe();
            this.controlSubscription = this.control.valueChanges.subscribe(function () {
                _this.updateStyle();
            });
        }
        this.updateStyle();
    };
    GridSortDirective.prototype.ngOnDestroy = function () {
        this.controlSubscription && this.controlSubscription.unsubscribe();
    };
    GridSortDirective.prototype.updateStyle = function () {
        this.renderer.setElementClass(this.el.nativeElement, 'link', !!this.item.alias);
        if (this.item.alias && this.control.value) {
            var sortRules = this.control.value.split(',');
            var descResult = sortRules.indexOf('-' + this.item.alias) > -1;
            var ascResult = sortRules.indexOf(this.item.alias) > -1 && !descResult;
            this.renderer.setElementClass(this.el.nativeElement, 'asc-order', ascResult);
            this.renderer.setElementClass(this.el.nativeElement, 'desc-order', descResult);
        }
        else {
            this.renderer.setElementClass(this.el.nativeElement, 'asc-order', false);
            this.renderer.setElementClass(this.el.nativeElement, 'desc-order', false);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('grid-sort'),
        __metadata("design:type", Object)
    ], GridSortDirective.prototype, "item", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('grid-sort-control'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */])
    ], GridSortDirective.prototype, "control", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["y" /* HostListener */])('click', ['$event']),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", void 0)
    ], GridSortDirective.prototype, "onClick", null);
    GridSortDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[grid-sort]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], GridSortDirective);
    return GridSortDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/if-once.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IfOnceDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
/**
 * Add the template content to the DOM unless the condition is true.
 */

var IfOnceDirective = (function () {
    function IfOnceDirective(templateRef, viewContainer) {
        this.templateRef = templateRef;
        this.viewContainer = viewContainer;
        this.hasView = false;
    }
    Object.defineProperty(IfOnceDirective.prototype, "ifOnce", {
        set: function (condition) {
            if (condition && !this.hasView) {
                this.viewContainer.createEmbeddedView(this.templateRef);
                this.hasView = true;
            }
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], IfOnceDirective.prototype, "ifOnce", null);
    IfOnceDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[ifOnce]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* TemplateRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */]])
    ], IfOnceDirective);
    return IfOnceDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/ng-var.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VarDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var VarDirective = (function () {
    function VarDirective(vcRef, templateRef) {
        this.vcRef = vcRef;
        this.templateRef = templateRef;
        this.context = {};
    }
    Object.defineProperty(VarDirective.prototype, "ngVar", {
        set: function (context) {
            this.context.$implicit = this.context.value = context;
            this.updateView();
        },
        enumerable: true,
        configurable: true
    });
    VarDirective.prototype.updateView = function () {
        this.vcRef.clear();
        this.vcRef.createEmbeddedView(this.templateRef, this.context);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], VarDirective.prototype, "ngVar", null);
    VarDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[ngVar]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* TemplateRef */]])
    ], VarDirective);
    return VarDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/prevent-default.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PreventDefaultClickDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var PreventDefaultClickDirective = (function () {
    function PreventDefaultClickDirective() {
    }
    PreventDefaultClickDirective.prototype.preventDefault = function (event) {
        event.preventDefault();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], PreventDefaultClickDirective.prototype, "href", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["y" /* HostListener */])('click'),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", void 0)
    ], PreventDefaultClickDirective.prototype, "preventDefault", null);
    PreventDefaultClickDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[prevent-default-click]'
        })
    ], PreventDefaultClickDirective);
    return PreventDefaultClickDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/resizable.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ResizableDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ResizableDirective = (function () {
    function ResizableDirective(el, zone) {
        this.zone = zone;
        this.options = {};
        this.onResize = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.el = el.nativeElement;
    }
    ResizableDirective.prototype.ngOnChanges = function () {
        var _this = this;
        if ($(this.el).find('.ui-resizable-handle').length) {
            this.ngOnDestroy();
        }
        this.zone.runOutsideAngular(function () {
            $(_this.el).resizable && $(_this.el).resizable({
                containment: _this.options.container,
                minHeight: _this.options.minHeight || 300,
                minWidth: _this.options.minWidth || 300,
                maxHeight: _this.options.maxHeight,
                maxWidth: _this.options.maxWidth,
                helper: 'ui-resizable-helper',
                stop: function (event, ui) {
                    var _a = ui.size, width = _a.width, height = _a.height;
                    if (_this.options.boxWidth) {
                        $(_this.el).css('width', 100 * width / _this.options.boxWidth + "%");
                    }
                    if (_this.options.boxHeight) {
                        $(_this.el).css('height', 100 * height / _this.options.boxHeight + "%");
                    }
                    _this.onResize.emit(ui);
                }
            });
        });
    };
    ResizableDirective.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            $(_this.el).resizable && $(_this.el).resizable('destroy');
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('resizable'),
        __metadata("design:type", Object)
    ], ResizableDirective.prototype, "options", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ResizableDirective.prototype, "onResize", void 0);
    ResizableDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[resizable]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], ResizableDirective);
    return ResizableDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/sticky-header.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StickyHeaderDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var StickyHeaderDirective = (function () {
    function StickyHeaderDirective(el, zone) {
        var _this = this;
        this.zone = zone;
        this.enabled = true;
        this._update = function () {
            if ($(_this.el).is(':visible')) {
                var elementOffset = $(_this.el).offset().top;
                var elementPosition = parseFloat($(_this.el).css('top')) || 0;
                var windowScroll = $(window).scrollTop();
                var targetPosition = windowScroll - (elementOffset - elementPosition);
                if (_this.enabled && targetPosition > 0) {
                    $(_this.el).css({
                        position: 'relative',
                        top: targetPosition + "px",
                        zIndex: 1000,
                    });
                }
                else {
                    $(_this.el).css({
                        position: 'initial',
                        top: null,
                    });
                }
            }
        };
        this.el = el.nativeElement;
    }
    StickyHeaderDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.addEventListener('scroll', _this._update);
            window.addEventListener('resize', _this._update);
        });
        this._update();
    };
    StickyHeaderDirective.prototype.ngOnChanges = function () {
        var _this = this;
        this._update();
        this.zone.runOutsideAngular(function () {
            window.setTimeout(function () { return _this._update(); });
        });
    };
    StickyHeaderDirective.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.removeEventListener('scroll', _this._update);
            window.removeEventListener('resize', _this._update);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('stickyHeader'),
        __metadata("design:type", Boolean)
    ], StickyHeaderDirective.prototype, "enabled", void 0);
    StickyHeaderDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[stickyHeader]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], StickyHeaderDirective);
    return StickyHeaderDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/timer.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TimerDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var TimerDirective = (function () {
    function TimerDirective(el, zone) {
        this.zone = zone;
        this.SECONDS = {
            minute: 60,
            hour: 60 * 60,
            day: 24 * 60 * 60,
        };
        this.el = el.nativeElement;
    }
    TimerDirective.prototype.ngOnInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            _this.intervalId = window.setInterval(function () {
                _this._updateTimer();
            }, 1000);
        });
    };
    TimerDirective.prototype.ngOnChanges = function () {
        this._updateTimer();
    };
    TimerDirective.prototype.ngOnDestroy = function () {
        this.intervalId && window.clearInterval(this.intervalId);
    };
    TimerDirective.prototype._getOffset = function () {
        return this.start ? Math.floor((Date.now() - Date.parse(this.start)) / 1000) : 0;
    };
    TimerDirective.prototype._updateTimer = function () {
        var offset = this._getOffset();
        var hours = ('0' + Math.floor((offset % this.SECONDS.day) / this.SECONDS.hour)).slice(-2), minutes = ('0' + Math.floor((offset % this.SECONDS.hour) / this.SECONDS.minute)).slice(-2), seconds = ('0' + offset % this.SECONDS.minute).slice(-2);
        this.el.innerHTML = hours + ":" + minutes + ":" + seconds;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], TimerDirective.prototype, "start", void 0);
    TimerDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: 'timer',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], TimerDirective);
    return TimerDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core-ui/directives/tooltip.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TooltipDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var TooltipDirective = (function () {
    function TooltipDirective(el) {
        this.$el = $(el.nativeElement);
    }
    TooltipDirective.prototype.ngOnChanges = function () {
        this.$el.attr('data-original-title', this.tooltipTitle);
        // TODO: find more appropriate way to detect shown tooltip
        if (this.$el.attr('aria-describedby')) {
            this.$el.tooltip('show');
        }
    };
    TooltipDirective.prototype.ngOnInit = function () {
        this.$el.tooltip && this.$el.tooltip();
    };
    TooltipDirective.prototype.ngOnDestroy = function () {
        this.$el.tooltip && this.$el.tooltip('destroy');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], TooltipDirective.prototype, "tooltipTitle", void 0);
    TooltipDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[tooltip]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], TooltipDirective);
    return TooltipDirective;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/asset-operations.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AssetOperationsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__share_modal_component__ = __webpack_require__("../../../../../src/app/core/components/share-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__clone_modal_component__ = __webpack_require__("../../../../../src/app/core/components/clone-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__library_selector_component__ = __webpack_require__("../../../../../src/app/core/components/library-selector.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__project_link_modal_component__ = __webpack_require__("../../../../../src/app/core/components/project-link-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__services_prediction_service__ = __webpack_require__("../../../../../src/app/services/prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__services_replay_service__ = __webpack_require__("../../../../../src/app/services/replay.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__services_user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__services_cv_prediction_service__ = __webpack_require__("../../../../../src/app/services/cv-prediction.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

























var AssetOperationsComponent = (function () {
    function AssetOperationsComponent(flows, tables, models, cvModels, predictions, replays, notifications, user, acl, projects, modals, albums, cvpredictions, optimizations, dashboards, diaaService) {
        this.flows = flows;
        this.tables = tables;
        this.models = models;
        this.cvModels = cvModels;
        this.predictions = predictions;
        this.replays = replays;
        this.notifications = notifications;
        this.user = user;
        this.acl = acl;
        this.projects = projects;
        this.modals = modals;
        this.albums = albums;
        this.cvpredictions = cvpredictions;
        this.optimizations = optimizations;
        this.dashboards = dashboards;
        this.diaaService = diaaService;
        this.type = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE;
        this.selectedItems = [];
        this.selectedItemsChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onAddTable = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onDelete = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onRefresh = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.disabledPreview = false;
        this.disabledTrash = false;
        this.disabledRemoveFromProject = false;
        this.disabledShare = true;
        this.disabledClone = true;
        this.disabledDownload = true;
        this.disabledRefresh = true;
        this.disabledInfo = true;
        this.disabledVisualize = false;
        this.disabledToProject = true;
        this.disabledAddTable = true;
        this.disabledEdit = true;
        this.previewRoute = ['/desk'];
        this.projectSavingObserver = new __WEBPACK_IMPORTED_MODULE_24__utils_activity_observer__["a" /* ActivityObserver */]();
        this.downloadObserver = new __WEBPACK_IMPORTED_MODULE_24__utils_activity_observer__["a" /* ActivityObserver */]();
    }
    AssetOperationsComponent.prototype.showLibrarySelector = function () {
        this.addTableSelector.show();
    };
    AssetOperationsComponent.prototype.addTable = function (table) {
        this.onAddTable.emit(table);
    };
    AssetOperationsComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if (changes['selectedItems'] && changes['selectedItems'].currentValue !== changes['selectedItems'].previousValue) {
            this.selectedItems = this.selectedItems.filter(function (_) { return _; });
            var readOnly = !!this.selectedItems.find(function (item) {
                switch (_this.type) {
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                        return !_this.acl.canUpdateTable(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                        return !_this.acl.canUpdateFlow(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PREDICTION:
                        return !_this.acl.canUpdateModel(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL:
                        return !_this.acl.canUpdateCVModel(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.REPLAY:
                        return !_this.acl.canUpdateReplay(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                        return !_this.acl.canUpdateAlbum(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PICTURE:
                        return !_this.acl.canRemovePicture(_this.album);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION:
                        return !_this.acl.canUpdateOptimization(item);
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DASHBOARD:
                        return !_this.acl.canUpdateDashboard(item);
                    default:
                        return true;
                }
            });
            this.disabledPreview = this.selectedItems.length !== 1;
            this.disabledInfo = this.selectedItems.length !== 1 || this.type !== __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW;
            this.disabledTrash = this.selectedItems.length < 1 || readOnly;
            this.disabledRemoveFromProject = this.selectedItems.length < 1 || readOnly;
            this.disabledVisualize = this.selectedItems.length !== 1;
            this.disabledClone = this.selectedItems.length !== 1 || (this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PICTURE || this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DASHBOARD) || (this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION) || (this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM);
            this.disabledToProject = this.selectedItems.length < 1 || readOnly;
            this.disabledShare = this.selectedItems.length < 1 || readOnly || (this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PICTURE);
            this.disabledDownload = this.selectedItems.length !== 1 || (this.type === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE && this.selectedItems[0].status !== __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].table.status.values.ACTIVE);
            this.disabledAddTable = this.selectedItems.length !== 1 || readOnly || !this.onAddTable.observers.length;
            this.disabledEdit = this.selectedItems.length !== 1 || ([__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DASHBOARD, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM].indexOf(this.type) < 0) || readOnly;
            if (this.type) {
                this.generatePreviewLink();
            }
        }
    };
    AssetOperationsComponent.prototype.generatePreviewLink = function () {
        if (this.selectedItems[0]) {
            switch (this.type) {
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                    if (!this.project) {
                        if (this.scope) {
                            this.previewRoute = ['/desk', 'library', 'tables', this.scope, 'table', this.selectedItems[0].id];
                        }
                        else {
                            this.previewRoute = ['/desk', 'library', 'tables', 'table', this.selectedItems[0].id];
                        }
                    }
                    else {
                        this.previewRoute = ['/desk', 'library', 'projects', this.project.id, 'tables', this.selectedItems[0].id];
                    }
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                    this.previewRoute = ['/desk', 'flows', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                    this.previewRoute = ['/desk', 'train', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL:
                    this.previewRoute = ['/desk', 'train', 'cv', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.REPLAY:
                    this.previewRoute = ['/desk', 'play', 'replays', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PREDICTION:
                    this.previewRoute = ['/desk', 'play', 'predictions', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_PREDICTION:
                    this.previewRoute = ['/desk', 'play', 'cv-predictions', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                    this.previewRoute = ['/desk', 'albums', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PICTURE:
                    this.previewRoute = ['/desk', 'albums', this.album.id, 'tag', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION:
                    this.previewRoute = ['/desk', 'optimization', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DASHBOARD:
                    this.previewRoute = ['/desk', 'visualize', this.selectedItems[0].id];
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DIAA:
                    this.previewRoute = ['/desk', 'diaa', this.selectedItems[0].id];
                    break;
                default:
                    this.notifications.create('Unknown Asset Type', __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].notification.level.values.DANGER);
            }
        }
    };
    AssetOperationsComponent.prototype.trash = function () {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).flatMap(function () {
            var observables = _this.selectedItems.map(function (item) {
                var observable;
                switch (_this.type) {
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                        observable = _this.tables.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                        observable = _this.flows.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                        observable = _this.models.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL:
                        observable = _this.cvModels.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PREDICTION:
                        observable = _this.predictions.remove(item.id);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_PREDICTION:
                        observable = _this.cvpredictions.remove(item.id);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.REPLAY:
                        observable = _this.replays.remove(item.id);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                        observable = _this.albums.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.PICTURE:
                        observable = _this.albums.deletePicture({ id: _this.album.id }, { id: item.id });
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION:
                        observable = _this.optimizations.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DASHBOARD:
                        observable = _this.dashboards.delete(item);
                        break;
                    case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DIAA:
                        observable = _this.diaaService.delete(item);
                        break;
                    default:
                        _this.notifications.create('Unknown Asset Type', __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].notification.level.values.DANGER);
                }
                return observable;
            });
            return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].forkJoin.apply(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */], observables);
        }).subscribe(function () {
            _this.resetSelection();
            _this.onDelete.emit();
        });
    };
    AssetOperationsComponent.prototype.removeFromProject = function () {
        var _this = this;
        var observable;
        switch (this.type) {
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                observable = this.projects.unlinkTables(this.project, this.selectedItems);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                observable = this.projects.unlinkFlows(this.project, this.selectedItems);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                observable = this.projects.unlinkModels(this.project, this.selectedItems);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION:
                break;
            default:
                console.error('Unknown Asset Type');
                throw new Error('Unknown Asset Type');
        }
        this.projectSavingObserver.observe(observable).subscribe(function () { return _this.resetSelection(); });
    };
    AssetOperationsComponent.prototype.addToProject = function () {
        this.projectLinkModal.open(this.type, this.selectedItems);
    };
    AssetOperationsComponent.prototype.share = function () {
        if (this.selectedItems.length > 0) {
            this.shareModal.open(this.type, this.selectedItems);
        }
    };
    AssetOperationsComponent.prototype.resetSelection = function () {
        this.selectedItemsChange.emit([]);
    };
    AssetOperationsComponent.prototype.refresh = function () {
        this.onRefresh.emit();
    };
    AssetOperationsComponent.prototype.clone = function () {
        if (this.selectedItems.length === 1) {
            this.cloneModal.open(this.type, this.selectedItems[0].id, this.selectedItems[0].name);
        }
    };
    AssetOperationsComponent.prototype.download = function () {
        if (this.selectedItems[0]) {
            switch (this.type) {
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                    this.downloadObserver.observe(this.tables.download(this.selectedItems[0].id, this.user.token()));
                    break;
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                    this.downloadObserver.observe(this.albums.download(this.selectedItems[0].id, this.user.token()));
                    break;
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], AssetOperationsComponent.prototype, "type", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], AssetOperationsComponent.prototype, "selectedItems", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "project", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "album", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "scope", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "selectedItemsChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "onAddTable", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "onDelete", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], AssetOperationsComponent.prototype, "onRefresh", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('shareModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__share_modal_component__["a" /* ShareModalComponent */])
    ], AssetOperationsComponent.prototype, "shareModal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('cloneModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5__clone_modal_component__["a" /* CloneModalComponent */])
    ], AssetOperationsComponent.prototype, "cloneModal", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('addTableSelector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_6__library_selector_component__["a" /* LibrarySelectorComponent */])
    ], AssetOperationsComponent.prototype, "addTableSelector", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('projectLinkModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_7__project_link_modal_component__["a" /* ProjectLinkModalComponent */])
    ], AssetOperationsComponent.prototype, "projectLinkModal", void 0);
    AssetOperationsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'asset-operations',
            template: "\n    <div class=\"row row-flex pt5 pb5\" style=\"align-items: flex-end;\">\n      <div class=\"col-xs-12 flex-static\">\n        <!-- Common Buttons -->\n        <ul class=\"asset-btn-panel nav nav-pills\">\n          <li *ngIf=\"!project &&\n            (type === config.asset.values.TABLE || type === config.asset.values.FLOW || type === config.asset.values.MODEL)\"\n            class=\"nav-item\" [ngClass]=\"{'disabled': disabledToProject}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledToProject || addToProject()\">\n              <i class=\"imgaction imgaction-projects center-block\"></i>\n              <div>Add to Project</div>\n            </a>\n          </li>\n          <li *ngIf=\"project\" class=\"nav-item\" [ngClass]=\"{'disabled': disabledRemoveFromProject || (projectSavingObserver.active | async)}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledRemoveFromProject || projectSavingObserver.isActive || removeFromProject()\">\n              <i class=\"imgaction imgaction-trash center-block\"></i>\n              <div>Remove from Project</div>\n            </a>\n          </li>\n          <li *ngIf=\"type !== config.asset.values.FLOW\" class=\"nav-item\"\n            [ngClass]=\"{'disabled': disabledPreview}\" [routerLinkActive]=\"['active']\"\n            [routerLinkActiveOptions]=\"{exact: true}\"\n            [ngSwitch]=\"selectedItems.length\">\n            <a *ngSwitchCase=\"1\" class=\"nav-link link-colorless\"\n              [routerLink]=\"previewRoute\">\n              <i class=\"imgaction imgaction-preview center-block\"></i>\n              <div>preview</div>\n            </a>\n            <a *ngSwitchDefault=\"\" class=\"nav-link link-colorless\">\n              <i class=\"imgaction imgaction-preview center-block\"></i>\n              <div>preview</div>\n            </a>\n          </li>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledTrash}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledTrash || trash()\">\n              <i class=\"imgaction imgaction-trash center-block\"></i>\n              <div>Trash</div>\n            </a>\n          </li>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledShare}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledShare || share()\">\n              <i class=\"imgaction imgaction-share center-block\"></i>\n              <div>share</div>\n            </a>\n          </li>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledClone}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledClone || clone()\">\n              <i class=\"imgaction imgaction-clone center-block\"></i>\n              <div>clone</div>\n            </a>\n          </li>\n          <li *ngIf=\"type === config.asset.values.TABLE\"\n            class=\"nav-item\" [ngClass]=\"{'disabled': disabledDownload || (downloadObserver.active | async)}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledDownload || downloadObserver.isActive || download()\">\n              <i class=\"imgaction imgaction-download center-block\"></i>\n              <div>download</div>\n            </a>\n          </li>\n          <li *ngIf=\"type === config.asset.values.ALBUM\"\n            class=\"nav-item\" [ngClass]=\"{'disabled': disabledDownload || (downloadObserver.active | async)}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledDownload || downloadObserver.isActive || download()\">\n              <i class=\"imgaction imgaction-download center-block\"></i>\n              <div>download labels</div>\n            </a>\n          </li>\n          <ng-template [ngIf]=\"type === config.asset.values.FLOW\">\n            <li class=\"nav-item\"\n              [ngClass]=\"{'disabled': disabledVisualize}\" [routerLinkActive]=\"['active']\" [ngSwitch]=\"selectedItems.length\">\n              <a *ngSwitchCase=\"1\" class=\"nav-link link-colorless\"\n                [routerLink]=\"['/desk', 'flows', selectedItems[0].id, 'graph']\">\n                <i class=\"imgaction imgaction-visualize center-block\"></i>\n                <div>visualize flow</div>\n              </a>\n               <a *ngSwitchDefault=\"\" class=\"nav-link link-colorless\">\n                <i class=\"imgaction imgaction-visualize center-block\"></i>\n                <div>visualize flow</div>\n              </a>\n            </li>\n            <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledAddTable}\">\n              <a class=\"nav-link link-colorless\" (click)=\"disabledAddTable || showLibrarySelector()\">\n                <i class=\"imgaction imgaction-table center-block\"></i>\n                <div>add table</div>\n              </a>\n            </li>\n          </ng-template>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledRefresh}\">\n            <a class=\"nav-link link-colorless\" (click)=\"disabledRefresh || refresh()\">\n              <i class=\"imgaction imgaction-refresh center-block\"></i>\n              <div>refresh</div>\n            </a>\n          </li>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledInfo}\" [routerLinkActive]=\"['active']\">\n            <a *ngIf=\"selectedItems.length === 1 && type === config.asset.values.FLOW\"\n              class=\"nav-link link-colorless\"\n              [routerLink]=\"['/desk', 'flows', selectedItems[0].id, 'info']\">\n              <i class=\"imgaction imgaction-info center-block\"></i>\n              <div>info</div>\n            </a>\n            <a *ngIf=\"selectedItems.length !== 1 || type !== config.asset.values.FLOW\" class=\"nav-link link-colorless\">\n              <i class=\"imgaction imgaction-info center-block\"></i>\n              <div>info</div>\n            </a>\n          </li>\n          <li class=\"nav-item\" [ngClass]=\"{'disabled': disabledEdit}\" [routerLinkActive]=\"['active']\">\n            <a *ngIf=\"selectedItems.length === 1 && type === config.asset.values.DASHBOARD\"\n              class=\"nav-link link-colorless\"\n              [routerLink]=\"['/desk', 'visualize', selectedItems[0].id, 'edit']\">\n              <i class=\"imgaction glyphicon glyphicon-pencil center-block\"></i>\n              <div>edit</div>\n            </a>\n            <a *ngIf=\"selectedItems.length === 1 && type === config.asset.values.FLOW\"\n              class=\"nav-link link-colorless\"\n              [routerLink]=\"['/desk', 'flows', selectedItems[0].id, 'edit']\">\n              <i class=\"imgaction glyphicon glyphicon-pencil center-block\"></i>\n              <div>edit</div>\n            </a>\n            <a *ngIf=\"selectedItems.length === 1 && type === config.asset.values.ALBUM\"\n              class=\"nav-link link-colorless\"\n              [routerLink]=\"['/desk', 'albums', selectedItems[0].id, 'edit']\">\n              <i class=\"imgaction glyphicon glyphicon-pencil center-block\"></i>\n              <div>edit</div>\n            </a>\n            <a\n              *ngIf=\"selectedItems.length !== 1\n              || (type !== config.asset.values.FLOW && type !== config.asset.values.DASHBOARD && type !== config.asset.values.ALBUM)\"\n              class=\"nav-link link-colorless\">\n              <i class=\"imgaction glyphicon glyphicon-pencil center-block\"></i>\n              <div>edit</div>\n            </a>\n          </li>\n        </ul>\n        <!-- End Common Buttons -->\n      </div>\n      <div class=\"col-xs-12 flex-rubber visible-dropdown\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <share-modal #shareModal></share-modal>\n    <clone-modal #cloneModal></clone-modal>\n    <project-link-modal #projectLinkModal (onComplete)=\"resetSelection()\"></project-link-modal>\n    <library-selector\n        #addTableSelector\n        *ngIf=\"type === config.asset.values.FLOW\"\n        [hidden]=\"true\"\n        (valueChange)=\"addTable($event.object)\"\n        [available]=\"[config.asset.values.TABLE]\"\n        [title]=\"'Add Table To A Flow'\"></library-selector>\n",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_9__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_10__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_11__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_12__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_13__services_prediction_service__["a" /* PredictionService */],
            __WEBPACK_IMPORTED_MODULE_14__services_replay_service__["a" /* ReplayService */],
            __WEBPACK_IMPORTED_MODULE_15__services_notification_service__["a" /* NotificationService */],
            __WEBPACK_IMPORTED_MODULE_16__services_user_service__["a" /* UserService */],
            __WEBPACK_IMPORTED_MODULE_17__services_acl_service__["a" /* AclService */],
            __WEBPACK_IMPORTED_MODULE_18__services_project_service__["a" /* ProjectService */],
            __WEBPACK_IMPORTED_MODULE_19__services_modal_service__["a" /* ModalService */],
            __WEBPACK_IMPORTED_MODULE_20__services_album_service__["a" /* AlbumService */],
            __WEBPACK_IMPORTED_MODULE_21__services_cv_prediction_service__["a" /* CVPredictionService */],
            __WEBPACK_IMPORTED_MODULE_22__services_optimization_service__["a" /* OptimizationService */],
            __WEBPACK_IMPORTED_MODULE_23__services_dashboard_service__["a" /* DashboardService */],
            __WEBPACK_IMPORTED_MODULE_3__diaa_diaa_service__["a" /* DIAAService */]])
    ], AssetOperationsComponent);
    return AssetOperationsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/clone-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CloneModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var CloneModalComponent = (function () {
    function CloneModalComponent(tables, flows, models) {
        this.tables = tables;
        this.flows = flows;
        this.models = models;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__["a" /* ActivityObserver */]();
        this.cloneTableForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('')
        });
    }
    CloneModalComponent.prototype.open = function (assetType, assetId, assetName) {
        if (assetName === void 0) { assetName = 'Asset'; }
        this.assetType = assetType;
        this.assetId = assetId;
        this.assetName = assetName;
        this.modal.show();
    };
    CloneModalComponent.prototype.doClone = function () {
        var _this = this;
        var observable;
        switch (this.assetType) {
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                observable = this.tables.clone({ id: this.assetId, name: this.cloneTableForm.controls['name'].value });
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                observable = this.flows.clone({ id: this.assetId, name: this.cloneTableForm.controls['name'].value });
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                observable = this.models.clone({ id: this.assetId, name: this.cloneTableForm.controls['name'].value });
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION:
                break;
            default:
                console.error('Unknown Asset Type');
                throw new Error('Unknown Asset Type');
        }
        this._savingObserver.observe(observable).subscribe(function () {
            _this.modal.hide();
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], CloneModalComponent.prototype, "modal", void 0);
    CloneModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'clone-modal',
            template: "\n    <app-modal #modal [preTitle]=\"'Clone ' + config.asset.labels[assetType]\" [title]=\"assetName\"\n      [buttons]=\"[{'class': 'btn-primary', disabled: cloneTableForm.invalid || _savingObserver.active | async, title: 'Clone' }]\"\n      (buttonClick)=\"cloneTableForm.valid && doClone()\"\n      >\n      <form [formGroup]=\"cloneTableForm\">\n        <div class=\"form-group\">\n          <app-input [label]=\"'New ' + config.asset.labels[assetType] + ' Name'\"\n            [control]=\"cloneTableForm.controls['name']\"></app-input>\n        </div>\n      </form>\n    </app-modal>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */], __WEBPACK_IMPORTED_MODULE_7__services_model_service__["a" /* ModelService */]])
    ], CloneModalComponent);
    return CloneModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/error-indicator.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ErrorIndicatorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ErrorIndicatorComponent = (function () {
    function ErrorIndicatorComponent() {
        this.title = null;
        this.message = null;
        this.target = null;
        this.process = null;
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ErrorIndicatorComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ErrorIndicatorComponent.prototype, "message", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ErrorIndicatorComponent.prototype, "target", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ErrorIndicatorComponent.prototype, "process", void 0);
    ErrorIndicatorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'error-indicator',
            template: "\n    <div class=\"row\">\n      <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n        <h1 class=\"text-center text-muted\"><i class=\"glyphicon glyphicon-warning-sign\"></i></h1>\n\n        <h4 class=\"text-center text-muted\">{{title || 'Invalid'}}</h4>\n        <h4 class=\"text-center text-muted text-light\"\n            >{{message || process?.cause || 'This ' + (target || 'entity') + \" can't be displayed\"}}</h4>\n      </div>\n    </div>",
        })
    ], ErrorIndicatorComponent);
    return ErrorIndicatorComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/library-selector.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LibrarySelectorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_album_service__ = __webpack_require__("../../../../../src/app/services/album.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var LibrarySelectorComponent = (function () {
    function LibrarySelectorComponent(flows, tables, models, cvModels, albums) {
        var _this = this;
        this.flows = flows;
        this.tables = tables;
        this.models = models;
        this.cvModels = cvModels;
        this.albums = albums;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.inputLabel = null;
        this.title = 'Select Dataset';
        this.available = [__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE];
        this.flowId = null;
        this.disabled = false;
        this.hidden = false;
        this.allowReset = false;
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.tableMode = 0;
        this.options = {
            columns: {
                'TABLE': [
                    { name: 'Name', alias: 'name', style: 'width: 50%' },
                    { name: 'Last modified', alias: 'modifiedDate', style: 'width: 20%', reverse: true },
                ],
                'FLOW': [
                    { name: 'Name', alias: 'name', style: 'width: 50%' },
                    { name: 'Last modified', alias: 'updated', style: 'width: 20%', reverse: true },
                ],
                'MODEL': [
                    { name: 'Name', alias: 'name', style: 'width: 50%' },
                    { name: 'Last modified', alias: 'updated', style: 'width: 20%', reverse: true },
                ],
                'ALBUM': [
                    { name: 'Name', alias: 'name', style: 'width: 50%' },
                    { name: 'Last modified', alias: 'updated', style: 'width: 20%', reverse: true },
                ],
                'CV_MODEL': [
                    { name: 'Name', alias: 'name', style: 'width: 50%' },
                    { name: 'Last modified', alias: 'updated', style: 'width: 20%', reverse: true },
                ],
            }
        };
        this.searchControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('');
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            scope: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].library.scope.values.PERSONAL),
            search: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](''),
            order: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
            page: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](1),
            page_size: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](100)
        });
        this.searchControl.valueChanges.debounceTime(500).subscribe(function (_) {
            _this.form.controls['search'].setValue(_);
        });
        this.form.valueChanges.subscribe(function () {
            _this.itemsLoader.load();
        });
        // items list loader
        this.itemsLoader = new __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadList(); });
        this.itemsLoader.subscribe(function (_) {
            _this.items = _;
        });
        // selected item name loader
        this.nameLoader = new __WEBPACK_IMPORTED_MODULE_10__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadSelectedName(); });
        this.nameLoader.subscribe(function (_) {
            _this.name = _;
        });
    }
    LibrarySelectorComponent.prototype.ngOnChanges = function () {
        this.entity = this.available[0];
        this.itemsLoader.load();
        this.nameLoader.load();
    };
    LibrarySelectorComponent.prototype.switchTableMode = function (mode) {
        this.tableMode = mode;
        this.itemsLoader.load();
    };
    LibrarySelectorComponent.prototype.setEntity = function (item) {
        this.entity = item;
        this.itemsLoader.load();
    };
    LibrarySelectorComponent.prototype.show = function () {
        if (!this.disabled) {
            this.modal.show();
            this.itemsLoader.load();
        }
    };
    LibrarySelectorComponent.prototype.onIconAfterClick = function (event) {
        if (this.allowReset) {
            this.setValue(null);
        }
        event.stopPropagation && event.stopPropagation();
    };
    LibrarySelectorComponent.prototype._loadList = function () {
        var result;
        switch (this.entity) {
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                if (this.flowId && this.tableMode) {
                    result = this.flows.getTables(this.flowId, this.form.value).map(function (_) {
                        var tables = _.data.filter(function (table) { return table.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].table.status.values.ACTIVE; });
                        return {
                            data: tables,
                            count: tables.length
                        };
                    });
                }
                else {
                    result = this.tables.list(this.form.value);
                }
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                result = this.flows.list(this.form.value);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                result = this.models.list(this.form.value);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                result = this.albums.list(this.form.value);
                break;
            case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL:
                result = this.cvModels.list(this.form.value);
                break;
            default:
                throw new Error('Wrong entity type');
        }
        return result;
    };
    LibrarySelectorComponent.prototype._loadSelectedName = function () {
        if (this.value && this.value.object) {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].of(this.value.object.name);
        }
        else if (this.value && this.value.id) {
            switch (this.value.entity) {
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE:
                    return this.tables.get(this.value.id).map(function (_) { return _.name; });
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW:
                    return this.flows.get(this.value.id).map(function (_) { return _.name; });
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL:
                    return this.models.get(this.value.id).map(function (_) { return _.name; });
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM:
                    return this.albums.get(this.value.id).map(function (_) { return _.name; });
                case __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL:
                    return this.cvModels.get(this.value.id).map(function (_) { return _.name; });
                default:
                    throw new Error('Wrong entity type');
            }
        }
        else {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].of('-Select-');
        }
    };
    LibrarySelectorComponent.prototype.setValue = function (item) {
        this.value = item ? {
            id: item.id,
            entity: this.entity,
            object: item,
        } : {
            id: null,
            entity: null,
            object: null,
        };
        this.valueChange.emit(this.value);
        this.nameLoader.load();
        this.modal.hide();
    };
    LibrarySelectorComponent.prototype.onFocus = function () {
        this.show();
    };
    LibrarySelectorComponent.prototype.preventType = function (event) {
        this.show();
        event.preventDefault();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], LibrarySelectorComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], LibrarySelectorComponent.prototype, "inputLabel", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], LibrarySelectorComponent.prototype, "title", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], LibrarySelectorComponent.prototype, "available", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], LibrarySelectorComponent.prototype, "flowId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], LibrarySelectorComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], LibrarySelectorComponent.prototype, "hidden", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], LibrarySelectorComponent.prototype, "allowReset", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], LibrarySelectorComponent.prototype, "valueChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], LibrarySelectorComponent.prototype, "modal", void 0);
    LibrarySelectorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'library-selector',
            template: "\n    <app-input *ngIf=\"!hidden\" [label]=\"inputLabel\"\n      [iconAfter]=\"(value?.id && allowReset) ? 'glyphicon-remove' : 'glyphicon-list'\"\n      [disabled]=\"disabled\" [value]=\"nameLoader.loaded ? name : 'Loading...'\"\n      (iconAfterClick)=\"onIconAfterClick($event)\"\n      prevent-default-click (click)=\"show()\" (focus)=\"onFocus()\" (keyDown)=\"preventType($event)\"></app-input>\n\n    <app-modal #modal [title]=\"title\" [sizeClass]=\"config.modal.size.LARGE\">\n      <div class=\"row\">\n        <nav class=\"col-sm-6 tabpanel\">\n          <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li *ngFor=\"let item of available\" class=\"nav-item\" [ngClass]=\"{'active': entity === item}\">\n              <a class=\"nav-link link\"\n                (click)=\"setEntity(item)\"\n                [ngClass]=\"entity === item ? 'link-colorless font-weight-medium' : 'text-muted'\">\n                {{config.asset.labelsPlural[item]}}</a>\n            </li>\n          </ul>\n        </nav>\n        <div class=\"col-sm-6\">\n          <div class=\"form-inline pull-right\">\n            <app-input *ngIf=\"!tableMode\" [control]=\"searchControl\"\n              [iconBefore]=\"'glyphicon-search'\"\n              [iconAfter]=\"'glyphicon-remove'\"\n              (iconAfterClick)=\"searchControl.setValue('')\"></app-input>\n          </div>\n        </div>\n      </div>\n\n      <form [formGroup]=\"form\">\n        <div style=\"position: relative; min-height: 300px;\" class=\"tab-pane\">\n          <app-spinner [visibility]=\"!itemsLoader.loaded\"></app-spinner>\n          <div *ngIf=\"itemsLoader.loaded\" class=\"row\">\n            <div class=\"col-md-12\">\n              <div class=\"p0 form-control brand-control\">\n                <div class=\"row\">\n                  <div class=\"col-xs-6\" *ngIf=\"entity === config.asset.values.TABLE && flowId\">\n                    <div class=\"btn-group btn-toggle\">\n                      <button class=\"btn btn-xs btn-default\"\n                        (click)=\"switchTableMode(0)\"\n                        [ngClass]=\"{'btn-success active': tableMode === 0}\">Library\n                      </button>\n                      <button class=\"btn btn-xs\"\n                        (click)=\"switchTableMode(1)\"\n                        [ngClass]=\"{'btn-success active': tableMode === 1}\">Flow\n                      </button>\n                    </div>\n                  </div>\n                  <div class=\"col-xs-6\"\n                    [ngClass]=\"{'col-xs-offset-6': !(entity === config.asset.values.TABLE && flowId)}\"\n                    [ngSwitch]=\"entity\">\n                    <div class=\"pull-right\" *ngSwitchCase=\"config.asset.values.TABLE\">\n                      {{items.count || 0 | pluralize:({other: '{} tables', '0': 'No tables', '1': '{} table'})}}\n                    </div>\n                    <div class=\"pull-right\" *ngSwitchCase=\"config.asset.values.FLOW\">\n                      {{items.count || 0 | pluralize:({other: '{} flows', '0': 'No flows', '1': '{} flow'})}}\n                    </div>\n                    <div class=\"pull-right\" *ngSwitchCase=\"config.asset.values.MODEL\">\n                      {{items.count || 0 | pluralize:({other: '{} models', '0': 'No models', '1': '{} model'})}}\n                    </div>\n                    <div class=\"pull-right\" *ngSwitchCase=\"config.asset.values.ALBUM\">\n                      {{items.count || 0 | pluralize:({other: '{} albums', '0': 'No albums', '1': '{} album'})}}\n                    </div>\n                    <div class=\"pull-right\" *ngSwitchCase=\"config.asset.values.CV_MODEL\">\n                      {{items.count || 0 | pluralize:({other: '{} cv-models', '0': 'No cv-models', '1': '{} cv-model'})}}\n                    </div>\n                    <div class=\"pull-right\">\n                      <app-pagination class=\"pull-right\"\n                        [page]=\"form.controls['page']\"\n                        [pageSize]=\"form.controls['page_size']\"\n                        [currentPageSize]=\"items.data.length\"\n                        [rowsCount]=\"items.count\">\n                      </app-pagination>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- START TABLE | FLOW | MODEL LISTS -->\n          <div *ngIf=\"itemsLoader.loaded\" class=\"table-scroll\" [adaptiveHeight]=\"{minHeight: 450, pageMargin: 150}\">\n            <table class=\"table table-bordered\" [ngSwitch]=\"entity\">\n              <thead>\n                <tr style=\"white-space: nowrap;\">\n                  <th *ngFor=\"let item of options.columns[entity]\"\n                    [grid-sort]=\"item\"\n                    [grid-sort-control]=\"form.controls['order']\"\n                    [style]=\"item.style | safe\">\n                    {{item.name}}\n                  </th>\n                </tr>\n              </thead>\n              <tbody *ngSwitchCase=\"config.asset.values.TABLE\">\n              <!-- from common tables --><!-- tables from flow -->\n                <tr *ngFor=\"let item of items.data\">\n                  <td>\n                    <div *ngIf=\"item.status === config.table.status.values.ACTIVE\">\n                      <a class=\"link\" title=\"{{item.name}}\"\n                        (click)=\"setValue(item)\">{{item.name}}</a></div>\n                    <div *ngIf=\"item.status !== config.table.status.values.ACTIVE\">\n                      <span class=\"ellipsis\" title=\"{{item.name}}\">{{item.name}}</span></div>\n                  </td>\n                  <td>\n                    <div class=\"text-muted\">{{item.updated | date:'M/d/y'}}</div>\n                  </td>\n                </tr>\n              </tbody>\n              <!-- from common flows -->\n              <tbody *ngSwitchCase=\"config.asset.values.FLOW\">\n                <tr *ngFor=\"let item of items.data\">\n                  <td>\n                    <div *ngIf=\"item.status === config.flow.status.values.DONE\">\n                      <a class=\"link\" title=\"{{item.name}}\"\n                        (click)=\"setValue(item)\">{{item.name}}</a></div>\n                    <div *ngIf=\"item.status !== config.flow.status.values.DONE\">\n                      <span class=\"ellipsis\" title=\"{{item.name}}\">{{item.name}}</span></div>\n                  </td>\n                  <td>\n                    <div class=\"text-muted\">{{item.updated | date:'M/d/y'}}</div>\n                  </td>\n                </tr>\n              </tbody>\n              <!-- from common models -->\n              <tbody *ngSwitchCase=\"config.asset.values.MODEL\">\n                <tr *ngFor=\"let item of items.data\">\n                  <td>\n                    <div *ngIf=\"item.status === config.model.status.values.ACTIVE\">\n                      <a class=\"link\" title=\"{{item.name}}\"\n                        (click)=\"setValue(item)\">{{item.name}}</a></div>\n                    <div *ngIf=\"item.status !== config.model.status.values.ACTIVE\">\n                      <span class=\"ellipsis\" title=\"{{item.name}}\">{{item.name}}</span></div>\n                  </td>\n                  <td>\n                    <div class=\"text-muted\">{{item.updated | date:'M/d/y'}}</div>\n                  </td>\n                </tr>\n              </tbody>\n              <!-- from albums -->\n              <tbody *ngSwitchCase=\"config.asset.values.ALBUM\">\n                <tr *ngFor=\"let item of items.data\">\n                  <td>\n                    <div *ngIf=\"item.status === config.album.status.values.ACTIVE\">\n                      <a class=\"link\" title=\"{{item.name}}\"\n                        (click)=\"setValue(item)\">{{item.name}}</a></div>\n                    <div *ngIf=\"item.status !== config.album.status.values.ACTIVE\">\n                      <span class=\"ellipsis\" title=\"{{item.name}}\">{{item.name}}</span></div>\n                  </td>\n                  <td>\n                    <div class=\"text-muted\">{{item.updated | date:'M/d/y'}}</div>\n                  </td>\n                </tr>\n                </tbody>\n              <!-- from CV models -->\n              <tbody *ngSwitchCase=\"config.asset.values.CV_MODEL\">\n                <tr *ngFor=\"let item of items.data\">\n                  <td>\n                    <div *ngIf=\"item.status === config.cvModel.status.values.ACTIVE\">\n                      <a class=\"link\" title=\"{{item.name}}\"\n                        (click)=\"setValue(item)\">{{item.name}}</a></div>\n                    <div *ngIf=\"item.status !== config.cvModel.status.values.ACTIVE\">\n                      <span class=\"ellipsis\" title=\"{{item.name}}\">{{item.name}}</span></div>\n                  </td>\n                  <td>\n                    <div class=\"text-muted\">{{item.updated | date:'M/d/y'}}</div>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n        <!-- END TABLE | FLOW | MODEL LISTS-->\n      </form>\n    </app-modal>",
            providers: [
                __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */],
                __WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */]
            ]
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_8__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_9__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_5__services_album_service__["a" /* AlbumService */]])
    ], LibrarySelectorComponent);
    return LibrarySelectorComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/process-indicator.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CombineProcessesPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ProcessIndicatorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var CombineProcessesPipe = (function () {
    function CombineProcessesPipe() {
    }
    CombineProcessesPipe.prototype.transform = function (processes) {
        var info = processes.find(function (_) { return _ && _.status !== __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].process.status.values.COMPLETED; });
        var progress = processes.reduce(function (sum, process) {
            process && (sum += process.progress);
            return sum;
        }, 0);
        return {
            target: info && info.target,
            status: info && info.status,
            progress: (progress / processes.length),
            created: processes[0] ? processes[0].created : '',
        };
    };
    CombineProcessesPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'combineProcesses', pure: false })
    ], CombineProcessesPipe);
    return CombineProcessesPipe;
}());

var ProcessIndicatorComponent = (function () {
    function ProcessIndicatorComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.target = null;
        this.message = null;
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ProcessIndicatorComponent.prototype, "process", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ProcessIndicatorComponent.prototype, "target", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ProcessIndicatorComponent.prototype, "message", void 0);
    ProcessIndicatorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'process-indicator',
            template: "\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"process-circle text-center text-muted\" *ngIf=\"process\"\n          [ngClass]=\"{'process-complete': process.status === config.process.status.values.COMPLETED}\">\n          <i class=\"glyphicon\"\n            [ngClass]=\"process.status === config.process.status.values.COMPLETED ? 'glyphicon-ok' : 'glyphicon-time'\"></i>\n          <timer *ngIf=\"process.status === config.process.status.values.RUNNING\" class=\"timer\" [start]=\"process.created\"></timer>\n          <div class=\"message text-center\" *ngIf=\"!message\">\n            {{ target || config.asset.labels[process.target] || process.target }}\n            is {{ config.process.status.labels[process.status] }}\n          </div>\n          <div class=\"message text-center\" *ngIf=\"message\">\n           {{message}}\n          </div>\n          <div class=\"percentage text-light\" >{{process.progress ? (process.progress * 100).toFixed(0)+'%' : '...' }} </div>\n        </div>\n      </div>\n      <div class=\"col-md-offset-4 col-md-4 text-center\">\n        <ng-content></ng-content>\n      </div>\n    </div>"
        })
    ], ProcessIndicatorComponent);
    return ProcessIndicatorComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/project-link-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProjectLinkModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_project_service__ = __webpack_require__("../../../../../src/app/services/project.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ProjectLinkModalComponent = (function () {
    function ProjectLinkModalComponent(projects) {
        var _this = this;
        this.projects = projects;
        this.onComplete = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.savingObserver = new __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__["a" /* ActivityObserver */]();
        this.projectIdControl = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('-1', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
        this.projectForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required)
        });
        this.itemsLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadList(); });
        this.itemsLoader.subscribe(function (_) {
            _this.items = _;
            _this.items.data.unshift({
                id: '-1',
                name: 'Create New Project'
            });
        });
    }
    ProjectLinkModalComponent.prototype.open = function (assetType, assets) {
        this.assetType = assetType;
        this.assets = [];
        this.assetNames = '';
        var assetNames = [];
        this.assets = assets;
        this.assets.forEach(function (asset) { return assetNames.push(asset.name); });
        this.assetNames = assetNames.join(', ');
        this.itemsLoader.load();
        this.modal.show();
    };
    ProjectLinkModalComponent.prototype.submit = function () {
        var _this = this;
        var projectObservable = (this.projectIdControl.value === '-1')
            ? this.projects.create(this.projectForm.value)
            : __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of(this.items.data.find(function (_) { return _.id === _this.projectIdControl.value; }));
        var observable = projectObservable.flatMap(function (project) { return _this.addToProject(project); });
        this.savingObserver.observe(observable).subscribe(function () {
            _this.modal.hide();
            _this.onComplete.emit(true);
        });
    };
    ProjectLinkModalComponent.prototype.itemsToOptionsFn = function (item) {
        return {
            id: item.id,
            text: item.name
        };
    };
    ProjectLinkModalComponent.prototype.addToProject = function (project) {
        var observable;
        switch (this.assetType) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                observable = this.projects.linkTables(project, this.assets);
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.FLOW:
                observable = this.projects.linkFlows(project, this.assets);
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                observable = this.projects.linkModels(project, this.assets);
                break;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.OPTIMIZATION:
                break;
            default:
                console.error('Unknown Asset Type');
                throw new Error('Unknown Asset Type');
        }
        return observable.mapTo(true);
    };
    ProjectLinkModalComponent.prototype._loadList = function () {
        return this.projects.list();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ProjectLinkModalComponent.prototype, "onComplete", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_6__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ProjectLinkModalComponent.prototype, "modal", void 0);
    ProjectLinkModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'project-link-modal',
            template: "\n    <app-modal #modal\n      [preTitle]=\"'Add ' + config.asset.labelsPlural[assetType]+' to project '\"\n      [title]=\"assetNames\"\n      [buttons]=\"[{\n          'class': 'btn-primary',\n          'title': 'Add',\n          'disabled': projectIdControl.invalid || (savingObserver.active | async)\n        }]\"\n      (buttonClick)=\"submit()\">\n      <form>\n        <div class=\"form-group\">\n            <app-select [label]=\"'Project'\"\n              [control]=\"projectIdControl\"\n              [options]=\"items?.data | map: itemsToOptionsFn\"\n            ></app-select>\n        </div>\n        <div class=\"form-group\" *ngIf=\"projectIdControl.value === '-1'\">\n          <app-input [label]=\"'Project Name'\" [control]=\"projectForm['controls'].name\"></app-input>\n        </div>\n      </form>\n    </app-modal>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_project_service__["a" /* ProjectService */]])
    ], ProjectLinkModalComponent);
    return ProjectLinkModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/components/share-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ShareModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils_validators__ = __webpack_require__("../../../../../src/app/utils/validators.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ShareModalComponent = (function () {
    function ShareModalComponent(shareService) {
        var _this = this;
        this.shareService = shareService;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.assets = [];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__["a" /* ActivityObserver */]();
        this.activeTab = 0;
        this.recipients = {};
        this.createForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            recipientEmail: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('', [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_8__utils_validators__["a" /* AppValidators */].email]),
        });
        // shares list loader
        this.sharesLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadShares(); });
        this.sharesLoader.subscribe(function (_) {
            _this.shares = _;
            _this.recipientsLoader.load();
        });
        this.recipientsLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (_) { return _this._loadRecipients(); });
        this.recipientsLoader.subscribe(function (_) {
            Object.assign(_this.recipients, _);
        });
    }
    ShareModalComponent.prototype.open = function (assetType, assets) {
        this.assetType = assetType;
        this.assets = assets;
        this.activeTab = 0;
        this.sharesLoader.load();
        this.modal.show();
    };
    ShareModalComponent.prototype.submitCreateForm = function () {
        var _this = this;
        this._savingObserver.observe(this.shareService.bulkShare(this.assetType, this.assets, this.createForm.controls['recipientEmail'].value)).subscribe(function () {
            _this.createForm.reset({ recipientEmail: '' });
            _this.activeTab = 1;
            _this.sharesLoader.load();
        });
    };
    ShareModalComponent.prototype._loadShares = function () {
        if (this.assets.length === 1) {
            return this.shareService.list(Object.assign({}, {
                'asset_type': this.assetType,
                'asset_id': this.assets[0].id,
            })).map(function (_) { return _.data; });
        }
        else {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].of([]);
        }
    };
    ShareModalComponent.prototype._loadRecipients = function () {
        var _this = this;
        var observables = this.shares
            .filter(function (_) {
            return _.recipientId && !_this.recipients.hasOwnProperty(_.recipientId);
        })
            .map(function (share) {
            return _this.shareService.recipient(share.id);
        });
        if (!observables.length) {
            return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].of({});
        }
        return __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].merge.apply(__WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */], observables).reduce(function (acc, item) {
            acc[item.id] = item;
            return acc;
        }, {});
    };
    ShareModalComponent.prototype.removeShare = function (item) {
        var _this = this;
        this.shareService.delete(item).subscribe(function () {
            _this.sharesLoader.load();
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ShareModalComponent.prototype, "modal", void 0);
    ShareModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'share-modal',
            template: "\n    <app-modal #modal [preTitle]=\"'Share ' + config.asset.labels[assetType]\"\n      [title]=\"(assets.length === 1 ) ? assets[0]?.name : 'Multiple Items'\">\n      <app-tabs [tabs]=\"['New recipient', 'Existing recipients']\" [(active)]=\"activeTab\"></app-tabs>\n      <div class=\"tab-content\">\n        <div class=\"tab-pane\" [ngClass]=\"{ 'active': activeTab === 0 }\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <form [formGroup]=\"createForm\" (ngSubmit)=\"createForm.valid && submitCreateForm()\">\n                <div class=\"form-group\">\n                  <p>Type users email you would like to share this asset with.</p>\n                  <app-input [label]=\"'Email'\" [control]=\"createForm['controls'].recipientEmail\" [iconAfter]=\"'glyphicon-envelope'\"></app-input>\n                </div>\n                <div class=\"form-group\">\n                  <button [disabled]=\"!createForm.valid || (_savingObserver.active | async)\"\n                    type=\"submit\"\n                    class=\"btn btn-primary pull-right\">\n                    Share&nbsp;<i class=\"glyphicon glyphicon-ok\"></i>\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n        <div class=\"tab-pane\" [ngClass]=\"{ 'active': activeTab === 1 }\">\n          <div class=\"panel\">\n            <div class=\"panel-body\" *ngIf=\"assets.length > 1\">\n              Existing recipients can not be shown for multiple assets selection\n            </div>\n            <div class=\"panel-body\" *ngIf=\"assets.length === 1\">\n              <div class=\"form-group\">\n                <p>Below is a list of people you have shared this asset with. You may edit their access to your asset, share with additional users or unshare your asset all together.</p>\n              </div>\n              <div class=\"form-group\" style=\"position: relative; min-height: 100px;\"> <!-- place for spinner -->\n                <app-spinner [visibility]=\"!sharesLoader.loaded || !recipientsLoader.loaded\"></app-spinner>\n                <!-- START LIST -->\n                <div *ngIf=\"sharesLoader.loaded && recipientsLoader.loaded && shares.length\"\n                  class=\"row table-responsive table-responsive-overflow table-scroll\">\n                  <table class=\"table table-borderless-top\">\n                    <thead class=\"bg-faded\">\n                      <tr>\n                        <th>Email</th>\n                        <th>Name</th>\n                        <th>Updated</th>\n                        <th>Revoke</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <!-- from common tables --><!-- tables from flow -->\n                      <tr *ngFor=\"let item of shares\">\n                        <td>\n                          {{recipients[item.recipientId]?.email || item.recipientEmail}}\n                        </td>\n                        <td *ngIf=\"item.recipientId\">\n                          {{recipients[item.recipientId]?.firstName}}\n                          {{recipients[item.recipientId]?.lastName}}\n                        </td>\n                        <td *ngIf=\"!item.recipientId\">\n                          Unknown\n                        </td>\n                        <td>\n                          <div class=\"text-muted\">{{item.updated | dateAgo | async}}</div>\n                        </td>\n                        <td>\n                          <a class=\"btn btn-sm\" (click)=\"removeShare(item)\"><i class=\"glyphicon glyphicon-remove\"></i></a>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n                <div *ngIf=\"sharesLoader.loaded && recipientsLoader.loaded && !shares.length\">There are no recipients</div>\n                <!-- END LIST -->\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_shared_resource_service__["a" /* SharedResourceService */]])
    ], ShareModalComponent);
    return ShareModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/core/core.memoizeObservable.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (immutable) */ __webpack_exports__["a"] = MemoizeObservable;
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);

/**
 * MemoizeObservable method decorator
 * @returns {(target:any, propertyKey:string, descriptor:PropertyDescriptor)=>undefined}
 */
function MemoizeObservable(resolver) {
    return function (target, propertyKey) {
        var original = target[propertyKey];
        return target[propertyKey] = __WEBPACK_IMPORTED_MODULE_0_lodash__["memoize"](function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return original.apply(this, args).publishReplay().refCount();
        }, resolver);
    };
}


/***/ }),

/***/ "../../../../../src/app/core/core.mocks-only.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return mocksMode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return MocksOnlyDirective; });
/* harmony export (immutable) */ __webpack_exports__["e"] = mocksOnly;
/* harmony export (immutable) */ __webpack_exports__["c"] = ifMocks;
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IfMocksGuard; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__environments_environment__ = __webpack_require__("../../../../../src/environments/environment.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var mocksMode = !!__WEBPACK_IMPORTED_MODULE_1__environments_environment__["a" /* environment */].mocks;
/**
 * Add the template content to the DOM unless the condition is true.
 */
var MocksOnlyDirective = (function () {
    function MocksOnlyDirective(templateRef, viewContainer) {
        this.templateRef = templateRef;
        this.viewContainer = viewContainer;
        this.hasView = false;
    }
    Object.defineProperty(MocksOnlyDirective.prototype, "mocksOnly", {
        set: function (condition) {
            var showContents = !condition || mocksMode;
            if (showContents && !this.hasView) {
                this.viewContainer.createEmbeddedView(this.templateRef);
                this.hasView = true;
            }
            else if (!showContents && this.hasView) {
                this.viewContainer.clear();
                this.hasView = false;
            }
        },
        enumerable: true,
        configurable: true
    });
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean),
        __metadata("design:paramtypes", [Boolean])
    ], MocksOnlyDirective.prototype, "mocksOnly", null);
    MocksOnlyDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({ selector: '[mocksOnly]' }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["_8" /* TemplateRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */]])
    ], MocksOnlyDirective);
    return MocksOnlyDirective;
}());

/**
 * mocksOnly method decorator
 * @param defaultReturnValue
 * @returns {(target:any, propertyKey:string, descriptor:PropertyDescriptor)=>undefined}
 */
function mocksOnly(defaultReturnValue) {
    return function (target, propertyKey, descriptor) {
        if (!mocksMode) {
            descriptor.value = function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                return typeof defaultReturnValue === 'function'
                    ? defaultReturnValue.apply(void 0, args) : defaultReturnValue;
            };
        }
    };
}
function ifMocks(value, noMocksValue) {
    if (mocksMode) {
        return typeof value === 'function'
            ? value()
            : value;
    }
    return noMocksValue;
}
var IfMocksGuard = (function () {
    function IfMocksGuard() {
    }
    IfMocksGuard.prototype.canActivate = function (route, state) {
        return mocksMode;
    };
    IfMocksGuard = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])()
    ], IfMocksGuard);
    return IfMocksGuard;
}());



/***/ }),

/***/ "../../../../../src/app/core/core.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CoreModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_pipes__ = __webpack_require__("../../../../../src/app/core/core.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_ui_core_ui_module__ = __webpack_require__("../../../../../src/app/core-ui/core-ui.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_library_selector_component__ = __webpack_require__("../../../../../src/app/core/components/library-selector.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__components_process_indicator_component__ = __webpack_require__("../../../../../src/app/core/components/process-indicator.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__components_asset_operations_component__ = __webpack_require__("../../../../../src/app/core/components/asset-operations.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__components_error_indicator_component__ = __webpack_require__("../../../../../src/app/core/components/error-indicator.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__components_share_modal_component__ = __webpack_require__("../../../../../src/app/core/components/share-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__components_clone_modal_component__ = __webpack_require__("../../../../../src/app/core/components/clone-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__components_project_link_modal_component__ = __webpack_require__("../../../../../src/app/core/components/project-link-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__directives_file_upload_directive__ = __webpack_require__("../../../../../src/app/core/directives/file-upload.directive.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};















var CORE_DECLARATIONS = [
    __WEBPACK_IMPORTED_MODULE_7__components_library_selector_component__["a" /* LibrarySelectorComponent */],
    __WEBPACK_IMPORTED_MODULE_8__components_process_indicator_component__["b" /* ProcessIndicatorComponent */],
    __WEBPACK_IMPORTED_MODULE_10__components_error_indicator_component__["a" /* ErrorIndicatorComponent */],
    __WEBPACK_IMPORTED_MODULE_9__components_asset_operations_component__["a" /* AssetOperationsComponent */],
    __WEBPACK_IMPORTED_MODULE_11__components_share_modal_component__["a" /* ShareModalComponent */],
    __WEBPACK_IMPORTED_MODULE_12__components_clone_modal_component__["a" /* CloneModalComponent */],
    __WEBPACK_IMPORTED_MODULE_13__components_project_link_modal_component__["a" /* ProjectLinkModalComponent */],
    // Pipes
    __WEBPACK_IMPORTED_MODULE_3__core_pipes__["a" /* AppUserNamePipe */],
    __WEBPACK_IMPORTED_MODULE_8__components_process_indicator_component__["a" /* CombineProcessesPipe */],
    __WEBPACK_IMPORTED_MODULE_3__core_pipes__["b" /* KeysPipe */],
    // Directives
    __WEBPACK_IMPORTED_MODULE_4__core_mocks_only__["b" /* MocksOnlyDirective */],
    __WEBPACK_IMPORTED_MODULE_14__directives_file_upload_directive__["a" /* FileUploadDirective */],
];
var CoreModule = (function () {
    function CoreModule() {
    }
    CoreModule_1 = CoreModule;
    CoreModule.forRoot = function () {
        return {
            ngModule: CoreModule_1,
            providers: [],
        };
    };
    CoreModule = CoreModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_5__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                __WEBPACK_IMPORTED_MODULE_6__core_ui_core_ui_module__["a" /* CoreUIModule */].forRoot(),
                __WEBPACK_IMPORTED_MODULE_6__core_ui_core_ui_module__["a" /* CoreUIModule */],
            ],
            declarations: CORE_DECLARATIONS,
            exports: [__WEBPACK_IMPORTED_MODULE_6__core_ui_core_ui_module__["a" /* CoreUIModule */]].concat(CORE_DECLARATIONS),
        })
    ], CoreModule);
    return CoreModule;
    var CoreModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/core/core.pipes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppUserNamePipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return KeysPipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var AppUserNamePipe = (function () {
    function AppUserNamePipe() {
    }
    /**
     * @param {IUser} user
     * @param {boolean} loading
     * @returns {string}
     */
    AppUserNamePipe.prototype.transform = function (user, loading) {
        if (loading) {
            return '...';
        }
        else if (user) {
            return user.firstName + " " + user.lastName;
        }
        else {
            return 'Unknown';
        }
    };
    AppUserNamePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'AppUserName' })
    ], AppUserNamePipe);
    return AppUserNamePipe;
}());

var KeysPipe = (function () {
    function KeysPipe() {
    }
    KeysPipe.prototype.transform = function (value, args) {
        return Object.keys(value);
    };
    KeysPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'keys' })
    ], KeysPipe);
    return KeysPipe;
}());



/***/ }),

/***/ "../../../../../src/app/core/desk.route.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DeskRoute; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);

var DeskRoute;
(function (DeskRoute) {
    function isDeskRoute(route) {
        return ('sideComponent' in route);
    }
    DeskRoute.isDeskRoute = isDeskRoute;
    function parse(routes) {
        return routes.map(function (route) {
            var out = __WEBPACK_IMPORTED_MODULE_0_lodash__["omit"](route, 'sideComponent', 'component');
            if (isDeskRoute(route)) {
                var mainSubRoute = { path: '', component: route.component };
                var sideSubRoute = { path: '', component: route.sideComponent, outlet: 'side' };
                if (route.children) {
                    mainSubRoute.children = route.children;
                }
                out.children = [mainSubRoute, sideSubRoute];
            }
            else if (route.component) {
                out.component = route.component;
            }
            else if (route.children) {
                out.children = parse(route.children);
            }
            return out;
        });
    }
    DeskRoute.parse = parse;
})(DeskRoute || (DeskRoute = {}));


/***/ }),

/***/ "../../../../../src/app/core/directives/file-upload.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FileUploadDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var FileUploadDirective = (function () {
    function FileUploadDirective(el, renderer, notificationService) {
        this.renderer = renderer;
        this.notificationService = notificationService;
        this.click = false;
        this.accept = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.import.extension.list;
        this.tableUploadDrop = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.listeners = [];
        this.el = el.nativeElement;
    }
    FileUploadDirective.prototype.ngOnInit = function () {
        var _this = this;
        if (this.click) {
            var elFileInput_1 = document.createElement('input');
            elFileInput_1.setAttribute('type', 'file');
            elFileInput_1.setAttribute('multiple', 'true');
            elFileInput_1.setAttribute('accept', this.accept.join(', '));
            elFileInput_1.style.display = 'none';
            this.el.appendChild(elFileInput_1);
            this.listeners.push(this.renderer.listen(this.el, 'click', function (event) { event.toElement !== elFileInput_1 && elFileInput_1.click(); }));
            this.listeners.push(this.renderer.listen(elFileInput_1, 'change', function (event) {
                var files = event.target.files;
                _this.filterFiles(files);
                // this needs to be done to clear selection for next use
                elFileInput_1.value = null;
            }));
        }
        this.listeners.push(this.renderer.listen(this.el, 'drop', function (event) {
            event.stopPropagation();
            event.preventDefault();
            _this.isDragFileEvent(event) && _this.filterFiles(event.dataTransfer.files);
        }));
        this.listeners.push(this.renderer.listen(this.el, 'dragover', function (event) {
            event.stopPropagation();
            event.preventDefault();
            // TODO: maybe we should change some css of element here like dashed div
            _this.isDragFileEvent(event) && (event.dataTransfer.dropEffect = 'copy');
        }));
    };
    FileUploadDirective.prototype.ngOnDestroy = function () {
        this.listeners.map(function (fn) { return fn(); });
    };
    FileUploadDirective.prototype.filterFiles = function (files) {
        var _this = this;
        // Filter files via size limit
        var filteredFiles = [];
        var i = 0;
        Object.keys(files).filter(function (key) {
            if (__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.import.sizeLimit && files[key].size > __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.import.sizeLimit) {
                _this.notificationService.create("\"" + files[key].name + "\" file has " + __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].formatBytes(files[key].size) + " size           that exceeds the allowable limit of " + __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].formatBytes(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.import.sizeLimit), __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.level.values.WARNING);
                return false;
            }
            filteredFiles[i] = files[key];
            i++;
            return true;
        });
        if (!filteredFiles.length)
            return; // Exit if there are no files
        filteredFiles.forEach(function (file) { return _this.tableUploadDrop.emit(file); });
    };
    FileUploadDirective.prototype.isDragFileEvent = function (event) {
        return event.dataTransfer.files && event.dataTransfer.files.length && event.dataTransfer.files instanceof FileList;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('file-upload-click'),
        __metadata("design:type", Boolean)
    ], FileUploadDirective.prototype, "click", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], FileUploadDirective.prototype, "accept", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], FileUploadDirective.prototype, "tableUploadDrop", void 0);
    FileUploadDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[file-upload]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["X" /* Renderer */],
            __WEBPACK_IMPORTED_MODULE_2__services_notification_service__["a" /* NotificationService */]])
    ], FileUploadDirective);
    return FileUploadDirective;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var DIAAContextComponent = (function () {
    function DIAAContextComponent(processService, itemService, events, modals) {
        this.processService = processService;
        this.itemService = itemService;
        this.events = events;
        this.modals = modals;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.itemConfig = __WEBPACK_IMPORTED_MODULE_2__diaa_config__["a" /* diaaConfig */];
        this.menuOpen = [true];
        this.items = [];
        this.progresses = { diaas: {} };
        this.running = { diaas: [] };
    }
    DIAAContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.progresses.diaas = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.DIAA]];
        this.refreshItems();
        this.watchUpdates = this.events.subscribe(function (event) {
            if (event.type === __WEBPACK_IMPORTED_MODULE_3__diaa_service__["a" /* DIAAService */].LIST_UPDATE_MSG) {
                _this.refreshItems();
            }
        });
    };
    DIAAContextComponent.prototype.ngOnDestroy = function () {
        this.running.diaas.forEach(function (_) { return _.sub.unsubscribe(); });
        this.running.diaas = [];
        this.watchUpdates.unsubscribe();
    };
    DIAAContextComponent.prototype.dropItem = function (opt) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.itemService.delete(opt);
        });
    };
    DIAAContextComponent.prototype.refreshItems = function () {
        var _this = this;
        this.itemService.list().subscribe(function (data) {
            _this.items = data.data;
            var running = _this.items
                .filter(function (opt) {
                return opt.status === __WEBPACK_IMPORTED_MODULE_2__diaa_config__["a" /* diaaConfig */].status.values.RUNNING || opt.status === __WEBPACK_IMPORTED_MODULE_2__diaa_config__["a" /* diaaConfig */].status.values.CHECKING;
            });
            running.forEach(function (opt) {
                if (!_this.running.diaas.find(function (that) { return that.id === opt.id; })) {
                    _this.processService.getByTarget(opt.id, __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type.DIAA).subscribe(function (process) {
                        var subscription = _this.processService.subscribe(process, function () {
                            _this.refreshItems();
                        });
                        _this.running.diaas.push({
                            id: opt.id,
                            sub: subscription
                        });
                    });
                }
            });
        });
    };
    DIAAContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-context',
            template: "\n    <div class=\"group\">\n      <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\"\n        [routerLink]=\"['/desk', 'diaa', 'create']\">\n        Create New\n      </button>\n    </div>\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[2] = !menuOpen[2]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>DIAAs</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of items\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a *ngIf=\"item.status === itemConfig.status.values.DONE\"\n                      [routerLink]=\"['/desk', 'diaa',item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === itemConfig.status.values.DONE\" role=\"separator\"\n                    class=\"divider\"></li>\n                  <li><a (click)=\"dropItem(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'diaa', item.id]\"\n                [title]=\"item.name\" diaa-status-color=\"{{item.status}}\">\n                {{item.name | truncate}}\n                <span\n                  *ngIf=\"(item.status === itemConfig.status.values.RUNNING || item.status === itemConfig.status.values.CHECKING) && progresses.diaas[item.id]\">\n                  {{(progresses.diaas[item.id].progress * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!items.length\"><a>No {{config.asset.labelsPlural[config.asset.values.DIAA]}}</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_3__diaa_service__["a" /* DIAAService */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_5__services_modal_service__["a" /* ModalService */]])
    ], DIAAContextComponent);
    return DIAAContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export races */
/* unused harmony export genders */
/* unused harmony export ages */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAACreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__diaa_pipes__ = __webpack_require__("../../../../../src/app/diaa/diaa.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var races = [
    { id: 'race_white', label: 'White' },
    { id: 'race_black', label: 'African-American' },
    { id: 'race_hispanic', label: 'Hispanic' },
    { id: 'race_asian', label: 'Asian' },
];
var genders = [{ id: 'gender_male', label: 'Male' }, { id: 'gender_female', label: 'Female' }];
var ages = [{ id: 'age_younger', label: 'Younger' }, { id: 'age_older', label: 'Older' }];
var DIAACreateComponent = (function () {
    function DIAACreateComponent(service, models, tables, router) {
        var _this = this;
        this.service = service;
        this.models = models;
        this.tables = tables;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_4__diaa_config__["a" /* diaaConfig */];
        this.races = races;
        this.genders = genders;
        this.ages = ages;
        this.diaaObjectives = __WEBPACK_IMPORTED_MODULE_13__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_4__diaa_config__["a" /* diaaConfig */].diaaObjectives.list, __WEBPACK_IMPORTED_MODULE_4__diaa_config__["a" /* diaaConfig */].diaaObjectives.labels);
        this._cutOffModes = [
            { id: 'decile', text: 'Decile' },
            { id: 'percentile', text: 'Percentile' },
            { id: 'probability', text: 'Probability of Positive Response' },
        ];
        this.higherModelScoreFavorableOptions = [
            { id: 0, text: 'No' },
            { id: 1, text: 'Yes' },
        ];
        this.activeTab = 1;
        this.model = null;
        this.table = null;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_5__utils_activity_observer__["a" /* ActivityObserver */]();
        this._decileRangePipe = new __WEBPACK_IMPORTED_MODULE_12__diaa_pipes__["a" /* DecileRangePipe */]();
        this._decileRangeFormatter = function (value) {
            return _this._decileRangePipe.transform(value);
        };
        this._loader = new __WEBPACK_IMPORTED_MODULE_9__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            return _this.models.get(id).flatMap(function (model) {
                return __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__["a" /* Observable */].forkJoin(__WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__["a" /* Observable */].of(model), _this.tables.get(model.output));
            });
        }, true);
        this._loader.subscribe(function (_a) {
            var model = _a[0], table = _a[1];
            _this.model = model;
            _this.table = table;
            _this.form.controls.diaaObjective.setValue(_this.determineDIAAObjective());
        });
        var protectedGroupsColumnMappingFormGroup = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({});
        races.forEach(function (race) {
            protectedGroupsColumnMappingFormGroup.addControl(race.id, new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]());
        });
        genders.forEach(function (gender) {
            protectedGroupsColumnMappingFormGroup.addControl(gender.id, new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]());
        });
        ages.forEach(function (age) {
            protectedGroupsColumnMappingFormGroup.addControl(age.id, new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]());
        });
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            outputModelName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            modelId: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            airSpecification: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                cutOffMode: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('decile'),
                decile: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([1, 1]),
                percentile: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](7),
                probability: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0.45),
            }),
            higherModelScoreFavorable: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            diaaObjective: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            protectedGroupsColumnMapping: protectedGroupsColumnMappingFormGroup,
        });
    }
    DIAACreateComponent.prototype.submit = function () {
        var _this = this;
        var data = this.form.value;
        data.higherModelScoreFavorable = !!this.form.value.higherModelScoreFavorable;
        this._savingObserver.observe(this.service.create(data)).subscribe(function (optimization) {
            _this.router.navigate(['/desk', 'diaa', optimization.id]);
        });
    };
    DIAACreateComponent.prototype._onSourceModelChanged = function (event) {
        this.activeTab = 1;
        var keys = races.map(function (race) { return race.id; }).concat(genders.map(function (gender) { return gender.id; }), ages.map(function (age) { return age.id; }));
        var emptyValue = keys.reduce(function (acc, key) {
            acc[key] = null;
            return acc;
        }, {});
        this.form.patchValue({
            modelId: event.id,
            protectedGroupsColumnMapping: emptyValue,
        });
        this._loader.load(event.id);
    };
    DIAACreateComponent.prototype.determineDIAAObjective = function () {
        if (this.model.responseColumn.variableType === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.values.CONTINUOUS) {
            return __WEBPACK_IMPORTED_MODULE_8__diaa_interface__["a" /* IDIAA */].DIAAObjective.SMD;
        }
        return __WEBPACK_IMPORTED_MODULE_8__diaa_interface__["a" /* IDIAA */].DIAAObjective.AIR;
    };
    DIAACreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-create',
            template: "\n    <asset-operations [type]=\"config.asset.values.DIAA\" [selectedItems]=\"[]\"></asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Analysis Name'\" [control]=\"form.controls['name']\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button class=\"btn btn-md btn-apply\" (click)=\"submit()\"\n            [disabled]=\"form.invalid || (_savingObserver.active | async)\">\n            Check Model\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <library-selector\n          [inputLabel]=\"'Select Source Model'\"\n          [available]=\"[config.asset.values.MODEL]\"\n          [value]=\"{id: form.controls['modelId'].value, entity: config.asset.values.MODEL}\"\n          (valueChange)=\"_onSourceModelChanged($event)\"\n          [title]=\"'Select Source Model'\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Alternative Model Name'\" [control]=\"form.controls['outputModelName']\"></app-input>\n      </div>\n    </div>\n    <div *mocksOnly=\"true\" class=\"row\">\n      <div class=\"col-md-6\">\n        <app-fake-control *ngIf=\"table\" [label]=\"'Sampling Weight Column'\"\n          [value]=\"(model?.samplingWeightColumn | tableColumnDisplayName : table) || 'None'\"\n        ></app-fake-control>\n      </div>\n    </div>\n\n    <app-spinner [visibility]=\"!_loader.loaded\"></app-spinner>\n    <ng-template [ngIf]=\"model && table\">\n      <app-tabs [tabs]=\"['Original Model Summary', 'AIR/SMD Specification']\" [(active)]=\"activeTab\"></app-tabs>\n      <div class=\"panel\" *ngIf=\"activeTab === 0\">\n        <div class=\"panel-body\">\n          <model-summary\n            [model]=\"model\"\n          ></model-summary>\n        </div>\n      </div>\n\n      <form\n        [hidden]=\"activeTab !== 1\"\n        [formGroup]=\"form\">\n        <div class=\"panel\">\n          <div class=\"panel-body\">\n            <h3>Specification</h3>\n            <div class=\"row\">\n              <div class=\"col-md-6 col-sm-6 col-lg-6\">\n                <app-select [label]=\"'DIAA Objective'\"\n                  [control]=\"form.controls['diaaObjective']\"\n                  [options]=\"diaaObjectives\">\n                </app-select>\n              </div>\n              <div class=\"col-md-6 col-sm-6 col-lg-6\">\n                <app-select [label]=\"'Is Higher Score of Response Variable Favorable'\"\n                  [control]=\"form.controls['higherModelScoreFavorable']\"\n                  [options]=\"higherModelScoreFavorableOptions\"></app-select>\n              </div>\n            </div>\n            <ng-template [ngIf]=\"form.value.diaaObjective === diaaConfig.diaaObjectives.values.AIR\">\n              <div class=\"row\">\n                <div class=\"col-md-6 col-sm-6 col-lg-6\">\n                  <app-select [label]=\"'Mode'\"\n                    [control]=\"form.controls['airSpecification']['controls'].cutOffMode\"\n                    [options]=\"_cutOffModes\">\n                  </app-select>\n                </div>\n                <div class=\"col-md-6  col-sm-6 col-lg-6\" [ngSwitch]=\"form.value.airSpecification.cutOffMode\">\n                  <app-slider *ngSwitchCase=\"'decile'\"\n                    [label]=\"'Decile'\"\n                    [min]=\"1\" [max]=\"10\" [step]=\"1\"\n                    [formatter]=\"_decileRangeFormatter\"\n                    [value]=\"form.value.airSpecification.decile\"\n                    (valueChange)=\"form.controls['airSpecification']['controls'].decile.setValue($event)\"\n                    [range]=\"true\"\n                  ></app-slider>\n                  <app-input *ngSwitchCase=\"'percentile'\"\n                    [label]=\"'Percentile (up to %)'\"\n                    [type]=\"'number'\"\n                    [min]=\"1\" [max]=\"100\"\n                    [control]=\"form.controls['airSpecification']['controls'].percentile\"\n                  ></app-input>\n                  <app-input *ngSwitchCase=\"'probability'\"\n                    [label]=\"'Min. probability'\"\n                    [type]=\"'number'\"\n                    [control]=\"form.controls['airSpecification']['controls'].probability\"\n                  ></app-input>\n                </div>\n              </div>\n            </ng-template>\n            <div class=\"row\">\n              <div class=\"col-md-6 col-lg-4\">\n                <h3>Race</h3>\n                <div class=\"row\" *ngFor=\"let race of races\">\n                  <div class=\"col-md-8\">\n                    <app-select [label]=\"race.label\"\n                      [placeholder]=\"'-select column-'\"\n                      [control]=\"form.controls['protectedGroupsColumnMapping']['controls'][race.id]\"\n                      [options]=\"table.columns | tableColumnSelectOptions\">\n                    </app-select>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-md-6 col-lg-4\">\n                <h3>Gender</h3>\n                <div class=\"row\" *ngFor=\"let gender of genders\">\n                  <div class=\"col-md-8\">\n                    <app-select [label]=\"gender.label\"\n                      [placeholder]=\"'-select column-'\"\n                      [control]=\"form.controls['protectedGroupsColumnMapping']['controls'][gender.id]\"\n                      [options]=\"table.columns | tableColumnSelectOptions\">\n                    </app-select>\n                  </div>\n                </div>\n              </div>\n              <div class=\"col-md-6 col-lg-4\">\n                <h3>Age</h3>\n                <div class=\"row\" *ngFor=\"let age of ages\">\n                  <div class=\"col-md-8\">\n                    <app-select [label]=\"age.label\"\n                      [placeholder]=\"'-select column-'\"\n                      [control]=\"form.controls['protectedGroupsColumnMapping']['controls'][age.id]\"\n                      [options]=\"table.columns | tableColumnSelectOptions\">\n                    </app-select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n    </ng-template>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__diaa_service__["a" /* DIAAService */],
            __WEBPACK_IMPORTED_MODULE_10__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_11__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */]])
    ], DIAACreateComponent);
    return DIAACreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-model-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAAIRSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DIAAAIRSummaryComponent = (function () {
    function DIAAAIRSummaryComponent() {
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_2__diaa_config__["a" /* diaaConfig */];
        this._decileHeader = function (decile) {
            if (decile) {
                return "Decile " + decile * 10 + "% value";
            }
            return 'Value';
        };
        this._datasetRefHeader = function (key) {
            switch (key) {
                case __WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].DatasetRef.HOLD_OUT:
                    return '(Hold-Out)';
                case __WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].DatasetRef.OUT_OF_TIME:
                    return '(Out-of-Time)';
                default:
                    return '';
            }
        };
    }
    DIAAAIRSummaryComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        this._metrics = this.diaaConfig.objectiveMetric.list
            .filter(function (metric) {
            return !!_this.diaa.protectedGroupsColumnMapping[metric.toLowerCase()];
        })
            .map(function (metric) {
            return {
                metric: metric,
                key: metric.toLowerCase(),
                label: _this.diaaConfig.objectiveMetric.labels[metric],
            };
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAAAIRSummaryComponent.prototype, "diaa", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAAAIRSummaryComponent.prototype, "summary", void 0);
    DIAAAIRSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-model-summary',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <div *ngIf=\"!summary\" class=\"text-center\">\n      Model has no summary\n    </div>\n    <ng-template [ngIf]=\"summary\">\n      <dl *ngFor=\"let key of diaaConfig.datasetRef.list\"\n        [hidden]=\"!summary[key]?.length\"\n        class=\"dl-horizontal train-dl-summary\">\n        <dt>\n          {{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}} {{key | apply: _datasetRefHeader}}\n        </dt>\n        <dd>\n          <table class=\"table table-bordered table-sm\">\n            <thead>\n            <tr>\n              <th>Group</th>\n              <th *ngFor=\"let row of summary[key]\"\n                [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n                <span *ngSwitchCase=\"'decile'\">{{row.airDecile | apply: _decileHeader}}</span>\n                <span *ngSwitchDefault=\"\">Value</span>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr *ngFor=\"let metric of _metrics\">\n              <td>{{metric.label}}</td>\n              <td *ngFor=\"let row of summary[key]\">\n                {{row[metric.key] | number: '1.0-3'}}\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </dd>\n      </dl>\n    </ng-template>\n  "
        })
    ], DIAAAIRSummaryComponent);
    return DIAAAIRSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-specification.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAASpecificationComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var DIAASpecificationComponent = (function () {
    function DIAASpecificationComponent(models, tables) {
        var _this = this;
        this.models = models;
        this.tables = tables;
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_2__diaa_config__["a" /* diaaConfig */];
        this._tableLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            return _this.models.get(id).flatMap(function (model) {
                return model.output ? _this.tables.get(model.output) : __WEBPACK_IMPORTED_MODULE_6_rxjs_Observable__["a" /* Observable */].of(null);
            });
        });
        this._tableLoader.subscribe(function (table) {
            _this.inputTable = table;
        });
    }
    DIAASpecificationComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        this._tableLoader.load(this.diaa.modelId);
        this._metrics = this.diaaConfig.objectiveMetric.list
            .filter(function (metric) {
            return !!_this.diaa.protectedGroupsColumnMapping[metric.toLowerCase()];
        })
            .map(function (metric) {
            return {
                metric: metric,
                key: metric.toLowerCase(),
                label: _this.diaaConfig.objectiveMetric.labels[metric],
            };
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAASpecificationComponent.prototype, "diaa", void 0);
    DIAASpecificationComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-specification',
            template: "\n    <div *ngIf=\"!diaa.airSpecification\" class=\"text-center\">\n      Model has no AIR settings\n    </div>\n    <app-spinner [visibility]=\"!_tableLoader.loaded\"></app-spinner>\n    <dl *ngIf=\"_tableLoader.loaded\" class=\"dl-horizontal train-dl-summary\">\n      <dt>Is Higher Score of Response Variable Favorable?</dt>\n      <dd>{{diaa?.higherModelScoreFavorable ? 'Yes' : 'No'}}</dd>\n      <dt>Objective Mode</dt>\n      <dd>\n        {{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}}\n      </dd>\n      <ng-template [ngIf]=\"diaa.diaaObjective === diaaConfig.diaaObjectives.values.AIR\">\n        <dt>Mode</dt>\n        <dd *ngIf=\"diaa.airSpecification\" [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n          <ng-template [ngSwitchCase]=\"'decile'\">Decile: {{diaa.airSpecification.decile | diaaDecileRange }}\n          </ng-template>\n          <ng-template [ngSwitchCase]=\"'percentile'\">Percentile: up to {{diaa.airSpecification.percentile}}%</ng-template>\n          <ng-template [ngSwitchCase]=\"'probability'\">Probability of Positive Response: >=\n            {{diaa.airSpecification.probability | number: '1.0-3'}}\n          </ng-template>\n        </dd>\n      </ng-template>\n      <dt>Columns</dt>\n      <dd>\n        <table class=\"table table-bordered table-sm\">\n          <thead>\n          <tr>\n            <th>Group</th>\n            <th>Column</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngFor=\"let metric of _metrics\">\n            <td>{{metric.label}}</td>\n            <td>{{diaa.protectedGroupsColumnMapping[metric.key] | tableColumnDisplayName: inputTable}}</td>\n          </tr>\n          </tbody>\n        </table>\n      </dd>\n    </dl>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_4__services_table_service__["a" /* TableService */]])
    ], DIAASpecificationComponent);
    return DIAASpecificationComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-status-directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DIAAStatusColorDirective = (function () {
    function DIAAStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    DIAAStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = this.statusColor === __WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].Status.DONE ? 'dot-primary' :
            this.statusColor === __WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].Status.CHECKED ? 'dot-success' :
                this.statusColor === __WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].Status.ERROR ? 'dot-danger' : 'dot-warning';
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('diaa-status-color'),
        __metadata("design:type", String)
    ], DIAAStatusColorDirective.prototype, "statusColor", void 0);
    DIAAStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[diaa-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], DIAAStatusColorDirective);
    return DIAAStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-summary-value.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAASummaryValueComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DIAASummaryValueComponent = (function () {
    function DIAASummaryValueComponent() {
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], DIAASummaryValueComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], DIAASummaryValueComponent.prototype, "originalValue", void 0);
    DIAASummaryValueComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-summary-value',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <i class=\"glyphicon\" [ngClass]=\"{\n      'glyphicon-arrow-up': value > originalValue,\n      'glyphicon-arrow-down': value < originalValue,\n      'glyphicon-minus': value === originalValue\n    }\"></i>\n    {{value | number: '1.0-3'}}\n    /\n    {{originalValue | number: '1.0-3'}}\n  ",
            styles: ["\n    .glyphicon-arrow-up { color: green; }\n    .glyphicon-arrow-down { color: red; }\n    .glyphicon-minus { color: blue; }\n  "],
        })
    ], DIAASummaryValueComponent);
    return DIAASummaryValueComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAASummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__train_model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var DIAASummaryComponent = (function () {
    function DIAASummaryComponent() {
        var _this = this;
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_3__diaa_config__["a" /* diaaConfig */];
        this._decileHeader = function (decile) {
            if (decile) {
                return "Decile " + decile * 10 + "% value";
            }
            return 'Value';
        };
        this._drawObjectiveMetrics = function (metrics) {
            return metrics.map(function (_) { return __WEBPACK_IMPORTED_MODULE_3__diaa_config__["a" /* diaaConfig */].objectiveMetric.labels[_]; }).join(', ');
        };
        this._showWarning = function (row, metric) {
            return (_this.diaa.diaaObjective === __WEBPACK_IMPORTED_MODULE_3__diaa_config__["a" /* diaaConfig */].diaaObjectives.values.AIR)
                ? row[metric] < 0.9
                : row[metric] < -30;
        };
    }
    DIAASummaryComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        this._metrics = this.diaaConfig.objectiveMetric.list
            .filter(function (metric) {
            return !!_this.diaa.protectedGroupsColumnMapping[metric.toLowerCase()];
        })
            .map(function (metric) {
            return {
                metric: metric,
                key: metric.toLowerCase(),
                label: _this.diaaConfig.objectiveMetric.labels[metric],
            };
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAASummaryComponent.prototype, "diaa", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAASummaryComponent.prototype, "model", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAASummaryComponent.prototype, "originalModel", void 0);
    DIAASummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-summary',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <dl class=\"dl-horizontal train-dl-summary\">\n      <dt>\n        {{diaaConfig.diaaObjectives.maximizingLabels[diaa.diaaObjective]}}\n      </dt>\n      <dd>\n        {{diaa.objective.metrics | apply: _drawObjectiveMetrics }}\n        <ng-template [ngIf]=\"diaa.objective.airDecile\">(decile {{diaa.objective.airDecile}}0%)</ng-template>\n      </dd>\n\n      <dt>DIA constraints</dt>\n      <dd>\n        <ul>\n          <li *ngFor=\"let row of diaa.diaConstraints\">\n            {{diaaConfig.constraintMetric.labels[row.metric]}}\n            {{diaaConfig.constraintOperator.labels[row.operator]}}\n            {{row.value | number: '1.0-3'}}\n          </li>\n        </ul>\n      </dd>\n      <ng-template [ngIf]=\"diaa.diaaObjective === diaaConfig.diaaObjectives.values.AIR\">\n        <dt>AIR Mode</dt>\n        <dd [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n          <ng-template [ngSwitchCase]=\"'decile'\">Decile: {{diaa.airSpecification.decile | diaaDecileRange}}</ng-template>\n          <ng-template [ngSwitchCase]=\"'percentile'\">Percentile: up to {{diaa.airSpecification.percentile}}%</ng-template>\n          <ng-template [ngSwitchCase]=\"'probability'\">Probability of Positive Response: >=\n            {{diaa.airSpecification.probability | number: '1.0-3'}}\n          </ng-template>\n        </dd>\n      </ng-template>\n    </dl>\n\n    <hr/>\n    <dl *ngIf=\"diaa.summary\"\n      class=\"dl-horizontal train-dl-summary\">\n\n      <dt>AUC (alt./orig.)</dt>\n      <dd>\n        <diaa-summary-value\n          [value]=\"model.summary.areaUnderROC\"\n          [originalValue]=\"originalModel.summary.areaUnderROC\"\n        ></diaa-summary-value>\n      </dd>\n\n      <dt>KS (alt./orig.)</dt>\n      <dd>\n        <diaa-summary-value\n          [value]=\"model.summary.KS\"\n          [originalValue]=\"originalModel.summary.KS\"\n        ></diaa-summary-value>\n      </dd>\n\n      <dt>\n        {{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}} (alt./orig.)\n      </dt>\n      <dd>\n        <table class=\"table table-bordered table-sm diaa-air-table\">\n          <thead>\n          <tr>\n            <th>Group</th>\n            <th *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.INPUT]\"\n              [ngClass]=\"{'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile}\"\n              [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n              <span *ngSwitchCase=\"'decile'\">{{row.airDecile | apply: _decileHeader}}</span>\n              <span *ngSwitchDefault=\"\">Value</span>\n            </th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngFor=\"let metric of _metrics\">\n            <td>{{metric.label}}</td>\n            <td *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.INPUT]; let i = index\"\n              [ngClass]=\"{\n                'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile,\n                'di-warning':  row | apply : _showWarning : metric.key\n              }\"\n            >\n              <diaa-summary-value\n                [value]=\"row[metric.key]\"\n                [originalValue]=\"diaa.summary[diaaConfig.datasetRef.values.INPUT][i][metric.key]\"\n              ></diaa-summary-value>\n            </td>\n          </tr>\n          </tbody>\n        </table>\n      </dd>\n\n      <ng-template [ngIf]=\"diaa.altSummary[diaaConfig.datasetRef.values.HOLD_OUT]\">\n        <dt>AUC (Hold-Out/orig.)</dt>\n        <dd>\n          <diaa-summary-value\n            [value]=\"model.holdOutSummary.areaUnderROC\"\n            [originalValue]=\"originalModel.summary.areaUnderROC\"\n          ></diaa-summary-value>\n        </dd>\n\n        <dt>KS (Hold-Out/orig.)</dt>\n        <dd>\n          <diaa-summary-value\n            [value]=\"model.holdOutSummary.KS\"\n            [originalValue]=\"originalModel.summary.KS\"\n          ></diaa-summary-value>\n        </dd>\n\n        <dt>\n          {{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}} (Hold-Out/orig.)\n        </dt>\n        <dd>\n          <table class=\"table table-bordered table-sm diaa-air-table\">\n            <thead>\n            <tr>\n              <th>Group</th>\n              <th *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.HOLD_OUT]\"\n                [ngClass]=\"{'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile}\"\n                [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n                <span *ngSwitchCase=\"'decile'\">{{row.airDecile | apply: _decileHeader}}</span>\n                <span *ngSwitchDefault=\"\">Value</span>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr *ngFor=\"let metric of _metrics\">\n              <td>{{metric.label}}</td>\n              <td *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.HOLD_OUT]; let i = index\"\n                [ngClass]=\"{\n                'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile,\n                'di-warning':  row | apply : _showWarning : metric.key\n              }\"\n              >\n                <diaa-summary-value\n                  [value]=\"row[metric.key]\"\n                  [originalValue]=\"diaa.summary[diaaConfig.datasetRef.values.INPUT][i][metric.key]\"\n                ></diaa-summary-value>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </dd>\n      </ng-template>\n\n      <ng-template [ngIf]=\"diaa.altSummary[diaaConfig.datasetRef.values.OUT_OF_TIME]\">\n        <dt>AUC (Out-of-Time/orig.)</dt>\n        <dd>\n          <diaa-summary-value\n            [value]=\"model.holdOutSummary.areaUnderROC\"\n            [originalValue]=\"originalModel.summary.areaUnderROC\"\n          ></diaa-summary-value>\n        </dd>\n\n        <dt>KS (Out-of-Time/orig.)</dt>\n        <dd>\n          <diaa-summary-value\n            [value]=\"model.holdOutSummary.KS\"\n            [originalValue]=\"originalModel.summary.KS\"\n          ></diaa-summary-value>\n        </dd>\n\n        <dt>\n          {{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}} (Out-of-Time/orig.)\n        </dt>\n        <dd>\n          <table class=\"table table-bordered table-sm diaa-air-table\">\n            <thead>\n            <tr>\n              <th>Group</th>\n              <th *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.OUT_OF_TIME]\"\n                [ngClass]=\"{'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile}\"\n                [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n                <span *ngSwitchCase=\"'decile'\">{{row.airDecile | apply: _decileHeader}}</span>\n                <span *ngSwitchDefault=\"\">Value</span>\n              </th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr *ngFor=\"let metric of _metrics\">\n              <td>{{metric.label}}</td>\n              <td *ngFor=\"let row of diaa.altSummary[diaaConfig.datasetRef.values.OUT_OF_TIME]; let i = index\"\n                [ngClass]=\"{\n                'locked': row.airDecile && row.airDecile !== diaa.objective.airDecile,\n                'di-warning':  row | apply : _showWarning : metric.key\n              }\"\n              >\n                <diaa-summary-value\n                  [value]=\"row[metric.key]\"\n                  [originalValue]=\"diaa.summary[diaaConfig.datasetRef.values.INPUT][i][metric.key]\"\n                ></diaa-summary-value>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </dd>\n      </ng-template>\n    </dl>\n  ",
        })
    ], DIAASummaryComponent);
    return DIAASummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-view-analysis.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAViewAnalysisComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__train_model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var DIAAViewAnalysisComponent = (function () {
    function DIAAViewAnalysisComponent(service) {
        this.service = service;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_3__diaa_config__["a" /* diaaConfig */];
        this.model = null;
        this.operators = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.diaaConfig.constraintOperator.list, this.diaaConfig.constraintOperator.labels);
        this._optimizationGoals = [];
        this._decileHeader = function (decile) {
            if (decile) {
                return "Decile " + decile * 10 + "% value";
            }
            return 'Value';
        };
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            objective: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                airDecile: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
                metrics: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)]),
            }),
            constraints: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["a" /* FormArray */]([]),
            responseColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1), __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].maxLength(1)]),
            predictorColumns: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength(1)]),
        });
    }
    DIAAViewAnalysisComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('model' in changes && this.model) {
            this.form.patchValue({
                objective: {
                    airDecile: null,
                    metrics: [],
                },
            });
            var constraintsControl_1 = this.form.controls.constraints;
            while (constraintsControl_1.length) {
                constraintsControl_1.removeAt(0);
            }
            this._optimizationGoals = [];
            [
                [__WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ConstraintMetric.AUROC, 'areaUnderROC'],
                [__WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ConstraintMetric.KS, 'KS'],
            ].forEach(function (_a) {
                var metric = _a[0], key = _a[1];
                constraintsControl_1.push(new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    selected: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](metric === __WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ConstraintMetric.KS),
                    metric: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](metric, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ConstraintOperator.T05, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](_this.model.summary ? _this.model.summary[key].toFixed(3) : null),
                }));
            });
            Object.keys(__WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ObjectiveMetric)
                .filter(function (key) { return !!_this.diaa.protectedGroupsColumnMapping[key.toLowerCase()]; })
                .forEach(function (metric) {
                var key = metric.toLowerCase();
                constraintsControl_1.push(new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
                    selected: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](true),
                    metric: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](metric, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    operator: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_7__diaa_interface__["a" /* IDIAA */].ConstraintOperator.GT, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
                    value: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](_this.diaa.diaaObjective === _this.diaaConfig.diaaObjectives.values.AIR ? 0.9 : -30),
                }));
                _this._optimizationGoals.push({
                    key: key,
                    metric: metric,
                    name: _this.diaaConfig.objectiveMetric.labels[metric],
                });
            });
            this.form.patchValue({
                responseColumns: [this.model.responseColumn].map(function (column) {
                    return Object.assign({ covariateType: __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].model.column.covariate.values.RESPONSE }, column);
                }),
                predictorColumns: this.model.predictorColumns.map(function (column) {
                    return Object.assign({ covariateType: __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].model.column.covariate.values.PREDICTOR }, column);
                }),
            });
        }
    };
    DIAAViewAnalysisComponent.prototype.submit = function () {
        var data = this.form.value;
        Object.assign(data, {
            diaConstraints: this.form.value.constraints.filter(function (constraint) { return constraint.selected; }).map(function (constraint) {
                return {
                    metric: constraint.metric,
                    value: constraint.value,
                    operator: constraint.operator,
                };
            }),
            predictorColumns: this.form.value.predictorColumns.map(function (item) {
                return {
                    name: item.name,
                    displayName: item.displayName,
                    dataType: item.dataType,
                    variableType: item.variableType
                };
            }),
            responseColumn: this.model.responseColumn,
        });
        return this.service.run(this.diaa.id, data);
    };
    DIAAViewAnalysisComponent.prototype._onColumnOptionsValue = function (data) {
        var columnsData = data || [];
        var predictorColumns = [];
        var responseColumns = [];
        columnsData.forEach(function (item) {
            if (item.covariateType === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].model.column.covariate.values.RESPONSE) {
                responseColumns.push(item);
            }
            if (item.covariateType === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].model.column.covariate.values.PREDICTOR) {
                predictorColumns.push(item);
            }
        });
        this.form.controls['responseColumns'].setValue(responseColumns);
        this.form.controls['predictorColumns'].setValue(predictorColumns);
    };
    DIAAViewAnalysisComponent.prototype._toggleObjective = function (metric, value, decile) {
        var objectiveFormGroup = this.form.controls['objective'];
        var currentMetrics = objectiveFormGroup.controls['metrics'].value || [];
        if (decile && currentMetrics.length) {
            var currentDecile = objectiveFormGroup.controls['airDecile'].value;
            if (currentDecile !== decile) {
                return; // throw?
            }
        }
        if (currentMetrics.indexOf(metric) >= 0) {
            var newMetrics = currentMetrics.filter(function (_) { return _ !== metric; });
            objectiveFormGroup.controls['metrics'].setValue(newMetrics);
            if (!newMetrics.length) {
                objectiveFormGroup.controls['airDecile'].setValue(null);
            }
            this._toggleConstraintValue(metric, this.diaa.diaaObjective === this.diaaConfig.diaaObjectives.values.AIR ? 0.9 : -30);
        }
        else {
            objectiveFormGroup.controls['metrics'].setValue([metric].concat(currentMetrics));
            objectiveFormGroup.controls['airDecile'].setValue(decile);
            this._toggleConstraintValue(metric, value);
        }
    };
    DIAAViewAnalysisComponent.prototype._toggleConstraintValue = function (metric, value) {
        var constraintsControl = this.form.controls.constraints;
        constraintsControl.controls.forEach(function (group) {
            if (group.controls['metric'].value === metric) {
                group.controls['value'].setValue(value.toFixed(3));
            }
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAAViewAnalysisComponent.prototype, "diaa", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], DIAAViewAnalysisComponent.prototype, "model", void 0);
    DIAAViewAnalysisComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-view-analysis',
            template: "\n    <form [formGroup]=\"form\">\n      <div class=\"row\">\n        <div class=\"col-lg-6\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <label>{{diaaConfig.diaaObjectives.metricLabels[diaa.diaaObjective]}} to maximize</label>\n              <table class=\"table table-bordered table-sm diaa-goal-table\">\n                <thead>\n                <tr>\n                  <th>Group</th>\n                  <th *ngFor=\"let row of diaa.summary[diaaConfig.datasetRef.values.INPUT]\"\n                    [ngClass]=\"{ 'locked': row.airDecile && form.value.objective.airDecile && form.value.objective.airDecile !== row.airDecile }\"\n                    [ngSwitch]=\"diaa.airSpecification.cutOffMode\">\n                    <span *ngSwitchCase=\"'decile'\">{{row.airDecile | apply: _decileHeader}}</span>\n                    <span *ngSwitchDefault=\"\">Value</span>\n                  </th>\n                </tr>\n                </thead>\n                <tbody>\n                <tr *ngFor=\"let goal of _optimizationGoals\">\n                  <th>{{goal.name}}</th>\n                  <ng-template [ngIf]=\"diaa.diaaObjective === diaaConfig.diaaObjectives.values.AIR\">\n                    <td *ngFor=\"let row of diaa.summary[diaaConfig.datasetRef.values.INPUT]\"\n                      [ngClass]=\"{\n                      'locked': row.airDecile && form.value.objective.airDecile && form.value.objective.airDecile !== row.airDecile,\n                      'di-warning': row[goal.key] < 0.9\n                    }\"\n                      (click)=\"_toggleObjective(goal.metric, row[goal.key], row.airDecile)\"\n                    >\n                      <i class=\"glyphicon\"\n                        [ngClass]=\"(row.airDecile === form.value.objective.airDecile && form.value.objective.metrics.indexOf(goal.metric) >= 0)\n                        ? 'glyphicon-check'\n                        : 'glyphicon-unchecked'\"\n                      ></i>\n                      {{row[goal.key] | number: '1.0-3'}}\n                    </td>\n                  </ng-template>\n                  <ng-template [ngIf]=\"diaa.diaaObjective === diaaConfig.diaaObjectives.values.SMD\">\n                    <td *ngFor=\"let row of diaa.summary[diaaConfig.datasetRef.values.INPUT]\"\n                      [ngClass]=\"{'di-warning': row[goal.key] < -30}\"\n                      (click)=\"_toggleObjective(goal.metric, row[goal.key])\"\n                    >\n                      <i class=\"glyphicon\"\n                        [ngClass]=\"(form.value.objective.metrics.indexOf(goal.metric) >= 0)\n                          ? 'glyphicon-check'\n                          : 'glyphicon-unchecked'\"\n                      ></i>\n                      {{row[goal.key] | number: '1.0-3'}}\n                    </td>\n                  </ng-template>\n                </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-lg-6\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <label>Specify Constraints</label>\n              <div class=\"row pt5\"\n                *ngFor=\"let controlGroup of form.controls['constraints']['controls']\">\n                <div class=\"col-md-3 col-xs-6\">\n                  <app-check\n                    [label]=\"diaaConfig.constraintMetric.labels[controlGroup.value.metric] || controlGroup.value.metric\"\n                    [value]=\"true\"\n                    [control]=\"controlGroup.controls.selected\"\n                  ></app-check>\n                </div>\n                <div class=\"col-md-3 col-xs-6\">\n                  <app-select [control]=\"controlGroup.controls.operator\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [options]=\"operators\"\n                  ></app-select>\n                </div>\n                <div class=\"col-md-6 col-xs-12\">\n                  <app-input\n                    [type]=\"'number'\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [label]=\"'Value'\"\n                    [control]=\"controlGroup.controls.value\"></app-input>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\">\n        <table-view-embed [editMode]=\"true\"\n          [columnOptions]=\"form.controls['responseColumns'].value.concat(form.controls['predictorColumns'].value)\"\n          [lockedColumns]=\"[model.responseColumn.name]\"\n          [id]=\"model.input\" (columnOptionsChange)=\"_onColumnOptionsValue($event)\"></table-view-embed>\n      </div>\n    </form>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__diaa_service__["a" /* DIAAService */]])
    ], DIAAViewAnalysisComponent);
    return DIAAViewAnalysisComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__diaa_config__ = __webpack_require__("../../../../../src/app/diaa/diaa.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__diaa_view_analysis_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-view-analysis.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var DIAAViewComponent = (function () {
    function DIAAViewComponent(route, router, service, models, processes, tables) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.service = service;
        this.models = models;
        this.processes = processes;
        this.tables = tables;
        this.config = __WEBPACK_IMPORTED_MODULE_6__config__["a" /* default */];
        this.diaaConfig = __WEBPACK_IMPORTED_MODULE_7__diaa_config__["a" /* diaaConfig */];
        this.activeTab = 2;
        this._diaaStage = 'check';
        this._isRunning = false;
        this.diaaProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_6__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_6__config__["a" /* default */].asset.values.DIAA]];
        this._loader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            return _this.service.get(id).flatMap(function (diaa) {
                return __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].forkJoin(__WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].of(diaa), _this.models.get(diaa.modelId), (diaa.status === __WEBPACK_IMPORTED_MODULE_2__diaa_interface__["a" /* IDIAA */].Status.DONE)
                    ? _this.models.get(diaa.outputModelId)
                    : __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].of(null));
            });
        });
        this._tableLoader = new __WEBPACK_IMPORTED_MODULE_3__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.tables.get(id); });
        this._loader.subscribe(function (_a) {
            var diaa = _a[0], inputModel = _a[1], outputModel = _a[2];
            _this.diaa = diaa;
            _this.inputModel = inputModel;
            _this.outputModel = outputModel;
            _this._tableLoader.load(inputModel.input);
            var checkComplete = diaa.status === __WEBPACK_IMPORTED_MODULE_2__diaa_interface__["a" /* IDIAA */].Status.RUNNING || diaa.status === __WEBPACK_IMPORTED_MODULE_2__diaa_interface__["a" /* IDIAA */].Status.DONE;
            _this._diaaStage = checkComplete
                ? 'analysis'
                : 'check';
            _this.activeTab = checkComplete ? 3 : 2;
            _this._isRunning = diaa.status === __WEBPACK_IMPORTED_MODULE_2__diaa_interface__["a" /* IDIAA */].Status.RUNNING || diaa.status === __WEBPACK_IMPORTED_MODULE_2__diaa_interface__["a" /* IDIAA */].Status.CHECKING;
            if (_this._isRunning) {
                _this.processes.getByTarget(diaa.id, __WEBPACK_IMPORTED_MODULE_9__interfaces_common_interface__["a" /* IAsset */].Type.DIAA).subscribe(function (process) {
                    _this.processSubscription && _this.processSubscription.unsubscribe();
                    _this.processSubscription = _this.processes.subscribe(process, function () {
                        _this._loader.load(diaa.id);
                    });
                });
            }
        });
        this._tableLoader.subscribe(function (table) {
            _this.table = table;
        });
    }
    DIAAViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params.forEach(function (params) {
            _this._loader.load(params['diaaId']);
        });
    };
    DIAAViewComponent.prototype.ngOnDestroy = function () {
    };
    DIAAViewComponent.prototype.runAnalysis = function () {
        var _this = this;
        this._analysisForm.submit().subscribe(function (diaa) {
            _this._loader.load(diaa.id);
        });
    };
    DIAAViewComponent.prototype.saveToLibrary = function () {
    };
    DIAAViewComponent.prototype._onDIAADeleted = function () {
        this.router.navigate(['/desk', 'diaa']);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('analysisForm'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_8__diaa_view_analysis_component__["a" /* DIAAViewAnalysisComponent */])
    ], DIAAViewComponent.prototype, "_analysisForm", void 0);
    DIAAViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'diaa-view',
            template: "\n    <asset-operations [type]=\"config.asset.values.DIAA\" [selectedItems]=\"[diaa]\"\n      (onDelete)=\"_onDIAADeleted()\"></asset-operations>\n    <div class=\"row brand-tab\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Analysis Name'\" [value]=\"diaa?.name\" [disabled]=\"true\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button *ngIf=\"_diaaStage === 'check'\"\n            class=\"btn btn-apply\" (click)=\"runAnalysis()\"\n            [disabled]=\"_isRunning\">\n            Run Analysis\n          </button>\n          <button *ngIf=\"_diaaStage === 'analysis'\"\n            class=\"btn\" (click)=\"_diaaStage = 'check'; activeTab = 2\"\n            [disabled]=\"_isRunning\">\n            Change Objective/Constraints\n          </button>\n          <button *ngIf=\"_diaaStage === 'analysis'\"\n            class=\"btn btn-apply\" (click)=\"saveToLibrary()\"\n            [disabled]=\"_isRunning\">\n            Save To Library\n          </button>\n        </div>\n      </div>\n    </div>\n    <div *mocksOnly=\"true\" class=\"row\">\n      <div class=\"col-md-6\">\n        <app-fake-control *ngIf=\"table\" [label]=\"'Sampling Weight Column'\"\n          [value]=\"(inputModel?.samplingWeightColumn | tableColumnDisplayName : table) || 'None'\"\n        ></app-fake-control>\n      </div>\n    </div>\n\n    <app-spinner [visibility]=\"!_loader.loaded\"></app-spinner>\n    <div *ngIf=\"_loader.loaded\" class=\"brand-tab\">\n      <app-tabs [tabs]=\"_diaaStage === 'analysis'\n        ? ['AIR/SMD Specification', 'Original Model Summary', 'Alternative Model Summary', 'DIA Analysis Summary']\n        : ['AIR/SMD Specification', 'Original Model Summary', 'DIA Analysis Specification']\n      \" [(active)]=\"activeTab\"></app-tabs>\n      <div class=\"panel\" *ngIf=\"activeTab === 0\">\n        <div class=\"panel-body\">\n          <diaa-specification\n            [diaa]=\"diaa\"\n          ></diaa-specification>\n        </div>\n      </div>\n\n      <div class=\"panel\" *ngIf=\"activeTab === 1\">\n        <div class=\"panel-body\">\n          <diaa-model-summary *ngIf=\"!_isRunning || (_diaaStage === 'analysis')\"\n            [diaa]=\"diaa\"\n            [summary]=\"diaa.summary\"\n          ></diaa-model-summary>\n          <model-summary\n            [model]=\"inputModel\"\n          ></model-summary>\n        </div>\n      </div>\n\n      <ng-template [ngIf]=\"!_isRunning && _diaaStage === 'check'\">\n        <diaa-view-analysis [hidden]=\"activeTab !== 2\"\n          #analysisForm\n          [diaa]=\"diaa\"\n          [model]=\"inputModel\"\n        ></diaa-view-analysis>\n      </ng-template>\n\n      <ng-template [ngIf]=\"!_isRunning && _diaaStage === 'analysis'\">\n        <div class=\"panel\" *ngIf=\"activeTab === 2\">\n          <div class=\"panel-body\">\n            <diaa-model-summary *ngIf=\"(_diaaStage === 'analysis') || !_isRunning\"\n              [diaa]=\"diaa\"\n              [summary]=\"diaa.altSummary\"\n            ></diaa-model-summary>\n            <model-summary\n              [model]=\"outputModel\"\n            ></model-summary>\n          </div>\n        </div>\n        <div class=\"panel\" *ngIf=\"activeTab === 3\">\n          <div class=\"panel-body\">\n            <diaa-summary\n              [diaa]=\"diaa\"\n              [originalModel]=\"inputModel\"\n              [model]=\"outputModel\"\n            ></diaa-summary>\n          </div>\n        </div>\n      </ng-template>\n\n\n      <ng-template [ngIf]=\"_isRunning\">\n        <div class=\"tab-pane\"\n          [ngClass]=\"{'active': activeTab >= 2}\"\n          [ngSwitch]=\"diaa.status\"\n        >\n          <process-indicator *ngSwitchCase=\"diaaConfig.status.values.CHECKING\"\n            [process]=\"diaaProgresses[diaa.id]\"\n            [target]=\"'DI Check'\"\n          ></process-indicator>\n          <process-indicator *ngSwitchCase=\"diaaConfig.status.values.RUNNING\"\n            [process]=\"diaaProgresses[diaa.id]\"\n            [target]=\"'DIA Analysis'\"\n          ></process-indicator>\n          <error-indicator *ngSwitchCase=\"diaaConfig.status.values.ERROR\"\n            [process]=\"diaaProgresses[diaa.id]\"\n            [target]=\"'DIA Analysis'\"\n          ></error-indicator>\n        </div>\n      </ng-template>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_4__diaa_service__["a" /* DIAAService */],
            __WEBPACK_IMPORTED_MODULE_11__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_12__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_10__services_table_service__["a" /* TableService */]])
    ], DIAAViewComponent);
    return DIAAViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa.config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return diaaConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");


var diaaConfig = {
    diaaObjectives: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].DIAAObjective, {
        labels: {
            'AIR': 'AIR',
            'SMD': 'SMD',
        },
        metricLabels: {
            AIR: 'AIR Metrics',
            SMD: 'SMD Metrics'
        },
        maximizingLabels: {
            AIR: 'AIRs maximizing',
            SMD: 'SMDs maximizing'
        },
    }),
    status: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].Status, {
        labels: {
            'CHECKING': 'Checking',
            'CHECKED': 'Checked',
            'RUNNING': 'Running',
            'ERROR': 'Error',
            'DONE': 'DONE',
        },
    }),
    datasetRef: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].DatasetRef, {
        labels: {
            'INPUT': 'Input',
            'HOLD_OUT': 'Hold-Out',
            'OUT_OF_TIME': 'Out-of-Time',
        },
    }),
    objectiveMetric: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].ObjectiveMetric, {
        labels: {
            'RACE_BLACK': 'African-American',
            'RACE_HISPANIC': 'Hispanic',
            'RACE_ASIAN': 'Asian',
            'GENDER_FEMALE': 'Female',
            'AGE_OLDER': 'Older',
        },
    }),
    constraintMetric: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].ConstraintMetric, {
        labels: {
            'RACE_BLACK': 'African-American',
            'RACE_HISPANIC': 'Hispanic',
            'RACE_ASIAN': 'Asian',
            'GENDER_FEMALE': 'Female',
            'AGE_OLDER': 'Older',
            'AUROC': 'AUC',
            'KS': 'KS',
        },
    }),
    constraintOperator: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__diaa_interface__["a" /* IDIAA */].ConstraintOperator, {
        labels: {
            'EQ': '=',
            'NE': '!=',
            'LT': '<',
            'GT': '>',
            'T20': 'within +-20%',
            'T10': 'within +-10%',
            'T05': 'within +-5%',
            'T01': 'within +-1%',
        },
    }),
};


/***/ }),

/***/ "../../../../../src/app/diaa/diaa.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IDIAA; });
var IDIAA;
(function (IDIAA) {
    'use strict';
    var DIAAObjective;
    (function (DIAAObjective) {
        DIAAObjective["AIR"] = "AIR";
        DIAAObjective["SMD"] = "SMD";
    })(DIAAObjective = IDIAA.DIAAObjective || (IDIAA.DIAAObjective = {}));
    var Status;
    (function (Status) {
        Status["CHECKING"] = "CHECKING";
        Status["CHECKED"] = "CHECKED";
        Status["RUNNING"] = "RUNNING";
        Status["DONE"] = "DONE";
        Status["ERROR"] = "ERROR";
    })(Status = IDIAA.Status || (IDIAA.Status = {}));
    var ObjectiveMetric;
    (function (ObjectiveMetric) {
        ObjectiveMetric["RACE_BLACK"] = "RACE_BLACK";
        ObjectiveMetric["RACE_HISPANIC"] = "RACE_HISPANIC";
        ObjectiveMetric["RACE_ASIAN"] = "RACE_ASIAN";
        ObjectiveMetric["GENDER_FEMALE"] = "GENDER_FEMALE";
        ObjectiveMetric["AGE_OLDER"] = "AGE_OLDER";
    })(ObjectiveMetric = IDIAA.ObjectiveMetric || (IDIAA.ObjectiveMetric = {}));
    var ConstraintMetric;
    (function (ConstraintMetric) {
        ConstraintMetric["RACE_BLACK"] = "RACE_BLACK";
        ConstraintMetric["RACE_HISPANIC"] = "RACE_HISPANIC";
        ConstraintMetric["RACE_ASIAN"] = "RACE_ASIAN";
        ConstraintMetric["GENDER_FEMALE"] = "GENDER_FEMALE";
        ConstraintMetric["AGE_OLDER"] = "AGE_OLDER";
        ConstraintMetric["AUROC"] = "AUROC";
        ConstraintMetric["KS"] = "KS";
    })(ConstraintMetric = IDIAA.ConstraintMetric || (IDIAA.ConstraintMetric = {}));
    var ConstraintOperator;
    (function (ConstraintOperator) {
        ConstraintOperator["EQ"] = "EQ";
        ConstraintOperator["NE"] = "NE";
        ConstraintOperator["LT"] = "LT";
        ConstraintOperator["GT"] = "GT";
        ConstraintOperator["T20"] = "T20";
        ConstraintOperator["T10"] = "T10";
        ConstraintOperator["T05"] = "T05";
        ConstraintOperator["T01"] = "T01";
    })(ConstraintOperator = IDIAA.ConstraintOperator || (IDIAA.ConstraintOperator = {}));
    var DatasetRef;
    (function (DatasetRef) {
        DatasetRef["INPUT"] = "INPUT";
        DatasetRef["HOLD_OUT"] = "HOLD_OUT";
        DatasetRef["OUT_OF_TIME"] = "OUT_OF_TIME";
    })(DatasetRef = IDIAA.DatasetRef || (IDIAA.DatasetRef = {}));
})(IDIAA || (IDIAA = {}));


/***/ }),

/***/ "../../../../../src/app/diaa/diaa.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__train_train_module__ = __webpack_require__("../../../../../src/app/train/train.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__diaa_service__ = __webpack_require__("../../../../../src/app/diaa/diaa.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__diaa_context_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__diaa_status_directive__ = __webpack_require__("../../../../../src/app/diaa/diaa-status-directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__diaa_create_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__diaa_view_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__diaa_summary_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__diaa_summary_value_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-summary-value.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__diaa_pipes__ = __webpack_require__("../../../../../src/app/diaa/diaa.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__diaa_model_summary_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-model-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__diaa_specification_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-specification.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__diaa_view_analysis_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-view-analysis.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


















var DIAAModule = (function () {
    function DIAAModule() {
    }
    DIAAModule_1 = DIAAModule;
    DIAAModule.forRoot = function () {
        return {
            ngModule: DIAAModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_7__diaa_service__["a" /* DIAAService */],
            ],
        };
    };
    DIAAModule = DIAAModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
                __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__["a" /* TablesModule */],
                __WEBPACK_IMPORTED_MODULE_6__train_train_module__["a" /* TrainModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_10__diaa_create_component__["a" /* DIAACreateComponent */],
                __WEBPACK_IMPORTED_MODULE_16__diaa_specification_component__["a" /* DIAASpecificationComponent */],
                __WEBPACK_IMPORTED_MODULE_15__diaa_model_summary_component__["a" /* DIAAAIRSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_11__diaa_view_component__["a" /* DIAAViewComponent */],
                __WEBPACK_IMPORTED_MODULE_17__diaa_view_analysis_component__["a" /* DIAAViewAnalysisComponent */],
                __WEBPACK_IMPORTED_MODULE_12__diaa_summary_component__["a" /* DIAASummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_13__diaa_summary_value_component__["a" /* DIAASummaryValueComponent */],
                __WEBPACK_IMPORTED_MODULE_8__diaa_context_component__["a" /* DIAAContextComponent */],
                __WEBPACK_IMPORTED_MODULE_9__diaa_status_directive__["a" /* DIAAStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_14__diaa_pipes__["a" /* DecileRangePipe */],
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_9__diaa_status_directive__["a" /* DIAAStatusColorDirective */],
            ],
        })
    ], DIAAModule);
    return DIAAModule;
    var DIAAModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa.pipes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DecileRangePipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var DecileRangePipe = (function () {
    function DecileRangePipe() {
    }
    DecileRangePipe.prototype.transform = function (_a) {
        var min = _a[0], max = _a[1];
        return (min - 1) * 10 + "% to " + max * 10 + "%";
    };
    DecileRangePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'diaaDecileRange' })
    ], DecileRangePipe);
    return DecileRangePipe;
}());



/***/ }),

/***/ "../../../../../src/app/diaa/diaa.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return diaaRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__diaa_context_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__diaa_create_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_view_component__ = __webpack_require__("../../../../../src/app/diaa/diaa-view.component.ts");




var diaaRoutes = [
    {
        path: 'diaa',
        redirectTo: 'diaa/create',
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
    {
        path: 'diaa/create',
        component: __WEBPACK_IMPORTED_MODULE_2__diaa_create_component__["a" /* DIAACreateComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__diaa_context_component__["a" /* DIAAContextComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
    {
        path: 'diaa/:diaaId',
        component: __WEBPACK_IMPORTED_MODULE_3__diaa_view_component__["a" /* DIAAViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__diaa_context_component__["a" /* DIAAContextComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
];


/***/ }),

/***/ "../../../../../src/app/diaa/diaa.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DIAAService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__diaa_interface__ = __webpack_require__("../../../../../src/app/diaa/diaa.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var DIAAService = (function () {
    function DIAAService(http, events, sharedService, notifications) {
        this.http = http;
        this.events = events;
        this.sharedService = sharedService;
        this.notifications = notifications;
    }
    DIAAService_1 = DIAAService;
    DIAAService.prototype.list = function (params) {
        return this.http.get('diaas', params);
    };
    DIAAService.prototype.get = function (id) {
        return this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.DIAA, id).get('diaas/' + id);
    };
    DIAAService.prototype.create = function (item) {
        var _this = this;
        var data = jQuery.extend(true, {}, item);
        var observable = this.http.post('diaas', data, null);
        return __WEBPACK_IMPORTED_MODULE_5__services_http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit(DIAAService_1.LIST_UPDATE_MSG);
            _this.notifications.create('DIAA created: ' + data.name);
        });
    };
    DIAAService.prototype.update = function (id, data) {
        var _this = this;
        var observable = this.http.put('diaas/' + id, data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_5__services_http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit(DIAAService_1.LIST_UPDATE_MSG);
            _this.notifications.create('DIAA updated: ' + data.name);
        });
    };
    DIAAService.prototype.run = function (id, data) {
        var _this = this;
        var observable = this.http.post('diaas/' + id + '/run', data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_5__services_http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit(DIAAService_1.LIST_UPDATE_MSG);
            _this.notifications.create('DIAA executed: ' + data.name);
        });
    };
    DIAAService.prototype['delete'] = function (item) {
        var _this = this;
        var observable = this.http.delete('diaas/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_5__services_http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit(DIAAService_1.LIST_UPDATE_MSG);
            _this.notifications.create('DIAA deleted: ' + item.name);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of({ data: [], count: 0 })),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "list", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "get", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "create", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String, Object]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "update", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String, Object]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "run", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [Object]),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */])
    ], DIAAService.prototype, "delete", null);
    DIAAService = DIAAService_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_7__services_shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_8__services_notification_service__["a" /* NotificationService */]])
    ], DIAAService);
    return DIAAService;
    var DIAAService_1;
}());

(function (DIAAService) {
    DIAAService.LIST_UPDATE_MSG = 'UPDATE_DIAA_LIST';
})(DIAAService || (DIAAService = {}));


/***/ }),

/***/ "../../../../../src/app/interfaces/album.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IAlbum; });
var IAlbum;
(function (IAlbum) {
    var Status;
    (function (Status) {
        Status["ACTIVE"] = "ACTIVE";
        Status["INACTIVE"] = "INACTIVE";
        Status["SAVING"] = "SAVING";
        Status["UPDATING"] = "UPDATING";
        Status["ERROR"] = "ERROR";
        Status["UPLOADING"] = "UPLOADING";
    })(Status = IAlbum.Status || (IAlbum.Status = {}));
    var LabelMode;
    (function (LabelMode) {
        LabelMode["LOCALIZATION"] = "LOCALIZATION";
        LabelMode["CLASSIFICATION"] = "CLASSIFICATION";
    })(LabelMode = IAlbum.LabelMode || (IAlbum.LabelMode = {}));
})(IAlbum || (IAlbum = {}));


/***/ }),

/***/ "../../../../../src/app/interfaces/common.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IAsset; });
var IAsset;
(function (IAsset) {
    var Type;
    (function (Type) {
        Type["FLOW"] = "FLOW";
        Type["TABLE"] = "TABLE";
        Type["TABLE_STATS"] = "TABLE_STATS";
        Type["MODEL"] = "MODEL";
        Type["PREDICTION"] = "PREDICTION";
        Type["REPLAY"] = "REPLAY";
        Type["DASHBOARD"] = "DASHBOARD";
        // PROCESS = 'PROCESS', // experimental
        Type["ALBUM"] = "ALBUM";
        Type["CV_MODEL"] = "CV_MODEL";
        Type["CV_PREDICTION"] = "CV_PREDICTION";
        Type["PICTURE"] = "PICTURE";
        Type["OPTIMIZATION"] = "OPTIMIZATION";
        Type["DIAA"] = "DIAA";
    })(Type = IAsset.Type || (IAsset.Type = {}));
})(IAsset || (IAsset = {}));


/***/ }),

/***/ "../../../../../src/app/interfaces/dashboard.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IDashboard; });
var IDashboard;
(function (IDashboard) {
    'use strict';
    var DashboardChartType;
    (function (DashboardChartType) {
        DashboardChartType["BAR"] = "BAR";
        DashboardChartType["LINE"] = "LINE";
        DashboardChartType["PIE"] = "PIE";
        DashboardChartType["SCATTER"] = "SCATTER";
        DashboardChartType["GEO"] = "GEO";
        DashboardChartType["TABLE"] = "TABLE";
        DashboardChartType["ONEDSCATTER"] = "ONEDSCATTER";
    })(DashboardChartType = IDashboard.DashboardChartType || (IDashboard.DashboardChartType = {}));
    var DashboardAggregationType;
    (function (DashboardAggregationType) {
        DashboardAggregationType["SUM"] = "SUM";
        DashboardAggregationType["MIN"] = "MIN";
        DashboardAggregationType["MAX"] = "MAX";
        DashboardAggregationType["AVG"] = "AVG";
        DashboardAggregationType["COUNT"] = "COUNT";
        DashboardAggregationType["NO_AGGREGATE"] = "NO_AGGREGATE";
    })(DashboardAggregationType = IDashboard.DashboardAggregationType || (IDashboard.DashboardAggregationType = {}));
})(IDashboard || (IDashboard = {}));


/***/ }),

/***/ "../../../../../src/app/interfaces/flow.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return IFlow; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return IFlowstep; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IBackendFlowstep; });
var IFlow;
(function (IFlow) {
    var Status;
    (function (Status) {
        Status["NEW"] = "NEW";
        Status["RUNNING"] = "RUNNING";
        Status["ERROR"] = "ERROR";
        Status["PARTLY_DONE"] = "PARTLY_DONE";
        Status["DONE"] = "DONE";
        Status["DELETED"] = "DELETED";
        Status["QUEUED"] = "QUEUED";
    })(Status = IFlow.Status || (IFlow.Status = {}));
})(IFlow || (IFlow = {}));
var IFlowstep;
(function (IFlowstep) {
    var GeoRelationBase;
    (function (GeoRelationBase) {
        GeoRelationBase["LEFT"] = "LEFT";
        GeoRelationBase["RIGHT"] = "RIGHT";
    })(GeoRelationBase = IFlowstep.GeoRelationBase || (IFlowstep.GeoRelationBase = {}));
    var GeoGeometryType;
    (function (GeoGeometryType) {
        GeoGeometryType["POINT"] = "POINT";
        GeoGeometryType["POLYGON"] = "POLYGON";
    })(GeoGeometryType = IFlowstep.GeoGeometryType || (IFlowstep.GeoGeometryType = {}));
    var GeoRelationType;
    (function (GeoRelationType) {
        GeoRelationType["ST_DISTANCE"] = "ST_DISTANCE";
        GeoRelationType["ST_CONTAINS"] = "ST_CONTAINS";
    })(GeoRelationType = IFlowstep.GeoRelationType || (IFlowstep.GeoRelationType = {}));
    var JoinType;
    (function (JoinType) {
        JoinType["NORMAL"] = "NORMAL";
        JoinType["FUZZY"] = "FUZZY";
    })(JoinType = IFlowstep.JoinType || (IFlowstep.JoinType = {}));
    var ClusterType;
    (function (ClusterType) {
        ClusterType["K_MEANS"] = "K_MEANS";
        ClusterType["FUZZY_C_MEANS"] = "FUZZY_C_MEANS";
    })(ClusterType = IFlowstep.ClusterType || (IFlowstep.ClusterType = {}));
    var Status;
    (function (Status) {
        Status["NEW"] = "NEW";
        Status["RUNNING"] = "RUNNING";
        Status["ERROR"] = "ERROR";
        Status["PARTLY_DONE"] = "PARTLY_DONE";
        Status["DONE"] = "DONE";
        Status["DELETED"] = "DELETED";
        Status["QUEUED"] = "QUEUED";
    })(Status = IFlowstep.Status || (IFlowstep.Status = {}));
    var Type;
    (function (Type) {
        Type["insert"] = "insert";
        Type["aggregate"] = "aggregate";
        Type["join"] = "join";
        Type["cluster"] = "cluster";
        Type["query"] = "query";
        Type["window"] = "window";
        Type["filter"] = "filter";
        Type["map"] = "map";
        Type["geojoin"] = "geojoin";
    })(Type = IFlowstep.Type || (IFlowstep.Type = {}));
    var FilterRelationalOperator;
    (function (FilterRelationalOperator) {
        FilterRelationalOperator["EQ"] = "EQ";
        FilterRelationalOperator["NE"] = "NE";
        FilterRelationalOperator["LT"] = "LT";
        FilterRelationalOperator["GT"] = "GT";
    })(FilterRelationalOperator = IFlowstep.FilterRelationalOperator || (IFlowstep.FilterRelationalOperator = {}));
    var GeoRelationalOperator;
    (function (GeoRelationalOperator) {
        GeoRelationalOperator["EQ"] = "EQ";
        GeoRelationalOperator["NE"] = "NE";
        GeoRelationalOperator["LT"] = "LT";
        GeoRelationalOperator["GT"] = "GT";
        GeoRelationalOperator["LTE"] = "LTE";
        GeoRelationalOperator["GTE"] = "GTE";
    })(GeoRelationalOperator = IFlowstep.GeoRelationalOperator || (IFlowstep.GeoRelationalOperator = {}));
    var FilterLogicalOperator;
    (function (FilterLogicalOperator) {
        FilterLogicalOperator["AND"] = "AND";
        FilterLogicalOperator["OR"] = "OR";
    })(FilterLogicalOperator = IFlowstep.FilterLogicalOperator || (IFlowstep.FilterLogicalOperator = {}));
})(IFlowstep || (IFlowstep = {}));
var IBackendFlowstep;
(function (IBackendFlowstep) {
    var Type;
    (function (Type) {
        Type["INSERT"] = "InsertColumn";
        Type["AGGREGATE"] = "Aggregate";
        Type["JOIN"] = "Join";
        Type["FUZZYJOIN"] = "FuzzyJoin";
        Type["CLUSTER"] = "Cluster";
        Type["QUERY"] = "SqlTransformer";
        Type["WINDOW"] = "WindowFunctionTransformer";
        Type["FILTER"] = "Filter";
        Type["MAP"] = "RenameColumns";
        Type["GEOJOIN"] = "GeoSpatialJoin";
    })(Type = IBackendFlowstep.Type || (IBackendFlowstep.Type = {}));
})(IBackendFlowstep || (IBackendFlowstep = {}));


/***/ }),

/***/ "../../../../../src/app/interfaces/optimization.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IOptimization; });
var IOptimization;
(function (IOptimization) {
    'use strict';
    var OptimizationStatus;
    (function (OptimizationStatus) {
        OptimizationStatus["RUNNING"] = "RUNNING";
        OptimizationStatus["DONE"] = "DONE";
        OptimizationStatus["ERROR"] = "ERROR";
    })(OptimizationStatus = IOptimization.OptimizationStatus || (IOptimization.OptimizationStatus = {}));
    var OptimizationType;
    (function (OptimizationType) {
        OptimizationType["PREDICTOR_TUNING"] = "PREDICTOR_TUNING";
        OptimizationType["OBJECTIVE_FUNCTION"] = "OBJECTIVE_FUNCTION";
    })(OptimizationType = IOptimization.OptimizationType || (IOptimization.OptimizationType = {}));
    var ObjectiveMetric;
    (function (ObjectiveMetric) {
        ObjectiveMetric["AUROC"] = "AUROC";
        ObjectiveMetric["KS"] = "KS";
        ObjectiveMetric["RMSE"] = "RMSE";
    })(ObjectiveMetric = IOptimization.ObjectiveMetric || (IOptimization.ObjectiveMetric = {}));
    var ObjectiveGoal;
    (function (ObjectiveGoal) {
        ObjectiveGoal["MIN"] = "MIN";
        ObjectiveGoal["MAX"] = "MAX";
    })(ObjectiveGoal = IOptimization.ObjectiveGoal || (IOptimization.ObjectiveGoal = {}));
    var RelationalOperator;
    (function (RelationalOperator) {
        RelationalOperator["eq"] = "eq";
        RelationalOperator["ne"] = "ne";
        RelationalOperator["lt"] = "lt";
        RelationalOperator["gt"] = "gt";
    })(RelationalOperator = IOptimization.RelationalOperator || (IOptimization.RelationalOperator = {}));
    var LogicalOperator;
    (function (LogicalOperator) {
        LogicalOperator["AND"] = "AND";
        LogicalOperator["OR"] = "OR";
    })(LogicalOperator = IOptimization.LogicalOperator || (IOptimization.LogicalOperator = {}));
})(IOptimization || (IOptimization = {}));
var typeTest = {
    metric: IOptimization.ObjectiveMetric.AUROC,
    goal: IOptimization.ObjectiveGoal.MAX,
};


/***/ }),

/***/ "../../../../../src/app/interfaces/table.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ITable; });
var ITable;
(function (ITable) {
    var Status;
    (function (Status) {
        Status["ACTIVE"] = "ACTIVE";
        Status["INACTIVE"] = "INACTIVE";
        Status["SAVING"] = "SAVING";
        Status["UPDATING"] = "UPDATING";
        Status["ERROR"] = "ERROR";
    })(Status = ITable.Status || (ITable.Status = {}));
    var DatasetType;
    (function (DatasetType) {
        DatasetType["Source"] = "Source";
        DatasetType["Derived"] = "Derived";
    })(DatasetType = ITable.DatasetType || (ITable.DatasetType = {}));
    var DataType;
    (function (DataType) {
        DataType["STRING"] = "String";
        DataType["INTEGER"] = "Integer";
        DataType["DOUBLE"] = "Double";
        DataType["BOOLEAN"] = "Boolean";
        DataType["TIMESTAMP"] = "Timestamp";
        DataType["LONG"] = "Long";
    })(DataType = ITable.DataType || (ITable.DataType = {}));
})(ITable || (ITable = {}));


/***/ }),

/***/ "../../../../../src/app/optimize/optimization-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizationContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var OptimizationContextComponent = (function () {
    function OptimizationContextComponent(processService, optimizationService, events, modals) {
        this.processService = processService;
        this.optimizationService = optimizationService;
        this.events = events;
        this.modals = modals;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.menuOpen = [true];
        this.progresses = { optimizations: null };
        this.optimizations = [];
        this.running = { optimizations: [] };
    }
    OptimizationContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.progresses.optimizations = this.processService.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.OPTIMIZATION]];
        this.refreshOptimizations();
        this.watchOptimizations = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_OPTIMIZATION_LIST') {
                _this.refreshOptimizations();
            }
        });
    };
    OptimizationContextComponent.prototype.ngOnDestroy = function () {
        this.running.optimizations.forEach(function (_) { return _.sub.unsubscribe(); });
        this.running.optimizations = [];
        this.watchOptimizations.unsubscribe();
    };
    OptimizationContextComponent.prototype.dropOptimization = function (opt) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.optimizationService.delete(opt);
        });
    };
    OptimizationContextComponent.prototype.refreshOptimizations = function () {
        var _this = this;
        this.optimizationService.list().subscribe(function (data) {
            _this.optimizations = data.data;
            var running = _this.optimizations
                .filter(function (opt) { return opt.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].optimization.status.values.RUNNING; });
            running.forEach(function (opt) {
                if (!_this.running.optimizations.find(function (that) { return that.id === opt.id; })) {
                    _this.processService.getByTarget(opt.id, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.OPTIMIZATION).subscribe(function (process) {
                        var subscription = _this.processService.subscribe(process, function () {
                            _this.refreshOptimizations();
                        });
                        _this.running.optimizations.push({
                            id: opt.id,
                            sub: subscription
                        });
                    });
                }
            });
        });
    };
    OptimizationContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-optimization-context',
            template: "\n    <div class=\"group\">\n      <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\"\n        [routerLink]=\"['/desk', 'optimization', 'create']\">\n        Create New\n      </button>\n    </div>\n    <!--{{optimizations | json}}-->\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li *mocksOnly=\"true\" class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[2] = !menuOpen[2]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>Optimizations</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of optimizations\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li>\n                    <a *ngIf=\"item.status === config.optimization.status.values.DONE\"\n                      [routerLink]=\"['/desk', 'optimization',item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.optimization.status.values.DONE\" role=\"separator\"\n                    class=\"divider\"></li>\n                  <li><a (click)=\"dropOptimization(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'optimization', item.id]\"\n                [title]=\"item.name\" model-status-color=\"{{item.status}}\">\n                {{item.name | truncate}}\n                <span\n                  *ngIf=\"item.status === config.optimization.status.values.RUNNING && progresses.optimizations[item.id]\">\n                  {{(progresses.optimizations[item.id].progress * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!optimizations.length\"><a>No optimizations</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_4__services_optimization_service__["a" /* OptimizationService */],
            __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_6__services_modal_service__["a" /* ModalService */]])
    ], OptimizationContextComponent);
    return OptimizationContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/optimize/optimization-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizationCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__tables_tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var OptimizationCreateComponent = (function () {
    function OptimizationCreateComponent(tables, optimizations, router) {
        this.tables = tables;
        this.optimizations = optimizations;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.filterConfig = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.filter;
        this.boolOperators = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.filterConfig.operator.booleanList, this.filterConfig.operator.labels);
        this.operators = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.filterConfig.operator.list, this.filterConfig.operator.labels);
        this.boolOptions = __WEBPACK_IMPORTED_MODULE_4__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(this.filterConfig.booleanValue.list, this.filterConfig.booleanValue.labels);
        this.selectedModel = null;
        this.constraintsTable = null;
        this.objectiveColumnOptions = [];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__["a" /* ActivityObserver */]();
        this.tableColumnSelectOptionsPipe = new __WEBPACK_IMPORTED_MODULE_6__tables_tables_pipes__["b" /* TableColumnSelectOptionsPipe */]();
    }
    OptimizationCreateComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.form = new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
            optimizationType: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].optimization.type.values.PREDICTOR_TUNING, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
            outputModelName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
            modelId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
            objectiveFlowId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            objectives: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormArray */]([new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
                    goal: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].optimization.goal.values.MAX, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
                    metric: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].optimization.metric.values.AUROC),
                    columnName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](''),
                })]),
            constraintFlowId: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
            constraints: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormArray */]([]),
        });
        this.form.controls['optimizationType'].valueChanges.subscribe(function () {
            _this.form.patchValue({
                objectiveFlowId: null,
                objectives: [{
                        columnName: '',
                    }],
                constraintFlowId: null,
                constraints: [],
            });
        });
    };
    OptimizationCreateComponent.prototype.onConstraintFlowChanged = function (flow) {
        var _this = this;
        var tableId = flow.steps[flow.steps.length - 1].output;
        this.tables.get(tableId).subscribe(function (table) {
            _this.constraintsTable = table;
            var constraintsControl = _this.form.controls.constraints;
            while (constraintsControl.length) {
                constraintsControl.removeAt(0);
            }
            table.columns.forEach(function (column) {
                var control = new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["c" /* FormGroup */]({
                    selected: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](false),
                    columnName: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](column.name, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
                    relationalOperator: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.filter.operator.values.EQ, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
                    value: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](null),
                    logicalOperator: new __WEBPACK_IMPORTED_MODULE_3__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].flowstep.option.filter.operatorGroup.values.AND, __WEBPACK_IMPORTED_MODULE_3__angular_forms__["g" /* Validators */].required),
                });
                constraintsControl.push(control);
            });
        });
    };
    OptimizationCreateComponent.prototype.onObjectiveFlowChanged = function (flow) {
        var _this = this;
        var tableId = flow.steps[flow.steps.length - 1].output;
        this.tables.get(tableId).subscribe(function (table) {
            _this.objectiveColumnOptions = _this.tableColumnSelectOptionsPipe.transform(table.columns);
        });
    };
    OptimizationCreateComponent.prototype.getColumnDataType = function (columnName) {
        if (this.constraintsTable) {
            var column = this.constraintsTable.columns.find(function (column) { return column.name === columnName; });
            if (column && 'dataType' in column) {
                switch (column.dataType) {
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.INTEGER:
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.DOUBLE:
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.LONG:
                        return 'number';
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.STRING:
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.TIMESTAMP:
                        return 'text';
                    case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.BOOLEAN:
                        return 'boolean';
                }
            }
        }
        return '';
    };
    OptimizationCreateComponent.prototype.submit = function () {
        var _this = this;
        var data = this.form.value;
        data.optimizationConstraints = data.constraints.filter(function (constraint) { return constraint.selected; }).map(function (constraint) {
            return {
                columnName: constraint.columnName,
                value: constraint.value,
                relationalOperator: constraint.relationalOperator,
                logicalOperator: constraint.logicalOperator,
            };
        });
        return this.optimizations.create(data).do(function (optimization) {
            _this.router.navigate(['/desk', 'optimization', optimization.id]);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('childComponent'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])
    ], OptimizationCreateComponent.prototype, "childComponent", void 0);
    OptimizationCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-optimization-create',
            template: "\n    <asset-operations [type]=\"config.asset.values.OPTIMIZATION\" [selectedItems]=\"[]\"></asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Optimization Name'\" [control]=\"form.controls['name']\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button class=\"btn btn-md btn-apply\" (click)=\"_savingObserver.observe(submit())\"\n            [disabled]=\"form.invalid || (_savingObserver.active | async)\">\n            Run\n          </button>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6 pull-right\">\n        <div class=\"panel\">\n          <div class=\"panel-body\">\n            <label>Optimization Type</label>\n            <app-check\n              *ngFor=\"let key of config.optimization.type.list\"\n              [type]=\"'radio'\"\n              [name]=\"'optimizationType'\"\n              [label]=\"config.optimization.type.labels[key]\"\n              [value]=\"key\"\n              [control]=\"form.controls['optimizationType']\"\n            ></app-check>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-6\">\n        <library-selector\n          [inputLabel]=\"'Select Source Model'\"\n          [available]=\"[config.asset.values.MODEL]\"\n          [value]=\"{id: form.controls['modelId'].value,entity: config.asset.values.MODEL}\"\n          (valueChange)=\"form.controls['modelId'].setValue($event.id);selectedModel = $event\"\n          [title]=\"'Select Source Model'\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Optimization Model Name'\" [control]=\"form.controls['outputModelName']\"></app-input>\n      </div>\n    </div>\n    <ng-template [ngIf]=\"selectedModel\">\n      <form [formGroup]=\"form\" class=\"brand-tab\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <label>Goal</label>\n                <app-check\n                  *ngFor=\"let key of config.optimization.goal.list\"\n                  [type]=\"'radio'\"\n                  [name]=\"'goal'\"\n                  [label]=\"config.optimization.goal.labels[key]\"\n                  [value]=\"config.optimization.goal.values[key]\"\n                  [control]=\"form.controls['objectives']['controls'][0].controls.goal\"\n                ></app-check>\n              </div>\n            </div>\n          </div>\n          <ng-template [ngIf]=\"form.value.optimizationType === config.optimization.type.values.PREDICTOR_TUNING\">\n            <div class=\"col-md-6\">\n              <div class=\"panel\">\n                <div class=\"panel-body\">\n                  <label>Metric</label>\n                  <app-check\n                    *ngFor=\"let key of config.optimization.metric.list\"\n                    [type]=\"'radio'\"\n                    [name]=\"'metric'\"\n                    [label]=\"config.optimization.metric.labels[key]\"\n                    [value]=\"config.optimization.metric.values[key]\"\n                    [control]=\"form.controls['objectives']['controls'][0].controls.metric\"\n                  ></app-check>\n                </div>\n              </div>\n            </div>\n          </ng-template>\n          <ng-template [ngIf]=\"form.value.optimizationType === config.optimization.type.values.OBJECTIVE_FUNCTION\">\n            <div class=\"col-md-6\">\n              <library-selector\n                [inputLabel]=\"'Select Objective Flow'\"\n                [available]=\"[config.asset.values.FLOW]\"\n                [value]=\"{id: form.controls['objectiveFlowId'].value, entity: config.asset.values.FLOW}\"\n                (valueChange)=\"form.controls['objectiveFlowId'].setValue($event.id);onObjectiveFlowChanged($event.object)\"\n                [title]=\"'Select Objective Flow'\"></library-selector>\n            </div>\n            <div class=\"col-md-6\">\n              <app-select [label]=\"'Metric'\"\n                [control]=\"form.controls['objectives']['controls'][0].controls.columnName\"\n                [options]=\"objectiveColumnOptions\"\n              ></app-select>\n            </div>\n          </ng-template>\n        </div>\n\n        <div class=\"row\" style=\"border-top: 1px #c5c5c5 solid; padding-top: 5px\">\n          <div class=\"col-md-6\">\n            <library-selector\n              [inputLabel]=\"'Select Constraint Flow'\"\n              [available]=\"[config.asset.values.FLOW]\"\n              [value]=\"{id: form.controls['constraintFlowId'].value, entity: config.asset.values.FLOW}\"\n              (valueChange)=\"form.controls['constraintFlowId'].setValue($event.id);onConstraintFlowChanged($event.object)\"\n              [title]=\"'Select Constraint Flow'\"></library-selector>\n          </div>\n        </div>\n        <ng-template [ngIf]=\"constraintsTable\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <div class=\"row\">\n                <div class=\"col-md-2\">\n                  <label>Specify Constraints</label>\n                </div>\n              </div>\n              <div class=\"row pt5\"\n                *ngFor=\"let controlGroup of form.controls['constraints']['controls']; let i = index;let last = last\">\n                <div class=\"col-md-2 col-md-offset-2\">\n                  <app-check\n                    [label]=\"controlGroup.controls.columnName.value | tableColumnDisplayName : constraintsTable\"\n                    [value]=\"true\"\n                    [control]=\"controlGroup.controls.selected\"\n                  ></app-check>\n                </div>\n                <div class=\"col-md-2\">\n                  <app-select [control]=\"controlGroup.controls.relationalOperator\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [options]=\"getColumnDataType(controlGroup.controls.columnName.value) === 'boolean' ? boolOperators : operators\"\n                  ></app-select>\n                </div>\n                <div class=\"col-md-4\"\n                  [ngSwitch]=\"getColumnDataType(controlGroup.controls.columnName.value)\">\n                  <app-select *ngSwitchCase=\"'boolean'\"\n                    [label]=\"'Value'\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [control]=\"controlGroup.controls.value\"\n                    [options]=\"boolOptions\"></app-select>\n                  <app-input *ngSwitchCase=\"'number'\"\n                    [type]=\"'number'\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [label]=\"'Value'\"\n                    [control]=\"controlGroup.controls.value\"></app-input>\n                  <app-input-suggestion *ngSwitchCase=\"'text'\"\n                    [label]=\"'Select Value'\"\n                    [disabled]=\"!controlGroup.controls.selected.value\"\n                    [control]=\"controlGroup.controls.value\"\n                    [suggestions]=\"{ fn: getColumnValuesLoader, args: [controlGroup.controls.columnName.value] }\"\n                  ></app-input-suggestion>\n                  <app-input *ngSwitchDefault [disabled]=\"true\"></app-input>\n                </div>\n              </div>\n            </div>\n          </div>\n        </ng-template>\n      </form>\n    </ng-template>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_8__services_optimization_service__["a" /* OptimizationService */],
            __WEBPACK_IMPORTED_MODULE_5__angular_router__["c" /* Router */]])
    ], OptimizationCreateComponent);
    return OptimizationCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/optimize/optimization-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizationViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__tables_tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var OptimizationViewComponent = (function () {
    function OptimizationViewComponent(route, router, optimizationService, models, processes, flows, tables) {
        this.route = route;
        this.router = router;
        this.optimizationService = optimizationService;
        this.models = models;
        this.processes = processes;
        this.flows = flows;
        this.tables = tables;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.filterConfig = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].flowstep.option.filter;
        this.loading = false;
        this.activeTab = 2;
        this.inputs = [];
        this.objectiveColumnOptions = [];
        this.inputColumnOptions = [];
        this.tableColumnSelectOptionsPipe = new __WEBPACK_IMPORTED_MODULE_3__tables_tables_pipes__["b" /* TableColumnSelectOptionsPipe */]();
    }
    OptimizationViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.progresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.OPTIMIZATION]];
        this.route.data.forEach(function (data) {
            _this.ngOnDestroy();
            _this.optimization = data.optimization;
            if (_this.optimization.constraintFlowId) {
                _this.flows.get(_this.optimization.constraintFlowId).subscribe(function (flow) {
                    var tableId = flow.steps[flow.steps.length - 1].output;
                    _this.tables.get(tableId).subscribe(function (table) {
                        _this.constraintsTable = table;
                        _this.getColumns(table);
                    });
                });
            }
            if (_this.optimization.optimizationType === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].optimization.type.values.OBJECTIVE_FUNCTION) {
                _this.flows.get(_this.optimization.objectiveFlowId).subscribe(function (flow) {
                    var tableId = flow.steps[flow.steps.length - 1].output;
                    _this.tables.get(tableId).subscribe(function (table) {
                        _this.objectiveColumnOptions = _this.tableColumnSelectOptionsPipe.transform(table.columns);
                    });
                });
            }
            _this._loadOptimization(data.optimization);
            if (data.optimization.status === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].optimization.status.values.RUNNING) {
                _this.processes.getByTarget(data.optimization.id, __WEBPACK_IMPORTED_MODULE_4__interfaces_common_interface__["a" /* IAsset */].Type.OPTIMIZATION).subscribe(function (process) {
                    _this.processSubscription = _this.processes.subscribe(process, function () {
                        _this.optimizationService.get(_this.optimization.id).subscribe(function (optimization) {
                            _this.optimization = optimization;
                            _this.activeTab = 1;
                            _this._loadOptimization(data.optimization, true);
                        });
                    });
                });
            }
        });
    };
    OptimizationViewComponent.prototype.ngOnDestroy = function () {
        if (this.processSubscription) {
            this.processSubscription.unsubscribe();
        }
    };
    OptimizationViewComponent.prototype.saveToLibrary = function () {
        /*this.optimizationService.save(this.optimization.id).subscribe(_ => {
         this._loadOptimization(this.optimization);
         });*/
    };
    OptimizationViewComponent.prototype.getColumns = function (table) {
        this.inputColumnOptions = this.tableColumnSelectOptionsPipe.transform(table.columns);
    };
    OptimizationViewComponent.prototype._onOptimizationDeleted = function () {
        this.router.navigate(['/desk', 'optimization']);
    };
    OptimizationViewComponent.prototype._loadOptimization = function (optimization, silent) {
        var _this = this;
        if (!silent) {
            this.loading = true;
        }
        this.models.get(optimization.outputModelId).subscribe(function (model) {
            _this.model = model;
            _this.loading = false;
        });
    };
    OptimizationViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-optimization-view',
            template: "\n    <asset-operations [type]=\"config.asset.values.OPTIMIZATION\" [selectedItems]=\"[optimization]\"\n      (onDelete)=\"_onOptimizationDeleted()\"></asset-operations>\n    <div class=\"row brand-tab\">\n      <div class=\"col-md-6\">\n        <app-input [label]=\"'Optimization Name'\" [value]=\"optimization?.name\" [disabled]=\"true\"></app-input>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button class=\"btn btn-apply\" (click)=\"saveToLibrary()\"\n            [disabled]=\"optimization.status !== config.optimization.status.values.DONE\">\n            Save To Library\n          </button>\n        </div>\n      </div>\n    </div>\n    <app-spinner [visibility]=\"loading\"></app-spinner>\n    <div *ngIf=\"!loading\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Optimization Type'\" [disabled]=\"true\"\n            [value]=\"optimization.optimizationType\"></app-input>\n        </div>\n        <div class=\"col-md-6\">\n          <library-selector\n            [inputLabel]=\"'Source Model'\"\n            [available]=\"[config.asset.values.MODEL]\"\n            [value]=\"{id: optimization.modelId, entity: config.asset.values.MODEL}\"\n            [disabled]=\"true\"\n            [title]=\"'Source Model'\"></library-selector>\n        </div>\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Optimization Model Name'\" [disabled]=\"true\"\n            [value]=\"optimization.outputModelName\"></app-input>\n        </div>\n      </div>\n      <process-indicator *ngIf=\"optimization.status === config.optimization.status.values.RUNNING\"\n        [process]=\"progresses[optimization.id]\"\n        [message]=\"'Optimizing'\"></process-indicator>\n      <ng-template [ngIf]=\"optimization.status === config.optimization.status.values.DONE\">\n        <div class=\"tabpanel\">\n          <!-- Nav tabs -->\n          <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === -1}\">\n              <a (click)=\"activeTab = -1\">Optimization Parameters</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n              <a (click)=\"activeTab = 0\">Input Table</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n              <a (click)=\"activeTab = 1\">Output table</a>\n            </li>\n            <li *ngIf=\"model.summary && model.status === config.model.status.values.ACTIVE\"\n              role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n              <a (click)=\"activeTab = 2\">Model Summary Statistics</a>\n            </li>\n          </ul>\n        </div>\n        <!-- Tab panes -->\n        <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\">\n          <div [hidden]=\"activeTab !== -1\">\n            <div class=\"row\">\n              <div class=\"col-md-6\">\n                <app-input [disabled]=\"true\" [label]=\"'Goal'\" [value]=\"optimization.objectives[0].goal\"></app-input>\n              </div>\n              <ng-template [ngIf]=\"optimization.optimizationType === config.optimization.type.labels.PREDICTOR_TUNING\">\n                <div class=\"col-md-6\">\n                  <app-input [label]=\"'Metric'\"\n                    [value]=\"optimization.objectives[0].metric\"\n                    [disabled]=\"true\"\n                  ></app-input>\n                </div>\n              </ng-template>\n              <ng-template [ngIf]=\"optimization.optimizationType === config.optimization.type.labels.OBJECTIVE_FUNCTION\">\n                <div class=\"col-md-6\">\n                  <library-selector\n                    [inputLabel]=\"'Objective Flow'\"\n                    [available]=\"[config.asset.values.FLOW]\"\n                    [disabled]=\"true\"\n                    [value]=\"{id: optimization.objectiveFlowId, entity: config.asset.values.FLOW}\"\n                  ></library-selector>\n                </div>\n                <div class=\"col-md-6\">\n                  <app-input [label]=\"'Metric'\"\n                    [value]=\"optimization.objectives[0].columnName\"\n                    [disabled]=\"true\"\n                  ></app-input>\n                </div>\n              </ng-template>\n            </div>\n            <ng-template [ngIf]=\"constraintsTable\">\n              <div class=\"row\">\n                <div class=\"col-md-12\">\n                  Constraints\n                </div>\n              </div>\n              <div class=\"row pt5\">\n                <div class=\"col-md-6\">\n                  <library-selector\n                    [inputLabel]=\"'Constraint Flow'\"\n                    [available]=\"[config.asset.values.FLOW]\"\n                    [disabled]=\"true\"\n                    [value]=\"{id: optimization.constraintFlowId, entity: config.asset.values.FLOW}\"\n                    [title]=\"'Source Model'\"></library-selector>\n                </div>\n              </div>\n              <div class=\"row\"\n                *ngFor=\"let constraint of optimization['optimizationConstraints']\">\n                <div class=\"col-md-2\">\n                  <app-input [label]=\"'Column'\"\n                    [value]=\"constraint.columnName | tableColumnDisplayName : constraintsTable\"\n                    [disabled]=\"true\"></app-input>\n                </div>\n                <div class=\"col-md-2\">\n                  <app-input [value]=\"filterConfig.operator.labels[constraint.relationalOperator]\"\n                    [disabled]=\"true\"\n                  ></app-input>\n                </div>\n                <div class=\"col-md-2\">\n                  <app-input [label]=\"'Value'\"\n                    [value]=\"constraint.value\"\n                    [disabled]=\"true\"\n                  ></app-input>\n                </div>\n              </div>\n            </ng-template>\n          </div>\n          <table-view-embed\n            [hidden]=\"activeTab !== 0\"\n            [id]=\"model.input\"\n            [modelHelpers]=\"model\"></table-view-embed>\n          <table-view-embed\n            [hidden]=\"activeTab !== 1\"\n            [id]=\"model.output\"\n            [modelHelpers]=\"model\"></table-view-embed>\n          <div class=\"flex-static\" [hidden]=\"activeTab !== 2\"\n            *ngIf=\"model.summary && model.status === config.model.status.values.ACTIVE\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <model-summary [model]=\"model\"></model-summary>\n              </div>\n            </div>\n          </div>\n        </div>\n      </ng-template>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_5__services_optimization_service__["a" /* OptimizationService */],
            __WEBPACK_IMPORTED_MODULE_6__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_7__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_8__services_flow_service__["a" /* FlowService */],
            __WEBPACK_IMPORTED_MODULE_9__services_table_service__["a" /* TableService */]])
    ], OptimizationViewComponent);
    return OptimizationViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/optimize/optimize.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizeModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__optimization_view_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__optimization_context_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__optimization_create_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__optimize_routes__ = __webpack_require__("../../../../../src/app/optimize/optimize.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__train_train_module__ = __webpack_require__("../../../../../src/app/train/train.module.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};












var OptimizeModule = (function () {
    function OptimizeModule() {
    }
    OptimizeModule_1 = OptimizeModule;
    OptimizeModule.forRoot = function () {
        return {
            ngModule: OptimizeModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_10__services_optimization_service__["a" /* OptimizationService */],
                __WEBPACK_IMPORTED_MODULE_9__optimize_routes__["a" /* OptimizationResolve */],
            ],
        };
    };
    OptimizeModule = OptimizeModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
                __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__["a" /* TablesModule */],
                __WEBPACK_IMPORTED_MODULE_11__train_train_module__["a" /* TrainModule */],
                __WEBPACK_IMPORTED_MODULE_5__tables_tables_module__["a" /* TablesModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_8__optimization_create_component__["a" /* OptimizationCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_6__optimization_view_component__["a" /* OptimizationViewComponent */],
                __WEBPACK_IMPORTED_MODULE_7__optimization_context_component__["a" /* OptimizationContextComponent */],
            ],
            exports: []
        })
    ], OptimizeModule);
    return OptimizeModule;
    var OptimizeModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/optimize/optimize.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizationResolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return optimizeRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__optimization_create_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__optimization_context_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__optimization_view_component__ = __webpack_require__("../../../../../src/app/optimize/optimization-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_optimization_service__ = __webpack_require__("../../../../../src/app/services/optimization.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var OptimizationResolve = (function () {
    function OptimizationResolve(optimizations) {
        this.optimizations = optimizations;
    }
    OptimizationResolve.prototype.resolve = function (route) {
        var optimizationId = route.params['optimizationId'];
        return this.optimizations.get(optimizationId);
    };
    OptimizationResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_5__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_optimization_service__["a" /* OptimizationService */]])
    ], OptimizationResolve);
    return OptimizationResolve;
}());

var optimizeRoutes = [
    {
        path: 'optimization',
        redirectTo: 'optimization/create',
    },
    {
        path: 'optimization/create',
        component: __WEBPACK_IMPORTED_MODULE_1__optimization_create_component__["a" /* OptimizationCreateComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_2__optimization_context_component__["a" /* OptimizationContextComponent */],
    },
    {
        path: 'optimization/:optimizationId',
        component: __WEBPACK_IMPORTED_MODULE_3__optimization_view_component__["a" /* OptimizationViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_2__optimization_context_component__["a" /* OptimizationContextComponent */],
        resolve: { optimization: OptimizationResolve },
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
];


/***/ }),

/***/ "../../../../../src/app/services/acl.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AclService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__user_service__ = __webpack_require__("../../../../../src/app/services/user.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var AclService = (function () {
    function AclService(user) {
        this.user = user;
    }
    AclService.prototype.canUpdateModel = function (model) {
        return model.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateCVModel = function (model) {
        return model.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateTable = function (table) {
        return table.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateFlow = function (flow) {
        return flow.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateFlowstep = function (flowstep, flow) {
        return flow.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateReplay = function (replay) {
        return replay.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateAlbum = function (album) {
        return album.ownerId === this.currentUser.id;
    };
    AclService.prototype.canRemovePicture = function (album) {
        return this.canUpdateAlbum(album) && album.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].album.type.values.SOURCE;
    };
    AclService.prototype.canUpdateOptimization = function (optimization) {
        return optimization.ownerId === this.currentUser.id;
    };
    AclService.prototype.canUpdateDashboard = function (dashboard) {
        return dashboard.ownerId === this.currentUser.id;
    };
    Object.defineProperty(AclService.prototype, "currentUser", {
        get: function () {
            return this.user.getUser();
        },
        enumerable: true,
        configurable: true
    });
    AclService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__user_service__["a" /* UserService */]])
    ], AclService);
    return AclService;
}());



/***/ }),

/***/ "../../../../../src/app/services/album.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlbumService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var AlbumService = (function (_super) {
    __extends(AlbumService, _super);
    function AlbumService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM;
        _this._data.listMeta = { count: 0, countPage: 0 };
        _this._data['pictureList'] = null;
        _this._observables['pictureList'] = new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */](1);
        return _this;
    }
    AlbumService.prototype.list = function (params) {
        // GET '/albums'
        var observable = this.http.get('albums', params);
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable);
    };
    AlbumService.prototype.create = function (item) {
        var _this = this;
        item = item || this._data.item.edit; // @TODO REMOVE?
        var data = jQuery.extend(true, {}, item);
        // POST '/albums/:id'
        var observable = this.http.post('albums', data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.notifications.create('Album created: ' + data.name);
        });
    };
    AlbumService.prototype.get = function (id) {
        // GET '/albums/:id'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, id).get('albums/' + id);
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable);
    };
    AlbumService.prototype.update = function (id, data) {
        var _this = this;
        // PUT '/albums/:id'
        var observable = this.http.put('albums/' + id, data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.events.emit('UPDATE_ALBUM', { id: id });
            _this.notifications.create('Album updated: ' + data.name);
        });
    };
    AlbumService.prototype.upload = function (albumId, uploadParams) {
        var _this = this;
        var notificationDataObservable = new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */]();
        var notificationData = {
            text: 'Initiating',
            progress: 0,
            file: uploadParams.file,
        };
        var notification = this.notifications.create({ type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.type.values.FILE_UPLOAD, dataAsync: notificationDataObservable }, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.INFO, { timeout: 0 });
        notificationDataObservable.next(Object.assign({}, notificationData));
        var filename = uploadParams.filename || uploadParams.file.name.replace(/\.[^/.]+$/, ''); // remove extension of the file
        var observable = this.http.upload("albums/" + albumId + "/pictures/upload", uploadParams.file, {
            filename: filename,
        }, {
            onprogress: function (event) {
                if (event.lengthComputable) {
                    notificationDataObservable.next(Object.assign(notificationData, {
                        text: 'Uploading',
                        progress: event.total ? event.loaded / event.total * 100 : 100,
                    }));
                }
            },
            catchWith: function (error) {
                notification.options.timeout = 0;
                notificationDataObservable.next(Object.assign(notificationData, {
                    level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER,
                    text: error.message,
                }));
                return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
            },
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_ALBUM_LIST');
            notification.options.timeout = Date.now() - notification.created + __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.defaults.timeout;
            notificationDataObservable.next(Object.assign(notificationData, {
                level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.SUCCESS,
                text: 'Uploaded',
                progress: 100,
            }));
            _this.events.emit('UPDATE_PICTURE_LIST');
        });
    };
    AlbumService.prototype.uploadLabels = function (albumId, labelsFile) {
        var _this = this;
        var notificationDataObservable = new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */]();
        var notificationData = {
            text: 'Initiating',
            progress: 0,
            file: labelsFile,
        };
        var notification = this.notifications.create({ type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.type.values.FILE_UPLOAD, dataAsync: notificationDataObservable }, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.INFO, { timeout: 0 });
        notificationDataObservable.next(Object.assign({}, notificationData));
        var observable = this.http.upload("albums/" + albumId + "/uploadLabels", labelsFile, null, {
            // see XMLHttpRequestEventTarget listeners
            onprogress: function (event) {
                if (event.lengthComputable) {
                    notificationDataObservable.next(Object.assign(notificationData, {
                        text: 'Uploading',
                        progress: event.total ? event.loaded / event.total * 100 : 100,
                    }));
                }
            },
            catchWith: function (error) {
                notification.options.timeout = 0;
                notificationDataObservable.next(Object.assign(notificationData, {
                    level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER,
                    text: error.message,
                }));
                return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
            },
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.events.emit('UPDATE_ALBUM', { id: albumId });
            notification.options.timeout = Date.now() - notification.created + __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.defaults.timeout;
            notificationDataObservable.next(Object.assign(notificationData, {
                level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.SUCCESS,
                text: 'Uploaded',
                progress: 100,
            }));
        });
    };
    AlbumService.prototype.importLabelsFromS3 = function (albumId, importParams) {
        var _this = this;
        var observable = this.http.post("albums/" + albumId + "/importLabelsFromS3", importParams, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.notifications.create('Album updated: ' + data.name);
        });
    };
    AlbumService.prototype.importFromAWS = function (albumId, importParams) {
        var _this = this;
        var notificationDataObservable = new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */]();
        var notificationData = {
            text: 'Initiating',
            progress: 0,
            file: importParams.labels,
        };
        var notification = importParams.labels
            ? this.notifications.create({ type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.type.values.FILE_UPLOAD, dataAsync: notificationDataObservable }, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.INFO, { timeout: 0 })
            : null;
        if (notification) {
            notificationDataObservable.next(Object.assign({}, notificationData));
        }
        var observable = this.http.upload("albums/" + albumId + "/pictures/importFromS3", importParams.labels, {
            AWSS3BucketName: importParams.AWSS3BucketName,
            AWSAccessKey: importParams.AWSAccessKey,
            AWSSecretKey: importParams.AWSSecretKey,
            AWSSessionToken: importParams.AWSSessionToken,
            S3CSVPath: importParams.S3CSVPath,
        }, {
            // see XMLHttpRequestEventTarget listeners
            onprogress: function (event) {
                if (event.lengthComputable && notification) {
                    notificationDataObservable.next(Object.assign(notificationData, {
                        text: 'Uploading',
                        progress: event.total ? event.loaded / event.total * 100 : 100,
                    }));
                }
            },
            catchWith: function (error) {
                if (notification) {
                    notification.options.timeout = 0;
                    notificationDataObservable.next(Object.assign(notificationData, {
                        level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER,
                        text: error.message,
                    }));
                }
                return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
            },
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.events.emit('UPDATE_ALBUM', { id: albumId });
            if (notification) {
                notification.options.timeout = Date.now() - notification.created + __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.defaults.timeout;
                notificationDataObservable.next(Object.assign(notificationData, {
                    level: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.SUCCESS,
                    text: 'Uploaded',
                    progress: 100,
                }));
            }
        });
    };
    AlbumService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/albums/:id'
        var observable = this.http.delete('albums/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_ALBUM_LIST');
            _this.notifications.create('Album deleted: ' + item.name);
        });
    };
    AlbumService.prototype.pictureList = function (album, params) {
        var _this = this;
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, album.id).get("albums/" + album.id + "/pictures", params, {
            deserialize: function (data) {
                return Object.assign(data, {
                    data: data.data.map(_this._mapPicture),
                });
            },
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable);
    };
    AlbumService.prototype.getPicture = function (albumId, pictureId) {
        // GET '/albums/:albumId/pictures/:pictureId'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, albumId).get("albums/" + albumId + "/pictures/" + pictureId, null, {
            deserialize: this._mapPicture,
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable);
    };
    AlbumService.prototype.saveTags = function (albumId, pictureId, data) {
        var _this = this;
        var observable = this.http.put('albums/' + albumId + '/pictures/' + pictureId, data, null, {
            deserialize: this._mapPicture,
        });
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PICTURE_LIST');
            _this.events.emit('UPDATE_PICTURE', { id: pictureId, albumId: albumId });
            _this.notifications.create('Picture updated');
        });
    };
    AlbumService.prototype.deletePicture = function (album, picture) {
        var _this = this;
        // DELETE '/albums/:albumId/pictures/:pictureId'
        var observable = this.http.delete('albums/' + album.id + '/pictures/' + picture.id);
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PICTURE_LIST');
            _this.notifications.create('Picture deleted');
        });
    };
    AlbumService.prototype.getTags = function (albumId) {
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, albumId).get("albums/" + albumId + "/tags");
        return __WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */].execute(observable);
    };
    AlbumService.prototype.exportUrl = function (id, token) {
        var _this = this;
        var observable = this.sharedService.getSharedAccessParams(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM, id).map(function (data) {
            var url = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + "albums/" + id + "/export?access_token=" + token;
            if (data.shared_resource_id) {
                url += "&shared_resource_id=" + data.shared_resource_id;
            }
            return url;
        });
        if (__WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__["d" /* mocksMode */]) {
            return observable.flatMap(function (url) {
                return _this.http.get(url).map(function (_) {
                    return "data:application/octet-stream;charset=utf-8," +
                        encodeURIComponent(_);
                });
            });
        }
        return observable;
    };
    AlbumService.prototype.download = function (id, token) {
        var observable = this.exportUrl(id, token).flatMap(function (url) {
            return __WEBPACK_IMPORTED_MODULE_5__utils_misc__["a" /* MiscUtils */].downloadUrl(url, id);
        }).publish();
        observable.connect(); // make sure this runs irrespective of subscribers
        return observable;
    };
    // @TODO: remove when backend fixed
    AlbumService.prototype._mapPicture = function (pic) {
        return Object.assign({
            filename: pic.fileName,
            filepath: pic.filePath,
            filesize: pic.fileSize,
        }, pic);
    };
    AlbumService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_8__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_10__notification_service__["a" /* NotificationService */]])
    ], AlbumService);
    return AlbumService;
}(__WEBPACK_IMPORTED_MODULE_7__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/cv-model.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVModelService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var CVModelService = (function (_super) {
    __extends(CVModelService, _super);
    function CVModelService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL;
        _this._data.listMeta = { count: 0, countPage: 0 };
        _this._data['table'] = null;
        return _this;
    }
    CVModelService.prototype.list = function (params) {
        // GET '/models'
        var observable = this.http.get('cv-models', params);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable);
    };
    CVModelService.prototype.get = function (id) {
        var _this = this;
        // GET '/models/:id'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL, id).get('cv-models/' + id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM, data.input, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL, data.id);
            _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM, data.output, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL, data.id);
        });
    };
    CVModelService.prototype.create = function (item) {
        var _this = this;
        item = item || this._data.item.edit;
        var data = jQuery.extend(true, {}, item);
        // POST '/models/:id'
        var observable = this.http.post('cv-models', data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_CV_MODEL_LIST');
            _this.notifications.create('Model created: ' + data.name);
        });
    };
    CVModelService.prototype.update = function (modelId, data) {
        var _this = this;
        // PUT '/models/:id'
        var observable = this.http.put('cv-models/' + modelId, data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_CV_MODEL_LIST');
            _this.notifications.create('Model updated: ' + data.name);
        });
    };
    CVModelService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/models/:id'
        var observable = this.http.delete('cv-models/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_CV_MODEL_LIST');
            _this.notifications.create('Model deleted: ' + item.name);
        });
    };
    CVModelService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_5__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_3__notification_service__["a" /* NotificationService */]])
    ], CVModelService);
    return CVModelService;
}(__WEBPACK_IMPORTED_MODULE_6__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/cv-prediction.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVPredictionService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var CVPredictionService = (function (_super) {
    __extends(CVPredictionService, _super);
    function CVPredictionService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        return _this;
    }
    CVPredictionService.prototype.create = function (item) {
        var _this = this;
        // POST '/predictions'
        var observable = this.http.post('cv-predictions', item, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_CV_PREDICTIONS_LIST');
        });
    };
    CVPredictionService.prototype.list = function (params) {
        // GET '/predictions'
        var observable = this.http.get('cv-predictions', params);
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable);
    };
    CVPredictionService.prototype.get = function (id) {
        // GET '/predictions/:id'
        return this.http.get('cv-predictions/' + id);
    };
    CVPredictionService.prototype.save = function (id) {
        var _this = this;
        // POST '/predictions/:id'
        var observable = this.http.post('cv-predictions/' + id + '/save', {});
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function () {
            //@todo should emit something
            _this.notifications.create('Prediction saved.'); // @todo what to show
        });
    };
    CVPredictionService.prototype.remove = function (id) {
        var _this = this;
        // DELETE '/predictions/:id'
        var observable = this.http.delete('cv-predictions/' + id);
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_CV_PREDICTIONS_LIST');
            _this.notifications.create('Prediction deleted.'); // TODO: should backend return object instead of id?
        });
    };
    CVPredictionService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_2__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_3__notification_service__["a" /* NotificationService */]])
    ], CVPredictionService);
    return CVPredictionService;
}(__WEBPACK_IMPORTED_MODULE_4__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/dashboard.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var DashboardService = (function (_super) {
    __extends(DashboardService, _super);
    function DashboardService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.DASHBOARD;
        return _this;
    }
    DashboardService.prototype.list = function (params) {
        var observable = this.http.get('dashboards', params);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable);
    };
    DashboardService.prototype.create = function (item) {
        var _this = this;
        var data = jQuery.extend(true, {}, item);
        var observable = this.http.post('dashboards', data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_DASHBOARD_LIST');
            _this.notifications.create('Dashboard created: ' + data.name);
        });
    };
    DashboardService.prototype.get = function (id) {
        // const observable = this.sharedService.withSharedAccess(
        //   config.asset.values.DASHBOARD,
        //   id
        // ).get('dashboards/' + id);
        var observable = this.http.get('dashboards/' + id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable);
    };
    DashboardService.prototype.update = function (id, data) {
        var _this = this;
        var observable = this.http.put('dashboards/' + id, data, null, { serialize: function (_) { return _; } });
        // console.log(JSON.stringify(data)); //@TODO REMOVE
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_DASHBOARD_LIST');
            _this.notifications.create('Dashboard updated: ' + data.name);
        });
    };
    DashboardService.prototype['delete'] = function (item) {
        var _this = this;
        var observable = this.http.delete('dashboards/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_DASHBOARD_LIST');
            _this.notifications.create('Dashboard deleted: ' + item.name);
        });
    };
    DashboardService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_5__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_3__notification_service__["a" /* NotificationService */]])
    ], DashboardService);
    return DashboardService;
}(__WEBPACK_IMPORTED_MODULE_6__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/data-fetching.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DatafetchingService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var DatafetchingService = (function () {
    function DatafetchingService(http) {
        this.http = http;
    }
    DatafetchingService.prototype.fetchData = function (request) {
        var observable = this.http.post("visualize", request);
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable);
    };
    DatafetchingService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */]])
    ], DatafetchingService);
    return DatafetchingService;
}());



/***/ }),

/***/ "../../../../../src/app/services/data.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DataService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var DataService = (function () {
    function DataService(events) {
        var _this = this;
        this.events = events;
        // TODO: naming
        this._type = null; // should be assigned in child services
        this._data = {
            list: null,
            view: null,
            edit: null,
        };
        this._observables = {
            list: null,
            view: null,
            edit: null,
        };
        // init observers
        ['list', 'view', 'edit'].forEach(function (prop) {
            var observable = new __WEBPACK_IMPORTED_MODULE_1_rxjs_ReplaySubject__["a" /* ReplaySubject */](1); // buffer last value
            _this._observables[prop] = observable;
        });
        // init refresh
        this.events
            .filter(function (e) { return e.type === 'PROCESS_COMPLETED'; })
            .subscribe(this._refresh.bind(this));
        // init reset
        this.events
            .filter(function (e) { return e.type === 'USER_SIGNOUT'; })
            .subscribe(this.reset.bind(this));
    }
    Object.defineProperty(DataService.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DataService.prototype, "observables", {
        get: function () {
            return this._observables;
        },
        enumerable: true,
        configurable: true
    });
    DataService.prototype.view = function (item) {
        var data = item ? jQuery.extend(true, {}, item) : null;
        this._data.view = data;
        this._observables.view.next(data);
    };
    // experimental
    DataService.prototype.reset = function () {
        var _this = this;
        ['list', 'view', 'edit'].forEach(function (prop) {
            _this._data[prop] = null;
        });
    };
    DataService.prototype._refresh = function (event) {
        if (!event.data.target || event.data.target !== this._type) {
            return;
        }
        // update list
        var list = (this._data.list || []).map(function (item) { return item.id; });
        list.length && list.indexOf(event.data.id) > -1 && this['list'] && this['list']();
        // update view
        this._data.view && this._data.view.id === event.data.id && this['get'] && this['get'](event.data.id);
        // update edit
        //this._data.edit && this._data.edit.id === event.data.id && this['get'] && this['get'](event.data.id);
    };
    DataService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__event_service__["a" /* EventService */]])
    ], DataService);
    return DataService;
}());



/***/ }),

/***/ "../../../../../src/app/services/dropdown-context.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DropdownContextService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var DropdownContextService = (function () {
    function DropdownContextService() {
        var _this = this;
        this.dropdowns = [];
        document.addEventListener('click', function () {
            _this.dropdowns.forEach(function (dropdown) { return dropdown.classList.remove('open'); });
        });
        document.addEventListener('contextmenu', function (event) {
            var dropdowns = _this.dropdowns;
            dropdowns.forEach(function (dropdown) {
                if (!dropdown.contains(event.target)) {
                    dropdown.classList.remove('open');
                }
            });
        });
    }
    DropdownContextService.prototype.register = function (el) {
        this.dropdowns.push(el);
    };
    DropdownContextService.prototype.deregister = function (el) {
        this.dropdowns = this.dropdowns.filter(function (elem) { return elem !== el; });
    };
    DropdownContextService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [])
    ], DropdownContextService);
    return DropdownContextService;
}());



/***/ }),

/***/ "../../../../../src/app/services/event.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EventService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var EventService = (function () {
    function EventService() {
        this._observable = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
    }
    Object.defineProperty(EventService.prototype, "observable", {
        get: function () {
            return this._observable;
        },
        enumerable: true,
        configurable: true
    });
    EventService.prototype.subscribe = function (generatorOrNext) {
        return this._observable.subscribe(generatorOrNext);
    };
    EventService.prototype.emit = function (type, data) {
        this._observable.emit({
            type: type,
            data: data,
        });
    };
    EventService.prototype.filter = function (predicate, thisArg) {
        return this._observable.filter(predicate, thisArg);
    };
    EventService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [])
    ], EventService);
    return EventService;
}());



/***/ }),

/***/ "../../../../../src/app/services/flow.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__flowstep_service__ = __webpack_require__("../../../../../src/app/services/flowstep.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var FlowService = (function (_super) {
    __extends(FlowService, _super);
    function FlowService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW;
        _this._data.listMeta = { count: 0, countPage: 0 };
        // init refresh
        _this.events
            .filter(function (e) { return e.type === 'PROCESS_COMPLETED'; })
            .subscribe(_this._refreshExtra.bind(_this));
        return _this;
    }
    FlowService_1 = FlowService;
    FlowService.prototype.list = function (params) {
        var _this = this;
        // GET '/flows'
        var observable = this.http.get('flows', params, {
            deserialize: function (response) {
                return {
                    data: response.data.map(FlowService_1._deserializeFlow),
                    count: response.count,
                };
            }
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            // RESERVED // don't send "raw" data / need to think what to send...
            //this._observables.list.next(data);
        });
    };
    FlowService.prototype.get = function (id) {
        var _this = this;
        // GET '/flows/:id'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, id).get('flows/' + id, null, {
            deserialize: FlowService_1._deserializeFlow,
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            data.tables.forEach(function (tableId) {
                _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.TABLE, tableId, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, id);
            });
            _this._data.view = data;
            _this._observables.view.next(data);
        });
    };
    FlowService.prototype.create = function (item) {
        var _this = this;
        item = item || this._data.edit;
        var data = jQuery.extend(true, {}, item);
        // POST '/flows'
        var observable = this.http.post('flows', data, null, {
            deserialize: FlowService_1._deserializeFlow
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.edit = data;
            _this._observables.edit.next(data);
            _this._data.list && _this.list(); // experimental // refresh the list
            _this.events.emit('UPDATE_FLOW_LIST');
            _this.notifications.create('Flow successfully created: ' + data.name);
        });
    };
    FlowService.prototype.update = function (item) {
        var _this = this;
        item = item || this._data.edit;
        if (!item.id) {
            return this.create(item);
        }
        var data = jQuery.extend(true, {}, item);
        // PUT '/flows/:id'
        var observable = this.http.put('flows/' + item.id, data, null, {
            deserialize: FlowService_1._deserializeFlow,
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
            _this.events.emit('UPDATE_FLOW', data.id);
            _this.events.emit('UPDATE_FLOW_LIST');
            _this.notifications.create('Flow updated: ' + data.name);
        });
    };
    FlowService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/flows/:id'
        var observable = this.http.delete('flows/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            // update view item, if needed
            if ((_this._data.view || {}).id === data.id) {
                _this._data.view = null;
                _this._observables.view.next(_this._data.view);
            }
            _this._data.list && _this.list(); // experimental // refresh the list
            _this.events.emit('UPDATE_FLOW_LIST');
            _this.notifications.create('Flow deleted: ' + item.name);
        });
    };
    FlowService.prototype.getTables = function (flowId, params) {
        var _this = this;
        // GET '/flows/:id/tables'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, flowId).get('flows/' + flowId + '/tables', params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            data.data.forEach(function (table) {
                _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.TABLE, table.id, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, flowId);
            });
            _this._data.viewTables = data.data;
            _this._refreshTables(_this._data.viewTables);
            // RESERVED / this._observables.view.next(data);
        });
    };
    FlowService.prototype.addTables = function (id, tableId) {
        var _this = this;
        // PUT '/flows/:id/tables/:tableId'
        var observable = this.http.put('flows/' + id + '/tables/' + tableId, {});
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.viewTables = data.data;
            _this._refreshTables(_this._data.viewTables);
            // RESERVED / this._observables.view.next(data);
            _this.events.emit('UPDATE_FLOW_TABLES', id);
        });
    };
    FlowService.prototype.removeTables = function (id, tableId) {
        var _this = this;
        // DELETE '/flows/:id/tables/:tableId'
        var observable = this.http.delete('flows/' + id + '/tables/' + tableId);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.viewTables = data.data;
            _this._refreshTables(_this._data.viewTables);
            // RESERVED / this._observables.view.next(data);
            _this.events.emit('UPDATE_FLOW_TABLES', id);
        });
    };
    FlowService.prototype.exportUrl = function (id, token) {
        return __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].api.base + 'flows/' + id + '/export' + '?access_token=' + token;
    };
    FlowService.prototype.inputs = function (id) {
        return this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, id).get('flows/' + id + '/inputs');
    };
    FlowService.prototype.outputs = function (id) {
        return this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, id).get('flows/' + id + '/outputs');
    };
    FlowService.prototype.clone = function (clone) {
        var _this = this;
        if (clone.name === '') {
            delete clone.name;
        }
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.FLOW, clone.id).post('flows/' + clone.id + '/copy', clone);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (table) {
            _this.events.emit('UPDATE_FLOW_LIST');
            _this.notifications.create('Flow cloned: ' + table.name);
        });
    };
    FlowService.prototype._refreshExtra = function (event) {
        // TODO: add target checking (should be "table")
        var listTables = (this._data.viewTables || []).map(function (item) { return item.id; });
        listTables.indexOf(event.data.targetId) > -1 && this._data.view && this.getTables(this._data.view.id);
        // TODO: add target checking (should be "flowstep")
        var listSteps = ((this._data.view || {}).steps || []).map(function (item) { return item.id; });
        listSteps.indexOf(event.data.targetId) > -1 && this._data.view && this.getTables(this._data.view.id);
    };
    FlowService.prototype._refreshTables = function (tables) {
        // check/refresh "parent" flow object to preserve consistency (no api calls)
        this._data.view
            && this._data.viewTables.length !== tables.length
            && (this._data.viewTables = tables.map(function (item) { return item.id; }));
    };
    FlowService._deserializeFlow = function (backendFlow) {
        return {
            id: backendFlow.id,
            ownerId: backendFlow.ownerId,
            name: backendFlow.name,
            description: backendFlow.description,
            created: backendFlow.created,
            updated: backendFlow.updated,
            status: backendFlow.status,
            steps: (backendFlow.steps || []).map(function (step) { return __WEBPACK_IMPORTED_MODULE_2__flowstep_service__["a" /* FlowstepService */]._deserializeFlowstep(step); }),
            tables: backendFlow.tables,
            inLibrary: backendFlow.inLibrary,
        };
    };
    FlowService = FlowService_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_5__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_6__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_7__notification_service__["a" /* NotificationService */]])
    ], FlowService);
    return FlowService;
    var FlowService_1;
}(__WEBPACK_IMPORTED_MODULE_4__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/flowstep.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return FlowstepService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__ = __webpack_require__("../../../../../src/app/interfaces/flow.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var FlowstepService = (function (_super) {
    __extends(FlowstepService, _super);
    function FlowstepService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        return _this;
    }
    FlowstepService_1 = FlowstepService;
    FlowstepService.prototype.get = function (flowId, id) {
        var _this = this;
        // GET '/flows/:flowId/steps/:id'
        var observable = this.http.get('flows/' + flowId + '/steps/' + id, null, {
            deserialize: FlowstepService_1._deserializeFlowstep,
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
        });
    };
    FlowstepService.prototype.create = function (flowId, item) {
        var _this = this;
        item = item || this._data.edit;
        var data = jQuery.extend(true, {}, item);
        // POST '/flows/:flowId/steps'
        var observable = this.http.post('flows/' + flowId + '/steps', data, null, {
            serialize: FlowstepService_1._serializeFlowstep,
            deserialize: FlowstepService_1._deserializeFlowstep,
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.edit = data;
            _this._observables.edit.next(data);
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.events.emit('UPDATE_FLOW_STEPS', flowId);
            _this.notifications.create('Flowstep successfully created: ' + data.name);
        });
    };
    FlowstepService.prototype.update = function (flowId, item) {
        var _this = this;
        item = item || this._data.edit;
        if (!item.id) {
            return this.create(flowId, item);
        }
        // filter updatable properties
        var data = {};
        ['name'].forEach(function (prop) { return data[prop] = item[prop]; });
        // PUT '/flows/:flowId/steps/:id'
        var observable = this.http.put('flows/' + flowId + '/steps/' + item.id, data, null, {
            serialize: FlowstepService_1._serializeFlowstep,
            deserialize: FlowstepService_1._deserializeFlowstep,
        });
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.events.emit('UPDATE_FLOW_STEPS', flowId);
            _this.notifications.create('Flowstep updated: ' + data.name);
        });
    };
    FlowstepService.prototype['delete'] = function (flowId, item) {
        var _this = this;
        // DELETE '/flows/:flowId/steps/:id'
        var observable = this.http.delete('flows/' + flowId + '/steps/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            // update view item, if needed
            if ((_this._data.view || {}).id === data.id) {
                _this._data.view = null;
                _this._observables.view.next(_this._data.view);
            }
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.events.emit('UPDATE_FLOW_STEPS', flowId);
            _this.notifications.create('Flowstep deleted: ' + item.name);
        });
    };
    // TODO / TEMP TEMP TEMP / upgrade endpoint and method
    FlowstepService.prototype.sqlParsing = function (data) {
        // params: @data: {sql: sql, overwrite: true}
        return this.http.post('dataset/sql/validate', data);
    };
    // TODO / TEMP TEMP TEMP / upgrade endpoint and method
    FlowstepService.prototype.sqlParsingInsert = function (data) {
        // params: @data: {expression: string, datasetId: string, newColumnName: string}
        return this.http.post('dataset/sql/validateinsert', data);
    };
    FlowstepService.prototype.clusteringResults = function (flowId, flowstepId) {
        return this.http.get('flows/' + flowId + '/steps/' + flowstepId + '/clusters');
    };
    FlowstepService._serializeFlowstep = function (flowstep) {
        return {
            name: flowstep.name,
            inputIDs: flowstep.input,
            outputName: flowstep.output,
            transformer: FlowstepService_1._serializeTransformer(flowstep),
        };
    };
    FlowstepService._deserializeFlowstep = function (backendStep) {
        return {
            id: backendStep.id,
            name: backendStep.name,
            type: FlowstepService_1._deserializeTransformerType(backendStep.transformer),
            created: backendStep.created,
            updated: backendStep.updated,
            input: backendStep.input,
            output: backendStep.output,
            status: backendStep.status,
            options: FlowstepService_1._deserializeTransformer(backendStep.transformer),
        };
    };
    FlowstepService._serializeJoinType = function (options) {
        if (options.type === __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].JoinType.NORMAL) {
            return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.JOIN;
        }
        return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FUZZYJOIN;
    };
    FlowstepService._deserializeTransformerType = function (transformer) {
        switch (transformer.transformerType) {
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.INSERT:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.insert;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FILTER:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.filter;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.AGGREGATE:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.aggregate;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.CLUSTER:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.cluster;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.MAP:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.map;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.QUERY:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.query;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.WINDOW:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.window;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.GEOJOIN:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.geojoin;
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.JOIN:
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FUZZYJOIN:
                return __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.join;
        }
    };
    FlowstepService._serializeTransformer = function (flowstep) {
        var passColumns = flowstep.options.passColumns;
        switch (flowstep.type) {
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.insert:
                var insertOptions = flowstep.options;
                return {
                    transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.INSERT,
                    newColumnName: insertOptions.name,
                    expression: insertOptions.formula,
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.aggregate:
                var aggregateOptions = flowstep.options;
                return {
                    transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.AGGREGATE,
                    aggInfo: {
                        aggregateColumn: aggregateOptions.name,
                        groupByColumns: aggregateOptions.groupByColumns,
                        operandColumn: aggregateOptions.operandColumn,
                        operator: aggregateOptions.operator,
                    },
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.join:
                var joinOptions = flowstep.options;
                return {
                    transformerType: FlowstepService_1._serializeJoinType(joinOptions),
                    joinColumns: joinOptions.columns.map(function (item) {
                        return {
                            leftColumnName: item.from,
                            rightColumnName: item.to,
                        };
                    }),
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.cluster:
                var clusterOptions = flowstep.options;
                return {
                    transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.CLUSTER,
                    clusteringType: clusterOptions.type,
                    numClusters: parseInt(clusterOptions.groups),
                    numIterations: parseInt(clusterOptions.iterations),
                    columns: clusterOptions.columns,
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.query:
                var queryOptions = flowstep.options;
                return {
                    transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.QUERY,
                    expression: queryOptions.expression,
                    inputAliases: queryOptions.inputAliases,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.filter:
                var filterOptions = flowstep.options;
                return {
                    transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FILTER,
                    filters: filterOptions.conditions.map(function (item) {
                        return {
                            columnName: item.column,
                            relationalOperator: item.operator,
                            logicalOperator: item.operatorGroup,
                        };
                    }),
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.window:
                var windowOptions = flowstep.options;
                if (['listagg', 'percentile_cont', 'percentile_disc'].indexOf(windowOptions.aggregator) > -1) {
                    delete windowOptions.orderBy;
                }
                else {
                    delete windowOptions.withinGroupExpression;
                }
                if (['first_value', 'last_value', 'lag', 'lead', 'nth_value'].indexOf(windowOptions.aggregator) === -1) {
                    delete windowOptions.respectNulls;
                    delete windowOptions.ignoreNulls;
                }
                else {
                    if (windowOptions.ignoreNulls === false) {
                        delete windowOptions.ignoreNulls;
                    }
                    if (windowOptions.respectNulls === false) {
                        delete windowOptions.respectNulls;
                    }
                }
                if (['lag', 'lead', 'nth_value'].indexOf(windowOptions.aggregator) === -1) {
                    delete windowOptions.offset;
                }
                if (windowOptions.aggregator !== 'listagg') {
                    delete windowOptions.listaggDelimiter;
                }
                if (windowOptions.aggregator === 'percentile_disc' || windowOptions.aggregator === 'percentile_cont') {
                    delete windowOptions.aggregatorArg;
                    var percentile = parseFloat(windowOptions.percentile);
                    if (isNaN(percentile)) {
                        delete windowOptions.percentile;
                    }
                    else {
                        windowOptions.percentile = percentile;
                    }
                }
                else {
                    delete windowOptions.percentile;
                }
                if (windowOptions.aggregator !== 'ntile') {
                    delete windowOptions.ntileGroupsCount;
                }
                else {
                    delete windowOptions.aggregatorArg;
                    var ntileGroupsCount = parseInt(windowOptions.ntileGroupsCount);
                    if (isNaN(ntileGroupsCount)) {
                        delete windowOptions.ntileGroupsCount;
                    }
                    else {
                        windowOptions.ntileGroupsCount = ntileGroupsCount;
                    }
                }
                if (['median', 'ratio_to_report'].indexOf(windowOptions.aggregator) > -1) {
                    delete windowOptions.orderBy;
                    delete windowOptions.isDesc;
                }
                var offset = parseInt(windowOptions.offset);
                if (isNaN(offset)) {
                    delete windowOptions.offset;
                }
                else {
                    windowOptions.offset = offset;
                }
                var windowLowerBound = parseInt(windowOptions.windowLowerBound);
                if (isNaN(windowLowerBound)) {
                    delete windowOptions.windowLowerBound;
                }
                else {
                    windowOptions.windowLowerBound = windowLowerBound;
                }
                var windowUpperBound = parseInt(windowOptions.windowUpperBound);
                if (isNaN(windowUpperBound)) {
                    delete windowOptions.windowUpperBound;
                }
                else {
                    windowOptions.windowUpperBound = windowUpperBound;
                }
                return Object.assign({ transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.WINDOW }, windowOptions, { passColumns: passColumns });
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.map:
                return Object.assign({ transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.MAP }, flowstep.options);
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["c" /* IFlowstep */].Type.geojoin:
                return Object.assign({ transformerType: __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.GEOJOIN }, flowstep.options, { passColumns: passColumns });
            default:
                throw new Error('Unknown flowstep type');
        }
    };
    FlowstepService._deserializeTransformer = function (transformer) {
        var passColumns = transformer.passColumns;
        switch (transformer.transformerType) {
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.INSERT:
                var insertTransformer = transformer;
                return {
                    name: insertTransformer.newColumnName,
                    formula: insertTransformer.expression,
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.AGGREGATE:
                var aggregateTransformer = transformer;
                return {
                    name: aggregateTransformer.aggInfo.aggregateColumn,
                    groupByColumns: aggregateTransformer.aggInfo.groupByColumns,
                    operandColumn: aggregateTransformer.aggInfo.operandColumn,
                    operator: aggregateTransformer.aggInfo.operator,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FILTER:
                var filterTransformer = transformer;
                return {
                    conditions: filterTransformer.filters.map(function (_) {
                        return {
                            column: _.columnName,
                            operator: _.relationalOperator,
                            value: _.value,
                            operatorGroup: _.logicalOperator,
                        };
                    }),
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.MAP:
                return __WEBPACK_IMPORTED_MODULE_2_lodash__["omit"](transformer, 'transformerType');
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.CLUSTER:
                var clusterTransformer = transformer;
                return {
                    type: clusterTransformer.clusteringType,
                    groups: "" + clusterTransformer.numClusters,
                    iterations: "" + clusterTransformer.numIterations,
                    columns: clusterTransformer.columns,
                    passColumns: passColumns,
                };
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.WINDOW:
                return Object.assign(__WEBPACK_IMPORTED_MODULE_2_lodash__["omit"](transformer, 'transformerType'), {
                    passColumns: passColumns,
                });
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.QUERY:
                return __WEBPACK_IMPORTED_MODULE_2_lodash__["omit"](transformer, 'transformerType');
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.GEOJOIN:
                return Object.assign(__WEBPACK_IMPORTED_MODULE_2_lodash__["omit"](transformer, 'transformerType'), {
                    passColumns: passColumns,
                });
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.JOIN:
            case __WEBPACK_IMPORTED_MODULE_1__interfaces_flow_interface__["a" /* IBackendFlowstep */].Type.FUZZYJOIN:
                var joinTransformer = transformer;
                return {
                    leftPrefix: joinTransformer.leftPrefix,
                    rightPrefix: joinTransformer.rightPrefix,
                    columns: joinTransformer.joinColumns.map(function (_) {
                        return {
                            from: _.leftColumnName,
                            to: _.rightColumnName,
                        };
                    }),
                    passColumns: passColumns,
                };
        }
    };
    FlowstepService = FlowstepService_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_4__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_5__notification_service__["a" /* NotificationService */]])
    ], FlowstepService);
    return FlowstepService;
    var FlowstepService_1;
}(__WEBPACK_IMPORTED_MODULE_6__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/http.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppHttp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__("../../../http/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__storage_service__ = __webpack_require__("../../../../../src/app/services/storage.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var BaileQueryEncoder = (function (_super) {
    __extends(BaileQueryEncoder, _super);
    function BaileQueryEncoder() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    BaileQueryEncoder.prototype.encodeKey = function (k) {
        return encodeURIComponent(k);
    };
    BaileQueryEncoder.prototype.encodeValue = function (v) {
        return encodeURIComponent(v);
    };
    return BaileQueryEncoder;
}(__WEBPACK_IMPORTED_MODULE_1__angular_http__["f" /* QueryEncoder */]));
var AppHttp = (function () {
    function AppHttp(_backend, _defaultOptions, storage, notifications) {
        this.storage = storage;
        this.notifications = notifications;
        this._activityObserver = new __WEBPACK_IMPORTED_MODULE_4__utils_activity_observer__["a" /* ActivityObserver */]();
        this._http = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* Http */](_backend, _defaultOptions);
    }
    AppHttp.prototype.getToken = function () {
        var token = this.storage.get(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].storage.token);
        return token ? __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.tokenValue(token.access_token) : null;
    };
    AppHttp.prototype.request = function (url, options) {
        var res = this._http.request((typeof url === 'string') ? __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url : url, this._options(options));
        return this._catch(this._deserialize(res, options), options).share(); // share: to make consecutive observers calls
    };
    AppHttp.prototype.get = function (url, params, options) {
        var res = this._http.get(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, this._options(options, params));
        return this._catch(this._deserialize(res, options), options).share(); // share: to make cosecutive observers calls
    };
    AppHttp.prototype.post = function (url, body, params, options) {
        body = this._serialize(body, options);
        var res = this._http.post(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, body, this._options(options, params));
        return this._activityObserver.observe(this._catch(this._deserialize(res, options), options).share()); // share: to make cosecutive observers calls
    };
    AppHttp.prototype.put = function (url, body, params, options) {
        body = this._serialize(body, options);
        var res = this._http.put(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, body, this._options(options, params));
        return this._activityObserver.observe(this._catch(this._deserialize(res, options), options).share()); // share: to make cosecutive observers calls
    };
    AppHttp.prototype.patch = function (url, body, params, options) {
        body = this._serialize(body, options);
        var res = this._http.patch(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, body, this._options(options, params));
        return this._activityObserver.observe(this._catch(this._deserialize(res, options), options).share()); // share: to make cosecutive observers calls
    };
    AppHttp.prototype.delete = function (url, params, options) {
        var res = this._http.delete(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, this._options(options, params));
        return this._activityObserver.observe(this._catch(this._deserialize(res, options), options).share()); // share: to make cosecutive observers calls
    };
    AppHttp.prototype.upload = function (url, file, bodyParams, options) {
        var _this = this;
        if (bodyParams === void 0) { bodyParams = {}; }
        if (options === void 0) { options = {}; }
        // All mock requests should avoid XHR
        if (__WEBPACK_IMPORTED_MODULE_5__core_core_mocks_only__["d" /* mocksMode */]) {
            if (file) {
                return new __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */](function (observer) {
                    var fileReader = new FileReader();
                    fileReader.onprogress = function () {
                    };
                    fileReader.onerror = function () {
                        observer.error(_this._error('Error reading file'));
                    };
                    fileReader.onload = function () {
                        // TODO: here we need to implement some compression process
                        observer.next(fileReader.result);
                        observer.complete();
                    };
                    fileReader.readAsBinaryString(file);
                }).flatMap(function (data) {
                    var res = _this._http.post(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, {
                        'file': data,
                    }, _this._options(options));
                    return _this._catch(_this._deserialize(res, options), options)
                        .share();
                });
            }
            // !file
            var res = this._http.post(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, bodyParams, this._options(options));
            return this._catch(this._deserialize(res, options), options)
                .share();
        }
        var out = this._createXHR(url, bodyParams, options, file);
        if (options && options.catchWith) {
            out = out.catch(options.catchWith);
        }
        if (!options || !options.noNotifications) {
            out = out.catch(function (error) {
                _this.notifications.create(error.message, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER);
                return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].empty();
            });
        }
        return out.share();
    };
    Object.defineProperty(AppHttp.prototype, "active", {
        get: function () {
            return this._activityObserver.active;
        },
        enumerable: true,
        configurable: true
    });
    AppHttp.prototype._createXHR = function (url, bodyParams, options, file) {
        var _this = this;
        return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].create(function (observer) {
            var formData = new FormData();
            if (file) {
                formData.append('file', file, file.name);
            }
            if (bodyParams) {
                Object.keys(bodyParams).forEach(function (key) {
                    if (bodyParams[key]) {
                        formData.append(key, bodyParams[key]);
                    }
                });
            }
            var xhr = new XMLHttpRequest();
            options.onloadstart && xhr.addEventListener('loadstart', options.onloadstart);
            options.onprogress && xhr.addEventListener('progress', options.onprogress);
            options.onabort && xhr.addEventListener('abort', options.onabort);
            options.onerror && xhr.addEventListener('onerror', options.onerror);
            options.onload && xhr.addEventListener('load', options.onload);
            options.ontimeout && xhr.addEventListener('timeout', options.ontimeout);
            options.onloadend && xhr.addEventListener('loadend', options.onloadend);
            options.onprogress && xhr.upload.addEventListener('progress', options.onprogress);
            xhr.addEventListener('loadend', function () {
                if (xhr.status >= 400) {
                    var error = void 0;
                    try {
                        error = JSON.parse(xhr.response).error || {};
                        error.httpStatus = xhr.status;
                    }
                    catch (e) {
                        error = _this._error(xhr.response, xhr.status);
                    }
                    return observer.error(error);
                }
                try {
                    var json = JSON.parse(xhr.response) || {};
                    var data = (options && options.deserialize) ? options.deserialize(json) : json;
                    observer.next(data);
                    observer.complete();
                }
                catch (e) {
                    observer.error(_this._error('Error parsing server response'));
                }
            });
            xhr.open('POST', __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + url, true);
            if (options.headers) {
                options.headers.forEach(function (values, name) {
                    values.forEach(function (value) { return xhr.setRequestHeader(name, value); });
                });
            }
            xhr.setRequestHeader(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.tokenLabel, _this.getToken());
            xhr.send(formData);
        });
    };
    AppHttp.prototype._headers = function (options) {
        options = options || {};
        options['headers'] = options.headers || new __WEBPACK_IMPORTED_MODULE_1__angular_http__["c" /* Headers */]();
        // set token
        options.headers.append(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.tokenLabel, this.getToken());
        // set content type
        options.headers.append('Content-Type', __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.contentType);
        return options;
    };
    AppHttp.prototype._options = function (options, params) {
        options = this._headers(options);
        params && (options.search = this._encode(params));
        return options;
    };
    // wrap and serialize request
    AppHttp.prototype._serialize = function (value, options) {
        value = (options && options.serialize) ? options.serialize(value) : value;
        return JSON.stringify(value);
    };
    // unwrap and deserialize response
    AppHttp.prototype._deserialize = function (res, options) {
        return res.map(function (res) {
            var json = (res.json ? res.json() : res) || {};
            var data = (options && options.deserialize) ? options.deserialize(json) : json;
            return (data);
        });
    };
    AppHttp.prototype._catch = function (res, options) {
        var _this = this;
        // parse error
        var out = res.catch(function (res) {
            var error;
            if (res instanceof __WEBPACK_IMPORTED_MODULE_1__angular_http__["j" /* Response */]) {
                try {
                    error = res.json().error || {};
                    error.httpStatus = res.status;
                }
                catch (e) {
                    error = _this._error(res.text(), res.status);
                }
            }
            else if (res instanceof Error) {
                console.error(res);
                error = _this._error(res.message);
            }
            else {
                console.error(res);
                error = _this._error('Error handler can\'t handle this');
            }
            return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].throw(error);
        });
        if (options && options.catchWith) {
            out = out.catch(options.catchWith);
        }
        if (!options || !options.noNotifications) {
            out = out.catch(function (error) {
                _this.notifications.create(error.message, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER);
                return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].empty();
            });
        }
        return out;
    };
    // encode search (url) params
    AppHttp.prototype._encode = function (params) {
        if (params instanceof __WEBPACK_IMPORTED_MODULE_1__angular_http__["k" /* URLSearchParams */])
            return params;
        var searchParams = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["k" /* URLSearchParams */]('', new BaileQueryEncoder());
        Object.keys(params).forEach(function (key) { return params[key] !== null && searchParams.set(key, params[key]); });
        return searchParams;
    };
    // create structured error response
    AppHttp.prototype._error = function (message, status) {
        if (status === void 0) { status = 400; }
        return {
            code: status,
            message: message || "Server error (" + status + ")",
            httpStatus: status,
        };
    };
    /**
     * This is a helper method to start executing shared observable got from this service.
     *
     * @param o
     * @param next
     * @param error
     * @param complete
     * @returns {Observable<T>}
     */
    AppHttp.execute = function (o, next, error, complete) {
        var dummy = function () { };
        o.subscribe(next || dummy, error || function (e) {
            // this will throw any error that's in UI code so that app chrashes
            if (e instanceof Error) {
                throw e;
            }
        }, complete || dummy);
        return o;
    };
    AppHttp = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* ConnectionBackend */],
            __WEBPACK_IMPORTED_MODULE_1__angular_http__["i" /* RequestOptions */],
            __WEBPACK_IMPORTED_MODULE_6__storage_service__["a" /* StorageService */],
            __WEBPACK_IMPORTED_MODULE_7__notification_service__["a" /* NotificationService */]])
    ], AppHttp);
    return AppHttp;
}());



/***/ }),

/***/ "../../../../../src/app/services/modal.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModalService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


var ModalService = (function () {
    function ModalService() {
    }
    ModalService.prototype.confirm = function (message) {
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(confirm(message));
    };
    ModalService.prototype.alert = function (message) {
        alert(message);
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(true);
    };
    ModalService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])()
    ], ModalService);
    return ModalService;
}());



/***/ }),

/***/ "../../../../../src/app/services/model.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_observable_empty__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/empty.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var ModelService = (function (_super) {
    __extends(ModelService, _super);
    function ModelService(http, events, sharedService, notifications, processes) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this.processes = processes;
        _this._type = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL;
        _this._data.listMeta = { count: 0, countPage: 0 };
        _this._data['table'] = null;
        return _this;
    }
    ModelService_1 = ModelService;
    ModelService.prototype.find = function (id) {
        return (this._data.list || []).filter(function (item) {
            return item.id === id;
        }).pop();
    };
    ModelService.prototype.list = function (params) {
        var _this = this;
        // GET '/models'
        var observable = this.http.get('models', params, {
            deserialize: function (_) { return _this._patchModels(_); },
        });
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            // RESERVED // don't send "raw" data / need to think what to send...
            _this._observables.list.next(data);
        });
    };
    // TEMP TEMP TEMP / TODO: remove asap
    // temprary IN-629
    ModelService.prototype.getModelId = function (flowId, tableId) {
        var _this = this;
        // GET '/flows/:flowId/tables/:tableId/models'
        var observable = this.http.get('flows/' + flowId + '/tables/' + tableId + '/models');
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.model = data; // tmp decision if we'll decide to use somewhere
        });
    };
    ModelService.prototype.get = function (id) {
        var _this = this;
        // GET '/models/:id'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, id).get('models/' + id, null, {
            deserialize: ModelService_1.deserializeModel,
        });
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE, data.input, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, data.id);
            _this.sharedService.setHierarchyLink(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE, data.output, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, data.id);
            _this._data.view = data;
            _this._data.viewset = null;
            _this._observables.view.next(data);
        });
    };
    ModelService.prototype.getMany = function (ids) {
        var _this = this;
        // @TODO: need to have list endpoint extended
        var observable = __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */]
            .forkJoin.apply(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */], ids.map(function (id) {
            return _this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, id).get('models/' + id, null, {
                deserialize: ModelService_1.deserializeModel,
                catchWith: function () { return null; },
            });
        })).map(function (models) {
            return models.filter(function (_) { return _; });
        })
            .share();
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable);
    };
    ModelService.prototype.create = function (item) {
        var _this = this;
        item = item || this._data.item.edit;
        var data = jQuery.extend(true, {}, item);
        // POST '/models/:id'
        var observable = this.http.post('models', data, null, {
            deserialize: ModelService_1.deserializeModel,
            serialize: function (_) { return _; },
        });
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this.events.emit('UPDATE_MODEL_LIST');
            _this.notifications.create('Model created: ' + data.name);
        });
    };
    ModelService.prototype.update = function (modelId, data) {
        var _this = this;
        // PUT '/models/:id'
        var observable = this.http.put('models/' + modelId, data, null, {
            deserialize: ModelService_1.deserializeModel,
            serialize: function (_) { return _; },
        });
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
            // clear all related data
            delete _this._data.viewset;
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.events.emit('UPDATE_MODEL_LIST');
            _this.notifications.create('Model updated: ' + data.name);
        });
    };
    ModelService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/models/:id'
        var observable = this.http.delete('models/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            if (_this._data.view && 'id' in _this._data.view && _this._data.view.id === data.id) {
                _this._data.view = null;
                _this._observables.view.next(_this._data.view);
            }
            _this.events.emit('UPDATE_MODEL_LIST');
            _this.notifications.create('Model deleted: ' + item.name);
        });
    };
    ModelService.prototype.cancel = function (item) {
        var _this = this;
        // DELETE '/models/:id'
        return this.processes.getByTarget(item.id, __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__["a" /* IAsset */].Type.MODEL)
            .flatMap(function (process) { return _this.processes.cancel(process); })
            .mapTo({ id: item.id });
    };
    // TODO: do we need this?
    ModelService.prototype.exportUrl = function (id, token) {
        return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].api.base + 'models/' + id + '/export' + '?access_token=' + token;
    };
    ModelService.prototype.getPredictors = function (id) {
        // GET '/models/:id/predictors'
        return this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, id).get('models/' + id + '/predictors');
    };
    ModelService.prototype.clone = function (clone) {
        var _this = this;
        if (clone.name === '') {
            delete clone.name;
        }
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, clone.id).post('models/' + clone.id + '/copy', clone);
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable, function (model) {
            _this.events.emit('UPDATE_MODEL_LIST');
            _this.notifications.create('Model cloned: ' + model.name);
        });
    };
    ModelService.prototype.getTrainSummary = function (id, watch) {
        var _this = this;
        if (watch === void 0) { watch = false; }
        if (!watch) {
            return this._getTrainSummaryOnce(id);
        }
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].timer(0, 1000).switchMap(function () { return _this._getTrainSummaryOnce(id); });
    };
    ModelService.prototype.stopRefining = function (id) {
        var observable = this.http.post('models/' + id + '/stop-refining', null);
        return __WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */].execute(observable);
    };
    ModelService.prototype._getTrainSummaryOnce = function (id) {
        return this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL, id).get('models/' + id + '/train-summary');
    };
    ModelService.prototype._patchModels = function (models) {
        models.data = models.data.map(ModelService_1.deserializeModel);
        return models;
    };
    ModelService.deserializeModel = function (model) {
        if (!model.predictedColumn) {
            var predictedColumn = Object.assign({}, model.responseColumn, {
                name: model.responseColumn.name + "_predicted",
                displayName: (model.responseColumn.displayName || model.responseColumn.name) + " predicted",
            });
            Object.assign(model, { predictedColumn: predictedColumn });
        }
        if (!model.probabilityColumn) {
            var probabilityColumn = Object.assign({}, model.responseColumn, {
                name: model.responseColumn.name + "_probability",
                displayName: (model.responseColumn.displayName || model.responseColumn.name) + " probability",
            });
            Object.assign(model, { probabilityColumn: probabilityColumn });
        }
        [model.predictedColumn, model.probabilityColumn].concat(model.predictorColumns).filter(function (_) { return !_.displayName; })
            .forEach(function (column) {
            column.displayName = column.name;
        });
        return model;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String, Object]),
        __metadata("design:returntype", void 0)
    ], ModelService.prototype, "getTrainSummary", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String]),
        __metadata("design:returntype", void 0)
    ], ModelService.prototype, "stopRefining", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_4__core_core_mocks_only__["e" /* mocksOnly */])(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty()),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", [String]),
        __metadata("design:returntype", void 0)
    ], ModelService.prototype, "_getTrainSummaryOnce", null);
    ModelService = ModelService_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_8__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_10__notification_service__["a" /* NotificationService */],
            __WEBPACK_IMPORTED_MODULE_5__process_service__["a" /* ProcessService */]])
    ], ModelService);
    return ModelService;
    var ModelService_1;
}(__WEBPACK_IMPORTED_MODULE_11__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/notification.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NotificationService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NotificationService = (function () {
    function NotificationService() {
        var _this = this;
        this.INTERVAL = 3000;
        this._data = []; // Experimental / could be more complex
        // to refresh notifications
        window.setInterval(function () {
            _this._refresh(_this._data);
        }, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.interval || this.INTERVAL);
    }
    Object.defineProperty(NotificationService.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    NotificationService.prototype.find = function (id) {
        return (this._data || []).filter(function (item) { return item.id === id; }).pop();
    };
    NotificationService.prototype.create = function (item, level, options) {
        var notification;
        var defaults = {
            id: '_' + Math.random().toString(36).substr(2, 9),
            type: __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.type.values.DEFAULT,
            data: {},
            created: Date.now(),
        };
        // create notification object
        if (typeof item === 'string') {
            notification = jQuery.extend(true, {}, defaults, {
                data: {
                    level: level || __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.level.values.INFO,
                    text: item,
                },
            });
        }
        else {
            notification = jQuery.extend(true, {}, defaults, item);
        }
        notification.options = Object.assign({}, __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.defaults, options);
        if (notification.data.level === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].notification.level.values.DANGER) {
            notification.options.timeout = 0;
        }
        // set "observable" data props
        if (notification.dataAsync) {
            var observable = notification.dataAsync;
            notification.data = {};
            observable.subscribe(this._updateHandler(notification));
        }
        this._data.push(notification);
        return notification;
    };
    NotificationService.prototype.update = function (id, item) {
        var notification = this.find(id);
        // pass // @todo: update notification
        return notification;
    };
    NotificationService.prototype.delete = function (id) {
        var index = this.data.reduce(function (result, item, index) {
            return item.id === id ? index : result;
        }, -1);
        index > -1 && this._data.splice(index, 1);
        return id;
    };
    NotificationService.prototype._updateHandler = function (notification) {
        return function (data) {
            notification.data = data; // unpack observerable data
        };
    };
    NotificationService.prototype._refresh = function (notifications) {
        if (notifications === void 0) { notifications = []; }
        var now = Date.now();
        for (var i = notifications.length - 1; i >= 0; i--) {
            var item = notifications[i];
            var dismiss = (item.options.timeout
                ? (item.created + item.options.timeout) < now : false);
            dismiss && item.options.onDismiss && item.options.onDismiss(item);
            dismiss && this._data.splice(i, 1);
        }
    };
    NotificationService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [])
    ], NotificationService);
    return NotificationService;
}());



/***/ }),

/***/ "../../../../../src/app/services/optimization.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OptimizationService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var OptimizationService = (function (_super) {
    __extends(OptimizationService, _super);
    function OptimizationService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.OPTIMIZATION;
        _this._data.listMeta = { count: 0, countPage: 0 };
        return _this;
    }
    OptimizationService.prototype.find = function (id) {
        return (this._data.list || []).filter(function (item) {
            return item.id === id;
        }).pop();
    };
    OptimizationService.prototype.list = function (params) {
        var _this = this;
        var observable = this.http.get('optimizations', params);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            _this._observables.list.next(data);
        });
    };
    OptimizationService.prototype.get = function (id) {
        var _this = this;
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.OPTIMIZATION, id).get('optimizations/' + id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            // this.sharedService.setHierarchyLink(config.asset.values.TABLE, data.modelId, config.asset.values.OPTIMIZATION, data.id);
            // this.sharedService.setHierarchyLink(config.asset.values.TABLE, data.outputModelId, config.asset.values.OPTIMIZATION, data.id);
            _this._data.view = data;
            _this._data.viewset = null;
            _this._observables.view.next(data);
        });
    };
    OptimizationService.prototype.create = function (item) {
        var _this = this;
        item = item || this._data.item.edit;
        var data = jQuery.extend(true, {}, item);
        var observable = this.http.post('optimizations', data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this.events.emit('UPDATE_OPTIMIZATION_LIST');
            _this.notifications.create('Optimization created: ' + data.name);
        });
    };
    OptimizationService.prototype.update = function (optimizationId, data) {
        var _this = this;
        var observable = this.http.put('optimizations/' + optimizationId, data, null, { serialize: function (_) { return _; } });
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
            // clear all related data
            delete _this._data.viewset;
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.events.emit('UPDATE_OPTIMIZATION_LIST');
            _this.notifications.create('Optimization updated: ' + data.name);
        });
    };
    OptimizationService.prototype['delete'] = function (item) {
        var _this = this;
        var observable = this.http.delete('optimizations/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            if (_this._data.view && 'id' in _this._data.view && _this._data.view.id === data.id) {
                _this._data.view = null;
                _this._observables.view.next(_this._data.view);
            }
            _this.events.emit('UPDATE_OPTIMIZATION_LIST');
            _this.notifications.create('Optimization deleted: ' + item.name);
        });
    };
    OptimizationService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_4__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_5__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_6__notification_service__["a" /* NotificationService */]])
    ], OptimizationService);
    return OptimizationService;
}(__WEBPACK_IMPORTED_MODULE_3__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/prediction.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PredictionService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var PredictionService = (function (_super) {
    __extends(PredictionService, _super);
    function PredictionService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        return _this;
    }
    PredictionService.prototype.create = function (item) {
        var _this = this;
        // POST '/predictions'
        var observable = this.http.post('predictions', item);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PREDICTIONS');
        });
    };
    PredictionService.prototype.list = function (params) {
        var _this = this;
        // GET '/predictions'
        var observable = this.http.get('predictions', params);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            //this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            //this._observables.list.next(data);
        });
    };
    PredictionService.prototype.get = function (id) {
        // GET '/predictions/:id'
        return this.http.get('predictions/' + id);
    };
    PredictionService.prototype.save = function (id) {
        var _this = this;
        // POST '/predictions/:id'
        var observable = this.http.post('predictions/' + id + '/save', {});
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function () {
            //@todo should emit something
            _this.notifications.create('Prediction saved.'); // @todo what to show
        });
    };
    PredictionService.prototype.remove = function (id) {
        var _this = this;
        // DELETE '/predictions/:id'
        var observable = this.http.delete('predictions/' + id);
        return __WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PREDICTIONS');
            _this.notifications.create('Prediction deleted.'); // TODO: should backend return object instead of id?
        });
    };
    PredictionService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_3__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__notification_service__["a" /* NotificationService */]])
    ], PredictionService);
    return PredictionService;
}(__WEBPACK_IMPORTED_MODULE_1__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/process.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProcessService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ProcessService = (function (_super) {
    __extends(ProcessService, _super);
    function ProcessService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        _this.INTERVAL = 5000; // milliseconds // update (if queue is not empty)
        _this._type = 'PROCESS';
        _this._subscriptions = []; // Experimental / could be more complex
        _this._data = {
            list: null,
            view: null,
            edit: null,
            targets: {},
        };
        // init data
        __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.list.map(function (item) {
            var alias = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.aliasesPlural[item];
            _this._data.targets[alias] = _this._data.targets[alias] || {};
        });
        // init listeners (realtime updates)
        window.setInterval(function () {
            _this.__refresh();
        }, __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].process.interval || _this.INTERVAL);
        return _this;
        // RESERVED
        // init lazy listeners (realtime updates)
    }
    Object.defineProperty(ProcessService.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ProcessService.prototype, "subscriptions", {
        get: function () {
            return this._subscriptions;
        },
        enumerable: true,
        configurable: true
    });
    ProcessService.prototype.find = function (id) {
        return (this._data.list || []).filter(function (item) { return item.id === id; }).pop();
    };
    // Experimental // TODO: do we need this._data.view?
    ProcessService.prototype.get = function (id) {
        var _this = this;
        // GET '/processes/:id'
        var observable = this.http.get('processes/' + id, null, {
            deserialize: function (res) { return _this._deserialize(res); }
        });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
        });
    };
    ProcessService.prototype.getByTarget = function (targetId, targetType) {
        var _this = this;
        var url = this._getTargetProcessURL(targetId, targetType);
        var observable = this.http.get(url, null, {
            deserialize: function (res) { return _this._deserialize(res); },
            catchWith: function (err) {
                if (err.httpStatus === 400 || err.httpStatus === 404) {
                    console.warn("Process for " + __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.labels[targetType] + " " + targetId + " not found");
                    return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
                }
                return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].throw(err);
            }
        });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
        });
    };
    ProcessService.prototype.cancel = function (process) {
        var _this = this;
        var observable = this.http.post("processes/" + process.id + "/cancel", null);
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function () {
            var target = process.target;
            _this.events.emit("UPDATE_" + target, { id: process.targetId });
            _this.events.emit("UPDATE_" + target + "_LIST");
            _this.notifications.create(target + " process cancelled");
        });
    };
    ProcessService.prototype.subscribe = function (process, onNext) {
        var subscription = this._getSubscription(process, true);
        return subscription.observerable.subscribe(function (data) { onNext(data); });
    };
    // TODO: needs refactoring for better look.
    ProcessService.prototype.__refresh = function () {
        var _this = this;
        // TEMP TEMP TEMP
        // should fetch all updated processes not one-by-one
        this._subscriptions.forEach(function (item) {
            if (item.observerable.observers.length === 0) {
                // no listeners - no need to refresh
                _this._dropSubscription(item.data);
            }
            else {
                // poll the server to get process status
                _this._get(item.data.id).subscribe(function (data) {
                    item.data = Object.assign(item.data, data);
                    if (item.data.status === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].process.status.values.FAILED) {
                        // failed notification
                        _this.notifications.create(item.data.targetId + " " + item.data.target + " is " + item.data.status + " because " + item.data.cause, __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.level.values.DANGER);
                        _this.events.emit('PROCESS_FAILED', item.data.cause);
                        // process can be already failed when got into subscription. need to fire this on polling end
                        item.observerable.next(data);
                        _this._dropSubscription(item.data);
                    }
                    else if (item.data.status === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].process.status.values.COMPLETED) {
                        _this.events.emit('PROCESS_COMPLETED', item.data);
                        // process can be already completed when got into subscription. need to fire this on polling end
                        item.observerable.next(data);
                        _this._dropSubscription(item.data);
                    }
                    else if (item.data.status === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].process.status.values.CANCELLED) {
                        _this.events.emit('PROCESS_CANCELLED', item.data);
                        // process can be already cancelled when got into subscription. need to fire this on polling end
                        item.observerable.next(data);
                        _this._dropSubscription(item.data);
                    }
                    else if (item.data.status !== data.status) {
                        // fire event on status change
                        item.observerable.next(data);
                    }
                });
            }
        });
    };
    // experimental
    ProcessService.prototype._get = function (id) {
        var _this = this;
        // GET '/processes/:id'
        var observable = this.http.get('processes/' + id, null, { deserialize: function (res) { return _this._deserialize(res); } });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._observables.view.next(data);
        });
    };
    ProcessService.prototype._deserialize = function (res) {
        res = Object.assign({}, res);
        if ('target' in res) {
            var target = res.target.toUpperCase();
            switch (target) {
                case 'TRAINING':
                    res.target = __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.MODEL;
                    break;
                case 'DATAUPLOAD':
                    res.target = __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.TABLE;
                    break;
                case 'TABLESTATS':
                    res.target = __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.TABLE_STATS;
                    break;
                default:
                    res.target = target;
            }
            if (!res.id) {
                res.id = res.targetId;
            }
        }
        return res;
    };
    ProcessService.prototype._getTargetProcessURL = function (targetId, targetType) {
        switch (targetType) {
            case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.MODEL:
                return "train/" + targetId + "/process";
            case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE_STATS:
                return "tables/" + targetId + "/stats/process";
            default:
                // '/flows|tables|models|predictions|.../:id/process'
                var targetAlias = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.aliasesPlural[targetType] || 'flows';
                return targetAlias + "/" + targetId + "/process";
        }
    };
    ProcessService.prototype._getSubscription = function (process, create) {
        var subscription = (this._subscriptions || []).filter(function (item) { return item.data.id === process.id; }).pop();
        if (!subscription && create) {
            subscription = {
                data: process,
                observerable: new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */](1),
            };
            this._subscriptions.push(subscription);
            if (process.target) {
                var targetAlias = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.aliasesPlural[process.target];
                this._data.targets[targetAlias][process.targetId] = subscription.data;
            }
        }
        return subscription;
    };
    ProcessService.prototype._dropSubscription = function (process) {
        var subscription = this._getSubscription(process);
        if (subscription) {
            subscription.observerable.complete();
            var index = this._subscriptions.indexOf(subscription);
            index > -1 && this._subscriptions.splice(index, 1);
        }
        // remove symlink
        // RESERVED delete this._data.targets[config.assets.type.aliasesPlural[process.target]];
    };
    ProcessService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_7__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_8__notification_service__["a" /* NotificationService */]])
    ], ProcessService);
    return ProcessService;
}(__WEBPACK_IMPORTED_MODULE_6__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/project.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ProjectService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ProjectService = (function (_super) {
    __extends(ProjectService, _super);
    function ProjectService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        return _this;
    }
    ProjectService.prototype.list = function () {
        var observable = this.http.get('projects');
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.create = function (data) {
        var _this = this;
        var observable = this.http.post('projects', data);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PROJECT_LIST');
            _this.notifications.create("Project created: \"" + data.name + "\"");
        });
    };
    ProjectService.prototype.get = function (id) {
        var observable = this.http.get('projects/' + id);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.update = function (id, data) {
        var _this = this;
        var observable = this.http.put('projects/' + id, data);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PROJECT_LIST');
            _this.notifications.create("Project updated: \"" + data.name + "\"");
        });
    };
    ProjectService.prototype['delete'] = function (data) {
        var _this = this;
        var observable = this.http.delete('projects/' + data.id);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_PROJECT_LIST');
            _this.notifications.create("Project deleted: \"" + data.name + "\"");
        });
    };
    ProjectService.prototype.listTables = function (id, params) {
        var observable = this.http.get("projects/" + id + "/tables", params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.linkTable = function (project, item) {
        return this.linkTables(project, [item]);
    };
    ProjectService.prototype.linkTables = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE, project, items);
    };
    ProjectService.prototype.unlinkTable = function (project, item) {
        return this.unlinkTables(project, [item]);
    };
    ProjectService.prototype.unlinkTables = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE, project, items, true);
    };
    ProjectService.prototype.listFlows = function (id, params) {
        var observable = this.http.get("projects/" + id + "/flows", params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.linkFlow = function (project, item) {
        return this.linkFlows(project, [item]);
    };
    ProjectService.prototype.linkFlows = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW, project, items);
    };
    ProjectService.prototype.unlinkFlow = function (project, item) {
        return this.unlinkFlows(project, [item]);
    };
    ProjectService.prototype.unlinkFlows = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.FLOW, project, items, true);
    };
    ProjectService.prototype.listModels = function (id, params) {
        var observable = this.http.get("projects/" + id + "/models", params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.listCVModels = function (id, params) {
        var observable = this.http.get("projects/" + id + "/cv-models", params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.linkModel = function (project, item) {
        return this.linkModels(project, [item]);
    };
    ProjectService.prototype.linkModels = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL, project, items);
    };
    ProjectService.prototype.unlinkModel = function (project, item) {
        return this.unlinkModels(project, [item]);
    };
    ProjectService.prototype.unlinkModels = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL, project, items, true);
    };
    ProjectService.prototype.unlinkCVModel = function (project, item) {
        return this.unlinkCVModels(project, [item]);
    };
    ProjectService.prototype.unlinkCVModels = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.CV_MODEL, project, items, true);
    };
    ProjectService.prototype.listAlbums = function (id, params) {
        var observable = this.http.get("projects/" + id + "/albums", params);
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(observable);
    };
    ProjectService.prototype.linkAlbum = function (project, item) {
        return this.linkAlbums(project, [item]);
    };
    ProjectService.prototype.linkAlbums = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.MODEL, project, items);
    };
    ProjectService.prototype.unlinkAlbum = function (project, item) {
        return this.unlinkAlbums(project, [item]);
    };
    ProjectService.prototype.unlinkAlbums = function (project, items) {
        return this.updateLinkedAssets(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.ALBUM, project, items, true);
    };
    ProjectService.prototype.updateLinkedAssets = function (assetType, project, items, unlink) {
        var _this = this;
        var actions = items.map(function (item) {
            var url = "projects/" + project.id + "/" + __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.aliasesPlural[assetType] + "/" + item.id;
            // we need these 'execute' calls, cause only the end 'execute' for bulkAction produces too many canceled requests
            var requestOptions = {
                noNotifications: true,
                deserialize: function () {
                    return { success: true, item: item };
                },
                catchWith: function () {
                    return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of({ success: false, item: item });
                },
            };
            if (unlink) {
                return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(_this.http.delete(url, null, requestOptions));
            }
            else {
                return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(_this.http.put(url, {}, null, requestOptions));
            }
        });
        var bulkAction = __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */]
            .forkJoin.apply(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */], actions).flatMap(function (responses) {
            var doneItems = [], errorItems = [];
            responses.forEach(function (response) {
                (response.success ? doneItems : errorItems).push(response.item);
            });
            if (doneItems.length) {
                var names = doneItems.map(function (_) { return _.name; }).join('", "');
                _this.notifications.create("\n          " + __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.labelsPlural[assetType] + " \"" + names + "\" are\n          " + (unlink ? 'unlinked from' : 'linked to') + " Project \"" + project.name + "\"\n        ");
                _this.events.emit('UPDATE_PROJECT_ASSETS', project.id);
            }
            if (errorItems.length) {
                var names = errorItems.map(function (_) { return _.name; }).join('", "');
                _this.notifications.create(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.labelsPlural[assetType] + " \"" + names + "\" are\n              not " + (unlink ? 'unlinked from' : 'linked to') + " Project \"" + project.name + "\"", __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].notification.level.values.DANGER);
            }
            return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(doneItems);
        })
            .share();
        return __WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */].execute(bulkAction);
    };
    ProjectService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_6__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__notification_service__["a" /* NotificationService */]])
    ], ProjectService);
    return ProjectService;
}(__WEBPACK_IMPORTED_MODULE_5__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/replay.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ReplayService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ReplayService = (function (_super) {
    __extends(ReplayService, _super);
    function ReplayService(http, events, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.notifications = notifications;
        return _this;
    }
    ReplayService.prototype.create = function (data) {
        var _this = this;
        var observable = this.http.post('replays', data, null, { serialize: function (res) {
                // flats structure [array of columnMappings] to flat array of columnMappings =
                // [{sourceColumn:{tableId: string,columnName: string},mappedColumn:{tableId: string,columnName: string}}]
                res.columnMappings = res.sources.reduce(function (result, source) {
                    source.columnMappings && source.columnMappings.forEach(function (item) {
                        result.push(item);
                    });
                    return result;
                }, []);
                delete res.sources;
                return res;
            } });
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function () {
            //this.list();
            _this.events.emit('UPDATE_REPLAYS');
        });
    };
    ReplayService.prototype.list = function (params) {
        var _this = this;
        var observable = this.http.get('replays');
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            // this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            // this._observables.list.next(data);
        });
    };
    ReplayService.prototype.get = function (id) {
        var observable = this.http.get('replays/' + id);
        return observable;
    };
    ReplayService.prototype.remove = function (id) {
        var _this = this;
        var observable = this.http.delete('replays/' + id);
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_REPLAYS');
            _this.notifications.create('Replay deleted.'); // @todo what to show
        });
    };
    ReplayService.prototype.save = function (id) {
        var _this = this;
        var observable = this.http.post('replays/' + id + '/save', {});
        return __WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            //@todo should emit something
            _this.notifications.create('Replay saved.'); // @todo what to show
        });
    };
    ReplayService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_3__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__notification_service__["a" /* NotificationService */]])
    ], ReplayService);
    return ReplayService;
}(__WEBPACK_IMPORTED_MODULE_2__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/shared-resource.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SharedResourceService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var SharedResourceService = (function () {
    function SharedResourceService(http, events, notifications) {
        var _this = this;
        this.http = http;
        this.events = events;
        this.notifications = notifications;
        this._sharedAccessResources = {};
        this._assetHierarchyLinks = {};
        __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.list.forEach(function (assetType) {
            _this._sharedAccessResources[assetType] = {};
            _this._assetHierarchyLinks[assetType] = {};
        });
        this._sharedResourceUpdated = new __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__["a" /* Subject */]();
        this._readyPromise = this._sharedResourceUpdated.first().toPromise();
        // schedule shared resource updates
        this._sharedResourceUpdateTimer = __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].timer(0, 60 * 1000);
        this._sharedResourceUpdateTimer.subscribe(function () {
            _this._loadSharedAccessResources();
        });
    }
    SharedResourceService.prototype.getSharedAccessResource = function (assetType, assetId) {
        var _this = this;
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].fromPromise(this._readyPromise).map(function () {
            return _this._getSharedResourceSync(assetType, assetId);
        });
    };
    SharedResourceService.prototype.ensureSharedAccessLoaded = function (assetType, assetIds) {
        var _this = this;
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].fromPromise(this._readyPromise).flatMap(function () {
            var missingIds = assetIds.filter(function (assetId) { return !_this._getSharedResourceSync(assetType, assetId); });
            if (missingIds.length) {
                return _this._loadSharedAccessResources().mapTo(true);
            }
            return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(true);
        });
    };
    SharedResourceService.prototype.getSharedAccessParams = function (assetType, assetId) {
        return this.getSharedAccessResource(assetType, assetId).map(function (sharedResource) {
            if (sharedResource) {
                return { 'shared_resource_id': sharedResource.id };
            }
            return {};
        });
    };
    SharedResourceService.prototype.withSharedAccess = function (assetType, assetId) {
        var _this = this;
        return {
            get: function (url, params, options) {
                return _this.getSharedAccessParams(assetType, assetId).flatMap(function (_) {
                    return _this.http.get(url, Object.assign({}, params || {}, _), options);
                }).share();
            },
            post: function (url, body, params, options) {
                return _this.getSharedAccessParams(assetType, assetId).flatMap(function (_) {
                    return _this.http.post(url, body, Object.assign({}, params || {}, _), options);
                }).share();
            },
        };
    };
    SharedResourceService.prototype.list = function (params) {
        return this.http.get('shares', params);
    };
    SharedResourceService.prototype.get = function (id) {
        return this.http.get('shares/' + id);
    };
    SharedResourceService.prototype.bulkShare = function (assetType, items, recipientEmail) {
        var _this = this;
        var actions = items.map(function (item) {
            return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(_this.http.post("shares", {
                assetId: item.id,
                assetType: assetType,
                recipientEmail: recipientEmail,
            }, null, {
                noNotifications: true,
                deserialize: function () {
                    return { success: true, item: item };
                },
                catchWith: function () {
                    return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of({ success: false, item: item });
                },
            }));
        });
        var bulkAction = __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */]
            .forkJoin.apply(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */], actions).flatMap(function (responses) {
            var doneItems = [], errorItems = [];
            responses.forEach(function (response) {
                (response.success ? doneItems : errorItems).push(response.item);
            });
            if (doneItems.length) {
                var names = doneItems.map(function (_) { return _.name; }).join('", "');
                _this.events.emit('UPDATE_SHARED_RESOURECE_LIST');
                _this.notifications.create(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.labelsPlural[assetType] + " \"" + names + "\" successfully shared.");
            }
            if (errorItems.length) {
                var names = errorItems.map(function (_) { return _.name; }).join('", "');
                _this.notifications.create("These " + __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.labelsPlural[assetType] + " caused a sharing error: \"" + names + "\"", __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].notification.level.values.DANGER);
            }
            return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(doneItems);
        })
            .share();
        return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(bulkAction);
    };
    SharedResourceService.prototype.create = function (item) {
        var _this = this;
        var data = jQuery.extend(true, {}, item);
        // POST '/flows'
        var observable = this.http.post('shares', data);
        return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_SHARED_RESOURECE_LIST');
            _this.notifications.create(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.labels[data.assetType] + " successfully shared.");
        });
    };
    SharedResourceService.prototype.update = function (item) {
        var _this = this;
        if (!item.id)
            return this.create(item);
        var data = jQuery.extend(true, {}, item);
        // PUT '/flows/:id'
        var observable = this.http.put('shares/' + item.id, data);
        return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this.events.emit('UPDATE_SHARED_RESOURECE_LIST');
            _this.notifications.create(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.labels[data.assetType] + " sharing options successfully updated.");
        });
    };
    SharedResourceService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/flows/:id'
        var observable = this.http.delete('shares/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.events.emit('UPDATE_SHARED_RESOURECE_LIST');
            _this.notifications.create(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.labels[item.assetType] + " shared access revoked.");
        });
    };
    SharedResourceService.prototype.getSharedAssetOwner = function (assetType, assetId) {
        var _this = this;
        return this.getSharedAccessResource(assetType, assetId).flatMap(function (sharedResource) {
            return sharedResource ? _this.owner(sharedResource.id) : __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
        });
    };
    SharedResourceService.prototype.recipient = function (id) {
        return this.http.get('shares/' + id + '/recipient');
    };
    SharedResourceService.prototype.owner = function (id) {
        return this.http.get('shares/' + id + '/owner');
    };
    SharedResourceService.prototype.setHierarchyLink = function (assetType, assetId, parentAssetType, parentAssetId) {
        this._assetHierarchyLinks[assetType][assetId] = {
            assetType: parentAssetType,
            assetId: parentAssetId,
        };
    };
    SharedResourceService.prototype._loadSharedAccessResources = function () {
        var _this = this;
        var observable = this.http.get('me/shares', {}, { noNotifications: true })
            .catch(function () { return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty(); })
            .map(function (list) {
            _this._pushSharedAccessResources(list.data);
            _this._sharedResourceUpdated.next(true);
        });
        return __WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */].execute(observable);
    };
    SharedResourceService.prototype._getSharedResourceSync = function (assetType, assetId) {
        var sharedResource = this._sharedAccessResources[assetType][assetId];
        if (sharedResource) {
            return sharedResource;
        }
        var sharedResourceLink = this._assetHierarchyLinks[assetType][assetId];
        if (sharedResourceLink) {
            return this._getSharedResourceSync(sharedResourceLink.assetType, sharedResourceLink.assetId);
        }
        return null;
    };
    SharedResourceService.prototype._pushSharedAccessResources = function (list) {
        var _this = this;
        list.forEach(function (share) {
            _this._sharedAccessResources[share.assetType][share.assetId] = share;
        });
    };
    SharedResourceService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_5__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__notification_service__["a" /* NotificationService */]])
    ], SharedResourceService);
    return SharedResourceService;
}());



/***/ }),

/***/ "../../../../../src/app/services/storage.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return StorageService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
// TODO: supposed to be replaced with any stable angular/es6 storage lib

var StorageService = (function () {
    function StorageService() {
    }
    // TODO: try to add caching
    StorageService.prototype.get = function (key) {
        var value = localStorage.getItem(key);
        try {
            return value === undefined ? undefined : JSON.parse(value);
        }
        catch (err) {
            return value; // err.name == 'SyntaxError' // err instanceof SyntaxError
        }
    };
    StorageService.prototype.set = function (key, value) {
        try {
            localStorage.setItem(key, JSON.stringify(value));
        }
        catch (e) {
            if (e === DOMException.QUOTA_EXCEEDED_ERR) {
                console.warn('Your local storage quota exceeded.');
            }
        }
    };
    StorageService.prototype.remove = function (key) {
        localStorage.removeItem(key);
    };
    StorageService.prototype.clear = function () {
        localStorage.clear();
    };
    StorageService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])()
    ], StorageService);
    return StorageService;
}());



/***/ }),

/***/ "../../../../../src/app/services/table.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__("../../../http/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__ = __webpack_require__("../../../../../src/app/services/shared-resource.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__data_service__ = __webpack_require__("../../../../../src/app/services/data.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var TableService = (function (_super) {
    __extends(TableService, _super);
    function TableService(http, events, sharedService, notifications) {
        var _this = _super.call(this, events) || this;
        _this.http = http;
        _this.events = events;
        _this.sharedService = sharedService;
        _this.notifications = notifications;
        _this._type = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE;
        _this._datasetParams = {
            page: 1,
            page_size: 30,
        };
        _this._data.listMeta = { count: 0, countPage: 0 };
        return _this;
    }
    TableService.prototype.find = function (id) {
        return (this._data.list || []).filter(function (item) {
            return item.id === id;
        }).pop();
    };
    TableService.prototype.list = function (params) {
        var _this = this;
        // GET '/tables'
        var observable = this.http.get('tables', params, {
            deserialize: function (_) { return _this._patchTables(_); },
        });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.list = data.data || [];
            _this._data.listMeta = {
                count: data.count,
                countPage: data.data.length,
            };
            // RESERVED // don't send "raw" data / need to think what to send...
            //this._observables.list.next(data);
        }, function (err) {
            console.error(err); // TODO: refactor
        });
    };
    TableService.prototype.get = function (id) {
        var _this = this;
        // GET '/tables/:id'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, id).get('tables/' + id, null, {
            deserialize: function (_) { return _this._patchTable(_); },
        });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
        }, function (err) { return console.error(err); } // TODO: refactor
        );
    };
    TableService.prototype.getMany = function (ids) {
        var _this = this;
        // @TODO: need to have list endpoint extended
        var observable = __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */]
            .forkJoin.apply(__WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */], ids.map(function (id) {
            return _this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, id).get('tables/' + id, null, {
                deserialize: function (_) { return _this._patchTable(_); },
                catchWith: function () { return null; },
            });
        })).map(function (tables) {
            return tables.filter(function (_) { return _; });
        })
            .share();
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable);
    };
    TableService.prototype.update = function (tableId, data) {
        var _this = this;
        // PUT '/tables/:id'
        var observable = this.http.put("tables/" + tableId, data, null, {
            deserialize: function (_) { return _this._patchTable(_); },
        });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data;
            _this._observables.view.next(data);
            // RESERVED // this._data.list && this.list() // experimental // refresh the list
            _this.notifications.create('Table updated: ' + data.name);
        }, function (err) { return console.error(err); } // TODO: refactor
        );
    };
    TableService.prototype['delete'] = function (item) {
        var _this = this;
        // DELETE '/tables/:id'
        var observable = this.http.delete('tables/' + item.id);
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            // update view item, if needed
            if ((_this._data.view || {}).id === data.id) {
                _this._data.view = null;
                _this._observables.view.next(_this._data.view);
            }
            _this.events.emit('UPDATE_TABLE_LIST');
            _this.notifications.create('Table deleted: ' + item.name);
        });
    };
    TableService.prototype.getDataset = function (id, params) {
        if (params === void 0) { params = {}; }
        params = jQuery.extend(true, {}, this._datasetParams, params);
        // GET '/tables/:id/data'
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, id).get('tables/' + id + '/data', params);
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, null, function (err) {
            console.error(err);
        });
    };
    TableService.prototype.upload = function (file, form) {
        var _this = this;
        var notificationDataObservable = new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */]();
        var notificationData = {
            text: 'Initiating',
            progress: 0,
            file: file,
        };
        var notification = this.notifications.create({ type: __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.type.values.FILE_UPLOAD, dataAsync: notificationDataObservable }, __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.level.values.INFO, { timeout: 0 });
        notificationDataObservable.next(Object.assign({}, notificationData));
        var name = form.name || file.name;
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["c" /* Headers */]();
        headers.append('X-CSV-Delimiter', encodeURIComponent(form.delimiter)); // needed to pass tab character
        // POST '/tables/import'
        var observable = this.http.upload("tables/import/" + form.format, file, {
            name: name,
            filename: file.name.replace(/\.[^/.]+$/, ''),
            flowId: form.flowId,
            nullValue: form.nullValue,
        }, {
            headers: headers,
            onprogress: function (event) {
                if (event.lengthComputable) {
                    notificationDataObservable.next(Object.assign(notificationData, {
                        text: 'Uploading',
                        progress: event.total ? event.loaded / event.total * 100 : 100,
                    }));
                }
            },
            catchWith: function (error) {
                notification.options.timeout = 0;
                notificationDataObservable.next(Object.assign(notificationData, {
                    level: __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.level.values.DANGER,
                    text: error.message,
                }));
                return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].empty();
            },
        }).flatMap(function (table) { return _this.get(table.id); });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function () {
            notification.options.timeout = Date.now() - notification.created + __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.defaults.timeout;
            notificationDataObservable.next(Object.assign(notificationData, {
                level: __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].notification.level.values.SUCCESS,
                text: 'Uploaded',
                progress: 100,
            }));
            _this.events.emit('UPDATE_TABLE_LIST');
        });
    };
    TableService.prototype.exportUrl = function (id, token) {
        var _this = this;
        var observable = this.sharedService.getSharedAccessParams(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, id).map(function (data) {
            var url = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].api.base + "tables/" + id + "/export?access_token=" + token;
            if (data.shared_resource_id) {
                url += "&shared_resource_id=" + data.shared_resource_id;
            }
            return url;
        });
        if (__WEBPACK_IMPORTED_MODULE_7__core_core_mocks_only__["d" /* mocksMode */]) {
            return observable.flatMap(function (url) {
                return _this.http.get(url).map(function (_) {
                    return "data:application/octet-stream;charset=utf-8," +
                        encodeURIComponent(_);
                });
            });
        }
        return observable;
    };
    TableService.prototype.download = function (id, token) {
        var observable = this.exportUrl(id, token).flatMap(function (url) {
            return __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].downloadUrl(url, id);
        }).publish();
        observable.connect(); // make sure this runs irrespective of subscribers
        return observable;
    };
    TableService.prototype.clone = function (clone) {
        var _this = this;
        if (clone.name === '') {
            delete clone.name;
        }
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, clone.id).post('tables/' + clone.id + '/copy', clone);
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable, function (table) {
            _this.events.emit('UPDATE_TABLE_LIST');
            _this.notifications.create('Table cloned: ' + table.name);
        });
    };
    TableService.prototype.getStatistic = function (id) {
        var observable = this.sharedService.withSharedAccess(__WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE, id).get('tables/' + id + '/stats');
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable);
    };
    TableService.prototype.values = function (id, params) {
        var observable = this.http.get('tables/' + id + '/values', params);
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable);
    };
    TableService.prototype.scatterSummary = function (id, binsCount) {
        var observable = this.http.get("tables/" + id + "/scatter-summary", { binsCount: binsCount });
        return __WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */].execute(observable);
    };
    TableService.prototype._patchTables = function (tables) {
        var _this = this;
        tables.data = tables.data.map(function (_) { return _this._patchTable(_); });
        return tables;
    };
    TableService.prototype._patchTable = function (table) {
        if (!table.datasetId && 'databaseId' in table) {
            table.datasetId = table.databaseId;
        }
        if (!table.columns) {
            table.columns = [];
        }
        else {
            table.columns.filter(function (_) { return !_.columnType; }).forEach(function (column) {
                column.columnType = (column.variableType === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.variableType.values.CONTINUOUS)
                    ? __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.columnType.values.METRIC
                    : __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.columnType.values.ATTRIBUTE;
            });
            // fill display name when missing
            table.columns.filter(function (_) { return !_.displayName; }).forEach(function (column) {
                column.displayName = column.name;
            });
        }
        return table;
    };
    TableService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_8__event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_9__shared_resource_service__["a" /* SharedResourceService */],
            __WEBPACK_IMPORTED_MODULE_10__notification_service__["a" /* NotificationService */]])
    ], TableService);
    return TableService;
}(__WEBPACK_IMPORTED_MODULE_11__data_service__["a" /* DataService */]));



/***/ }),

/***/ "../../../../../src/app/services/user.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_share__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/share.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__notification_service__ = __webpack_require__("../../../../../src/app/services/notification.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__http_service__ = __webpack_require__("../../../../../src/app/services/http.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__storage_service__ = __webpack_require__("../../../../../src/app/services/storage.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var UserService = (function () {
    function UserService(router, http, storage, notifications, events) {
        var _this = this;
        this.router = router;
        this.http = http;
        this.storage = storage;
        this.notifications = notifications;
        this.events = events;
        this._authenticated = null; // should be 'null' before the first authentication request
        this._userDataGuest = { username: 'guest', name: 'Guest' };
        this._data = {
            observable: null,
            view: null,
            edit: null,
        };
        // init observer
        // buffer last value
        this._data.observable = new __WEBPACK_IMPORTED_MODULE_3_rxjs_ReplaySubject__["a" /* ReplaySubject */](1);
        // init token expiration
        __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].interval(10 * 60 * 1000).subscribe(function () {
            var token = _this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.token);
            token && token.expires < Date.now() / 1000 && _this.signout();
        });
        this.authenticate();
    }
    Object.defineProperty(UserService.prototype, "data", {
        get: function () {
            return this._data;
        },
        enumerable: true,
        configurable: true
    });
    UserService.prototype.token = function () {
        // fetch token from storage
        var token = this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.token);
        return token ? token.access_token : null;
    };
    UserService.prototype.isAuthenticated = function () {
        // true, false or null (if authentication is not compeleted yet)
        return this._authenticated;
    };
    /* RESERVED
    hasPermission(permissions) {
      // permissions: example - ['admin', 'superuser'] or 'admin'
      if (!permissions || permissions && !permissions.length) return true;
  
      var permissions = Array.isArray(permissions) ? permissions : [permissions];
      var groups = this._data.view && Array.isArray(this._data.view.groups) ? this._data.view.groups : [];
  
      // transform aliases to keys
      var configGroups = config.user.groups.values
      permissions = permissions.map(function(permission) {
          return config.user.groups.values[permission] ? permission : config.user.groups.aliases[permission];
        });
  
      var permissionsInGroups = permissions.filter(function(permission) {
          return groups.indexOf(permission) > -1;
        });
  
      return !!permissionsInGroups.length;
    }
    */
    UserService.prototype.getUser = function () {
        return this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.user);
    };
    UserService.prototype.authenticate = function (validate) {
        var _this = this;
        if (validate === void 0) { validate = true; }
        var user = this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.user);
        var token = this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.token);
        var observable = (function () {
            if (token && token.expires > Date.now() / 1000) {
                if (validate) {
                    // GET '/me'
                    return _this.http.get('me', {}, { noNotifications: true });
                }
                else {
                    if (user) {
                        return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of(user);
                    }
                    else {
                        return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].throw('Invalid user');
                    }
                }
            }
            else {
                return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].throw('No user');
            }
        })();
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (user) {
            _this.storage.set(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.user, user);
            _this._data.view = user;
            _this._authenticated = true;
            _this._data.observable.next(user);
            _this.events.emit('USER_AUTHORIZED', user);
        }, function () {
            _this.storage.clear();
            _this._data.view = null;
            _this._authenticated = false;
            _this._data.observable.next(null);
        });
    };
    UserService.prototype.deauthenticate = function () {
        this._data.view = null;
        this._authenticated = false;
        this._data.observable.next(null);
        this.storage.clear();
        this.events.emit('USER_DEAUTHORIZED');
    };
    UserService.prototype.edit = function (user) {
        user = user || this._data.view || {};
        user = jQuery.extend(true, {}, user); // TODO: replace with native function later
        delete user.password;
        this._data.edit = user;
    };
    UserService.prototype.signup = function (credentials) {
        var _this = this;
        // POST '/signup'
        var observable = this.http.post('signup', credentials);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            var user = data;
            _this.storage.set(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.user, user);
            _this.notifications.create('Successfully signed up');
            _this.events.emit('USER_SIGNUP');
        });
    };
    UserService.prototype.signin = function (credentials) {
        var _this = this;
        // POST '/signin'
        var observable = this.http.post('signin', credentials);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            var token = data;
            // TEMP TEMP TEMP
            token.expires = Date.now() / 1000 + token.expires_in - 60 * 60; // lets subtract something just to be sure we are "safe"
            // OBSOLETED //this.storage.set(config.storage.user, user);
            _this.storage.set(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.token, token);
            _this.events.emit('USER_SIGNIN'); // use authentication event instead
        });
    };
    UserService.prototype.signout = function () {
        this.deauthenticate();
        this.events.emit('USER_SIGNOUT');
        this.router.navigate([__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].routes.signoutRedirect]);
    };
    UserService.prototype.update = function (user) {
        var _this = this;
        user = user || this._data.edit;
        var data = jQuery.extend(true, {}, user); // TODO: replace with native function later
        !data.password && (delete data.password);
        // POST 'api/me'
        var observable = this.http.post('me', data);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data.view = data || {};
            _this.storage.set(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.user, _this._data.view);
        });
    };
    UserService.prototype.password = function (credentials) {
        var _this = this;
        // POST 'api/me/password'
        var observable = this.http.post('me/password', credentials);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.notifications.create('Your password has been updated successfully.');
        });
    };
    // TODO: get rid of it as soon as possible (and drop the endpoint)
    UserService.prototype.usernameReset = function (data) {
        var _this = this;
        // POST 'api/me/username/remind'
        var observable = this.http.post('me/username/remind', data);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.notifications.create('Please, check your email for details');
        });
    };
    UserService.prototype.passwordReset = function (data) {
        var _this = this;
        // POST 'api/me/password/reset'
        var observable = this.http.post('me/password/reset', data);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.notifications.create('Please, check your email for details');
        });
    };
    UserService.prototype.passwordResetConfirmation = function (data) {
        var _this = this;
        // POST 'api/me/password/resetcomplete'
        // TODO: ask to rename to ..../password/reset/confirmation
        var observable = this.http.post('me/password/resetcomplete', data);
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function () {
            _this.notifications.create('Your password has been updated successfully. Please Log in with your new credentials. Redirecting to login page...');
        });
    };
    // TODO: experimental / temporal. check/remove later
    UserService.prototype.getFlows = function () {
        var _this = this;
        // GET '/api/me/flows'
        var observable = this.http.get('me/flows', null, {
            deserialize: function (response) {
                return {
                    data: response.data.map(__WEBPACK_IMPORTED_MODULE_7__flow_service__["a" /* FlowService */]._deserializeFlow),
                    count: response.count,
                };
            }
        });
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data['flows'] = data.data;
            _this.events.emit('UPDATE_USER_FLOWLIST', data);
        });
    };
    UserService.prototype.setPreferences = function (key, value) {
        var preferences = this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.preferences) || {};
        preferences[key] = value;
        this.storage.set(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.preferences, preferences);
    };
    UserService.prototype.getPreferences = function (key) {
        var preferences = this.storage.get(__WEBPACK_IMPORTED_MODULE_5__config__["a" /* default */].storage.preferences) || {};
        return preferences[key];
    };
    UserService.prototype.getStats = function () {
        var _this = this;
        // GET '/api/me/stats'
        var observable = this.http.get('me/stats');
        return __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */].execute(observable, function (data) {
            _this._data['stats'] = data;
        });
    };
    UserService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_8__http_service__["a" /* AppHttp */],
            __WEBPACK_IMPORTED_MODULE_9__storage_service__["a" /* StorageService */],
            __WEBPACK_IMPORTED_MODULE_6__notification_service__["a" /* NotificationService */],
            __WEBPACK_IMPORTED_MODULE_10__event_service__["a" /* EventService */]])
    ], UserService);
    return UserService;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-column-histogram.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableColumnHistogramDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js__ = __webpack_require__("../../../../chart.js/src/chart.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_chart_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var TableColumnHistogramDirective = (function () {
    function TableColumnHistogramDirective(el, zone) {
        this.zone = zone;
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_3__angular_common__["d" /* DecimalPipe */]('en-US');
        this.el = el.nativeElement;
    }
    TableColumnHistogramDirective.prototype.ngOnChanges = function () {
        var _this = this;
        var isLinear = this.column.variableType === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.variableType.values.CONTINUOUS;
        var data = this.histogram.map(function (row) { return row.count; });
        var labels = isLinear
            ? this.histogram.map(function (_) { return _.min; }).concat([__WEBPACK_IMPORTED_MODULE_2_lodash__["last"](this.histogram).max]).map(function (_) { return _this._formatFloat(_); })
            : this.histogram.map(function (row) {
                if (row.value === null) {
                    return 'Other...';
                }
                switch (_this.column.dataType) {
                    case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.dataType.values.DOUBLE:
                        return _this._formatFloat(row.value);
                    case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.dataType.values.INTEGER:
                    case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.dataType.values.LONG:
                        return row.value.toString();
                    default:
                        return String(row.value);
                }
            });
        this.chartConfig = {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                        borderWidth: 0,
                        backgroundColor: '#0d47a1',
                        data: data
                    }],
            },
            options: {
                scales: {
                    xAxes: [
                        {
                            categoryPercentage: 1,
                            barPercentage: 1,
                            gridLines: {
                                offsetGridLines: !isLinear,
                                drawOnChartArea: false,
                            },
                            ticks: {
                                autoSkip: false,
                                maxRotation: 90,
                                minRotation: 0,
                            },
                        },
                    ],
                    yAxes: [{
                            //type: 'logarithmic',
                            ticks: {
                                min: 0,
                            }
                        }],
                },
                tooltips: {
                    callbacks: isLinear ? {
                        title: function () { return ''; },
                    } : {},
                    mode: 'x',
                    intersect: false,
                },
                elements: {
                    rectangle: {
                        borderWidth: 2,
                    },
                },
                responsive: true,
                legend: {
                    display: false,
                },
                title: {
                    display: true,
                    text: 'histogram',
                }
            },
        };
        this.zone.runOutsideAngular(function () {
            _this.chart && _this.chart.destroy();
            _this.chart = new __WEBPACK_IMPORTED_MODULE_1_chart_js__(_this.el, _this.chartConfig);
        });
    };
    TableColumnHistogramDirective.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            _this.chart && _this.chart.destroy();
        });
    };
    TableColumnHistogramDirective.prototype._formatFloat = function (value) {
        return this.decimalPipe.transform(value, '1.0-2');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('table-column-histogram'),
        __metadata("design:type", Array)
    ], TableColumnHistogramDirective.prototype, "histogram", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('table-column'),
        __metadata("design:type", Object)
    ], TableColumnHistogramDirective.prototype, "column", void 0);
    TableColumnHistogramDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[table-column-histogram]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], TableColumnHistogramDirective);
    return TableColumnHistogramDirective;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-scatter-plot-matrix.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableScatterPlotMatrixComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var TableScatterPlotMatrixComponent = (function () {
    function TableScatterPlotMatrixComponent(tables, zone) {
        this.tables = tables;
        this.zone = zone;
        this.styleHeight = '100%';
        this.classes = 'flex-col';
        this.table = null;
        this._selectedColumns = [];
        this.chartPadding = 6;
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_5__angular_common__["d" /* DecimalPipe */]('en-US');
        this.margin = { top: 0, right: 0, bottom: 100, left: 100 };
    }
    TableScatterPlotMatrixComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('table' in changes) {
            __WEBPACK_IMPORTED_MODULE_4_rxjs_Observable__["a" /* Observable */].forkJoin(this.tables.getStatistic(this.table.id), this.tables.scatterSummary(this.table.id)).subscribe(function (_a) {
                var stats = _a[0], summary = _a[1];
                _this.stats = stats;
                _this.summary = summary;
                _this._selectedColumns = summary.columns.slice(0, 5).map(function (_) { return _.name; });
                _this.drawScatter();
            });
        }
    };
    TableScatterPlotMatrixComponent.prototype.drawScatter = function () {
        var _this = this;
        this.svg = __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this.canvas.nativeElement);
        this.svgWidth = parseInt(this.svg.style('width'), 10);
        this.svgHeight = parseInt(this.svg.style('height'), 10);
        this.areaWidth = this.svgWidth - this.margin.left - this.margin.right;
        this.areaHeight = this.svgHeight - this.margin.top - this.margin.bottom;
        this.svg.select('.chartArea').remove();
        if (!this.summary.data.length || !this._selectedColumns || this._selectedColumns.length < 2) {
            return;
        }
        this.chartArea = this.svg
            .append('g')
            .attr('class', 'chartArea')
            .attr('width', this.areaWidth)
            .attr('height', this.areaHeight)
            .attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')');
        var steps = this.summary.quantizationSteps;
        var selectedsummaryColumns = this.summary.columns.filter(function (column) { return _this._selectedColumns.indexOf(column.name) > -1; }).map(function (_) { return _.name; });
        var columnNames = this.summary.columns.reduce(function (acc, _) {
            acc[_.name] = _.displayName || _.name;
            return acc;
        }, {});
        var columnsCount = selectedsummaryColumns.length;
        var chartSize = (Math.min(this.areaWidth, this.areaHeight) / columnsCount);
        var chartInnerSize = (chartSize - this.chartPadding * 2);
        var rectSize = chartInnerSize / steps;
        var scales = this.stats.stats.reduce(function (acc, _) {
            acc[_.columnName] = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleLinear"]()
                .domain([_.min, _.max])
                .range([_this.chartPadding, chartSize - _this.chartPadding]);
            return acc;
        }, {});
        var _loop_1 = function (i) {
            var xScale = scales[selectedsummaryColumns[i]];
            var yScale = xScale.copy().range(xScale.range().reverse());
            var columnName = this_1.table.columns.find(function (column) { return column.name === selectedsummaryColumns[i]; }).displayName || selectedsummaryColumns[i];
            if (i < columnsCount - 1) {
                var xAxis = __WEBPACK_IMPORTED_MODULE_3_d3__["axisBottom"](xScale).tickValues(xScale.domain());
                this_1.chartArea.append('g')
                    .attr('class', 'x-axis')
                    .attr('transform', "translate(" + (i * chartSize) + ", " + ((chartSize * (columnsCount - 1)) + this_1.chartPadding) + ")")
                    .call(xAxis)
                    .selectAll('text')
                    .attr('text-anchor', 'end')
                    .attr('dx', '-0.8em')
                    .attr('dy', '-0.5em')
                    .attr('transform', "rotate(-90)");
                this_1.chartArea.append('text')
                    .attr('class', 'x-axis-label')
                    .attr('text-anchor', 'end')
                    .attr('transform', "translate(" + ((i * chartSize) + chartSize / 2) + ", " + ((chartSize * (columnsCount - 1)) + this_1.chartPadding + 5) + ")  rotate(-90)")
                    .text(columnName)
                    .each(this_1._trimTextWrap(this_1.margin.bottom - this_1.chartPadding - 5));
            }
            if (i > 0) {
                var yAxis = __WEBPACK_IMPORTED_MODULE_3_d3__["axisLeft"](yScale).tickValues(yScale.domain());
                this_1.chartArea.append('g')
                    .attr('class', 'y-axis')
                    .attr('transform', "translate(" + -this_1.chartPadding + " , " + (((i - 1) * chartSize) + this_1.margin.top) + ")")
                    .call(yAxis);
                this_1.chartArea.append('text')
                    .attr('class', 'y-axis-label')
                    .attr('text-anchor', 'end')
                    .attr('transform', "translate(" + (-this_1.chartPadding - 5) + ", " + ((chartSize * (i - 1)) + this_1.margin.top + chartSize / 2) + ")")
                    .text(columnName)
                    .each(this_1._trimTextWrap(this_1.margin.left - this_1.chartPadding - 5));
            }
        };
        var this_1 = this;
        //drawing axes
        for (var i = 0; i < columnsCount; i++) {
            _loop_1(i);
        }
        var drawnCharts = this.summary.data.filter(function (_) {
            return selectedsummaryColumns.findIndex(function (column) { return column === _.column1; }) >= 0 &&
                selectedsummaryColumns.findIndex(function (column) { return column === _.column2; }) >= 0;
        });
        var charts = this.chartArea
            .selectAll('g.scatter-chart')
            .data(drawnCharts)
            .enter()
            .append('g')
            .attr('class', 'scatter-chart')
            .attr('transform', function (d) {
            var index1 = selectedsummaryColumns.findIndex(function (column) { return column === d.column1; });
            var index2 = selectedsummaryColumns.findIndex(function (column) { return column === d.column2; });
            return "translate(" + (chartSize * index1) + ", " + (chartSize * (index2 - 1)) + ")";
        });
        charts.append('rect')
            .attr('class', 'scatter-chart-border')
            .attr('fill', 'white')
            .attr('stroke-width', 1)
            .attr('stroke', 'black')
            .attr('transform', "translate(" + this.chartPadding + ", " + this.chartPadding + ")")
            .attr('width', chartInnerSize)
            .attr('height', chartInnerSize);
        var rects = charts.selectAll('rect.scatter-chart-dot')
            .data(function (d) {
            var xScale = scales[d.column1];
            var yScale = scales[d.column2].copy()
                .range(scales[d.column2].range().reverse());
            var colorScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleQuantize"]()
                .domain([0, __WEBPACK_IMPORTED_MODULE_3_d3__["max"](d.values, function (_) { return _.count; })])
                .range(__WEBPACK_IMPORTED_MODULE_3_d3__["range"](0, 256).map(function (_) { return "rgb(" + _ + ", " + _ + ", 255)"; }).reverse());
            return d.values.map(function (_) {
                return Object.assign({
                    x: xScale(_.value1),
                    y: yScale(_.value2),
                    color: colorScale(_.count),
                    column1: d.column1,
                    column2: d.column2,
                }, _);
            });
        })
            .enter()
            .append('rect')
            .attr('class', 'scatter-chart-dot')
            .attr('transform', function (d) {
            return "translate(" + d.x + ", " + (d.y - rectSize) + ")";
        })
            .attr('stroke-width', 0)
            .attr('fill', function (d) {
            return d.color;
        })
            .attr('width', rectSize)
            .attr('height', rectSize);
        this.zone.runOutsideAngular(function () {
            rects
                .on('mouseover', function (d) {
                __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('.toolTip').remove();
                var divTooltip = __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('body').append('div').attr('class', 'toolTip');
                divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_3_d3__["event"].pageX + 10 + 'px');
                divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_3_d3__["event"].pageY - 25 + 'px');
                divTooltip.style('display', 'inline-block');
                divTooltip.html("<table cellspacing=\"5\" cellpadding=\"10\" border=\"1\">\n            <thead><tr><th>" + columnNames[d.column2] + "</th><th>" + columnNames[d.column1] + "</th><th>Count</th></tr></thead>\n            <tbody><tr><td>" + _this._formatNumber(d.value2) + "</td><td>" + _this._formatNumber(d.value1) + "</td><td>" + d.count + "</td></tr></tbody>\n          </table>");
            })
                .on('mouseout', function () {
                __WEBPACK_IMPORTED_MODULE_3_d3__["select"]('.toolTip').remove();
            });
        });
    };
    TableScatterPlotMatrixComponent.prototype._formatNumber = function (value) {
        return this.decimalPipe.transform(parseFloat(value), '1.0-1');
    };
    TableScatterPlotMatrixComponent.prototype._trimTextWrap = function (width) {
        return function () {
            var self = __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this), textLength = self.node().getComputedTextLength(), text = self.text();
            while (textLength > width && text.length > 0) {
                text = text.slice(0, -1);
                self.text(text + '…');
                textLength = self.node().getComputedTextLength();
            }
        };
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], TableScatterPlotMatrixComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], TableScatterPlotMatrixComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], TableScatterPlotMatrixComponent.prototype, "table", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], TableScatterPlotMatrixComponent.prototype, "canvas", void 0);
    TableScatterPlotMatrixComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'table-scatter-plot-matrix',
            template: "\n    <app-spinner [visibility]=\"!summary\"></app-spinner>\n    <div class=\"flex-static\">\n      <app-select *ngIf=\"summary\" [label]=\"'Columns'\" [(value)]=\"_selectedColumns\" (valueChange)=\"drawScatter()\"\n        [multiple]=\"true\"\n        [options]=\"summary.columns | tableColumnSelectOptions\"></app-select>\n    </div>\n    <div class=\"flex-rubber\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"805\" height=\"805\" style=\"background-color: white;\"></svg>\n      </div>\n    </div>\n  ",
            styles: [
                "svg {\n      width: 100%;\n      height: 100%;\n    }",
            ],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], TableScatterPlotMatrixComponent);
    return TableScatterPlotMatrixComponent;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var TableStatusColorDirective = (function () {
    function TableStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    TableStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = this.tableStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.status.values.ERROR ? 'dot-danger' :
            this.tableStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.status.values.SAVING ? 'dot-warning' :
                this.tableStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.status.values.UPDATING ? 'dot-warning' : 'dot-primary';
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('table-status-color'),
        __metadata("design:type", String)
    ], TableStatusColorDirective.prototype, "tableStatusColor", void 0);
    TableStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[table-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], TableStatusColorDirective);
    return TableStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-upload-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableUploadModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var TableUploadModalComponent = (function () {
    function TableUploadModalComponent(tables) {
        this.tables = tables;
        this.delimiterList = [
            { id: ',', text: 'Comma (CSV)' },
            { id: '\t', text: 'Tabulation (TSV)' },
            { id: ';', text: 'Semicolon' }
        ];
        this.formatList = [
            { id: 'csv', text: 'CSV/TXT' },
            { id: 'json', text: 'JSON' },
        ];
        this.tableUploadForm = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            format: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('csv', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            delimiter: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](',', __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            nullValue: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]('NULL'),
            determNulls: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
        });
    }
    TableUploadModalComponent.prototype.doUpload = function () {
        var formValue = this.tableUploadForm.value;
        var uploadParams = {
            format: formValue.format,
            name: formValue.name,
            delimiter: formValue.delimiter,
            nullValue: formValue.determNulls ? formValue.nullValue : undefined,
        };
        this.tables.upload(this.file, uploadParams);
        this.modal.hide();
    };
    TableUploadModalComponent.prototype.onUploadTable = function (file) {
        this.file = file;
        this.tableUploadForm.controls['name'].setValue(file.name.replace(/\.\w+$/, ''));
    };
    TableUploadModalComponent.prototype.open = function () {
        this.tableUploadForm.reset({ format: 'csv', name: null, delimiter: ',', nullValue: 'NULL', determNulls: false });
        this.file = null;
        this.modal.show();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], TableUploadModalComponent.prototype, "modal", void 0);
    TableUploadModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'table-upload-modal',
            template: "\n    <app-modal #modal [title]=\"'Upload file'\"\n      [buttons]=\"[{'class': 'btn-primary', disabled: (tableUploadForm.invalid || !file), title: 'Upload' }]\"\n      (buttonClick)=\"tableUploadForm.valid && file && doUpload()\"\n      >\n      <form [formGroup]=\"tableUploadForm\">\n        <app-select\n          [label]=\"'Format Type'\"\n          [control]=\"tableUploadForm.controls['format']\"\n          [options]=\"formatList\"></app-select>\n        <app-select\n          *ngIf=\"tableUploadForm.value.format === 'csv'\"\n          [label]=\"'Delimiter'\"\n          [control]=\"tableUploadForm.controls['delimiter']\"\n          [options]=\"delimiterList\"></app-select>\n        <app-input [label]=\"'Table Name'\" [control]=\"tableUploadForm.controls['name']\"></app-input>\n        <app-input [label]=\"'File'\"\n          [readonly]=\"true\"\n          [iconAfter]=\"'glyphicon-file'\"\n          file-upload\n          [file-upload-click]=\"true\"\n          [value]=\"file?.name\"\n          (tableUploadDrop)=\"onUploadTable($event)\">Choose File</app-input>\n        <ng-template [ngIf]=\"tableUploadForm.value.format === 'csv'\">\n          <app-check [label]=\"'Determine Null Values'\" [control]=\"tableUploadForm.controls['determNulls']\"></app-check>\n          <app-input [label]=\"'Null Value'\"\n            *ngIf=\"tableUploadForm.value.determNulls\"\n            [control]=\"tableUploadForm.controls['nullValue']\"></app-input>\n        </ng-template>\n      </form>\n    </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_table_service__["a" /* TableService */]])
    ], TableUploadModalComponent);
    return TableUploadModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-view-embed.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableViewEmbeddableComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils_forms__ = __webpack_require__("../../../../../src/app/utils/forms.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var TableViewEmbeddableComponent = (function () {
    function TableViewEmbeddableComponent(tables, processes, router) {
        var _this = this;
        this.tables = tables;
        this.processes = processes;
        this.router = router;
        this.editMode = false;
        this.lockedColumns = [];
        this.columnOptionsChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.position = 'relative';
        this.styleHeight = '100px';
        this.classes = 'flex-col';
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.tableStatisticTooltips = {};
        this.transpose = false;
        this.datasetControlGroup = new __WEBPACK_IMPORTED_MODULE_8__utils_forms__["b" /* AppFormGroup */]({
            order: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
            page: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](1),
            page_size: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.view.pageSize.tableViewEmbed),
        });
        this._somePredictorsSelected = false;
        this._someColumnsUnused = false;
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_5__angular_common__["d" /* DecimalPipe */]('en-US');
        this._getCovariateTitle = function () { return ''; };
        this._getType = function () { return ''; };
        this._isEditable = function () { return false; };
        this._predictorExists = function () { return false; };
        this.tableProcesses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE]];
        this.datasetControlGroupDefaultValue = this.datasetControlGroup.value;
        this._datasetLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (data) { return _this.tables.getDataset(data.tableId, data.value); });
        this._datasetLoader.subscribe(function (data) {
            _this.tableDataset = data;
            _this.tableDatasetSample = data.data.slice(0, 5);
        });
        this._statisticLoader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            // set numeric column tooltips to default message
            _this.fillStatisticTooltips(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].tableStats.status.values.PENDING);
            return _this.tables.getStatistic(id);
        });
        this._statisticLoader.subscribe(function (data) {
            if (data.status === _this.config.tableStats.status.values.ERROR) {
                _this.fillStatisticTooltips(data.status);
                return;
            }
            // TODO: it's working when we have gone from route associated with this component. should it be deleted somehow?
            if (data.status === _this.config.tableStats.status.values.PENDING) {
                _this.processes.getByTarget(data.id, __WEBPACK_IMPORTED_MODULE_7__interfaces_common_interface__["a" /* IAsset */].Type.TABLE_STATS).subscribe(function (process) {
                    _this.subForTableStatistic && _this.subForTableStatistic.unsubscribe();
                    _this.subForTableStatistic = _this.processes.subscribe(process, function () { return _this._statisticLoader.load(data.id); });
                });
            }
            else {
                _this.tableStatisticTooltips = data.stats.reduce(function (acc, cur) {
                    acc[cur.columnName] = _this._getTableColumnStatisticTooltipContent(cur);
                    return acc;
                }, {});
            }
        });
    }
    TableViewEmbeddableComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        // table change: reset stuff
        if (changes['id']
            && changes['id'].currentValue
            && changes['id'].currentValue !== changes['id'].previousValue) {
            // get table
            this.getTable();
        }
        else if (changes['columnOptions']
            && changes['columnOptions'].currentValue
            && !__WEBPACK_IMPORTED_MODULE_6_lodash__["isEqual"](changes['columnOptions'].currentValue, changes['columnOptions'].previousValue)) {
            if (this.table) {
                this.initForm();
            }
        }
        this._predictorExists = function (predictorName) {
            return _this.modelHelpers && !!_this.modelHelpers.predictorColumns.find(function (_) { return _.name === predictorName; });
        };
        // update bound functions for pipes
        this._getCovariateTitle = function (item) {
            if (_this.editMode && _this.columnOptions) {
                var data = _this.columnOptions.find(function (_) { return _.name === item.name; });
                if (data) {
                    return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.labels[data.covariateType];
                }
            }
            if (_this.modelHelpers) {
                if (_this.modelHelpers.predictedColumn && item.name === _this.modelHelpers.predictedColumn.name) {
                    return 'Predicted';
                }
                if (_this.modelHelpers.probabilityColumn && item.name === _this.modelHelpers.probabilityColumn.name) {
                    return 'Probability';
                }
                if (_this.modelHelpers.responseColumn && item.name === _this.modelHelpers.responseColumn.name) {
                    return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.labels[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.RESPONSE];
                }
                if (__WEBPACK_IMPORTED_MODULE_6_lodash__["some"](_this.modelHelpers.predictorColumns || [], function (_) { return _.name === item.name; })) {
                    return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.labels[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.PREDICTOR];
                }
            }
            return null;
        };
        this._getType = function (item, key) {
            if (_this.editMode && _this.columnOptions) {
                var data = _this.columnOptions.find(function (_) { return _.name === item.name; });
                if (data) {
                    return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column[key].labels[data[key]] || 'Undefined';
                }
            }
            if (_this.modelHelpers) {
                var index = _this.findIndex(_this.modelHelpers.predictorColumns, 'name', item.name);
                if (index > -1) {
                    return _this.modelHelpers.predictorColumns[index][key];
                }
                if (_this.modelHelpers.responseColumn && _this.modelHelpers.responseColumn.name === item.name) {
                    return _this.modelHelpers.responseColumn[key];
                }
            }
            return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column[key].labels[item[key]] || 'Undefined';
        };
        this._isEditable = function (item, covariate) {
            if (_this.lockedColumns.indexOf(item.name) >= 0) {
                return false;
            }
            //noinspection RedundantIfStatementJS
            if (covariate && covariate === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.IGNORE) {
                return false;
            }
            return true;
        };
    };
    TableViewEmbeddableComponent.prototype.ngOnInit = function () {
        var _this = this;
        // browse dataset (pagination/sorting)
        this.datasetFormSubscription = this.datasetControlGroup.valueChanges.subscribe(function (value) {
            if (_this.table && _this.table.status === _this.config.table.status.values.ACTIVE) {
                _this._datasetLoader.load({
                    tableId: _this.table.id,
                    value: value
                });
                _this._statisticLoader.load(_this.table.id);
            }
        });
    };
    TableViewEmbeddableComponent.prototype.ngOnDestroy = function () {
        this.datasetFormSubscription && this.datasetFormSubscription.unsubscribe();
        this.columnsFormSubscription && this.columnsFormSubscription.unsubscribe();
        this.subForTableStatistic && this.subForTableStatistic.unsubscribe();
        this.processSubscription && this.processSubscription.unsubscribe();
    };
    TableViewEmbeddableComponent.prototype.newColumnControls = function (column) {
        return new __WEBPACK_IMPORTED_MODULE_8__utils_forms__["b" /* AppFormGroup */]({
            displayName: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column.displayName, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            name: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column.name, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            dataType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column.dataType, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            variableType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](column.variableType, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            covariateType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](),
        });
    };
    TableViewEmbeddableComponent.prototype._isColumnNumeric = function (column) {
        switch (column.dataType) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.INTEGER:
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.DOUBLE:
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.LONG:
                return true;
            default:
                return false;
        }
    };
    TableViewEmbeddableComponent.prototype.selectAllPredictors = function () {
        this.initForm(this.columnOptions, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.PREDICTOR);
    };
    TableViewEmbeddableComponent.prototype.deselectPredictors = function () {
        this.initForm(this.columnOptions.filter(function (_) { return _.covariateType !== __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.PREDICTOR; }));
    };
    TableViewEmbeddableComponent.prototype.findIndex = function (arr, key, name) {
        return arr.map(function (i) { return key in i && i[key]; }).indexOf(name);
    };
    TableViewEmbeddableComponent.prototype.fillStatisticTooltips = function (status) {
        var _this = this;
        this.table && this.table.columns.map(function (col) {
            if (_this._isColumnNumeric(col)) {
                _this.tableStatisticTooltips[col.name] = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].tableStats.status.labels[status] || status;
            }
        });
    };
    TableViewEmbeddableComponent.prototype.getTable = function () {
        var _this = this;
        this.table = undefined;
        this.tableDataset = undefined;
        this.tableDatasetSample = undefined;
        this.datasetControlGroup.reset(this.datasetControlGroupDefaultValue);
        this.tables.get(this.id).subscribe(function (table) {
            _this.table = table;
            // get process (casual)
            var currentUrl = _this.router.routerState.snapshot.url;
            if (table.status === _this.config.table.status.values.SAVING) {
                _this.processes.getByTarget(table.id, __WEBPACK_IMPORTED_MODULE_7__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (data) {
                    _this.processSubscription && _this.processSubscription.unsubscribe();
                    _this.processSubscription = _this.processes.subscribe(data, function () {
                        currentUrl === _this.router.routerState.snapshot.url && _this.getTable();
                        _this.tables.list();
                    });
                });
            }
            // get dataset
            if (table.status === _this.config.table.status.values.ACTIVE) {
                _this._datasetLoader.load({ tableId: _this.table.id, value: _this.datasetControlGroup.value });
                _this._statisticLoader.load(_this.table.id);
            }
            _this.initForm();
        });
    };
    TableViewEmbeddableComponent.prototype._getTableColumnStatisticTooltipContent = function (tableColumnStatistic) {
        return "\n      <table class='graph-info'>\n        <tr><td>Name</td><td>" + tableColumnStatistic.columnName + "</td></tr>\n        <tr><td>Min</td><td>" + this.decimalPipe.transform(tableColumnStatistic.min, '1.0-3') + "</td></tr>\n        <tr><td>Max</td><td>" + this.decimalPipe.transform(tableColumnStatistic.max, '1.0-3') + "</td></tr>\n        <tr><td>Avg</td><td>" + this.decimalPipe.transform(tableColumnStatistic.avg, '1.0-3') + "</td></tr>\n        <tr><td>Std</td><td>" + this.decimalPipe.transform(tableColumnStatistic.std, '1.0-3') + "</td></tr>\n        <!-- tr><td>Std Population</td><td>" + tableColumnStatistic.stdPopulation + "</td></tr -->\n        <tr><td>Median</td><td>" + this.decimalPipe.transform(tableColumnStatistic.median, '1.0-3') + "</td></tr>\n      </table>\n    ";
    };
    TableViewEmbeddableComponent.prototype.initForm = function (columnOptions, defaultValue) {
        var _this = this;
        if (columnOptions === void 0) { columnOptions = this.columnOptions; }
        if (defaultValue === void 0) { defaultValue = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.IGNORE; }
        var columnsControlArray = new __WEBPACK_IMPORTED_MODULE_8__utils_forms__["a" /* AppFormArray */]([]);
        this.table.columns.forEach(function (item) {
            var control = _this.newColumnControls(item);
            if (_this.editMode) {
                control.controls.covariateType.setValue(defaultValue);
                control.controls.covariateType.setValidators(__WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required);
            }
            columnsControlArray.push(control);
        });
        // fill form with columnOptions
        if (columnOptions) {
            columnsControlArray.controls.forEach(function (group) {
                var columnName = group.controls['name'].value;
                var newValue = columnOptions.find(function (value) { return value.name === columnName; });
                if (newValue) {
                    group.setValue(Object.assign(group.value, newValue));
                }
            });
        }
        this.columnsFormSubscription && this.columnsFormSubscription.unsubscribe();
        this.columnsFormSubscription = columnsControlArray.valueChanges
            .distinctUntilChanged()
            .subscribe(function (data) {
            _this.columnOptionsChange.emit(data);
            _this.updateFormDerivatives();
        });
        this.columnsControlGroup = columnsControlArray;
        this.columnOptionsChange.emit(columnsControlArray.value);
        this.updateFormDerivatives();
    };
    TableViewEmbeddableComponent.prototype.updateFormDerivatives = function () {
        this._somePredictorsSelected = this.columnsControlGroup.controls.some(function (group) {
            return group.controls['covariateType'].value === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.PREDICTOR;
        });
        this._someColumnsUnused = this.columnsControlGroup.controls.some(function (group) {
            return group.controls['covariateType'].value === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate.values.IGNORE;
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], TableViewEmbeddableComponent.prototype, "id", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], TableViewEmbeddableComponent.prototype, "editMode", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], TableViewEmbeddableComponent.prototype, "modelHelpers", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TableViewEmbeddableComponent.prototype, "columnOptions", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TableViewEmbeddableComponent.prototype, "lockedColumns", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], TableViewEmbeddableComponent.prototype, "columnOptionsChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.position'),
        __metadata("design:type", Object)
    ], TableViewEmbeddableComponent.prototype, "position", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.min-height'),
        __metadata("design:type", Object)
    ], TableViewEmbeddableComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], TableViewEmbeddableComponent.prototype, "classes", void 0);
    TableViewEmbeddableComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'table-view-embed',
            providers: [
                __WEBPACK_IMPORTED_MODULE_10__services_table_service__["a" /* TableService */],
                __WEBPACK_IMPORTED_MODULE_5__angular_common__["d" /* DecimalPipe */],
            ],
            template: "\n    <app-spinner [visibility]=\"!table\"></app-spinner>\n    <div *ngIf=\"table\" [ngSwitch]=\"table.status\" class=\"flex-col\">\n\n      <process-indicator *ngSwitchCase=\"config.table.status.values.SAVING\"\n        [process]=\"tableProcesses[table.id]\"></process-indicator>\n\n      <error-indicator *ngSwitchCase=\"config.table.status.values.ERROR\" [target]=\"'table'\"\n        [process]=\"tableProcesses[table.id]\"></error-indicator>\n\n      <div *ngSwitchCase=\"config.table.status.values.ACTIVE\" class=\"flex-col\">\n        <app-spinner [visibility]=\"!_datasetLoader.loaded\"></app-spinner>\n        <div class=\"p0 form-control brand-control flex-static\">\n          <div class=\"row\">\n            <div class=\"col-md-6\">\n              <div class=\"ellipsis text-bold\">{{table.name}}</div>\n            </div>\n            <div class=\"col-md-6\" *ngIf=\"_datasetLoader.loaded && tableDataset\">\n              <div class=\"pull-right\">\n                {{(tableDataset.count || 0) | pluralize:({other: '{} rows', '0': 'No rows', '1': '{} row'})}}\n                <sort-columns *ngIf=\"!transpose\" [columns]=\"table.columns | tableColumnSelectOptions\"\n                  [control]=\"datasetControlGroup.controls['order']\"></sort-columns>\n                <ng-template [ngIf]=\"columnOptions\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-xs btn-secondary\"\n                    [disabled]=\"!_someColumnsUnused\"\n                    title=\"Select All as Predictors\"\n                    (click)=\"selectAllPredictors()\">\n                    <i class=\"glyphicon glyphicon-ok\"></i>\n                  </button>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-xs btn-secondary\"\n                    [disabled]=\"!_somePredictorsSelected\"\n                    title=\"Remove All as Predictors\"\n                    (click)=\"deselectPredictors()\">\n                    <i class=\"glyphicon glyphicon-remove\"></i>\n                  </button>\n                </ng-template>\n                <button type=\"button\" class=\"btn btn-xs btn-secondary\" title=\"Transpose\"\n                  (click)=\"transpose = !transpose\">\n                  <i class=\"glyphicon glyphicon-list-alt\"></i>\n                </button>\n              </div>\n              <div *ngIf=\"!transpose\" class=\"pull-right\">\n                <app-pagination\n                  [page]=\"datasetControlGroup.controls['page']\"\n                  [pageSize]=\"datasetControlGroup.controls['page_size']\"\n                  [currentPageSize]=\"tableDataset.data.length\"\n                  [rowsCount]=\"tableDataset.count\">\n                </app-pagination>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div [ngSwitch]=\"transpose\" *ngIf=\"_datasetLoader.loaded && tableDataset\" class=\"table-scroll flex-rubber\">\n          <table *ngSwitchCase=\"false\" class=\"table table-dataset\">\n            <colgroup *ngIf=\"modelHelpers && !editMode\">\n              <col *ngFor=\"let item of table.columns; let i = index\" [ngClass]=\"{\n                  'response': item.name === modelHelpers.responseColumn?.name,\n                  'predictor': item.name | apply: _predictorExists\n                }\"/>\n            </colgroup>\n            <colgroup *ngIf=\"editMode\">\n              <col *ngFor=\"let item of columnsControlGroup.controls\" [ngClass]=\"{\n                  'response':  item.controls.covariateType.value === config.model.column.covariate.values.RESPONSE,\n                  'predictor': item.controls.covariateType.value === config.model.column.covariate.values.PREDICTOR\n                }\"/>\n            </colgroup>\n            <thead [ngSwitch]=\"editMode\">\n              <tr>\n                <th class=\"text-center\"\n                  width=\"{{100 / table.columns.length}}%\"\n                  *ngFor=\"let item of table.columns\"\n                  tooltip\n                  data-html=\"true\"\n                  data-placement=\"bottom\"\n                  data-container=\"body\"\n                  [tooltipTitle]=\"(item | apply: _isColumnNumeric) ? tableStatisticTooltips[item.name] : ''\"\n                  [grid-sort]=\"{ alias: item.name, name: item.displayName }\"\n                  [grid-sort-control]=\"datasetControlGroup.controls['order']\">\n                  {{item.displayName}}\n                </th>\n              </tr>\n              <ng-template [ngSwitchCase]=\"true\">\n                <tr>\n                  <th\n                    *ngFor=\"let item of columnsControlGroup.controls; let i = index\"\n                    [ngSwitch]=\"table.columns[i] | apply: _isEditable\"\n                    class=\"text-muted tables-select-control\">\n                    <span *ngSwitchCase=\"false\">{{table.columns[i] | apply: _getCovariateTitle}}</span>\n                    <select *ngSwitchDefault [formControl]=\"item.controls.covariateType\" class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.model.column.covariate.list\" [value]=\"item\">\n                        {{ config.model.column.covariate.labels[item]}}\n                      </option>\n                    </select>\n                  </th>\n                </tr>\n                <tr>\n                  <th\n                    *ngFor=\"let item of columnsControlGroup.controls; let i = index\"\n                    class=\"text-muted tables-select-control\"\n                    [ngSwitch]=\"table.columns[i] | apply: _isEditable: item.controls.covariateType.value\"\n                  >\n                    <span *ngSwitchCase=\"false\">{{table.columns[i] | apply: _getType: 'dataType'}}</span>\n                    <select *ngSwitchDefault [formControl]=\"item.controls.dataType\" class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.table.column.dataType.list\" [value]=\"item\">\n                        {{ config.table.column.dataType.labels[item]}}\n                      </option>\n                    </select>\n                  </th>\n                </tr>\n                <tr>\n                  <th\n                    *ngFor=\"let item of columnsControlGroup.controls; let i = index\"\n                    class=\"text-muted tables-select-control\"\n                    [ngSwitch]=\"table.columns[i] | apply: _isEditable: item.controls.covariateType.value\"\n                  >\n                    <span *ngSwitchCase=\"false\">{{table.columns[i] | apply: _getType: 'variableType'}}</span>\n                    <select *ngSwitchDefault\n                      [formControl]=\"item.controls.variableType\"\n                      class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.table.column.variableType.list\" [value]=\"item\">\n                        {{ config.table.column.variableType.labels[item]}}\n                      </option>\n                    </select>\n                  </th>\n                </tr>\n              </ng-template>\n\n              <ng-template ngSwitchDefault=\"\">\n                <tr *ngIf=\"modelHelpers\">\n                  <th\n                    *ngFor=\"let item of table.columns; let i = index\"\n                    class=\"text-muted\">\n                    {{item | apply: _getCovariateTitle}}\n                  </th>\n                </tr>\n\n                <tr>\n                  <th\n                    *ngFor=\"let item of table.columns; let i = index\"\n                    class=\"text-muted\">\n                    {{item | apply: _getType: 'dataType'}}\n                  </th>\n                </tr>\n\n                <tr>\n                  <th\n                    *ngFor=\"let item of table.columns; let i = index\"\n                    class=\"text-muted\">\n                    {{item | apply: _getType: 'variableType'}}\n                  </th>\n                </tr>\n              </ng-template>\n            </thead>\n            <tbody>\n              <tr *ngFor=\"let row of tableDataset.data\">\n                <td *ngFor=\"let value of row; let i = index\"\n                    [ngClass]=\"{\n                        'text-left': table.columns[i]?.align === config.table.column.align.values.LEFT,\n                        'text-center': table.columns[i]?.align === config.table.column.align.values.CENTER,\n                        'text-right': table.columns[i]?.align === config.table.column.align.values.RIGHT\n                    }\"\n                    [ngSwitch]=\"table.columns[i]?.dataType\">\n                  <ng-template [ngSwitchCase]=\"config.table.column.dataType.values.DOUBLE\">\n                    <span [title]=\"value | numberTitle: '1.0-3'\">\n                      {{(value || null) | number: '1.0-3'}}\n                    </span>\n                  </ng-template>\n                  <ng-template ngSwitchDefault>{{value | truncate:50}}</ng-template>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n\n          <table *ngSwitchCase=\"true\" class=\"table table-dataset\">\n            <thead>\n              <tr>\n                <th class=\"text-center\">Column Name</th>\n                <th *ngIf=\"!!(columnOptions || modelHelpers)\" class=\"text-center\">Covariate Type</th>\n                <th class=\"text-center\">Data Type</th>\n                <th class=\"text-center\">Variable Type</th>\n                <th class=\"text-center\" *ngFor=\"let item of tableDatasetSample;let i = index\">Data Row {{i+1}}</th>\n              </tr>\n            </thead>\n\n            <tr *ngFor=\"let item of table.columns; let i = index\" [ngClass]=\"{\n                  'response':  (modelHelpers && item.name == modelHelpers.responseColumn?.name) || (editMode && columnsControlGroup.controls[i]['controls'].covariateType?.value === config.model.column.covariate.values.RESPONSE),\n                  'predictor': (item.name | apply: _predictorExists) || (editMode && columnsControlGroup.controls[i]['controls'].covariateType?.value === config.model.column.covariate.values.PREDICTOR)\n                }\" [ngSwitch]=\"editMode\">\n              <th class=\"text-center link\" style=\"font-weight: bold;\">\n                {{item.displayName}}\n              </th>\n\n              <ng-template [ngSwitchCase]=\"true\">\n                <th class=\"text-muted tables-select-control\"\n                  [ngSwitch]=\"item | apply: _isEditable\"\n                >\n                  <span *ngSwitchCase=\"false\">{{table.columns[i] | apply: _getCovariateTitle}}</span>\n                  <select *ngSwitchDefault\n                    [formControl]=\"columnsControlGroup.controls[i]['controls'].covariateType\"\n                    class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.model.column.covariate.list\" [value]=\"item\">\n                        {{ config.model.column.covariate.labels[item]}}\n                      </option>\n                  </select>\n                </th>\n\n                <th class=\"text-muted tables-select-control\"\n                  [ngSwitch]=\"item | apply: _isEditable: columnsControlGroup.controls[i].controls.covariateType.value\"\n                >\n                  <span *ngSwitchCase=\"false\">{{item | apply: _getType: 'dataType'}}</span>\n                  <select *ngSwitchDefault\n                    [formControl]=\"columnsControlGroup.controls[i]['controls'].dataType\"\n                    class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.table.column.dataType.list\" [value]=\"item\">\n                        {{ config.table.column.dataType.labels[item]}}\n                      </option>\n                  </select>\n                </th>\n\n                <th class=\"text-muted tables-select-control\"\n                  [ngSwitch]=\"item | apply: _isEditable: columnsControlGroup.controls[i].controls.covariateType.value\"\n                >\n                  <span *ngSwitchCase=\"false\">{{item | apply: _getType: 'variableType'}}</span>\n                  <select *ngSwitchDefault\n                    [formControl]=\"columnsControlGroup.controls[i]['controls'].variableType\"\n                    class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of config.table.column.variableType.list\" [value]=\"item\">\n                        {{ config.table.column.variableType.labels[item]}}\n                      </option>\n                  </select>\n                </th>\n              </ng-template>\n\n              <ng-template ngSwitchDefault=\"\">\n                <th *ngIf=\"modelHelpers\" class=\"text-center text-muted\">\n                  {{item | apply: _getCovariateTitle}}\n                </th>\n\n                <th class=\"text-center text-muted\">\n                  {{item | apply: _getType: 'dataType'}}\n                </th>\n\n                <th class=\"text-center text-muted\">\n                  {{item | apply: _getType: 'variableType'}}\n                </th>\n              </ng-template>\n\n              <td *ngFor=\"let row of tableDatasetSample\" [ngClass]=\"{\n                  'text-left': item?.align === config.table.column.align.values.LEFT,\n                  'text-center': item?.align === config.table.column.align.values.CENTER,\n                  'text-right': item?.align === config.table.column.align.values.RIGHT\n                 }\" [ngSwitch]=\"item?.dataType\">\n                <ng-template [ngSwitchCase]=\"config.table.column.dataType.values.DOUBLE\">\n                  <span [title]=\"row[i] | numberTitle: '1.0-3'\">\n                    {{row[i] | number: '1.0-3'}}\n                  </span>\n                </ng-template>\n                <ng-template ngSwitchDefault>{{row[i] | truncate:50}}</ng-template>\n              </td>\n            </tr>\n          </table>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_10__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_9__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */]])
    ], TableViewEmbeddableComponent);
    return TableViewEmbeddableComponent;
}());



/***/ }),

/***/ "../../../../../src/app/tables/table-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var TableViewComponent = (function () {
    function TableViewComponent(route, tables, processes, router, acl) {
        var _this = this;
        this.route = route;
        this.tables = tables;
        this.processes = processes;
        this.router = router;
        this.acl = acl;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_7__utils_activity_observer__["a" /* ActivityObserver */]();
        this.columnIndexes = [];
        this.tableStatisticTooltips = {};
        this.variableTypes = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.list.filter(function (_) { return _ !== __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.values.BOOLEAN; }), __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.labels);
        this.columnTypes = __WEBPACK_IMPORTED_MODULE_5__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.columnType.list, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.columnType.labels);
        this._showStats = false;
        this.activeTab = 0;
        this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_6__angular_common__["d" /* DecimalPipe */]('en-US');
        this._canChangeColumnType = function (tableColumn) {
            return __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.columnTypes[tableColumn.dataType].length > 1;
        };
        this._canChangeVariableType = function (tableColumn) {
            return Object(__WEBPACK_IMPORTED_MODULE_8__core_core_mocks_only__["c" /* ifMocks */])(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.variableTypes[tableColumn.dataType].length > 1
                && _this.table.datasetType === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.datasetType.values.SOURCE, false);
        };
        this._findColumn = function (columnName) {
            return _this.table.columns.find(function (_) { return _.name === columnName; });
        };
        this._isColumnNumeric = function (column) {
            switch (column.dataType) {
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.INTEGER:
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.DOUBLE:
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.dataType.values.LONG:
                    return true;
                default:
                    return false;
            }
        };
        this.tableViewForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            order: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
            page: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](1),
            page_size: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.view.pageSize.tableView),
        });
        this.tableViewFormDefaultValue = this.tableViewForm.value;
        this.tableEditForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('', __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            variableTypes: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
            columnTypes: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([]),
        });
        // browse dataset (pagination/sorting)
        this.viewFormSubscription = this.tableViewForm.valueChanges.subscribe(function () {
            _this.loadDataSet();
        });
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.loadTable(params['tableId']);
        });
    }
    TableViewComponent.prototype.onDragStart = function (event) {
        $(event.srcElement).tooltip('hide');
    };
    TableViewComponent.prototype.ngOnDestroy = function () {
        this.viewFormSubscription.unsubscribe();
        this.routeSubscription.unsubscribe();
        this.processSubscription && this.processSubscription.unsubscribe();
        this.subForTableStatistic && this.subForTableStatistic.unsubscribe();
    };
    TableViewComponent.prototype.saveTable = function () {
        var _this = this;
        var formValue = this.tableEditForm.value;
        var columns = this.table.columns.map(function (column, i) {
            column.variableType = formValue.variableTypes[i];
            column.columnType = formValue.columnTypes[i];
            return column;
        });
        this._savingObserver.observe(this.tables.update(this.table.id, {
            name: this.tableEditForm.value.name,
            columns: columns,
        })).subscribe(function (_) { return _this._setTable(_); });
    };
    TableViewComponent.prototype.onDropSuccess = function () {
        // TODO: enable table update as backend handles it?
        // use this.columnDisplayIndexes to form columns sorting request
    };
    TableViewComponent.prototype.onDropTable = function () {
        var currentProject = this.route.snapshot.params['projectId'];
        if (currentProject) {
            this.router.navigate(['/desk', 'library', 'projects', currentProject, 'tables']);
        }
        else {
            var navigateTo = ['/desk', 'library', 'tables'];
            var currentScope = this.route.snapshot.params['scope'];
            if (currentScope) {
                navigateTo.push(currentScope);
            }
            this.router.navigate(navigateTo);
        }
    };
    TableViewComponent.prototype.loadTable = function (id, silent) {
        var _this = this;
        if ((this.table && id !== this.table.id) || !silent) {
            this.table = undefined;
            this.tableDataset = undefined;
        }
        // get table and dataset
        this.tables.get(id).subscribe(function (_) { return _this._setTable(_); });
    };
    TableViewComponent.prototype._setTable = function (table) {
        var _this = this;
        // init view
        this.table = table;
        // reset column indexes
        this.columnIndexes = table.columns.map(function (_, i) { return i; });
        this.tableViewForm.reset(this.tableViewFormDefaultValue);
        // get process (casual)
        if (table.status === this.config.table.status.values.SAVING) {
            this.processSubscription = this.processes.getByTarget(table.id, __WEBPACK_IMPORTED_MODULE_9__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (process) {
                _this.processes.subscribe(process, function () { return _this.loadTable(table.id, true); });
            });
        }
        this._loadTableStatistic();
        this.loadDataSet();
        // init form
        this.fillTablesForm(this.tableEditForm, table);
    };
    TableViewComponent.prototype._loadTableStatistic = function () {
        var _this = this;
        if (!(this.table && this.table.status === this.config.table.status.values.ACTIVE))
            return;
        // set numeric column tooltips to default message
        this.fillStatisticTooltips(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].tableStats.status.values.PENDING);
        this.tables.getStatistic(this.table.id).subscribe(function (tableStatistic) {
            if (tableStatistic.status === _this.config.tableStats.status.values.ERROR) {
                _this.fillStatisticTooltips(tableStatistic.status);
                return;
            }
            if (tableStatistic.status === _this.config.tableStats.status.values.PENDING) {
                _this.processes.getByTarget(tableStatistic.id, __WEBPACK_IMPORTED_MODULE_9__interfaces_common_interface__["a" /* IAsset */].Type.TABLE_STATS).subscribe(function (process) {
                    _this.subForTableStatistic && _this.subForTableStatistic.unsubscribe();
                    _this.subForTableStatistic = _this.processes.subscribe(process, function () { return _this._loadTableStatistic(); });
                });
                return;
            }
            _this.tableStatisticTooltips = tableStatistic.stats.reduce(function (acc, cur) {
                acc[cur.columnName] = _this._getTableColumnStatisticTooltipContent(cur);
                return acc;
            }, {});
            _this._columnStats = tableStatistic.stats.reduce(function (acc, cur) {
                acc[cur.columnName] = cur;
                return acc;
            }, {});
        });
    };
    TableViewComponent.prototype.fillStatisticTooltips = function (status) {
        var _this = this;
        this.table && this.table.columns.map(function (col) {
            if (_this._isColumnNumeric(col)) {
                _this.tableStatisticTooltips[col.name] = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].tableStats.status.labels[status] || status;
            }
        });
    };
    TableViewComponent.prototype.loadDataSet = function () {
        var _this = this;
        // get dataset
        if (this.table && this.table.status === this.config.table.status.values.ACTIVE) {
            this.table.datasetId && this.tables.getDataset(this.table.id, this.tableViewForm.value).subscribe(function (dataset) {
                _this.tableDataset = dataset;
            });
        }
    };
    TableViewComponent.prototype.fillTablesForm = function (form, table) {
        var canUpdate = this.acl.canUpdateTable(table);
        var tableUpdateFormData = {
            name: table.name,
            variableTypes: table.columns.map(function (column) { return column.variableType; }),
            columnTypes: table.columns.map(function (column) { return column.columnType; }),
        };
        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].fillForm(form, tableUpdateFormData, !canUpdate);
        this.tableEditForm.markAsPristine();
    };
    TableViewComponent.prototype._getTableColumnStatisticTooltipContent = function (tableColumnStatistic) {
        return "\n      <table class='graph-info'>\n        <tr><td>Name</td><td>" + tableColumnStatistic.columnName + "</td></tr>\n        <tr><td>Min</td><td>" + this.decimalPipe.transform(tableColumnStatistic.min, '1.0-3') + "</td></tr>\n        <tr><td>Max</td><td>" + this.decimalPipe.transform(tableColumnStatistic.max, '1.0-3') + "</td></tr>\n        <tr><td>Avg</td><td>" + this.decimalPipe.transform(tableColumnStatistic.avg, '1.0-3') + "</td></tr>\n        <tr><td>Std</td><td>" + this.decimalPipe.transform(tableColumnStatistic.std, '1.0-3') + "</td></tr>\n        <!-- tr><td>Std Population</td><td>" + tableColumnStatistic.stdPopulation + "</td></tr -->\n        <tr><td>Median</td><td>" + this.decimalPipe.transform(tableColumnStatistic.median, '1.0-3') + "</td></tr>\n      </table>\n    ";
    };
    TableViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'table-view',
            providers: [
                __WEBPACK_IMPORTED_MODULE_6__angular_common__["d" /* DecimalPipe */],
            ],
            template: "\n    <asset-operations [type]=\"config.asset.values.TABLE\" [selectedItems]=\"[table]\" (onDelete)=\"onDropTable()\"></asset-operations>\n    <app-spinner [visibility]=\"!table\"></app-spinner>\n    <div class=\"row\">\n      <div class=\"col-md-12 brand-tab\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <app-input [label]=\"'Table Name'\" [control]=\"tableEditForm.controls['name']\"></app-input>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"btn-group pull-right\" role=\"group\">\n              <button type=\"button\" class=\"btn btn-primary\"\n                [disabled]=\"tableEditForm.invalid || tableEditForm.pristine || tableEditForm.disabled || (_savingObserver.active | async)\"\n                (click)=\"saveTable()\">\n                  Update&nbsp;<i class=\"glyphicon glyphicon-ok\"></i></button>\n              <button *mocksOnly=\"true\" type=\"button\" class=\"btn btn-primary\"\n                (click)=\"_showStats = !_showStats\">\n                  {{_showStats ? 'Hide stats' : 'Show stats'}}</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf=\"table\" class=\"row\">\n      <div *ngIf=\"_showStats\" class=\"col-md-6 col-md-push-6\">\n        <app-spinner [visibility]=\"!_columnStats\"></app-spinner>\n        <div *ngIf=\"_columnStats\" class=\"panel\">\n          <div class=\"panel-heading\"><h3 class=\"panel-title\">Statistics</h3></div>\n          <div class=\"panel-body\">\n            <app-tabs [tabs]=\"['Column Statistics', 'Scatter Matrix']\" [(active)]=\"activeTab\" ></app-tabs>\n            <div [hidden]=\"activeTab !== 0\">\n              <app-select [label]=\"'Column'\" [(value)]=\"_statsColumn\"\n                [options]=\"table.columns | tableColumnSelectOptions\"></app-select>\n\n              <ng-template [ngIf]=\"_statsColumn && _columnStats[_statsColumn]\">\n                <dl class=\"dl-horizontal\" *ngIf=\"_statsColumn | apply: _findColumn | apply: _isColumnNumeric\">\n                  <dt>Min</dt>\n                  <dd>{{_columnStats[_statsColumn].min | number: '1.0-3'}}</dd>\n                  <dt>Max</dt>\n                  <dd>{{_columnStats[_statsColumn].max | number: '1.0-3'}}</dd>\n                  <dt>Average</dt>\n                  <dd>{{_columnStats[_statsColumn].avg | number: '1.0-3'}}</dd>\n                  <dt>Std. deviation</dt>\n                  <dd>{{_columnStats[_statsColumn].std | number: '1.0-3'}}</dd>\n                  <dt>Median</dt>\n                  <dd>{{_columnStats[_statsColumn].median | number: '1.0-3'}}</dd>\n                </dl>\n                <canvas height=\"9\" width=\"16\"\n                  [table-column]=\"_statsColumn | apply: _findColumn\"\n                  [table-column-histogram]=\"_columnStats[_statsColumn].histogram\"\n                ></canvas>\n              </ng-template>\n            </div>\n            <div [hidden]=\"activeTab !== 1\">\n              <table-scatter-plot-matrix\n                *ngIf=\"activeTab === 1\"\n                [table]=\"table\"\n              ></table-scatter-plot-matrix>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div [ngSwitch]=\"table.status\" [ngClass]=\"_showStats ? 'col-md-6 col-md-pull-6' : 'col-md-12'\">\n        <process-indicator *ngSwitchCase=\"config.table.status.values.SAVING\"\n          [process]=\"processes.data['targets'].tables[table.id]\"></process-indicator>\n\n        <error-indicator *ngSwitchCase=\"config.table.status.values.ERROR\"\n          [process]=\"processes.data['targets'].tables[table.id]\" [target]=\"'table'\"></error-indicator>\n\n        <div *ngSwitchCase=\"config.table.status.values.ACTIVE\">\n          <app-spinner [visibility]=\"!tableDataset\"></app-spinner>\n          <div class=\"row\">\n            <div class=\"col-md-12\">\n              <div class=\"p0 form-control brand-control\">\n                <div class=\"row\">\n                  <div class=\"col-md-6 ellipsis\">\n                    <strong>{{tableEditForm.controls['name'].value}}</strong>\n                  </div>\n                  <div class=\"col-md-6\" *ngIf=\"tableDataset\">\n                    <div class=\"pull-right\">\n                      {{(tableDataset.count || 0) | pluralize:({other: '{} rows', '0': 'No rows', '1': '{} row'})}}\n                      <sort-columns [columns]=\"table.columns | tableColumnSelectOptions\"\n                        [control]=\"tableViewForm.controls['order']\"></sort-columns>\n                    </div>\n                    <div class=\"pull-right\">\n                      <app-pagination [page]=\"tableViewForm.controls['page']\"\n                        [pageSize]=\"tableViewForm.controls['page_size']\"\n                        [currentPageSize]=\"tableDataset.data.length\"\n                        [rowsCount]=\"tableDataset.count\">\n                      </app-pagination>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div *ngIf=\"tableDataset\" [adaptiveHeight]=\"{minHeight: 450}\" class=\"table-scroll\">\n            <!--{{tableViewForm.value | json}}-->\n            <table class=\"table table-dataset table-bordered\">\n              <thead style=\"border-bottom: 2px gray solid;\">\n                <tr dnd-sortable-container [sortableData]=\"columnIndexes\">\n                  <th class=\"text-center\"\n                    width=\"{{100 / table.columns.length}}%\"\n                    *ngFor=\"let columnIdx of columnIndexes; let i = index\"\n                    tooltip data-html=\"true\" data-placement=\"bottom\" data-container=\"body\"\n                    [tooltipTitle]=\"_isColumnNumeric(table.columns[columnIdx]) ? tableStatisticTooltips[table.columns[columnIdx].name] : ''\"\n                    dnd-sortable\n                    [sortableIndex]=\"i\"\n                    (onDropSuccess)=\"onDropSuccess()\"\n                    (dragstart)=\"onDragStart($event)\"\n                    [grid-sort]=\"{ alias: table.columns[columnIdx].name, name: table.columns[columnIdx].displayName }\"\n                    [grid-sort-control]=\"tableViewForm.controls['order']\">\n                    {{table.columns[columnIdx].displayName}}\n                  </th>\n                </tr>\n                <tr>\n                  <th *ngFor=\"let columnIdx of columnIndexes\" class=\"text-center text-muted\">{{config.table.column.dataType.labels[table.columns[columnIdx].dataType] || 'Undefined'}}</th>\n                </tr>\n                <tr>\n                  <th *ngFor=\"let columnIdx of columnIndexes\" class=\"text-center text-muted tables-select-control\"\n                    [ngSwitch]=\"table.columns[columnIdx] | apply: _canChangeVariableType\">\n                    <span *ngSwitchCase=\"false\">{{config.table.column.variableType.labels[table.columns[columnIdx].variableType] || 'Undefined'}}</span>\n                    <select *ngSwitchCase=\"true\"\n                      [formControl]=\"tableEditForm.controls['variableTypes']['controls'][columnIdx]\"\n                      class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of variableTypes\" [value]=\"item.id\">\n                        {{ item.text }}\n                      </option>\n                    </select>\n                  </th>\n                </tr>\n                <tr *mocksOnly=\"true\">\n                  <th *ngFor=\"let columnIdx of columnIndexes\" class=\"text-center text-muted tables-select-control\"\n                    [ngSwitch]=\"table.columns[columnIdx] | apply: _canChangeColumnType\">\n                    <span *ngSwitchCase=\"false\">{{config.table.column.columnType.labels[table.columns[columnIdx].columnType] || 'Undefined'}}</span>\n                    <select *ngSwitchCase=\"true\"\n                      [formControl]=\"tableEditForm.controls['columnTypes']['controls'][columnIdx]\"\n                      class=\"form-control c-select\">\n                      <option [value]=\"null\" disabled>- Select -</option>\n                      <option *ngFor=\"let item of columnTypes\" [value]=\"item.id\">\n                        {{ item.text }}\n                      </option>\n                    </select>\n                  </th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr *ngFor=\"let row of tableDataset.data\">\n                  <td *ngFor=\"let columnIdx of columnIndexes\"\n                      [ngClass]=\"{\n                          'text-left': table.columns[columnIdx].align === config.table.column.align.values.LEFT,\n                          'text-center': table.columns[columnIdx].align === config.table.column.align.values.CENTER,\n                          'text-right': table.columns[columnIdx].align === config.table.column.align.values.RIGHT\n                      }\"\n                      [ngSwitch]=\"table.columns[columnIdx].dataType\">\n                    <ng-template [ngSwitchCase]=\"config.table.column.dataType.values.DOUBLE\">\n                      <span [title]=\"row[columnIdx] | numberTitle: '1.0-3'\">\n                        {{(row[columnIdx] || null) | number: '1.0-3'}}\n                      </span>\n                    </ng-template>\n                    <ng-template ngSwitchDefault>{{row[columnIdx] | truncate:50}}</ng-template>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_12__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_11__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_10__services_acl_service__["a" /* AclService */]])
    ], TableViewComponent);
    return TableViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/tables/tables.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TablesModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__table_upload_modal_component__ = __webpack_require__("../../../../../src/app/tables/table-upload-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__table_view_component__ = __webpack_require__("../../../../../src/app/tables/table-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__table_view_embed_component__ = __webpack_require__("../../../../../src/app/tables/table-view-embed.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__table_status_color_directive__ = __webpack_require__("../../../../../src/app/tables/table-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__table_column_histogram_directive__ = __webpack_require__("../../../../../src/app/tables/table-column-histogram.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__table_scatter_plot_matrix_component__ = __webpack_require__("../../../../../src/app/tables/table-scatter-plot-matrix.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__tables_pipes__ = __webpack_require__("../../../../../src/app/tables/tables.pipes.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};













var TablesModule = (function () {
    function TablesModule() {
    }
    TablesModule_1 = TablesModule;
    TablesModule.forRoot = function () {
        return {
            ngModule: TablesModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_8__services_table_service__["a" /* TableService */],
            ],
        };
    };
    TablesModule = TablesModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
            ],
            declarations: [
                // Components
                __WEBPACK_IMPORTED_MODULE_6__table_view_component__["a" /* TableViewComponent */],
                __WEBPACK_IMPORTED_MODULE_7__table_view_embed_component__["a" /* TableViewEmbeddableComponent */],
                __WEBPACK_IMPORTED_MODULE_5__table_upload_modal_component__["a" /* TableUploadModalComponent */],
                __WEBPACK_IMPORTED_MODULE_11__table_scatter_plot_matrix_component__["a" /* TableScatterPlotMatrixComponent */],
                // Directives
                __WEBPACK_IMPORTED_MODULE_9__table_status_color_directive__["a" /* TableStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_10__table_column_histogram_directive__["a" /* TableColumnHistogramDirective */],
                // Pipes
                __WEBPACK_IMPORTED_MODULE_12__tables_pipes__["b" /* TableColumnSelectOptionsPipe */],
                __WEBPACK_IMPORTED_MODULE_12__tables_pipes__["a" /* TableColumnDisplayNamePipe */],
            ],
            exports: [
                // Components
                __WEBPACK_IMPORTED_MODULE_6__table_view_component__["a" /* TableViewComponent */],
                __WEBPACK_IMPORTED_MODULE_7__table_view_embed_component__["a" /* TableViewEmbeddableComponent */],
                __WEBPACK_IMPORTED_MODULE_5__table_upload_modal_component__["a" /* TableUploadModalComponent */],
                // Directives
                __WEBPACK_IMPORTED_MODULE_9__table_status_color_directive__["a" /* TableStatusColorDirective */],
                // Pipes
                __WEBPACK_IMPORTED_MODULE_12__tables_pipes__["b" /* TableColumnSelectOptionsPipe */],
                __WEBPACK_IMPORTED_MODULE_12__tables_pipes__["a" /* TableColumnDisplayNamePipe */],
            ],
        })
    ], TablesModule);
    return TablesModule;
    var TablesModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/tables/tables.pipes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return TableColumnSelectOptionsPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableColumnDisplayNamePipe; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};

var TableColumnSelectOptionsPipe = (function () {
    function TableColumnSelectOptionsPipe() {
    }
    /**
     * @param {ITableColumn[]} value
     * @returns {AppSelectOptionData[]}
     */
    TableColumnSelectOptionsPipe.prototype.transform = function (value) {
        return value ? value.map(function (item) {
            return {
                id: item.name,
                text: item.displayName || item.name,
            };
        }) : [];
    };
    TableColumnSelectOptionsPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'tableColumnSelectOptions' })
    ], TableColumnSelectOptionsPipe);
    return TableColumnSelectOptionsPipe;
}());

var TableColumnDisplayNamePipe = (function () {
    function TableColumnDisplayNamePipe() {
    }
    /**
     * @param {string} columnName
     * @param {ITable} table
     * @returns {string}
     */
    TableColumnDisplayNamePipe.prototype.transform = function (columnName, table) {
        var column = table.columns.find(function (column) { return column.name === columnName; });
        return column ? column.displayName || columnName : columnName;
    };
    TableColumnDisplayNamePipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'tableColumnDisplayName' })
    ], TableColumnDisplayNamePipe);
    return TableColumnDisplayNamePipe;
}());



/***/ }),

/***/ "../../../../../src/app/train/confusion-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ConfusionChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ConfusionChartComponent = (function () {
    function ConfusionChartComponent() {
    }
    ConfusionChartComponent.prototype.ngOnChanges = function () {
        var _this = this;
        var classes = this.data.map(function (_) { return _.className; });
        if (classes.length !== 2) {
            throw new Error('I can only restore 2-class matrix');
        }
        var matrix = [
            { actual: 0, predicted: 0, count: this.data[0].truePositive },
            { actual: 0, predicted: 1, count: this.data[0].falseNegative },
            { actual: 1, predicted: 0, count: this.data[0].falsePositive },
            { actual: 1, predicted: 1, count: this.data[0].trueNegative },
        ];
        var data = matrix.map(function (r, i) { return _this._prepareBox(r, i, classes); });
        var layout = {
            autosize: true,
            scene: {
                xaxis: {
                    autotick: false,
                    dtick: 1,
                    tick0: 0,
                    type: 'linear',
                    zeroline: false,
                    title: 'Actual'
                },
                yaxis: {
                    autotick: false,
                    dtick: 1,
                    tick0: 0,
                    type: 'linear',
                    zeroline: false,
                    title: 'Predicted'
                },
                zaxis: {
                    type: 'linear',
                    zeroline: false,
                    title: 'Count'
                }
            },
            title: 'Confusion matrix',
            width: '100%',
            height: 480
        };
        var defaultPlotlyConfiguration = {
            displayModeBar: false,
            displaylogo: false,
        };
        try {
            Plotly.purge(this.selector.nativeElement);
        }
        catch (e) {
            console.error("plotly.js purge error: " + e);
        }
        try {
            Plotly.newPlot(this.selector.nativeElement, data, layout, defaultPlotlyConfiguration);
        }
        catch (e) {
            console.error("plotly.js newPlot error: " + e);
        }
    };
    ConfusionChartComponent.prototype._prepareBox = function (row, i, classes) {
        var colors = [
            'rgb(300,100,200)',
            'rgb(100,200,100)',
            'rgb(100,100,100)',
            'rgb(50,200,150)',
        ];
        var height = row.count, x0 = row.actual - 0.45, x1 = row.actual + 0.45, y0 = row.predicted - 0.45, y1 = row.predicted + 0.45;
        return {
            opacity: 1,
            color: colors[i % colors.length],
            type: 'mesh3d',
            name: "A " + classes[row.actual] + " P " + classes[row.predicted],
            hoverinfo: 'z+name',
            flatshading: true,
            x: [x0, x1, x1, x0, x0, x1, x1, x0],
            y: [y0, y0, y1, y1, y0, y0, y1, y1],
            z: [0, 0, 0, 0, height, height, height, height],
            i: [0, 1, 1, 2, 2, 3, 3, 0, 0, 0, 4, 4],
            j: [1, 5, 2, 6, 3, 7, 0, 4, 2, 3, 5, 6],
            k: [4, 4, 5, 5, 6, 6, 7, 7, 1, 2, 6, 7],
        };
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ConfusionChartComponent.prototype, "data", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('selector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ConfusionChartComponent.prototype, "selector", void 0);
    ConfusionChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'confusion-chart',
            template: "\n    <div #selector style=\"width:100%;height:100%\"></div>"
        })
    ], ConfusionChartComponent);
    return ConfusionChartComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/cv-model-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVModelCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__interfaces_album_interface__ = __webpack_require__("../../../../../src/app/interfaces/album.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var CVModelCreateComponent = (function () {
    function CVModelCreateComponent(router, cvModels) {
        this.router = router;
        this.cvModels = cvModels;
        this.changeValidity = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.activeTab = 0;
        this.responseOptions = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].cvModel.type.list.map(function (_) {
            return {
                id: _,
                text: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].cvModel.type.labels[_],
            };
        });
    }
    CVModelCreateComponent.prototype.ngOnChanges = function (changes) {
        if ('inputData' in changes) {
            this.initForm();
        }
    };
    CVModelCreateComponent.prototype.submit = function () {
        var _this = this;
        var model = {
            name: this.form.value.name,
            input: this.form.value.input,
            type: this.form.value.type,
            outputAlbumName: this.form.value.outputAlbumName,
            testInput: this.form.value.testInput,
        };
        return this.cvModels.create(model).do(function (model) {
            _this.router.navigate(['/desk', 'train', 'cv', model.id]);
        });
    };
    CVModelCreateComponent.prototype.initForm = function () {
        var _this = this;
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            id: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            input: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](this.inputData.id, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            type: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].cvModel.type.values.TAGS, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            outputAlbumName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            testInput: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
        this.form.valueChanges.subscribe(function () {
            _this.changeValidity.emit(_this.form.valid);
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], CVModelCreateComponent.prototype, "inputData", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], CVModelCreateComponent.prototype, "changeValidity", void 0);
    CVModelCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-cv-model-create',
            template: "\n    <form [formGroup]=\"form\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Name'\" [control]=\"form.controls['name']\"></app-input>\n        </div>\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Results Name'\" [control]=\"form.controls['outputAlbumName']\"></app-input>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <library-selector\n            [inputLabel]=\"'Test Data'\"\n            [available]=\"[config.asset.values.ALBUM]\"\n            [value]=\"{id: form.controls['testInput'].value, entity: config.asset.values.ALBUM}\"\n            (valueChange)=\"form.controls['testInput'].setValue($event.id);\"\n            [title]=\"'Test Data'\"></library-selector>\n        </div>\n        <div *ngIf=\"inputData.labelMode === config.album.labelMode.values.LOCALIZATION\" class=\"col-md-6\">\n          <app-select [label]=\"'Response'\" [control]=\"form.controls['type']\" [options]=\"responseOptions\"></app-select>\n        </div>\n      </div>\n      <div class=\"tabpanel\">\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-tabs\" role=\"tablist\">\n          <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n            <a (click)=\"activeTab = 0\">Input Album</a>\n          </li>\n          <li *ngIf=\"!!form.controls['testInput'].value\"\n            role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n            <a (click)=\"activeTab = 1\">Test Input</a>\n          </li>\n        </ul>\n      </div>\n      <!-- Tab panes -->\n      <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\">\n        <album-view-embed\n          [hidden]=\"activeTab !== 0\"\n          [albumId]=\"form.controls['input'].value\"></album-view-embed>\n        <album-view-embed *ngIf=\"!!form.controls['testInput'].value\"\n          [hidden]=\"activeTab !== 1\"\n          [albumId]=\"form.controls['testInput'].value\"></album-view-embed>\n      </div>\n    </form>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_4__services_cv_model_service__["a" /* CVModelService */]])
    ], CVModelCreateComponent);
    return CVModelCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/cv-model-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVModelStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var CVModelStatusColorDirective = (function () {
    function CVModelStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    CVModelStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.ERROR ? 'dot-danger' :
            this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.TRAINING ? 'dot-warning' :
                this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.PREDICTING ? 'dot-warning' :
                    this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.CANCELLED ? 'dot-danger' : 'dot-primary';
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('cv-model-status-color'),
        __metadata("design:type", String)
    ], CVModelStatusColorDirective.prototype, "modelStatusColor", void 0);
    CVModelStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[cv-model-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], CVModelStatusColorDirective);
    return CVModelStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/train/cv-model-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVModelSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var CVModelSummaryComponent = (function () {
    function CVModelSummaryComponent() {
        this._F1Metric = function (row) {
            var TPx2 = row.truePositive * 2;
            return TPx2 > 0
                ? TPx2 / (TPx2 + row.falsePositive + row.falseNegative)
                : 0;
        };
        this._precisionMetric = function (row) {
            return row.truePositive > 0
                ? row.truePositive / (row.truePositive + row.falsePositive)
                : 0;
        };
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], CVModelSummaryComponent.prototype, "summary", void 0);
    CVModelSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'cv-model-summary',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <div *ngIf=\"!summary\" class=\"text-center\">\n      Model has no summary\n    </div>\n    <dl *ngIf=\"summary\" class=\"dl-horizontal\">\n      <ng-template [ngIf]=\"summary.tags\">\n        <dt>Labels</dt>\n        <dd>\n          <table class=\"table table-bordered table-sm\">\n            <thead>\n            <tr>\n              <th>Label</th>\n              <th>Actual count</th>\n              <th>Predicted count</th>\n              <th>Precision</th>\n              <th>F1 Score</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr *ngFor=\"let row of summary.tags\">\n              <td>{{row.label}}</td>\n              <td>{{row.truePositive + row.falseNegative}}</td>\n              <td>{{row.truePositive + row.falsePositive}}</td>\n              <td>{{row | apply: _precisionMetric | percent}}</td>\n              <td>{{row | apply: _F1Metric | number: '1.0-3'}}</td>\n            </tr>\n            </tbody>\n          </table>\n        </dd>\n      </ng-template>\n    </dl>\n  "
        })
    ], CVModelSummaryComponent);
    return CVModelSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/cv-model-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CVModelViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var CVModelViewComponent = (function () {
    function CVModelViewComponent(route, router, models, events, processes, acl) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.models = models;
        this.events = events;
        this.processes = processes;
        this.acl = acl;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.activeTab = 2;
        this.modelEditForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
        });
        this.eventSubscription = this.events.subscribe(function (event) {
            // process service emits complete and then ui reload model-context
            // we can identify model's table by model.output
            if (event.type === 'PROCESS_COMPLETED' && _this.model.output === event.data.id) {
                _this._loader.load(_this.model.id);
            }
        });
        this._loader = new __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.models.get(id); });
        this._loader.subscribe(function (model) {
            _this.setModel(model);
        });
    }
    CVModelViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.editName = false;
        this.modelProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.CV_MODEL]];
        this.albumProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.ALBUM]];
        this.route.params.forEach(function (params) {
            _this._loader.load(params['modelId']);
        });
    };
    CVModelViewComponent.prototype.setModel = function (model) {
        var _this = this;
        this.model = model;
        this.fillModelsForm(this.modelEditForm, model);
        this.activeTab = 2;
        if (model.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].cvModel.status.values.TRAINING) {
            this.processes.getByTarget(model.id, __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__["a" /* IAsset */].Type.CV_MODEL).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this._loader.load(model.id);
                });
            });
        }
        else if (model.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].cvModel.status.values.PREDICTING) {
            this.processes.getByTarget(model.testOutput, __WEBPACK_IMPORTED_MODULE_6__interfaces_common_interface__["a" /* IAsset */].Type.ALBUM).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this._loader.load(model.id);
                });
            });
        }
    };
    CVModelViewComponent.prototype.ngOnDestroy = function () {
        if (this.processSubscription) {
            this.processSubscription.unsubscribe();
        }
        this.eventSubscription.unsubscribe();
    };
    CVModelViewComponent.prototype.submit = function () {
        var _this = this;
        this.editName = false;
        this.models.update(this.model.id, {
            name: this.modelEditForm.value.name
        }).subscribe(function (_) {
            _this._loader.load(_this.model.id);
        });
    };
    CVModelViewComponent.prototype.cancelModel = function () {
        var _this = this;
        var process = this.modelProgresses[this.model.id];
        if (!process) {
            return;
        }
        this.processes.cancel(process).subscribe(function (_) {
            _this._loader.load(_this.model.id);
        });
    };
    CVModelViewComponent.prototype._onModelDeleted = function () {
        this.router.navigate(['/desk', 'train']);
    };
    CVModelViewComponent.prototype.fillModelsForm = function (form, model) {
        var canUpdate = this.acl.canUpdateCVModel(model);
        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].fillForm(form, model, !canUpdate);
    };
    CVModelViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'cv-model-view',
            template: "\n    <asset-operations [type]=\"config.asset.values.CV_MODEL\" [selectedItems]=\"[model]\"\n      (onDelete)=\"_onModelDeleted()\"></asset-operations>\n    <app-spinner [visibility]=\"!model\"></app-spinner>\n    <form *ngIf=\"model\" [formGroup]=\"modelEditForm\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Name'\" [control]=\"modelEditForm.controls['name']\"></app-input>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"btn-group pull-right\" role=\"group\">\n            <button *ngIf=\"model?.status === config.cvModel.status.values.TRAINING\" type=\"button\"\n              class=\"btn btn-md btn-clear\"\n              (click)=\"cancelModel()\">Cancel</button>\n            <button type=\"button\"\n              [disabled]=\"modelEditForm.invalid || modelEditForm.disabled || modelEditForm.pristine\"\n              (click)=\"submit()\"\n              class=\"btn btn-md btn-apply\">Apply</button>\n          </div>\n        </div>\n      </div>\n      <div class=\"tabpanel\">\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-tabs\" role=\"tablist\">\n          <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n            <a (click)=\"activeTab = 0\">Input Album</a>\n          </li>\n          <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n            <a (click)=\"activeTab = 1\">Output Album</a>\n          </li>\n          <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n            <a (click)=\"activeTab = 2\">Model Summary Statistics</a>\n          </li>\n          <ng-template [ngIf]=\"model?.testInput\">\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 3}\">\n              <a (click)=\"activeTab = 3\">Test Input</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 4}\">\n              <a (click)=\"activeTab = 4\">Test Output</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 5}\">\n              <a (click)=\"activeTab = 5\">Test Summary Statistics</a>\n            </li>\n          </ng-template>\n        </ul>\n      </div>\n      <!-- Tab panes -->\n      <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\"\n        *ngIf=\"model\"\n        [ngSwitch]=\"model.status === config.cvModel.status.values.ACTIVE\"\n      >\n        <album-view-embed\n          [hidden]=\"activeTab !== 0\"\n          [albumId]=\"model.input\"\n        ></album-view-embed>\n\n        <div *ngSwitchCase=\"false\"\n          [hidden]=\"activeTab < 1\"\n          [ngSwitch]=\"model.status\"\n        >\n          <process-indicator *ngSwitchCase=\"config.cvModel.status.values.TRAINING\"\n            [process]=\"[modelProgresses[model.id], albumProgresses[model.testOutput || model.output]] | combineProcesses\"\n            [message]=\"'Training cv-model'\"></process-indicator>\n          <process-indicator *ngSwitchCase=\"config.cvModel.status.values.PREDICTING\"\n            [process]=\"[modelProgresses[model.id], albumProgresses[model.testOutput || model.output]] | combineProcesses\"\n            [message]=\"'Generating cv-model results'\"></process-indicator>\n          <error-indicator *ngSwitchCase=\"config.cvModel.status.values.ERROR\"\n            [target]=\"'model'\" [process]=\"modelProgresses[model.id]\"></error-indicator>\n          <error-indicator *ngSwitchCase=\"config.cvModel.status.values.CANCELLED\"\n            [title]=\"'Cancelled'\" [message]=\"'This model training has been cancelled'\"></error-indicator>\n        </div>\n\n        <ng-template [ngSwitchCase]=\"true\">\n          <album-view-embed\n            [hidden]=\"activeTab !== 1\"\n            [albumId]=\"model.output\"\n          ></album-view-embed>\n\n          <div class=\"flex-static\"\n            [hidden]=\"activeTab !== 2\"\n          >\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <cv-model-summary [summary]=\"model?.summary\"></cv-model-summary>\n              </div>\n            </div>\n          </div>\n          <ng-template [ngIf]=\"model?.testInput\">\n            <album-view-embed\n              [hidden]=\"activeTab !== 3\"\n              [albumId]=\"model.testInput\"\n            ></album-view-embed>\n            <album-view-embed\n              [hidden]=\"activeTab !== 4\"\n              [albumId]=\"model.testOutput\"\n            ></album-view-embed>\n            <div class=\"flex-static\"\n              [hidden]=\"activeTab !== 5\"\n              *ngIf=\"model.testSummary && model.status === config.cvModel.status.values.ACTIVE\"\n            >\n              <div class=\"panel\">\n                <div class=\"panel-body\">\n                  <cv-model-summary [summary]=\"model?.testSummary\"></cv-model-summary>\n                </div>\n              </div>\n            </div>\n          </ng-template>\n        </ng-template>\n      </div>\n    </form>"
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_10__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_9__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_8__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_7__services_acl_service__["a" /* AclService */]])
    ], CVModelViewComponent);
    return CVModelViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/label.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TrainLabelComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__charts_d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var TrainLabelComponent = (function () {
    function TrainLabelComponent() {
        this.styleWidth = '100%';
        this.styleHeight = '100%';
    }
    TrainLabelComponent.prototype.ngOnChanges = function (changes) {
        if (this._svgElement) {
            if (changes['label'] && changes['label'].currentValue !== changes['label'].previousValue) {
                this.drawChart();
            }
        }
    };
    TrainLabelComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    TrainLabelComponent.prototype.drawChart = function () {
        var svg = new __WEBPACK_IMPORTED_MODULE_1__charts_d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        svg.margin = { top: 10, left: 0, bottom: 15, right: 10 };
        this._drawDelimiter(svg);
    };
    TrainLabelComponent.prototype._drawDelimiter = function (svg) {
        // label
        __WEBPACK_IMPORTED_MODULE_1__charts_d3_chart_helper__["a" /* D3ChartHelper */].addText(svg.chartArea.node(), [true], 'text-label', 10, 17, this.label);
        var oldLineDelimiter = svg.chartArea.selectAll('line.delimiter').data([true]);
        oldLineDelimiter.enter()
            .append('line')
            .attr('class', 'delimiter')
            .attr('x1', 0)
            .attr('y1', 0)
            .attr('x2', svg.chartSize.width)
            .attr('y2', 0);
        var pathGroup = svg.chartArea.selectAll('g.path-group').data([true]);
        pathGroup.enter()
            .append('g')
            .attr('class', 'path-group')
            .attr('transform', "translate(" + (svg.chartSize.width - 30) + ", -10)");
        var oldPathDelimiter = pathGroup.selectAll('path.delimiter').data([true]);
        oldPathDelimiter.enter()
            .append('path')
            .attr('class', 'delimiter')
            .attr('d', 'M 0 10 L 30 10 L 25 15 L 5 15 Z');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], TrainLabelComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], TrainLabelComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], TrainLabelComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], TrainLabelComponent.prototype, "_svgElement", void 0);
    TrainLabelComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'train-label',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'></svg>\n  ",
        })
    ], TrainLabelComponent);
    return TrainLabelComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var ModelContextComponent = (function () {
    function ModelContextComponent(models, cvModels, processes, events, modals) {
        var _this = this;
        this.models = models;
        this.cvModels = cvModels;
        this.processes = processes;
        this.events = events;
        this.modals = modals;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.modelList = [];
        this.cvModelList = [];
        this.menuOpen = [true, true];
        this._subscriptions = [];
        this._modelsLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.models.list(); });
        this._cvModelsLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.cvModels.list(); });
        this._modelsLoader.subscribe(function (data) {
            _this.modelList = data.data;
            var trainingModels = data.data.filter(function (model) { return model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.TRAINING || model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.PREDICTING; });
            _this.watchModelProcesses(trainingModels);
        });
        this._cvModelsLoader.subscribe(function (data) {
            _this.cvModelList = data.data;
            var trainingModels = data.data.filter(function (model) { return model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.TRAINING || model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.PREDICTING; });
            _this.watchCVModelProcesses(trainingModels);
        });
    }
    ModelContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.cvModelProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL]];
        this.modelProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.MODEL]];
        this.tableProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.TABLE]];
        this.albumProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM]];
        this._modelsLoader.load();
        this._cvModelsLoader.load();
        this.eventsSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_MODEL_LIST') {
                _this._modelsLoader.load();
            }
            if (event.type === 'UPDATE_CV_MODEL_LIST') {
                _this._cvModelsLoader.load();
            }
        });
    };
    ModelContextComponent.prototype.watchModelProcesses = function (models) {
        var _this = this;
        models.forEach(function (model) {
            switch (model.status) {
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.TRAINING:
                    _this._watchProcess(model.id, __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.MODEL);
                    break;
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.PREDICTING:
                    _this._watchProcess(model.output, __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.TABLE);
                    break;
            }
        });
    };
    ModelContextComponent.prototype.watchCVModelProcesses = function (models) {
        var _this = this;
        models.forEach(function (model) {
            switch (model.status) {
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.TRAINING:
                    _this._watchProcess(model.id, __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.CV_MODEL);
                    break;
                case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].cvModel.status.values.PREDICTING:
                    _this._watchProcess(model.testOutput, __WEBPACK_IMPORTED_MODULE_3__interfaces_common_interface__["a" /* IAsset */].Type.ALBUM);
                    break;
            }
        });
    };
    ModelContextComponent.prototype.onDeleteModel = function (model) {
        var _this = this;
        this.modals.confirm(__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].deletionMessage).filter(function (_) { return _; }).subscribe(function () {
            _this.models.delete(model);
        });
    };
    ModelContextComponent.prototype.ngOnDestroy = function () {
        this._subscriptions.forEach(function (_a) {
            var _ = _a[0], subscription = _a[1];
            return subscription.unsubscribe();
        });
        this.eventsSubscription.unsubscribe();
    };
    ModelContextComponent.prototype.onDeleteCVModel = function (model) {
        this.cvModels.delete(model);
    };
    ModelContextComponent.prototype._watchProcess = function (targetId, targetType) {
        var _this = this;
        this.processes.getByTarget(targetId, targetType).subscribe(function (process) {
            if (!_this._findSubscription(process.id)) {
                _this._addSubscription(process, _this.processes.subscribe(process, function (curProcess) {
                    switch (curProcess.target) {
                        case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.CV_MODEL:
                        case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.ALBUM:
                            _this._cvModelsLoader.load();
                            break;
                        case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.MODEL:
                        case __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.TABLE:
                            _this._modelsLoader.load();
                            break;
                        default:
                            throw new Error('Unexpected target');
                    }
                    _this._removeSubscription(process);
                }));
            }
        });
    };
    ModelContextComponent.prototype._addSubscription = function (process, subscription) {
        this._subscriptions.push([process, subscription]);
    };
    ModelContextComponent.prototype._findSubscription = function (id) {
        return (this._subscriptions).filter(function (_a) {
            var item = _a[0], _ = _a[1];
            return item.id === id;
        }).length > 0;
    };
    ModelContextComponent.prototype._removeSubscription = function (process) {
        var index = this._subscriptions.map(function (_a) {
            var item = _a[0], _ = _a[1];
            return item.id;
        }).indexOf(process.id);
        if (index > -1) {
            this._subscriptions[index][1].unsubscribe();
            this._subscriptions.splice(index, 1);
        }
    };
    ModelContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-model-context',
            template: "\n    <div class=\"group\">\n        <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" [routerLink]=\"['/desk', 'train', 'create']\">\n          Create New Model\n        </button>\n    </div>\n\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>Models</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of modelList\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li [routerLinkActive]=\"['active']\">\n                    <a *ngIf=\"item.status === config.model.status.values.ACTIVE\"\n                      [routerLink]=\"['/desk', 'train', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li>\n                    <a [routerLink]=\"['/desk', 'train', item.id, 'retrain']\"\n                      class=\"dropdown-item link\">\n                      Re-Train\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.model.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"onDeleteModel(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'train', item.id]\"\n                [title]=\"item.name\"\n                [model-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.model.status.labels[item.status]\">\n                {{item.name | truncate}}\n                <span *ngIf=\"item.status === config.model.status.values.TRAINING && modelProgresses[item.id]\">\n                  {{((modelProgresses[item.id].progress / 2) * 100).toFixed(0)}}%\n                </span>\n                <span *ngIf=\"item.status === config.model.status.values.PREDICTING && tableProgresses[item.output]\">\n                  {{((0.5 + tableProgresses[item.output].progress / 2) * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!modelList.length\"><a>No models</a></li>\n          </ul>\n        </li>\n        <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[1]}\">\n          <a (click)=\"menuOpen[1] = !menuOpen[1]\">\n            <i class=\"iconapp iconapp-models\"></i>\n            <span>CV Models</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of cvModelList\" class=\"dropdown\" dropdown [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li [routerLinkActive]=\"['active']\">\n                    <a *ngIf=\"item.status === config.cvModel.status.values.ACTIVE\"\n                      [routerLink]=\"['/desk', 'train', 'cv', item.id]\"\n                      class=\"dropdown-item link\">\n                      Preview\n                    </a>\n                  </li>\n                  <li *ngIf=\"item.status === config.cvModel.status.values.ACTIVE\" role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"onDeleteCVModel(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'train', 'cv', item.id]\"\n                [title]=\"item.name\"\n                [model-status-color]=\"item.status\"\n                tooltip\n                data-toggle=\"tooltip\"\n                [attr.data-original-title]=\"config.cvModel.status.labels[item.status]\">\n                {{item.name | truncate}}\n                <span *ngIf=\"item.status === config.cvModel.status.values.TRAINING && cvModelProgresses[item.id]\">\n                  {{((cvModelProgresses[item.id].progress / 2) * 100).toFixed(0)}}%\n                </span>\n                <span *ngIf=\"item.status === config.cvModel.status.values.PREDICTING && albumProgresses[item.output]\">\n                  {{((0.5 + albumProgresses[item.output].progress / 2) * 100).toFixed(0)}}%\n                </span>\n              </a>\n            </li>\n            <li *ngIf=\"!cvModelList.length\"><a>No models</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_7__services_cv_model_service__["a" /* CVModelService */],
            __WEBPACK_IMPORTED_MODULE_6__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__services_modal_service__["a" /* ModalService */]])
    ], ModelContextComponent);
    return ModelContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-create-advanced.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelCreateAdvancedComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ModelCreateAdvancedComponent = (function () {
    function ModelCreateAdvancedComponent() {
        var _this = this;
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.trainConfig = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */];
        this._expandedStage = null;
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_5__angular_common__["d" /* DecimalPipe */]('en-US');
        this._formatRange = function (range) {
            return range
                .map(function (_) { return _this._decimalPipe.transform(_, '1.0-5'); })
                .join(' to ');
        };
        this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            variableImportance: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            modelExplanation: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            stages: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](this.trainConfig.pipelineOrder, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].minLength[1]),
            techniques: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */](this.trainConfig.pipelineStage.list.reduce(function (acc, stage) {
                acc[stage] = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](_this.trainConfig.pipelineStage.defaultTechniques[stage] || _this.trainConfig.pipelineStage.techniques[stage]);
                return acc;
            }, {})),
            parameters: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */](this.trainConfig.stageTechnique.list.reduce(function (acc, technique) {
                acc[technique] = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */](_this.trainConfig.stageTechnique.params[technique].reduce(function (acc, param) {
                    if (param.type === 'categorical') {
                        acc[param.name] = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](param.options);
                    }
                    else if (param.type === 'continuous') {
                        acc[param.name] = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */]([param.min, param.max]);
                    }
                    return acc;
                }, {}));
                return acc;
            }, {})),
        });
        this.formSubscription = this.form.valueChanges.subscribe(function (value) {
            _this._emitValueChange(value);
        });
    }
    ModelCreateAdvancedComponent.prototype.ngOnChanges = function (changes) {
        if ('baseModel' in changes && this.baseModel) {
            this.form.patchValue(this.baseModel.trainOptions || {});
        }
        else {
            this._emitValueChange();
        }
    };
    ModelCreateAdvancedComponent.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    ModelCreateAdvancedComponent.prototype._toggleStageCollapse = function (stage) {
        this._expandedStage = (this._expandedStage === stage)
            ? null
            : stage;
    };
    ModelCreateAdvancedComponent.prototype._toggleStage = function (stage) {
        var formControl = this.form.controls['stages'];
        var currentStages = formControl.value || [];
        if (currentStages.indexOf(stage) >= 0) {
            if (__WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].requiredStages.indexOf(stage) < 0) {
                var newMetrics = currentStages.filter(function (_) { return _ !== stage; });
                formControl.setValue(newMetrics);
                if (this._expandedStage === stage) {
                    this._expandedStage = null;
                }
            }
        }
        else {
            formControl.setValue([stage].concat(currentStages));
        }
    };
    ModelCreateAdvancedComponent.prototype._toggleTechnique = function (stage, technique) {
        var formControl = this.form.controls['techniques'].controls[stage];
        var currentTechniques = formControl.value || [];
        if (currentTechniques.indexOf(technique) >= 0) {
            var newTechniques = currentTechniques.filter(function (_) { return _ !== technique; });
            formControl.setValue(newTechniques);
        }
        else {
            formControl.setValue(currentTechniques.concat([technique]));
        }
    };
    ModelCreateAdvancedComponent.prototype._emitValueChange = function (value) {
        var _this = this;
        if (value === void 0) { value = this.form.value; }
        value.parameters = this.trainConfig.stageTechnique.list.reduce(function (acc, technique) {
            var valuesHash = value.parameters[technique];
            acc[technique] = _this.trainConfig.stageTechnique.params[technique].map(function (param) {
                if (param.type === 'categorical') {
                    return {
                        name: param.name,
                        values: valuesHash[param.name],
                    };
                }
                else if (param.type === 'continuous') {
                    var _a = valuesHash[param.name], min = _a[0], max = _a[1];
                    return {
                        name: param.name,
                        min: min, max: max,
                    };
                }
            });
            return acc;
        }, {});
        this.valueChange.emit(value);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('baseModel'),
        __metadata("design:type", Object)
    ], ModelCreateAdvancedComponent.prototype, "baseModel", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModelCreateAdvancedComponent.prototype, "valueChange", void 0);
    ModelCreateAdvancedComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-create-advanced',
            template: "\n    <app-check [label]=\"'Generate Variable Importance Summary'\"\n      [control]=\"form.controls['variableImportance']\">\n    </app-check>\n    <app-check [label]=\"'Generate Model Explanation Columns'\"\n      [control]=\"form.controls['modelExplanation']\">\n    </app-check>\n    <h3>Define Pipeline Stages</h3>\n    <div class=\"panel-group\" role=\"tablist\">\n      <div *ngFor=\"let stage of trainConfig.pipelineOrder\"\n        [capture]=\"form.controls['stages'].value.indexOf(stage) >= 0\"\n        #stageActive=\"capture\"\n        class=\"panel\"\n        [ngClass]=\"_expandedStage === stage ? 'panel-primary' : 'panel-default'\"\n      >\n        <div class=\"panel-heading\" role=\"tab\"\n          [stickyHeader]=\"_expandedStage === stage\">\n          <h4 class=\"panel-title\">\n            <span class=\"label train-toggle-btn\"\n              [ngClass]=\"stageActive.value ? 'label-success' : 'label-default'\"\n              (click)=\"_toggleStage(stage)\"\n            >\n              <i class=\"glyphicon\"\n                [ngClass]=\"stageActive.value ? 'glyphicon-check' : 'glyphicon-unchecked'\"\n              ></i>\n              {{stageActive.value ? 'do' : 'don\\'t do'}}\n            </span>\n\n            <a role=\"button\" (click)=\"stageActive.value && _toggleStageCollapse(stage)\">\n              {{trainConfig.pipelineStage.labels[stage]}}\n              <i class=\"glyphicon pull-right\"\n                [ngClass]=\"_expandedStage === stage ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down'\"\n              ></i>\n            </a>\n          </h4>\n        </div>\n\n        <div\n          role=\"tabpanel\"\n          class=\"panel-collapse collapse\"\n          [ngClass]=\"{'in': _expandedStage === stage}\"\n        >\n          <ul\n            *ngFor=\"let technique of trainConfig.pipelineStage.techniques[stage]\"\n            [capture]=\"form.controls['techniques'].value[stage].indexOf(technique) >= 0\"\n            #techniqueActive=\"capture\"\n            class=\"list-group\"\n          >\n            <li class=\"list-group-item\">\n              <span class=\"label train-toggle-btn\"\n                [ngClass]=\"techniqueActive.value ? 'label-primary' : 'label-default'\"\n                (click)=\"_toggleTechnique(stage, technique)\"\n              >\n                <i class=\"glyphicon\"\n                  [ngClass]=\"techniqueActive.value ? 'glyphicon-check' : 'glyphicon-unchecked'\"\n                ></i>\n                {{techniqueActive.value ? 'try' : 'exclude'}}\n              </span>\n              {{trainConfig.stageTechnique.labels[technique]}}\n            </li>\n            <ng-template [ngIf]=\"techniqueActive.value && trainConfig.stageTechnique.params[technique].length > 0\">\n              <li *ngFor=\"let param of trainConfig.stageTechnique.params[technique]\"\n                class=\"list-group-item\"\n                [ngSwitch]=\"param.type\"\n              >\n                <app-select *ngSwitchCase=\"'categorical'\"\n                  [label]=\"param.title\"\n                  [options]=\"param.options\"\n                  [multiple]=\"true\"\n                  [control]=\"form.controls['parameters'].controls[technique].controls[param.name]\"\n                ></app-select>\n                <app-slider *ngSwitchCase=\"'continuous'\"\n                  [label]=\"param.title\"\n                  [range]=\"true\"\n                  [min]=\"param.min\"\n                  [max]=\"param.max\"\n                  [value]=\"form.controls['parameters'].controls[technique].controls[param.name].value\"\n                  (valueChange)=\"form.controls['parameters'].controls[technique].controls[param.name].setValue($event)\"\n                  [step]=\"param.step || 0.01\"\n                  [formatter]=\"_formatRange\"\n                ></app-slider>\n              </li>\n              <li *ngIf=\"trainConfig.stageTechnique.params[technique].length === 0\"\n                class=\"list-group-item\"\n              >\n                No parameters required\n              </li>\n            </ng-template>\n          </ul>\n        </div>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], ModelCreateAdvancedComponent);
    return ModelCreateAdvancedComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-create.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export PendingType */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelCreateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_flow_service__ = __webpack_require__("../../../../../src/app/services/flow.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PendingType;
(function (PendingType) {
    PendingType["INPUT_TABLE"] = "INPUT_TABLE";
    PendingType["HOLD_OUT_TABLE"] = "HOLD_OUT_TABLE";
    PendingType["OUT_OF_TIME_TABLE"] = "OUT_OF_TIME_TABLE";
})(PendingType || (PendingType = {}));
var ModelCreateComponent = (function () {
    function ModelCreateComponent(router, models, flows) {
        var _this = this;
        this.router = router;
        this.models = models;
        this.flows = flows;
        this.inputEntityChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.changeValidity = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.trainConfig = __WEBPACK_IMPORTED_MODULE_4__train_config__["a" /* trainConfig */];
        this.TAB_INPUT = 0;
        this.TAB_HOLD_OUT_INPUT = 1;
        this.TAB_OUT_OF_TIME_INPUT = 2;
        this.TAB_ADVANCED = 3;
        this.TABS = [
            { label: 'Input Table', index: this.TAB_INPUT },
            { label: 'Hold-Out Table Input', index: this.TAB_HOLD_OUT_INPUT },
            { label: 'Out-Of-Time Table Input', index: this.TAB_OUT_OF_TIME_INPUT },
            { label: 'Advanced Options', index: this.TAB_ADVANCED },
        ];
        this.covariateConfig = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.column.covariate;
        this.activeTab = 0;
        this._flowTables = [];
        this.hiddenTabs = [
            this.TAB_HOLD_OUT_INPUT,
            this.TAB_OUT_OF_TIME_INPUT,
            this.TAB_ADVANCED,
        ];
        this._prepareColumnOptions = function (value) {
            return value['responseColumns'].concat(value['predictorColumns']);
        };
        this._combinePredictorsAndResponse = function (value) {
            return {
                responseColumn: value['responseColumns'] ? value['responseColumns'][0] : null,
                predictorColumns: value['predictorColumns'],
            };
        };
        this.form = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            id: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](),
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]('Model'),
            input: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            holdOutInput: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            outOfTimeInput: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            responseColumns: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(1), __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].maxLength(1)]),
            predictorColumns: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(1)]),
            outputTableName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            holdOutOutputName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            outOfTimeOutputName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            trainOptions: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
            validationThreshold: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](0.95),
            samplingWeightColumn: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null),
        });
        this.formSubscription = this.form.valueChanges.subscribe(function (value) {
            _this.toggleTab(_this.TAB_HOLD_OUT_INPUT, !!value.holdOutInput);
            _this.toggleTab(_this.TAB_OUT_OF_TIME_INPUT, !!value.outOfTimeInput);
            _this.modelHelpers = { predictorColumns: value['predictorColumns'] };
            if (value['responseColumns'].length) {
                Object.assign(_this.modelHelpers, {
                    responseColumn: value['responseColumns'][0],
                });
            }
            _this.changeValidity.emit(_this.form.valid);
        });
    }
    ModelCreateComponent.prototype.onModalAction = function (set) {
        switch (this.pendingType) {
            case PendingType.INPUT_TABLE:
                if (set) {
                    this.setTable(this._pendingInputTable);
                }
                else {
                    this.inputEntity = {
                        id: this.form.value.input,
                        entity: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE,
                        object: null,
                    };
                    this.inputEntityChange.emit(this.inputEntity);
                }
                break;
            case PendingType.HOLD_OUT_TABLE:
                if (set) {
                    this.setHoldOut(this.holdOutInput.object);
                }
                else {
                    this.holdOutInput = {
                        id: this.form.value['holdOutInput'],
                        entity: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE,
                        object: null,
                    };
                }
                break;
            case PendingType.OUT_OF_TIME_TABLE:
                if (set) {
                    this.setOutOfTime(this.holdOutInput.object);
                }
                else {
                    this.outOfTimeInput = {
                        id: this.form.value['outOfTimeInput'],
                        entity: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE,
                        object: null,
                    };
                }
                break;
            default:
                throw new Error('I\'m a teapot');
        }
    };
    ModelCreateComponent.prototype.onTableWarningModalButton = function (button) {
        this.tableWarningModal.hide();
        this.onModalAction(button.title === 'Yes');
    };
    ModelCreateComponent.prototype.filterTableColumns = function (table) {
        var selectedPredictors = this.form.controls['predictorColumns'].value.filter(function (value) { return value && value.name; });
        var selectedResponses = this.form.controls['responseColumns'].value.filter(function (value) { return value && value.name; });
        if (table) {
            var filteredPredictors = selectedPredictors
                .filter(function (predictor) { return table.columns.map(function (column) { return column.name; }).indexOf(predictor.name) > -1; });
            var filteredResponses = selectedResponses
                .filter(function (response) { return table.columns.map(function (column) { return column.name; }).indexOf(response.name) > -1; });
            this.form.controls['predictorColumns'].setValue(filteredPredictors);
            this.form.controls['responseColumns'].setValue(filteredResponses);
        }
    };
    ModelCreateComponent.prototype.checkTableColumns = function (table) {
        if (!table) {
            return true;
        }
        var selectedColumns = this.form.controls['predictorColumns'].value
            .concat(this.form.controls['responseColumns'].value)
            .filter(function (value) { return value && value.name; });
        return selectedColumns.every(function (selectedColumn) { return !!table.columns.find(function (tableColumn) { return tableColumn.name === selectedColumn.name; }); });
    };
    ModelCreateComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        this.toggleTab(this.TAB_ADVANCED, __WEBPACK_IMPORTED_MODULE_7__core_core_mocks_only__["d" /* mocksMode */]);
        if ('baseModel' in changes && this.baseModel) {
            this.form.patchValue({
                name: this.baseModel.name,
                input: this.baseModel.input,
                responseColumns: [this.baseModel.responseColumn].map(function (column) {
                    return Object.assign({ covariateType: _this.covariateConfig.values.RESPONSE }, column);
                }),
                predictorColumns: this.baseModel.predictorColumns.map(function (column) {
                    return Object.assign({ covariateType: _this.covariateConfig.values.PREDICTOR }, column);
                }),
                holdOutInput: this.baseModel.holdOutInput,
                outOfTimeInput: this.baseModel.outOfTimeInput,
                trainOptions: this.baseModel.trainOptions,
                validationThreshold: this.baseModel.validationThreshold || 0.95,
                samplingWeightColumn: this.baseModel.samplingWeightColumn || null,
            });
            var holdOutTable = this._flowTables.find(function (table) { return table.id === _this.baseModel.holdOutInput; });
            var outOfTimeTable = this._flowTables.find(function (table) { return table.id === _this.baseModel.outOfTimeInput; });
            this.holdOutInput = { id: this.baseModel.holdOutInput, object: holdOutTable, entity: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE };
            this.outOfTimeInput = { id: this.baseModel.outOfTimeInput, object: outOfTimeTable, entity: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE };
        }
        else if ('inputEntity' in changes) {
            this.onInputChange(this.inputEntity);
        }
    };
    ModelCreateComponent.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    ModelCreateComponent.prototype.submit = function () {
        var _this = this;
        var model = {
            name: this.form.value.name,
            input: this.form.value.input,
            outputTableName: this.form.value.outputTableName,
            holdOutInput: this.form.value.holdOutInput,
            holdOutOutputName: this.form.value.holdOutOutputName,
            outOfTimeInput: this.form.value.outOfTimeInput,
            outOfTimeOutputName: this.form.value.outOfTimeOutputName,
            predictorColumns: this.form.value.predictorColumns.map(function (item) {
                return {
                    name: item.name,
                    displayName: item.displayName,
                    dataType: item.dataType,
                    variableType: item.variableType
                };
            }),
            responseColumn: this.form.value.responseColumns.map(function (item) {
                return {
                    name: item.name,
                    displayName: item.displayName,
                    dataType: item.dataType,
                    variableType: item.variableType
                };
            }).shift(),
            trainOptions: this.form.value.trainOptions,
            validationThreshold: this.form.value.validationThreshold,
            samplingWeightColumn: this.form.value.samplingWeightColumn,
        };
        return this.models.create(model).do(function (model) {
            // TODO: there is a delay while resolving ModelResolve and user can click Apply button in this delay
            // this problem can be also with PredictionResolve, ReplayResolve
            _this.router.navigate(['/desk', 'train', model.id]);
        });
    };
    ModelCreateComponent.prototype.toggleTab = function (index, show) {
        if (show) {
            this.hiddenTabs = this.hiddenTabs.filter(function (_) { return _ !== index; });
        }
        else if (this.hiddenTabs.indexOf(index) === -1) {
            this.hiddenTabs.push(index);
        }
    };
    ModelCreateComponent.prototype.trySetTable = function (value) {
        if (value) {
            if (this.checkTableColumns(value)) {
                this.setTable(value);
            }
            else {
                this._pendingInputTable = value;
                this.tableWarningModal.show();
            }
        }
    };
    ModelCreateComponent.prototype.setTable = function (value) {
        this.inputTable = value;
        this.form.controls['input'].setValue(value.id);
    };
    ModelCreateComponent.prototype.trySetHoldOut = function (value) {
        this.holdOutInput = value;
        if (this.checkTableColumns(value.object)) {
            this.setHoldOut(value.object);
        }
        else {
            this.pendingType = PendingType.HOLD_OUT_TABLE;
            this.tableWarningModal.show();
        }
    };
    ModelCreateComponent.prototype.setHoldOut = function (value) {
        this.form.controls['holdOutInput'].setValue(value ? value.id : null);
        this.filterTableColumns(value);
    };
    ModelCreateComponent.prototype.trySetOutOfTimeTable = function (value) {
        this.outOfTimeInput = value;
        if (this.checkTableColumns(value.object)) {
            this.setOutOfTime(value.object);
        }
        else {
            this.pendingType = PendingType.OUT_OF_TIME_TABLE;
            this.tableWarningModal.show();
        }
    };
    ModelCreateComponent.prototype.setOutOfTime = function (value) {
        this.form.controls['outOfTimeInput'].setValue(value ? value.id : null);
        this.filterTableColumns(value);
    };
    ModelCreateComponent.prototype.onFlowTableChange = function (value) {
        var table = this._flowTables.find(function (table) { return table.id === value; });
        this.trySetTable(table);
    };
    ModelCreateComponent.prototype.onColumnOptionsValue = function (data) {
        var _this = this;
        var columnsData = data || [];
        var predictorColumns = [];
        var responseColumns = [];
        columnsData.forEach(function (item) {
            if (item.covariateType === _this.covariateConfig.values.RESPONSE) {
                responseColumns.push(item);
            }
            if (item.covariateType === _this.covariateConfig.values.PREDICTOR) {
                predictorColumns.push(item);
            }
        });
        this.form.controls['responseColumns'].setValue(responseColumns);
        this.form.controls['predictorColumns'].setValue(predictorColumns);
    };
    ModelCreateComponent.prototype._tableToSelectOption = function (table) {
        return {
            id: table.id,
            text: table.name,
        };
    };
    ModelCreateComponent.prototype._tabToLabelFn = function (item) {
        return item.label;
    };
    ModelCreateComponent.prototype.onInputChange = function (value) {
        var _this = this;
        this._flowTables = [];
        if (value.entity === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE) {
            this.trySetTable(value.object);
        }
        else if (value.entity === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.FLOW) {
            this.flows.getTables(value.id).subscribe(function (_) {
                _this._flowTables = _.data;
            });
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('baseModel'),
        __metadata("design:type", Object)
    ], ModelCreateComponent.prototype, "baseModel", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelCreateComponent.prototype, "inputEntity", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModelCreateComponent.prototype, "inputEntityChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModelCreateComponent.prototype, "changeValidity", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('tableWarningModal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ModelCreateComponent.prototype, "tableWarningModal", void 0);
    ModelCreateComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-create',
            template: "\n    <form [formGroup]=\"form\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Name'\" [control]=\"form.controls['name']\"></app-input>\n        </div>\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Results Name'\" [control]=\"form.controls['outputTableName']\"></app-input>\n        </div>\n      </div>\n      <div class=\"row\" *ngIf=\"inputEntity?.entity === config.asset.values.FLOW\">\n        <div class=\"col-md-6\">\n          <app-select [label]=\"'Specify Training Table'\"\n            [value]=\"form.value['input']\"\n            [options]=\"_flowTables | map: _tableToSelectOption\"\n            (valueChange)=\"onFlowTableChange($event)\"></app-select>\n        </div>\n      </div>\n\n      <app-form-group *mocksOnly=\"true\"\n        [title]=\"'Validation Data'\"\n        [helpText]=\"trainConfig.hints.validationHelpText\"\n      >\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <library-selector\n              [inputLabel]=\"'Hold-Out Data'\"\n              [allowReset]=\"true\"\n              [available]=\"[config.asset.values.TABLE]\"\n              [(value)]=\"holdOutInput\"\n              (valueChange)=\"trySetHoldOut($event)\"\n              [title]=\"'Select Hold-Out Table'\"></library-selector>\n          </div>\n          <div class=\"col-md-6\">\n            <app-input [label]=\"'Hold-Out Output Name'\"\n              [disabled]=\"!form.controls['holdOutInput'].value\"\n              [control]=\"form.controls['holdOutOutputName']\"></app-input>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <library-selector\n              [inputLabel]=\"'Out-Of-Time Data'\"\n              [allowReset]=\"true\"\n              [available]=\"[config.asset.values.TABLE]\"\n              [(value)]=\"outOfTimeInput\"\n              (valueChange)=\"trySetOutOfTimeTable($event)\"\n              [title]=\"'Select Out-Of-Time Table'\"></library-selector>\n          </div>\n          <div class=\"col-md-6\">\n            <app-input [label]=\"'Out-Of-Time Output Name'\"\n              [disabled]=\"!form.value['outOfTimeInput']\"\n              [control]=\"form.controls['outOfTimeOutputName']\"></app-input>\n          </div>\n          <div class=\"col-md-6\" *ngIf=\"form.value['outOfTimeInput'] || form.value['holdOutInput']\">\n            <app-input [label]=\"'Validation Threshold'\" [control]=\"form.controls['validationThreshold']\"\n              [type]=\"'number'\" [min]=\"0\" [max]=\"1\" [step]=\"0.1\"></app-input>\n          </div>\n        </div>\n      </app-form-group>\n      <div *mocksOnly=\"true\" class=\"row\">\n        <div class=\"col-md-6\">\n          <app-select [label]=\"'Sampling Weight Column'\"\n            [allowNull]=\"true\"\n            [control]=\"form.controls['samplingWeightColumn']\"\n            [options]=\"inputTable?.columns | tableColumnSelectOptions\"\n          ></app-select>\n        </div>\n      </div>\n      <app-tabs\n        [tabs]=\"TABS | map: _tabToLabelFn\"\n        [hiddenTabs]=\"hiddenTabs\"\n        [(active)]=\"activeTab\"></app-tabs>\n      <!-- Tab panes -->\n      <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\" [hidden]=\"activeTab !== TAB_INPUT\">\n        <div *ngIf=\"!form.value['input']\" style=\"min-height: 10em;background: white;padding-top: 1px;\">\n          <h4 class=\"text-center text-muted text-light brand-tab\">No Table Selected</h4>\n        </div>\n        <table-view-embed *ngIf=\"form.value['input']\" [editMode]=\"true\"\n          [columnOptions]=\"form.value | apply: _prepareColumnOptions\"\n          [id]=\"form.value['input']\" (columnOptionsChange)=\"onColumnOptionsValue($event)\"></table-view-embed>\n      </div>\n      <ng-template [mocksOnly]=\"true\">\n        <div class=\"panel\"\n          [hidden]=\"activeTab !== TAB_ADVANCED\">\n          <div class=\"panel-body\">\n            <model-create-advanced\n              [baseModel]=\"baseModel\"\n              (valueChange)=\"form.controls['trainOptions'].setValue($event)\"\n            ></model-create-advanced>\n          </div>\n        </div>\n        <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\" [hidden]=\"activeTab !== TAB_HOLD_OUT_INPUT\">\n          <table-view-embed *ngIf=\"form.value['holdOutInput']\"\n            [modelHelpers]=\"form.value | apply: _combinePredictorsAndResponse\"\n            [id]=\"form.value['holdOutInput']\"></table-view-embed>\n        </div>\n        <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450}\" [hidden]=\"activeTab !== TAB_OUT_OF_TIME_INPUT\">\n          <table-view-embed *ngIf=\"form.value['outOfTimeInput']\"\n            [modelHelpers]=\"form.value | apply: _combinePredictorsAndResponse\"\n            [id]=\"form.value['outOfTimeInput']\"></table-view-embed>\n        </div>\n      </ng-template>\n    </form>\n    <app-modal #tableWarningModal\n      [title]=\"'Warning'\"\n      [buttons]=\"[{'class': 'btn-primary', 'title': 'Yes'}, {'class': 'btn-secondary', 'title': 'No'}]\"\n      (buttonClick)=\"onTableWarningModalButton($event)\">\n      Table you have selected doesn't have some of currently selected columns. Are you sure want to selected this table?\n    </app-modal>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_9__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_8__services_flow_service__["a" /* FlowService */]])
    ], ModelCreateComponent);
    return ModelCreateComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-evaluation-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelEvaluationSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

var ModelEvaluationSummaryComponent = (function () {
    function ModelEvaluationSummaryComponent() {
        this._F1Metric = function (row) {
            var TPx2 = row.truePositive * 2;
            return TPx2 > 0
                ? TPx2 / (TPx2 + row.falsePositive + row.falseNegative)
                : 0;
        };
        this._precisionMetric = function (row) {
            return row.truePositive > 0
                ? row.truePositive / (row.truePositive + row.falsePositive)
                : 0;
        };
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelEvaluationSummaryComponent.prototype, "summary", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelEvaluationSummaryComponent.prototype, "referenceSummary", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Number)
    ], ModelEvaluationSummaryComponent.prototype, "validationThreshold", void 0);
    ModelEvaluationSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-evaluation-summary',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <ng-template [ngIf]=\"summary\">\n      <div *ngIf=\"summary?.roc\" style=\"width:100%;height:400px;\">\n        <canvas\n          [roc-chart]=\"summary.roc\"></canvas>\n      </div>\n      <dl class=\"dl-horizontal train-dl-summary\">\n        <ng-template [ngIf]=\"summary?.rmse\">\n          <dt>RMSE</dt>\n          <dd>{{ summary.rmse | number: '1.0-3' }}</dd>\n          <dt>r<sup>2</sup></dt>\n          <dd>{{ summary.r2 | number: '1.0-3'}}</dd>\n        </ng-template>\n        <ng-template [ngIf]=\"validationThreshold && (summary?.areaUnderROC || summary?.KS)\">\n          <dt>Validation Threshold</dt>\n          <dd>{{validationThreshold}}</dd>\n        </ng-template>\n        <ng-template [ngIf]=\"summary?.areaUnderROC\">\n          <dt>Area Under ROC</dt>\n          <dd>\n            <i class=\"glyphicon\"\n              [ngClass]=\"{'glyphicon-arrow-up': summary?.areaUnderROC >= referenceSummary?.areaUnderROC * validationThreshold,'glyphicon-arrow-down': summary?.areaUnderROC < referenceSummary?.areaUnderROC * validationThreshold}\"\n            ></i>\n            {{ summary.areaUnderROC | number: '1.0-3' }}\n          </dd>\n        </ng-template>\n        <ng-template [ngIf]=\"summary?.KS\">\n          <dt>Kolmogorov-Smirnoff Stat. (KS)</dt>\n          <dd>\n            <i class=\"glyphicon\"\n              [ngClass]=\"{'glyphicon-arrow-up': summary?.KS >= referenceSummary?.KS * validationThreshold,'glyphicon-arrow-down': summary?.KS < referenceSummary?.KS * validationThreshold}\"\n            ></i>\n            {{ summary.KS | number: '1.0-3' }}\n          </dd>\n        </ng-template>\n        <ng-template [ngIf]=\"summary?.confusionMatrix\">\n          <dt>Confusion matrix</dt>\n          <dd>\n            <table class=\"table table-bordered table-sm\">\n              <thead>\n              <tr>\n                <th>Value</th>\n                <th>Actual count</th>\n                <th>Predicted count</th>\n                <th>Precision</th>\n                <th>F1 Score</th>\n              </tr>\n              </thead>\n              <tbody>\n              <tr *ngFor=\"let row of summary.confusionMatrix\">\n                <td>{{row.className}}</td>\n                <td>{{row.truePositive + row.falseNegative}}</td>\n                <td>{{row.truePositive + row.falsePositive}}</td>\n                <td>{{row | apply: _precisionMetric | percent}}</td>\n                <td>{{row | apply: _F1Metric | number: '1.0-3'}}</td>\n              </tr>\n              </tbody>\n            </table>\n          </dd>\n          <dd>\n            <confusion-chart *ngIf=\"summary.confusionMatrix?.length === 2\" [data]=\"summary.confusionMatrix\"></confusion-chart>\n          </dd>\n        </ng-template>\n      </dl>\n    </ng-template>\n  ",
            styles: ["\n    .glyphicon-arrow-up { color: green; }\n    .glyphicon-arrow-down { color: red; }\n  "],
        })
    ], ModelEvaluationSummaryComponent);
    return ModelEvaluationSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-pipeline-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelPipelineSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ModelPipelineSummaryComponent = (function () {
    function ModelPipelineSummaryComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.trainConfig = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */];
        this._stageSummaries = [];
        this._paramTitle = function (technique, name) {
            var paramDefinition = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].stageTechnique.params[technique].find(function (_) { return _.name === name; });
            return paramDefinition
                ? paramDefinition.title
                : name;
        };
    }
    ModelPipelineSummaryComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        // they are ordered
        this._stageSummaries = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineOrder.map(function (stage) { return _this.model.pipelineSummary.stages.find(function (_) { return _.stage === stage; }); }).filter(function (_) { return !!_; });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelPipelineSummaryComponent.prototype, "model", void 0);
    ModelPipelineSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-pipeline-summary',
            template: "\n    <div *ngIf=\"!model.pipelineSummary\" class=\"text-center\">\n      Model has no pipeline summary\n    </div>\n    <ng-template [ngIf]=\"model.pipelineSummary\">\n      <dl *ngFor=\"let stage of _stageSummaries\" class=\"dl-horizontal train-dl-summary\">\n        <dt>Stage</dt>\n        <dd>{{trainConfig.pipelineStage.labels[stage.stage]}}</dd>\n        <dt>Technique</dt>\n        <dd>{{trainConfig.stageTechnique.labels[stage.technique]}}</dd>\n        <ng-template [ngIf]=\"trainConfig.stageTechnique.params[stage.technique].length > 0\">\n          <dt>Parameters</dt>\n          <dd>\n            <table class=\"table table-bordered table-sm\">\n              <thead>\n              <tr><th style=\"width: 30%\">Parameter</th><th>Value</th></tr>\n              </thead>\n              <tbody>\n              <tr *ngFor=\"let param of stage.parameters\"\n                [ngSwitch]=\"!!param.stringValue\">\n                <td>{{_paramTitle(stage.technique, param.name)}}</td>\n                <td *ngSwitchCase=\"true\">{{param.stringValue}}</td>\n                <td *ngSwitchCase=\"false\">{{param.value | number: '1.0-5'}}</td>\n              </tr>\n              </tbody>\n            </table>\n          </dd>\n        </ng-template>\n      </dl>\n    </ng-template>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], ModelPipelineSummaryComponent);
    return ModelPipelineSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-retrain.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelRetrainComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_create_component__ = __webpack_require__("../../../../../src/app/train/model-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ModelRetrainComponent = (function () {
    function ModelRetrainComponent(route, models, tables) {
        var _this = this;
        this.route = route;
        this.models = models;
        this.tables = tables;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.validity = false;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_3__utils_activity_observer__["a" /* ActivityObserver */]();
        this._modelLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) { return _this.models.get(id); });
        this._modelLoader.subscribe(function (model) {
            _this.setModel(model);
        });
        this._tableLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            return _this.tables.get(id);
        });
        this._tableLoader.subscribe(function (table) {
            _this.selectedInputData = {
                id: table.id,
                entity: __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].asset.values.TABLE,
                object: table,
            };
        });
    }
    ModelRetrainComponent.prototype.ngOnInit = function () {
        var _this = this;
        this._routeSubscription = this.route.params.subscribe(function (params) {
            _this._modelLoader.load(params['modelId']);
        });
    };
    ModelRetrainComponent.prototype.setModel = function (model) {
        this.model = model;
        this._tableLoader.load(model.input);
    };
    ModelRetrainComponent.prototype.ngOnDestroy = function () {
        this._routeSubscription && this._routeSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('childComponent'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_4__model_create_component__["a" /* ModelCreateComponent */])
    ], ModelRetrainComponent.prototype, "childComponent", void 0);
    ModelRetrainComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-retrain',
            template: "\n    <asset-operations [type]=\"config.asset.values.MODEL\" [selectedItems]=\"[]\"></asset-operations>\n    <app-spinner [visibility]=\"!_modelLoader.loaded\"></app-spinner>\n    <ng-template [ngIf]=\"model\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <library-selector\n            [inputLabel]=\"'Input Data'\"\n            [available]=\"[config.asset.values.TABLE, config.asset.values.FLOW]\"\n            [(value)]=\"selectedInputData\"\n            [title]=\"'Select Training Input Data'\"></library-selector>\n        </div>\n        <div class=\"col-md-6\">\n          <div class=\"pull-right\">\n<!--\n            <button class=\"btn btn-md btn-clear\"\n              (click)=\"clear();\">\n              Clear\n            </button>\n-->\n            <button class=\"btn btn-md btn-apply\" (click)=\"_savingObserver.observe(childComponent.submit())\"\n              [disabled]=\"!validity || (_savingObserver.active | async)\">\n              Apply\n            </button>\n          </div>\n        </div>\n      </div>\n      <model-create #childComponent\n        [(inputEntity)]=\"selectedInputData\"\n        [baseModel]=\"model\"\n        (changeValidity)=\"validity = $event\"></model-create>\n    </ng-template>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_7__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_5__services_table_service__["a" /* TableService */]])
    ], ModelRetrainComponent);
    return ModelRetrainComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-status-color.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelStatusColorDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ModelStatusColorDirective = (function () {
    function ModelStatusColorDirective(el) {
        this.el = el.nativeElement;
    }
    ModelStatusColorDirective.prototype.ngOnChanges = function () {
        var cssClass = this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.ERROR ? 'dot-danger' :
            this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.TRAINING ? 'dot-warning' :
                this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.PREDICTING ? 'dot-warning' :
                    this.modelStatusColor === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.CANCELLED ? 'dot-danger' : 'dot-primary';
        this.el.className += ' ' + cssClass;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('model-status-color'),
        __metadata("design:type", String)
    ], ModelStatusColorDirective.prototype, "modelStatusColor", void 0);
    ModelStatusColorDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[model-status-color]',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], ModelStatusColorDirective);
    return ModelStatusColorDirective;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





// These two define importance graph coloring
var IMPORTANCE_GRAPH_DOMAIN = [
    __WEBPACK_IMPORTED_MODULE_1__model_interface__["c" /* IVariableImportance */].Decision.CONFIRMED,
    __WEBPACK_IMPORTED_MODULE_1__model_interface__["c" /* IVariableImportance */].Decision.REJECTED,
    __WEBPACK_IMPORTED_MODULE_1__model_interface__["c" /* IVariableImportance */].Decision.TENTATIVE,
    __WEBPACK_IMPORTED_MODULE_1__model_interface__["c" /* IVariableImportance */].Decision.SHADOW,
];
var IMPORTANCE_GRAPH_GAMMA = ['lime', 'red', 'yellow', 'blue'];
var ModelSummaryComponent = (function () {
    function ModelSummaryComponent() {
        this.TAB_SUMMARY = 0;
        this.TAB_HOLD_OUT_SUMMARY = 1;
        this.TAB_OUT_OF_TIME_SUMMARY = 2;
        this.TABS = [
            { label: 'Model Summary', index: this.TAB_SUMMARY },
            { label: 'Hold-Out Summary', index: this.TAB_HOLD_OUT_SUMMARY },
            { label: 'Out-Of-Time Summary', index: this.TAB_OUT_OF_TIME_SUMMARY },
        ];
        this.activeTab = this.TAB_SUMMARY;
        this.hiddenTabs = [];
        this.variableImportanceChart = null;
    }
    ModelSummaryComponent.prototype.ngOnChanges = function () {
        this.hiddenTabs = [this.TAB_SUMMARY, this.TAB_HOLD_OUT_SUMMARY, this.TAB_OUT_OF_TIME_SUMMARY];
        this.toggleTab(this.TAB_SUMMARY, !!this.model.summary);
        if (__WEBPACK_IMPORTED_MODULE_2__core_core_mocks_only__["d" /* mocksMode */]) {
            this.toggleTab(this.TAB_HOLD_OUT_SUMMARY, !!this.model.holdOutSummary);
            this.toggleTab(this.TAB_OUT_OF_TIME_SUMMARY, !!this.model.outOfTimeSummary);
        }
        var domain = IMPORTANCE_GRAPH_DOMAIN;
        var labels = domain.map(function (_) { return __WEBPACK_IMPORTED_MODULE_4__train_config__["a" /* trainConfig */].variableImportanceDecision.labels[_]; });
        var range = __WEBPACK_IMPORTED_MODULE_3_lodash__["range"](domain.length);
        var classifier = Object.assign(function (attributes) {
            var value = attributes[1];
            return domain.indexOf(value);
        }, {
            domain: domain,
            range: range,
            labels: labels,
        });
        this.chartOptions = {
            labelX: 'Variable',
            labelY: 'Importance',
            metricsMapping: {
                MIN: 0,
                MAX: 1,
                LOWER_QUARTILE: 2,
                UPPER_QUARTILE: 3,
                MEDIAN: 4,
            },
            groupByAttributes: [0],
            colorClassifier: classifier,
            colorGamma: IMPORTANCE_GRAPH_GAMMA,
        };
        if (this.model.summary && this.model.summary.variableImportance) {
            var variableImportance = __WEBPACK_IMPORTED_MODULE_3_lodash__["sortBy"](this.model.summary.variableImportance, function (_) { return _.median; });
            this.variableImportanceChart = {
                series: [
                    {
                        title: 'Variable Importance',
                        data: variableImportance.map(function (variableRow) {
                            return {
                                attributes: [variableRow.name, variableRow.decision],
                                values: [variableRow.min, variableRow.max, variableRow.lowerQuartile, variableRow.upperQuartile, variableRow.median],
                            };
                        }),
                    },
                ],
                metrics: [
                    { name: 'min' },
                    { name: 'max' },
                    { name: 'lowerQuartile' },
                    { name: 'upperQuartile' },
                    { name: 'median' },
                ],
                attributes: [
                    { name: 'Variable' },
                    { name: 'Final Decision' },
                ],
            };
        }
    };
    ModelSummaryComponent.prototype.toggleTab = function (index, show) {
        if (show) {
            this.hiddenTabs = this.hiddenTabs.filter(function (_) { return _ !== index; });
        }
        else if (this.hiddenTabs.indexOf(index) === -1) {
            this.hiddenTabs.push(index);
        }
    };
    ModelSummaryComponent.prototype._tabToLabelFn = function (item) {
        return item.label;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelSummaryComponent.prototype, "model", void 0);
    ModelSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-summary',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <app-tabs\n      [tabs]=\"TABS | map: _tabToLabelFn\"\n      [hiddenTabs]=\"hiddenTabs\"\n      [(active)]=\"activeTab\"></app-tabs>\n    <div *ngIf=\"!model.summary\" class=\"text-center\">\n      Model has no summary\n    </div>\n    <ng-template [ngIf]=\"model.summary\">\n      <div class=\"flex-static\" [hidden]=\"activeTab !== TAB_SUMMARY\">\n        <dl class=\"dl-horizontal train-dl-summary\">\n          <model-evaluation-summary [summary]=\"model.summary\"></model-evaluation-summary>\n        </dl>\n        <div\n          *ngIf=\"model.summary?.variableImportance && variableImportanceChart && model?.trainOptions?.variableImportance\"\n            style=\"width:100%;height:600px;\">\n          <box-chart [data]=\"variableImportanceChart\" [options]=\"chartOptions\"></box-chart>\n        </div>\n      </div>\n      <div class=\"flex-static\" [hidden]=\"activeTab !== TAB_HOLD_OUT_SUMMARY\">\n        <model-evaluation-summary [summary]=\"model?.holdOutSummary\"\n          [referenceSummary]=\"model.summary\"\n          [validationThreshold]=\"model.validationThreshold\"></model-evaluation-summary>\n      </div>\n      <div class=\"flex-static\" [hidden]=\"activeTab !== TAB_OUT_OF_TIME_SUMMARY\">\n        <model-evaluation-summary [summary]=\"model?.outOfTimeSummary\"\n          [referenceSummary]=\"model.summary\"\n          [validationThreshold]=\"model.validationThreshold\"></model-evaluation-summary>\n      </div>\n    </ng-template>\n  ",
        })
    ], ModelSummaryComponent);
    return ModelSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-train-summary.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelTrainSummaryComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ITERATIONS_GRAPH_DOMAIN_STEP = 50;
var ITERATIONS_LIST_STEP = 40;
var ModelTrainSummaryComponent = (function () {
    function ModelTrainSummaryComponent(models) {
        this.models = models;
        this.status = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.cancel = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.trainConfig = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */];
        this.IModel = __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */];
        this.IModelTrainSummary = __WEBPACK_IMPORTED_MODULE_1__model_interface__["b" /* IModelTrainSummary */];
        this.resourceChartOptions = {
            margin: {
                top: 0,
                left: 0,
                right: 0,
                bottom: 0,
            },
        };
        this.iterationsChartOptions = {
            yDomain: [0, 1],
            integerXDomain: true,
            seriesGamma: [''],
            enableLegend: false,
            margin: {
                top: 0,
                left: 14,
                right: 0,
                bottom: 0,
            },
        };
        this.progress = 0;
        this.selectedIterations = [];
        this.stageSummaries = [];
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_6__angular_common__["d" /* DecimalPipe */]('en-US');
        this.paramTitle = function (technique, name) {
            var paramDefinition = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].stageTechnique.params[technique].find(function (_) { return _.name === name; });
            return paramDefinition
                ? paramDefinition.title
                : name;
        };
        this._progressLabel = function (trainingSummary, model) {
            if (!trainingSummary || !model) {
                return '';
            }
            var baseLabel = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].trainState.labels[trainingSummary.state];
            if (model.status === __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].Status.PREDICTING) {
                return baseLabel + " (Initial Predict)";
            }
            return baseLabel;
        };
        this._isModelRunning = function (model) {
            return [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].Status.TRAINING /*, IModel.Status.PREDICTING*/].includes(model.status);
        };
    }
    ModelTrainSummaryComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('model' in changes) {
            this._summarySubscription && this._summarySubscription.unsubscribe();
            this._summarySubscription = this.models.getTrainSummary(this.model.id, true).subscribe(function (summary) {
                _this.trainingSummary = summary;
                _this.iterationsChartOptions.xDomain = [
                    0,
                    Math.ceil(_this.trainingSummary.iterations.length / ITERATIONS_GRAPH_DOMAIN_STEP) * ITERATIONS_GRAPH_DOMAIN_STEP,
                ];
                _this.progress = summary.progress;
                _this.status.emit(summary.state);
                _this.selectArea(_this.selection);
                if (_this.trainingSummary.state === __WEBPACK_IMPORTED_MODULE_1__model_interface__["b" /* IModelTrainSummary */].TrainState.COMPLETE) {
                    _this._summarySubscription.unsubscribe();
                }
                _this._visualizeData();
            });
        }
    };
    ModelTrainSummaryComponent.prototype.ngOnDestroy = function () {
        this._summarySubscription && this._summarySubscription.unsubscribe();
    };
    ModelTrainSummaryComponent.prototype.drawIterations = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        svg.margin = { left: 10, right: 10, top: 0, bottom: 0 };
        //iterations
        var oldIterations = svg.chartArea.selectAll('g.iteration').data(this.trainingSummary.iterations);
        var iterations = oldIterations.enter()
            .append('g')
            .attr('class', 'iteration')
            .merge(oldIterations)
            .attr('transform', function (_, i) { return "translate(0, " + i * ITERATIONS_LIST_STEP + ")"; });
        iterations.on('click', function (iteration) {
            _this.iterationSummary = !__WEBPACK_IMPORTED_MODULE_5_lodash__["isEqual"](iteration, _this.iterationSummary) ? iteration : null;
            _this.stageSummaries = _this.iterationSummary ? __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineOrder.map(function (stage) { return _this.iterationSummary.hyperParameters.find(function (_) { return _.stage === stage; }); }).filter(function (_) { return !!_; }) : [];
        });
        var backgroundPath = iterations.selectAll('line.background').data(function (d) { return [d]; });
        backgroundPath.enter()
            .append('line')
            .attr('class', 'background')
            .merge(backgroundPath)
            .attr('x1', 0)
            .attr('x2', svg.chartSize.width)
            .attr('y1', 35)
            .attr('y2', 35);
        var foregroundPath = iterations.selectAll('line.foreground').data(function (d) { return [d]; });
        foregroundPath.enter()
            .append('line')
            .attr('class', 'foreground')
            .merge(foregroundPath)
            .classed('active', function (iteration) { return _this.selectedIterations.find(function (_) { return _ === iteration.index; }) >= 0; })
            .attr('x1', 0)
            .attr('x2', function (iteration) { return svg.chartSize.width * iteration.summary.areaUnderROC; })
            .attr('y1', 35)
            .attr('y2', 35);
        // index
        var oldIndexText = iterations.selectAll('text.index').data(function (d) { return [d]; });
        oldIndexText
            .enter()
            .append('text')
            .attr('x', 0)
            .attr('y', 20)
            .attr('dy', 10)
            .attr('class', 'index')
            .attr('font-size', '1em')
            .attr('text-anchor', 'start')
            .merge(oldIndexText)
            .classed('active', function (iteration) { return _this.selectedIterations.find(function (_) { return _ === iteration.index; }) >= 0; })
            .text(function (iteration) { return "#" + iteration.index; });
        // classifierStageInfo
        var oldClassifierStageText = iterations.selectAll('text.classifier').data(function (d) { return [d]; });
        oldClassifierStageText
            .enter()
            .append('text')
            .attr('y', 0)
            .attr('dy', 30)
            .attr('class', 'classifier')
            .attr('font-size', '1em')
            .attr('text-anchor', 'middle')
            .merge(oldClassifierStageText)
            .attr('x', svg.chartSize.width / 2)
            .classed('active', function (iteration) { return _this.selectedIterations.find(function (_) { return _ === iteration.index; }) >= 0; })
            .text(function (iteration) {
            var classifierStageInfo = iteration.hyperParameters.find(function (_) { return _.stage === __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.MODEL_PRIMITIVES; });
            return "" + (classifierStageInfo ? __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].stageTechnique.labels[classifierStageInfo.technique] : 'Unknown');
        });
        // Auroc
        var oldAurocText = iterations.selectAll('text.auroc').data(function (d) { return [d]; });
        oldAurocText
            .enter()
            .append('text')
            .attr('y', 0)
            .attr('dy', 30)
            .attr('class', 'auroc')
            .attr('font-size', '1em')
            .attr('text-anchor', 'end')
            .merge(oldAurocText)
            .attr('x', svg.chartSize.width)
            .classed('active', function (iteration) { return _this.selectedIterations.find(function (_) { return _ === iteration.index; }) >= 0; })
            .text(function (iteration) { return "AUC = " + _this.formatFloat(iteration.summary.areaUnderROC); });
        svg.svg.attr('height', svg.chartArea.node().getBBox().height);
    };
    ModelTrainSummaryComponent.prototype.selectArea = function (selection) {
        if (!__WEBPACK_IMPORTED_MODULE_5_lodash__["isEqual"](this.selection, selection)) {
            this.selection = selection;
        }
        if (this.selection) {
            var minX_1 = this.selection[0][0], minY_1 = this.selection[0][1], maxX_1 = this.selection[1][0], maxY_1 = this.selection[1][1];
            this.selectedIterations = this.trainingSummary.iterations
                .filter(function (iteration) {
                return iteration.summary.areaUnderROC >= minY_1 && iteration.summary.areaUnderROC <= maxY_1
                    && iteration.index >= minX_1 && iteration.index <= maxX_1;
            }).map(function (_) { return _.index; });
        }
        else {
            this.selectedIterations = [];
        }
        this.drawIterations();
    };
    ModelTrainSummaryComponent.prototype.cancelModel = function () {
        var _this = this;
        this.models.cancel(this.model).subscribe(function () {
            _this.cancel.emit();
        });
    };
    ModelTrainSummaryComponent.prototype.stopRefining = function () {
        this.models.stopRefining(this.model.id);
    };
    ModelTrainSummaryComponent.prototype.formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-2');
    };
    ModelTrainSummaryComponent.prototype._visualizeData = function () {
        this.cpuLoadChart = {
            metrics: [
                { name: 'Percentage' },
            ],
            attributes: [{ name: 'CPU' }],
            series: [{
                    data: this.trainingSummary.resources.cpuLoad.map(function (load) {
                        return {
                            values: [
                                load.value,
                            ],
                            attributes: [load.name],
                        };
                    }),
                }],
        };
        this.cpuLoadLogChart = {
            metrics: [
                { name: 'Percentage' },
            ],
            attributes: [{ name: 'CPU' }],
            series: [{
                    data: this._preparePerformanceLog(this.trainingSummary.resources.cpuLoadLog),
                }],
        };
        this.gpuLoadChart = {
            metrics: [
                { name: 'Percentage' },
            ],
            attributes: [{ name: 'GPU' }],
            series: [{
                    data: this.trainingSummary.resources.gpuLoad.map(function (load) {
                        return {
                            values: [
                                load.value,
                            ],
                            attributes: [load.name],
                        };
                    }),
                }],
        };
        this.gpuLoadLogChart = {
            metrics: [
                { name: 'Percentage' },
            ],
            attributes: [{ name: 'GPU' }],
            series: [{
                    data: this._preparePerformanceLog(this.trainingSummary.resources.gpuLoadLog),
                }],
        };
        this.memoryUsageChart = {
            metrics: [
                { name: 'GB' },
            ],
            attributes: [{ name: 'CPU' }],
            series: [{
                    data: this.trainingSummary.resources.memoryUsage.map(function (load) {
                        return {
                            values: [
                                load.value,
                            ],
                            attributes: [load.name],
                        };
                    }),
                }],
        };
        this.memoryUsageLogChart = {
            metrics: [
                { name: 'Percentage' },
            ],
            attributes: [{ name: 'Memory' }],
            series: [{
                    data: this._preparePerformanceLog(this.trainingSummary.resources.memoryUsageLog),
                }],
        };
        this.iterationScoreChart = {
            metrics: [
                { name: 'Iteration' },
                { name: 'AuROC' },
            ],
            attributes: [{ name: 'Model Type' }],
            series: [{
                    data: this.trainingSummary.iterations.map(function (iteration) {
                        var classifierStageInfo = iteration.hyperParameters.find(function (_) { return _.stage === __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.MODEL_PRIMITIVES; });
                        return {
                            values: [
                                iteration.index,
                                iteration.summary.areaUnderROC,
                            ],
                            attributes: [classifierStageInfo ? classifierStageInfo.technique : 'Unknown'],
                        };
                    }),
                }],
        };
    };
    ModelTrainSummaryComponent.prototype._preparePerformanceLog = function (usageLog) {
        return __WEBPACK_IMPORTED_MODULE_5_lodash__["range"](-50, 0).map(function (i) {
            return {
                value: 0,
                iteration: i,
            };
        }).concat(usageLog).slice(-50).map(function (value) {
            return {
                values: [
                    value.value,
                ],
                attributes: [value.iteration],
                referenceId: String(value.iteration),
            };
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelTrainSummaryComponent.prototype, "model", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelTrainSummaryComponent.prototype, "process", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ModelTrainSummaryComponent.prototype, "tableProcess", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModelTrainSummaryComponent.prototype, "status", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ModelTrainSummaryComponent.prototype, "cancel", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ModelTrainSummaryComponent.prototype, "_svgElement", void 0);
    ModelTrainSummaryComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-train-summary',
            template: "\n    <div class=\"row train-container\">\n      <div class=\"col-md-3\">\n        <train-label label=\"Training Progress\"></train-label>\n        <progress-bar style=\"height:40px\"\n          [label]=\"trainingSummary | apply: _progressLabel: model\"\n          [progress]=\"process ? process.progress : 1\"></progress-bar>\n        <div class=\"row\">\n          <div class=\"col-xs-6 text-center\">\n            <span>Elapsed</span>\n            <div class=\"resources-number\" [ngSwitch]=\"model | apply: _isModelRunning\">\n              <timer *ngSwitchCase=\"true\" [start]=\"model.created\"></timer>\n              <span *ngSwitchDefault=\"\">--:--:--</span>\n            </div>\n          </div>\n          <div class=\"col-xs-6 text-center\">\n            <span>Iterations</span>\n            <div class=\"resources-number\">{{trainingSummary?.iterations.length}}</div>\n          </div>\n        </div>\n        <div class=\"text-center\" *ngIf=\"model?.status === IModel.Status.TRAINING\">\n          <div class=\"btn-group\">\n            <button type=\"button\"\n              class=\"btn btn-md btn-primary\"\n              (click)=\"cancelModel()\">Cancel\n            </button>\n            <button type=\"button\"\n              [disabled]=\"trainingSummary?.state !== IModelTrainSummary.TrainState.REFINING\"\n              class=\"btn btn-md btn-primary\"\n              (click)=\"stopRefining()\">Stop Refining\n            </button>\n          </div>\n        </div>\n        <train-label label=\"Resources\"></train-label>\n        <div class=\"row\">\n          <div class=\"col-xs-3 text-center\">\n            <span>Nodes</span>\n            <div class=\"resources-number\">{{trainingSummary?.resources.nodes}}</div>\n          </div>\n          <div class=\"col-xs-3 text-center\">\n            <span>CPUs</span>\n            <div class=\"resources-number\">{{trainingSummary?.resources.cpus}}</div>\n          </div>\n          <div class=\"col-xs-3 text-center\">\n            <span>Cores</span>\n            <div class=\"resources-number\">{{trainingSummary?.resources.cpuCores}}</div>\n          </div>\n          <div class=\"col-xs-3 text-center\">\n            <span>GPUs</span>\n            <div class=\"resources-number\">{{trainingSummary?.resources.gpus}}</div>\n          </div>\n        </div>\n        <train-label label=\"CPU\"></train-label>\n        <div class=\"row train-resource-group\">\n          <div class=\"col-xs-3\">\n            <chart-bar *ngIf=\"cpuLoadChart\"\n              [data]=\"cpuLoadChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n          <div class=\"col-xs-9\">\n            <chart-bar *ngIf=\"cpuLoadLogChart\"\n              [data]=\"cpuLoadLogChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n        </div>\n        <train-label label=\"GPU\"></train-label>\n        <div class=\"row train-resource-group\">\n          <div class=\"col-xs-3\">\n            <chart-bar *ngIf=\"gpuLoadChart\"\n              [data]=\"gpuLoadChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n          <div class=\"col-xs-9\">\n            <chart-bar *ngIf=\"gpuLoadLogChart\"\n              [data]=\"gpuLoadLogChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n        </div>\n        <train-label label=\"Memory\"></train-label>\n        <div class=\"row train-resource-group\">\n          <div class=\"col-xs-3\">\n            <chart-bar *ngIf=\"memoryUsageChart\"\n              [data]=\"memoryUsageChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n          <div class=\"col-xs-9\">\n            <chart-bar *ngIf=\"memoryUsageLogChart\"\n              [data]=\"memoryUsageLogChart\"\n              [options]=\"resourceChartOptions\"\n            ></chart-bar>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-5\">\n        <div [hidden]=\"iterationSummary\">\n          <train-label label=\"Iteration Scores\"></train-label>\n          <chart-two-d-scatter *ngIf=\"iterationScoreChart\"\n            [data]=\"iterationScoreChart\"\n            [options]=\"iterationsChartOptions\"\n            [selection]=\"selection\"\n            (selectionChange)=\"selectArea($event)\"\n          ></chart-two-d-scatter>\n          <train-label label=\"Iterations\"></train-label>\n          <div class=\"scrollbar scrollbar-style\"\n            [adaptiveHeight]=\"{minHeight: 200, property: 'max-height', pageMargin: 25, trigger: trainingSummary?.iterations}\"\n          >\n            <svg #canvas width=\"960\" height=\"500\" class=\"iterations\"></svg>\n          </div>\n        </div>\n        <div [hidden]=\"!iterationSummary\" class=\"model-pipeline-summary-embed\">\n          <train-label label=\"Iteration Summary\"></train-label>\n          <div class=\"model-pipeline-summary-container\">\n            <button class=\"btn btn-secondary pull-right\" (click)=\"iterationSummary = null\">\n              <i class=\"glyphicon glyphicon-remove\"></i>\n            </button>\n            <dl *ngFor=\"let stage of stageSummaries\" class=\"dl-horizontal train-dl-summary\">\n              <dt>Stage</dt>\n              <dd>{{trainConfig.pipelineStage.labels[stage.stage]}}</dd>\n              <dt>Technique</dt>\n              <dd>{{trainConfig.stageTechnique.labels[stage.technique]}}</dd>\n              <ng-template [ngIf]=\"trainConfig.stageTechnique.params[stage.technique].length > 0\">\n                <dt>Parameters</dt>\n                <dd>\n                  <table class=\"table table-bordered table-sm\">\n                    <thead>\n                    <tr>\n                      <th style=\"width: 30%\">Parameter</th>\n                      <th>Value</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr *ngFor=\"let param of stage.parameters\"\n                      [ngSwitch]=\"!!param.stringValue\">\n                      <td>{{paramTitle(stage.technique, param.name)}}</td>\n                      <td *ngSwitchCase=\"true\">{{param.stringValue}}</td>\n                      <td *ngSwitchCase=\"false\">{{param.value | number: '1.0-5'}}</td>\n                    </tr>\n                    </tbody>\n                  </table>\n                </dd>\n              </ng-template>\n            </dl>\n          </div>\n        </div>\n      </div>\n      <div class=\"col-md-4\">\n        <train-label label=\"Stages\"></train-label>\n        <div class=\"scrollbar scrollbar-style\"\n          [adaptiveHeight]=\"{minHeight: 600, property: 'height', pageMargin: 25, trigger: trainingSummary?.iterations}\"\n        >\n          <train-techniques-chart\n            [iterations]=\"trainingSummary?.iterations\"\n            [selectedIterations]=\"selectedIterations\"\n          ></train-techniques-chart>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__services_model_service__["a" /* ModelService */]])
    ], ModelTrainSummaryComponent);
    return ModelTrainSummaryComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-view-advanced.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelViewAdvancedComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var ModelViewAdvancedComponent = (function () {
    function ModelViewAdvancedComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.trainConfig = __WEBPACK_IMPORTED_MODULE_2__train_config__["a" /* trainConfig */];
        this._expandedStage = null;
        this._stages = [];
        this._paramTitle = function (technique, name) {
            var paramDefinition = __WEBPACK_IMPORTED_MODULE_2__train_config__["a" /* trainConfig */].stageTechnique.params[technique].find(function (_) { return _.name === name; });
            return paramDefinition
                ? paramDefinition.title
                : name;
        };
        this._joinArray = function (array) {
            return array.join(', ');
        };
    }
    ModelViewAdvancedComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        this._stages = __WEBPACK_IMPORTED_MODULE_2__train_config__["a" /* trainConfig */].pipelineOrder.filter(function (stage) { return _this.model.trainOptions.stages.indexOf(stage) >= 0; });
    };
    ModelViewAdvancedComponent.prototype._toggleStageCollapse = function (stage) {
        this._expandedStage = (this._expandedStage === stage)
            ? null
            : stage;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('model'),
        __metadata("design:type", Object)
    ], ModelViewAdvancedComponent.prototype, "model", void 0);
    ModelViewAdvancedComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-view-advanced',
            template: "\n    <div>\n      <i class=\"glyphicon\" [ngClass]=\"model.trainOptions.variableImportance\n        ? 'glyphicon-check'\n        : 'glyphicon-unchecked'\"\n        aria-hidden=\"true\"></i>\n      Generate Variable Importance Summary\n    </div>\n    <div>\n      <i class=\"glyphicon\" [ngClass]=\"model.trainOptions.modelExplanation\n        ? 'glyphicon-check'\n        : 'glyphicon-unchecked'\"\n        aria-hidden=\"true\"></i>\n      Generate Model Explanation Columns\n    </div>\n    <h3>Pipeline Stages</h3>\n    <div class=\"panel-group\" role=\"tablist\">\n      <div *ngFor=\"let stage of _stages\"\n        class=\"panel\"\n        [ngClass]=\"_expandedStage === stage ? 'panel-primary' : 'panel-default'\"\n      >\n        <div class=\"panel-heading\" role=\"tab\"\n          [stickyHeader]=\"_expandedStage === stage\">\n          <h4 class=\"panel-title\">\n            <a role=\"button\" (click)=\"_toggleStageCollapse(stage)\">\n              {{trainConfig.pipelineStage.labels[stage]}}\n              <i class=\"glyphicon pull-right\"\n                [ngClass]=\"_expandedStage === stage ? 'glyphicon-chevron-up' : 'glyphicon-chevron-down'\"\n              ></i>\n            </a>\n          </h4>\n        </div>\n\n        <div\n          role=\"tabpanel\"\n          class=\"panel-collapse collapse\"\n          [ngClass]=\"{'in': _expandedStage === stage}\"\n        >\n          <ul *ngFor=\"let technique of model.trainOptions.techniques[stage]\"\n            class=\"list-group\"\n          >\n            <li class=\"list-group-item\">\n              {{trainConfig.stageTechnique.labels[technique]}}\n            </li>\n            <ng-template [ngIf]=\"trainConfig.stageTechnique.params[technique].length > 0\">\n              <li *ngFor=\"let param of model.trainOptions.parameters[technique]\"\n                class=\"list-group-item\"\n                [ngSwitch]=\"!!param.values\"\n              >\n                {{technique | apply: _paramTitle: param.name}}:\n                <span *ngSwitchCase=\"true\">\n                  {{param.values | apply: _joinArray}}\n                </span>\n                <span *ngSwitchCase=\"false\">\n                  {{param.min | number: '1.0-5'}}\n                  -\n                  {{param.max | number: '1.0-5'}}\n                </span>\n              </li>\n            </ng-template>\n          </ul>\n        </div>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [])
    ], ModelViewAdvancedComponent);
    return ModelViewAdvancedComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-view-embed.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelViewEmbedComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ModelViewEmbedComponent = (function () {
    function ModelViewEmbedComponent(models, events, processes) {
        var _this = this;
        this.models = models;
        this.events = events;
        this.processes = processes;
        this.position = 'relative';
        this.styleHeight = '100px';
        this.classes = 'flex-col';
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.activeTab = 2;
        this.eventSubscription = this.events.subscribe(function (event) {
            // process service emits complete and then ui reload model-context
            // we can identify model's table by model.output
            if (event.type === 'PROCESS_COMPLETED' && _this.model.output === event.data.id) {
                _this.getModel(_this.model.id);
            }
        });
    }
    ModelViewEmbedComponent.prototype.ngOnInit = function () {
        this.activeTab = 2;
        this.modelProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.MODEL]];
        this.tableProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].asset.values.TABLE]];
        this.getModel(this.modelId);
    };
    ModelViewEmbedComponent.prototype.setModel = function (model) {
        var _this = this;
        this.model = model;
        if (model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.TRAINING) {
            //this.processes.getByTarget(data.model.id, config.asset.values.MODEL).subscribe(process => { //@todo switch to getByTarget
            this.processes.get(model.id).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this.getModel(model.id);
                });
            });
        }
        else if (model.status === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].model.status.values.PREDICTING) {
            //this.processes.getByTarget(data.model.id, config.asset.values.MODEL).subscribe(process => { //@todo switch to getByTarget
            this.processes.getByTarget(model.output, __WEBPACK_IMPORTED_MODULE_2__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this.getModel(model.id);
                });
            });
        }
    };
    ModelViewEmbedComponent.prototype.getModel = function (id) {
        var _this = this;
        this.models.get(id).subscribe(function (model) {
            _this.setModel(model);
        });
    };
    ModelViewEmbedComponent.prototype.ngOnDestroy = function () {
        if (this.processSubscription) {
            this.processSubscription.unsubscribe();
        }
        this.eventSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ModelViewEmbedComponent.prototype, "modelId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.position'),
        __metadata("design:type", Object)
    ], ModelViewEmbedComponent.prototype, "position", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.min-height'),
        __metadata("design:type", Object)
    ], ModelViewEmbedComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], ModelViewEmbedComponent.prototype, "classes", void 0);
    ModelViewEmbedComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-view-embed',
            template: "\n    <app-spinner [visibility]=\"!model\"></app-spinner>\n    <ng-template [ngIf]=\"model\">\n      <div class=\"tabpanel\">\n        <!-- Nav tabs -->\n        <ul class=\"nav nav-tabs\" role=\"tablist\">\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n                <a (click)=\"activeTab = 0\">Input Table</a>\n            </li>\n            <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n                <a (click)=\"activeTab = 1\">Output table</a>\n            </li>\n            <li *ngIf=\"model.summary && model.status === config.model.status.values.ACTIVE\"\n                role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n                <a (click)=\"activeTab = 2\">Model Summary Statistics</a>\n            </li>\n        </ul>\n      </div>\n      <!-- Tab panes -->\n      <table-view-embed\n        [hidden]=\"activeTab !== 0\"\n        [id]=\"model.input\"\n        [modelHelpers]=\"model\"></table-view-embed>\n      <div class=\"flex-col\" [hidden]=\"activeTab !== 1\"\n        *ngIf=\"model\" [ngSwitch]=\"model.status\">\n          <process-indicator *ngSwitchCase=\"config.model.status.values.TRAINING\"\n            [process]=\"[modelProgresses[model.id], tableProgresses[model.output]] | combineProcesses\"\n            [message]=\"'Training Model'\"></process-indicator>\n          <process-indicator *ngSwitchCase=\"config.model.status.values.PREDICTING\"\n            [process]=\"[modelProgresses[model.id], tableProgresses[model.output]] | combineProcesses\"\n            [message]=\"'Generating model results'\"></process-indicator>\n          <div *ngSwitchCase=\"config.model.status.values.ERROR\">\n            <error-indicator [target]=\"'model'\" [process]=\"modelProgresses[model.id]\"></error-indicator>\n            <div class=\"row\">\n              <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n                <div class=\"text-center\">\n                  <button\n                    class=\"btn btn-primary\"\n                    [routerLink]=\"[ '/desk', 'train', model.id, 'retrain' ]\">Re-Train\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          <error-indicator *ngSwitchCase=\"config.model.status.values.CANCELLED\"\n            [title]=\"'Cancelled'\" [message]=\"'This model training has been cancelled'\"></error-indicator>\n          <table-view-embed *ngSwitchDefault [id]=\"model.output\" [modelHelpers]=\"model\"></table-view-embed>\n      </div>\n      <div class=\"flex-static\" [hidden]=\"activeTab !== 2\"\n        *ngIf=\"model.summary && model.status === config.model.status.values.ACTIVE\">\n        <div class=\"panel\">\n          <div class=\"panel-body\">\n            <model-summary [model]=\"model\"></model-summary>\n          </div>\n        </div>\n      </div>\n    </ng-template>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_5__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_4__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_3__services_process_service__["a" /* ProcessService */]])
    ], ModelViewEmbedComponent);
    return ModelViewEmbedComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ModelViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__ = __webpack_require__("../../../../../src/app/interfaces/common.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__services_process_service__ = __webpack_require__("../../../../../src/app/services/process.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__services_acl_service__ = __webpack_require__("../../../../../src/app/services/acl.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};














var ModelViewComponent = (function () {
    function ModelViewComponent(route, router, models, events, processes, acl, tables) {
        var _this = this;
        this.route = route;
        this.router = router;
        this.models = models;
        this.events = events;
        this.processes = processes;
        this.acl = acl;
        this.tables = tables;
        this.TAB_INPUT = 0;
        this.TAB_HOLD_OUT_INPUT = 1;
        this.TAB_OUT_OF_TIME_INPUT = 2;
        this.TAB_ADVANCED = 3;
        this.TAB_OUTPUT = 4;
        this.TAB_TRAINING_PROCESS = 5;
        this.TAB_HOLD_OUT_OUTPUT = 6;
        this.TAB_OUT_OF_TIME_OUTPUT = 7;
        this.TAB_MODEL_PIPELINE_SUMMARY = 8;
        this.TAB_MODEL_SUMMARY = 9;
        this.TABS = [
            { label: 'Input Table', index: this.TAB_INPUT },
            { label: 'Hold-Out Table Input', index: this.TAB_HOLD_OUT_INPUT },
            { label: 'Out-Of-Time Table Input', index: this.TAB_OUT_OF_TIME_INPUT },
            { label: 'Advanced Options', index: this.TAB_ADVANCED },
            { label: 'Output Table', index: this.TAB_OUTPUT },
            { label: 'Training process', index: this.TAB_TRAINING_PROCESS },
            { label: 'Hold-Out Table Output', index: this.TAB_HOLD_OUT_OUTPUT },
            { label: 'Out-Of-Time Table Output', index: this.TAB_OUT_OF_TIME_OUTPUT },
            { label: 'Model Pipeline Summary', index: this.TAB_MODEL_PIPELINE_SUMMARY },
            { label: 'Model Summary Statistics', index: this.TAB_MODEL_SUMMARY },
        ];
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
        this.IModel = __WEBPACK_IMPORTED_MODULE_7__model_interface__["a" /* IModel */];
        this.activeTab = Object(__WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__["c" /* ifMocks */])(this.TAB_TRAINING_PROCESS) || this.TAB_INPUT;
        this.hiddenTabs = [
            this.TAB_TRAINING_PROCESS,
            this.TAB_HOLD_OUT_INPUT,
            this.TAB_OUT_OF_TIME_INPUT,
            this.TAB_ADVANCED,
            this.TAB_HOLD_OUT_OUTPUT,
            this.TAB_OUT_OF_TIME_OUTPUT,
            this.TAB_MODEL_PIPELINE_SUMMARY,
            this.TAB_MODEL_SUMMARY,
        ];
        this.modelEditForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            name: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
        });
        this.eventSubscription = this.events.subscribe(function (event) {
            // process service emits complete and then ui reload model-context
            // we can identify model's table by model.output
            if (event.type === 'PROCESS_COMPLETED' && _this.model.output === event.data.id) {
                _this._loader.load(_this.model.id);
            }
        });
        this._loader = new __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__["a" /* ReactiveLoader */](function (id) {
            return _this.models.get(id).flatMap(function (model) {
                return _this.tables.get(model.input)
                    .map(function (table) { return [model, table]; });
            });
        });
        this._loader.subscribe(function (_a) {
            var model = _a[0], table = _a[1];
            _this.setModel(model);
            _this.inputTable = table;
        });
    }
    ModelViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.editName = false;
        this.activeTab = this.TAB_INPUT;
        this.modelProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL]];
        this.tableProgresses = this.processes.data.targets[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.aliasesPlural[__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE]];
        this.routeSubscription = this.route.params.subscribe(function (params) {
            _this.activeTab = Object(__WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__["c" /* ifMocks */])(_this.TAB_TRAINING_PROCESS) || _this.TAB_OUTPUT;
            _this._loader.load(params['modelId']);
        });
    };
    ModelViewComponent.prototype.setModel = function (model) {
        var _this = this;
        this.model = model;
        //@TODO DUMMY
        if (model.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.status.values.ACTIVE) {
            this.toggleTab(this.TAB_MODEL_SUMMARY, !!model.summary);
            this.toggleTab(this.TAB_HOLD_OUT_OUTPUT, !!model.holdOutOutput);
            this.toggleTab(this.TAB_OUT_OF_TIME_OUTPUT, !!model.outOfTimeOutput);
            this.toggleTab(this.TAB_MODEL_PIPELINE_SUMMARY, !!model.pipelineSummary);
        }
        else {
            this.toggleTab(this.TAB_MODEL_SUMMARY, false);
            this.toggleTab(this.TAB_HOLD_OUT_OUTPUT, false);
            this.toggleTab(this.TAB_OUT_OF_TIME_OUTPUT, false);
            this.toggleTab(this.TAB_MODEL_PIPELINE_SUMMARY, false);
        }
        this.toggleTab(this.TAB_TRAINING_PROCESS, __WEBPACK_IMPORTED_MODULE_6__core_core_mocks_only__["d" /* mocksMode */]);
        this.toggleTab(this.TAB_HOLD_OUT_INPUT, !!model.holdOutInput);
        this.toggleTab(this.TAB_OUT_OF_TIME_INPUT, !!model.outOfTimeInput);
        this.toggleTab(this.TAB_ADVANCED, !!model.trainOptions);
        this.fillModelsForm(this.modelEditForm, model);
        if (model.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.status.values.TRAINING) {
            this.processes.getByTarget(model.id, __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__["a" /* IAsset */].Type.MODEL).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this._loader.load(model.id);
                });
            });
        }
        else if (model.status === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].model.status.values.PREDICTING) {
            this.processes.getByTarget(model.output, __WEBPACK_IMPORTED_MODULE_8__interfaces_common_interface__["a" /* IAsset */].Type.TABLE).subscribe(function (process) {
                _this.processSubscription && _this.processSubscription.unsubscribe();
                _this.processSubscription = _this.processes.subscribe(process, function () {
                    _this._loader.load(model.id);
                });
            });
        }
    };
    ModelViewComponent.prototype.toggleTab = function (index, show) {
        if (show) {
            this.hiddenTabs = this.hiddenTabs.filter(function (_) { return _ !== index; });
        }
        else if (this.hiddenTabs.indexOf(index) === -1) {
            this.hiddenTabs.push(index);
        }
    };
    ModelViewComponent.prototype.ngOnDestroy = function () {
        this.processSubscription && this.processSubscription.unsubscribe();
        this.eventSubscription.unsubscribe();
        this.routeSubscription && this.routeSubscription.unsubscribe();
    };
    ModelViewComponent.prototype.submit = function () {
        var _this = this;
        this.editName = false;
        this.models.update(this.model.id, {
            name: this.modelEditForm.value.name,
        }).subscribe(function () {
            _this._loader.load(_this.model.id);
        });
    };
    ModelViewComponent.prototype.cancelModel = function () {
        var _this = this;
        var process = this.modelProgresses[this.model.id];
        if (!process) {
            return;
        }
        this.processes.cancel(process).subscribe(function () {
            _this._loader.load(_this.model.id);
        });
    };
    ModelViewComponent.prototype.updateTrainingStatus = function (status) {
        this.trainingStatus = status;
    };
    ModelViewComponent.prototype._onModelDeleted = function () {
        this.router.navigate(['/desk', 'train']);
    };
    ModelViewComponent.prototype._tabToLabelFn = function (item) {
        return item.label;
    };
    ModelViewComponent.prototype.fillModelsForm = function (form, model) {
        var canUpdate = this.acl.canUpdateModel(model);
        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].fillForm(form, model, !canUpdate);
    };
    ModelViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'model-view',
            template: "\n    <asset-operations [type]=\"config.asset.values.MODEL\" [selectedItems]=\"[model]\"\n      (onDelete)=\"_onModelDeleted()\"></asset-operations>\n    <app-spinner [visibility]=\"!model\"></app-spinner>\n    <form *ngIf=\"model\" [formGroup]=\"modelEditForm\" class=\"brand-tab\">\n      <div class=\"row\">\n        <div class=\"col-md-6\">\n          <app-input [label]=\"'Model Name'\" [control]=\"modelEditForm.controls['name']\"></app-input>\n        </div>\n        <div *mocksOnly=\"true\" class=\"col-md-6\">\n          <app-fake-control *ngIf=\"inputTable\" [label]=\"'Sampling Weight Column'\"\n            [value]=\"(model?.samplingWeightColumn | tableColumnDisplayName : inputTable) || 'None'\"\n          ></app-fake-control>\n        </div>\n        <div class=\"col-md-offset-6 col-md-6\">\n          <div class=\"pull-right\">\n            <ng-template\n              [ngIf]=\"model?.status !== IModel.Status.TRAINING && model?.status !== IModel.Status.PREDICTING\">\n              <button type=\"button\"\n                [routerLink]=\"['/desk', 'train', model.id, 'retrain']\"\n                class=\"btn btn-md \">Re-Train\n              </button>\n            </ng-template>\n            <ng-template [ngIf]=\"model?.status === IModel.Status.ACTIVE\">\n              <button type=\"button\"\n                [disabled]=\"modelEditForm.invalid || modelEditForm.disabled || modelEditForm.pristine\"\n                (click)=\"submit()\"\n                class=\"btn btn-md btn-apply\">Save\n              </button>\n            </ng-template>\n          </div>\n        </div>\n      </div>\n      <app-tabs\n        [tabs]=\"TABS | map: _tabToLabelFn\"\n        [hiddenTabs]=\"hiddenTabs\"\n        [(active)]=\"activeTab\"></app-tabs>\n      <!-- Tab panes -->\n      <div class=\"flex-col\" [adaptiveHeight]=\"{minHeight: 450, property: 'height'}\">\n        <!--input-->\n        <table-view-embed\n          [hidden]=\"activeTab !== TAB_INPUT\"\n          [id]=\"model.input\"\n          [modelHelpers]=\"model\"></table-view-embed>\n        <!--hold out input-->\n        <table-view-embed [hidden]=\"activeTab !== TAB_HOLD_OUT_INPUT\"\n          *ngIf=\"model?.holdOutInput\"\n          [id]=\"model['holdOutInput']\" [modelHelpers]=\"model\"></table-view-embed>\n        <!--out of time input-->\n        <table-view-embed [hidden]=\"activeTab !== TAB_OUT_OF_TIME_INPUT\"\n            *ngIf=\"model?.outOfTimeInput\"\n            [id]=\"model['outOfTimeInput']\" [modelHelpers]=\"model\"></table-view-embed>\n        <!--output-->\n        <div class=\"flex-col\" [hidden]=\"activeTab !== TAB_OUTPUT\"\n          *ngIf=\"model\" [ngSwitch]=\"model.status\">\n            <process-indicator *ngSwitchCase=\"config.model.status.values.TRAINING\"\n              [process]=\"[modelProgresses[model.id], tableProgresses[model.output]] | combineProcesses\"\n              [message]=\"'Training Model'\"></process-indicator>\n            <process-indicator *ngSwitchCase=\"config.model.status.values.PREDICTING\"\n              [process]=\"[modelProgresses[model.id], tableProgresses[model.output]] | combineProcesses\"\n              [message]=\"'Generating model results'\"></process-indicator>\n            <div *ngSwitchCase=\"config.model.status.values.ERROR\">\n              <error-indicator [target]=\"'model'\" [process]=\"modelProgresses[model.id]\"></error-indicator>\n              <div class=\"row\">\n                <div class=\"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-xl-6 col-xl-offset-3\">\n                  <div class=\"text-center\">\n                    <button\n                      class=\"btn btn-primary\"\n                      [routerLink]=\"[ '/desk', 'train', model.id, 'retrain' ]\">Re-Train\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <error-indicator *ngSwitchCase=\"config.model.status.values.CANCELLED\"\n              [title]=\"'Cancelled'\" [message]=\"'This model training has been cancelled'\"></error-indicator>\n            <table-view-embed *ngSwitchDefault [id]=\"model.output\" [modelHelpers]=\"model\"></table-view-embed>\n        </div>\n        <!--training progress-->\n        <ng-template [mocksOnly]=\"true\">\n          <!--hold out output-->\n          <table-view-embed [hidden]=\"activeTab !== TAB_HOLD_OUT_OUTPUT\"\n            *ngIf=\"model?.holdOutOutput\" [id]=\"model['holdOutOutput']\" [modelHelpers]=\"model\"></table-view-embed>\n          <!--out of time output-->\n          <table-view-embed [hidden]=\"activeTab !== TAB_OUT_OF_TIME_OUTPUT\"\n            *ngIf=\"model?.outOfTimeOutput\" [id]=\"model['outOfTimeOutput']\" [modelHelpers]=\"model\"></table-view-embed>\n          <div class=\"flex-col\" [ngSwitch]=\"model.status\" *ngIf=\"activeTab === TAB_TRAINING_PROCESS\">\n            <error-indicator *ngSwitchCase=\"config.model.status.values.ERROR\"\n              [target]=\"'model'\" [process]=\"modelProgresses[model.id]\"></error-indicator>\n            <error-indicator *ngSwitchCase=\"config.model.status.values.CANCELLED\"\n              [title]=\"'Cancelled'\" [message]=\"'This model training has been cancelled'\"></error-indicator>\n            <ng-template ngSwitchDefault>\n              <model-train-summary\n                *ngIf=\"activeTab === TAB_TRAINING_PROCESS\"\n                [model]=\"model\"\n                [tableProcess]=\"tableProgresses[model.output]\"\n                [process]=\"modelProgresses[model.id]\"\n                (status)=\"updateTrainingStatus($event)\"\n                (cancel)=\"cancelModel()\"\n              ></model-train-summary>\n            </ng-template>\n          </div>\n        </ng-template>\n        <!--summary-->\n        <div class=\"flex-static\"\n          *ngIf=\"model.summary && model.status === IModel.Status.ACTIVE && activeTab === TAB_MODEL_SUMMARY\">\n          <div class=\"panel\">\n            <div class=\"panel-body\">\n              <model-summary [model]=\"model\"></model-summary>\n            </div>\n          </div>\n        </div>\n        <ng-template [mocksOnly]=\"true\">\n          <!--advanced-->\n          <div class=\"flex-static\" [hidden]=\"activeTab !== TAB_ADVANCED\"\n            *ngIf=\"model?.trainOptions\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <model-view-advanced [model]=\"model\"></model-view-advanced>\n              </div>\n            </div>\n          </div>\n          <!--pipeline summary-->\n          <div class=\"flex-static\" [hidden]=\"activeTab !== TAB_MODEL_PIPELINE_SUMMARY\"\n            *ngIf=\"model?.pipelineSummary\">\n            <div class=\"panel\">\n              <div class=\"panel-body\">\n                <model-pipeline-summary [model]=\"model\"></model-pipeline-summary>\n              </div>\n            </div>\n          </div>\n        </ng-template>\n      </div>\n    </form>\n    ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_1__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_10__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_11__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_12__services_process_service__["a" /* ProcessService */],
            __WEBPACK_IMPORTED_MODULE_13__services_acl_service__["a" /* AclService */],
            __WEBPACK_IMPORTED_MODULE_9__services_table_service__["a" /* TableService */]])
    ], ModelViewComponent);
    return ModelViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/model.interface.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return IVariableImportance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return IModel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return IModelTrainSummary; });
var IVariableImportance;
(function (IVariableImportance) {
    var Decision;
    (function (Decision) {
        Decision["TENTATIVE"] = "TENTATIVE";
        Decision["CONFIRMED"] = "CONFIRMED";
        Decision["REJECTED"] = "REJECTED";
        Decision["SHADOW"] = "SHADOW";
    })(Decision = IVariableImportance.Decision || (IVariableImportance.Decision = {}));
})(IVariableImportance || (IVariableImportance = {}));
var IModel;
(function (IModel) {
    var Type;
    (function (Type) {
        Type["LOGISTIC"] = "LOGISTIC";
        Type["LINEAR"] = "LINEAR";
    })(Type = IModel.Type || (IModel.Type = {}));
    var Status;
    (function (Status) {
        Status["ACTIVE"] = "ACTIVE";
        Status["TRAINING"] = "TRAINING";
        Status["PREDICTING"] = "PREDICTING";
        Status["ERROR"] = "ERROR";
        Status["CANCELLED"] = "CANCELLED";
    })(Status = IModel.Status || (IModel.Status = {}));
    var PipelineStage;
    (function (PipelineStage) {
        PipelineStage["OUTLIERS_TREATMENT"] = "OUTLIERS_TREATMENT";
        PipelineStage["DESKEWING"] = "DESKEWING";
        PipelineStage["IMPUTATION"] = "IMPUTATION";
        PipelineStage["NORMALIZATION"] = "NORMALIZATION";
        PipelineStage["MULTICOLINEARITY_TREATMENT"] = "MULTICOLINEARITY_TREATMENT";
        PipelineStage["MODEL_PRIMITIVES"] = "MODEL_PRIMITIVES";
    })(PipelineStage = IModel.PipelineStage || (IModel.PipelineStage = {}));
    var StageTechnique;
    (function (StageTechnique) {
        StageTechnique["OT_STDDEV"] = "OT_STDDEV";
        StageTechnique["OT_KMEANS"] = "OT_KMEANS";
        StageTechnique["DS_BOXCOX"] = "DS_BOXCOX";
        StageTechnique["DS_MANLY"] = "DS_MANLY";
        StageTechnique["DS_BOXCOX_MOD"] = "DS_BOXCOX_MOD";
        StageTechnique["IM_KNN"] = "IM_KNN";
        StageTechnique["IM_LINEAR"] = "IM_LINEAR";
        StageTechnique["IM_EXPONENT"] = "IM_EXPONENT";
        StageTechnique["IM_POLYNOM"] = "IM_POLYNOM";
        StageTechnique["NM_ZSCORE"] = "NM_ZSCORE";
        StageTechnique["NM_MINMAX"] = "NM_MINMAX";
        StageTechnique["NM_INDEX"] = "NM_INDEX";
        StageTechnique["MC_PCA"] = "MC_PCA";
        StageTechnique["MP_GLM"] = "MP_GLM";
        StageTechnique["MP_GLM_ELASTIC_NET"] = "MP_GLM_ELASTIC_NET";
        StageTechnique["MP_RANDOM_FOREST"] = "MP_RANDOM_FOREST";
        StageTechnique["MP_SVM"] = "MP_SVM";
        StageTechnique["MP_XGBOOST"] = "MP_XGBOOST";
        StageTechnique["MP_DECISION_TREE"] = "MP_DECISION_TREE";
        StageTechnique["MP_DNN"] = "MP_DNN";
    })(StageTechnique = IModel.StageTechnique || (IModel.StageTechnique = {}));
})(IModel || (IModel = {}));
var IModelTrainSummary;
(function (IModelTrainSummary) {
    var TrainState;
    (function (TrainState) {
        TrainState["TRAINING"] = "TRAINING";
        TrainState["REFINING"] = "REFINING";
        TrainState["COMPLETE"] = "COMPLETE";
    })(TrainState = IModelTrainSummary.TrainState || (IModelTrainSummary.TrainState = {}));
})(IModelTrainSummary || (IModelTrainSummary = {}));


/***/ }),

/***/ "../../../../../src/app/train/roc-chart.directive.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ROCChartDirective; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js__ = __webpack_require__("../../../../chart.js/src/chart.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_chart_js__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var ROCChartDirective = (function () {
    function ROCChartDirective(el, zone) {
        this.zone = zone;
        this.data = null;
        this.el = el.nativeElement;
    }
    ROCChartDirective.prototype.ngOnChanges = function () {
        if (this.data) {
            this.destroy();
            var result = [{
                    label: 'ROC curve',
                    fill: false,
                    lineTension: 0.1,
                    backgroundColor: 'rgba(75,192,192,0.4)',
                    borderColor: 'rgba(75,192,192,1)',
                    borderCapStyle: 'butt',
                    borderDash: [],
                    borderDashOffset: 0.0,
                    borderJoinStyle: 'miter',
                    pointBorderColor: 'rgba(75,192,192,1)',
                    pointBackgroundColor: '#fff',
                    pointBorderWidth: 1,
                    pointHoverRadius: 5,
                    pointHoverBackgroundColor: 'rgba(75,192,192,1)',
                    pointHoverBorderColor: 'rgba(220,220,220,1)',
                    pointHoverBorderWidth: 2,
                    pointRadius: 1,
                    pointHitRadius: 10,
                    data: this.data.map(function (row) {
                        return { x: row[0], y: row[1] };
                    }),
                    spanGaps: false,
                }];
            this.init(result);
        }
    };
    ROCChartDirective.prototype.ngOnDestroy = function () {
        this.destroy();
    };
    ROCChartDirective.prototype.destroy = function () {
        if (this.chart) {
            this.chart.destroy();
        }
    };
    ROCChartDirective.prototype.init = function (result) {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            _this.chart = new __WEBPACK_IMPORTED_MODULE_1_chart_js__(_this.el, {
                type: 'line',
                data: {
                    datasets: result
                },
                options: {
                    legend: {
                        labels: {
                            usePointStyle: true,
                        }
                    },
                    animation: {
                        duration: 0,
                    },
                    hover: {
                        mode: 'single',
                        animationDuration: 0,
                    },
                    maintainAspectRatio: false,
                    scales: {
                        yAxes: [{
                                type: 'linear',
                                position: 'left',
                                scaleLabel: {
                                    display: true,
                                    labelString: 'True positive rate',
                                }
                            }],
                        xAxes: [{
                                type: 'linear',
                                position: 'bottom',
                                scaleLabel: {
                                    display: true,
                                    labelString: 'False positive rate'
                                }
                            }]
                    },
                },
            });
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])('roc-chart'),
        __metadata("design:type", Array)
    ], ROCChartDirective.prototype, "data", void 0);
    ROCChartDirective = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["s" /* Directive */])({
            selector: '[roc-chart]'
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], ROCChartDirective);
    return ROCChartDirective;
}());



/***/ }),

/***/ "../../../../../src/app/train/techniques-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TechniquesChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__train_config__ = __webpack_require__("../../../../../src/app/train/train.config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var TICKS_COUNT = 5;
var PARAMETER_WIDTH = 100;
var PARAMETER_FIRST_HORIZONTAL_PADDING = 15;
var PARAMETER_HORIZONTAL_PADDING = 15;
var PARAMETER_FIRST_VERTICAL_PADDING = 15;
var PARAMETER_VERTICAL_PADDING = 15;
var TECHNIQUE_HEIGHT = 60;
var STAGE_FIRST_VERTICAL_PADDING = 10;
var STAGE_VERTICAL_PADDING = 35;
var VISIBLE_PARAMS = 2;
var PARAMETERS_OFFSET = (PARAMETER_WIDTH + PARAMETER_HORIZONTAL_PADDING);
var animationTime = 200;
var TechniquesChartComponent = (function () {
    function TechniquesChartComponent() {
        this.styleHeight = '100%';
        this.styleWidth = '100%';
        this.clipWidth = PARAMETERS_OFFSET * VISIBLE_PARAMS;
        this.clipHeight = TECHNIQUE_HEIGHT;
        this.clipPadding = PARAMETER_FIRST_HORIZONTAL_PADDING;
        this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_6__angular_common__["d" /* DecimalPipe */]('en-US');
        this.scrollCoordinates = {};
    }
    TechniquesChartComponent.prototype.ngOnChanges = function (changes) {
        if (this._svgElement) {
            if ((changes['selectedIterations'] && !__WEBPACK_IMPORTED_MODULE_1_lodash__["isEqual"](changes['selectedIterations'].currentValue, changes['selectedIterations'].previousValue))
                || (changes['iterations'] && !__WEBPACK_IMPORTED_MODULE_1_lodash__["isEqual"](changes['iterations'].currentValue, changes['iterations'].previousValue))) {
                this.drawChart();
            }
        }
    };
    TechniquesChartComponent.prototype.ngAfterViewInit = function () {
        this.drawChart();
    };
    TechniquesChartComponent.prototype.drawChart = function () {
        var _this = this;
        var svg = new __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__["a" /* D3ChartHelper */](this._svgElement.nativeElement);
        svg.margin = { top: 10, left: 1, bottom: 15, right: 0 };
        if (!this.iterations) {
            return;
        }
        var stageInstances = __WEBPACK_IMPORTED_MODULE_1_lodash__["flatten"](this.iterations.map(function (_) { return _.hyperParameters; }));
        var selectedStageInstances = __WEBPACK_IMPORTED_MODULE_1_lodash__["flatten"](this.iterations.filter(function (iteration) { return __WEBPACK_IMPORTED_MODULE_1_lodash__["includes"](_this.selectedIterations, iteration.index); }).map(function (_) { return _.hyperParameters; }));
        var techniquesByStage = this._prepareIterationTechniques(stageInstances);
        var selectedTechniquesByStage = selectedStageInstances.length ? this._prepareIterationTechniques(selectedStageInstances) : {};
        Object.keys(techniquesByStage).forEach(function (stage) {
            selectedTechniquesByStage[stage] = __WEBPACK_IMPORTED_MODULE_1_lodash__["defaults"](selectedTechniquesByStage[stage] || {}, __WEBPACK_IMPORTED_MODULE_1_lodash__["mapValues"](techniquesByStage[stage], function () {
                return {
                    count: 0,
                    parameters: {},
                };
            }));
        });
        var enabledStages = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineOrder.filter(function (stage) { return techniquesByStage.hasOwnProperty(stage); });
        // STAGES
        var oldStageGroup = svg.chartArea
            .selectAll('g.stage')
            .data(enabledStages);
        oldStageGroup.exit().remove();
        var stageGroupTops = enabledStages
            .map(function (stage) { return TECHNIQUE_HEIGHT * __WEBPACK_IMPORTED_MODULE_2_d3__["keys"](techniquesByStage[stage]).length + STAGE_VERTICAL_PADDING; })
            .map(function (height, idx, acc) {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["sum"](acc.slice(0, idx));
        });
        // ADD LAST STAGE TECHNIQUES PADDING
        var lastStage = enabledStages[enabledStages.length - 1];
        var totalHeight = stageGroupTops[stageGroupTops.length - 1] + __WEBPACK_IMPORTED_MODULE_2_d3__["keys"](techniquesByStage[lastStage]).length * TECHNIQUE_HEIGHT + STAGE_VERTICAL_PADDING + STAGE_FIRST_VERTICAL_PADDING;
        svg.svg.attr('height', totalHeight || 500);
        var stageGroup = oldStageGroup.enter()
            .append('g')
            .attr('class', 'stage')
            .merge(oldStageGroup)
            .attr('transform', function (_, i) { return "translate(0, " + (STAGE_FIRST_VERTICAL_PADDING + stageGroupTops[i]) + ")"; });
        var self = this;
        //drawing techniques
        stageGroup.each(function (stage) {
            self.drawStage(this, techniquesByStage, selectedTechniquesByStage, stage, svg);
            self._drawVerticalDelimiter(this, techniquesByStage, stage);
        });
    };
    TechniquesChartComponent.prototype._drawVerticalDelimiter = function (stageEl, techniquesByStage, stage) {
        var stageSelection = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](stageEl);
        var oldLineDelimiter = stageSelection.selectAll('line.delimiter').data([true]);
        oldLineDelimiter.enter()
            .append('line')
            .attr('class', 'delimiter')
            .attr('x1', 0)
            .attr('y1', 0)
            .attr('x2', 0)
            .merge(oldLineDelimiter)
            .attr('y2', TECHNIQUE_HEIGHT * __WEBPACK_IMPORTED_MODULE_2_d3__["keys"](techniquesByStage[stage]).length + 5)
            .attr('transform', 'translate(-1,0)');
        var oldPathGroup = stageSelection.selectAll('g.path-group').data([true]);
        var pathGroup = oldPathGroup.enter()
            .append('g')
            .attr('class', 'path-group')
            .merge(oldPathGroup)
            .attr('transform', "translate(0, 0)");
        var oldPathDelimiter = pathGroup.selectAll('path.delimiter').data([true]);
        oldPathDelimiter.enter()
            .append('path')
            .attr('class', 'delimiter')
            .attr('d', 'M 0 0 L 3 3 L 3 10 L 0 13 Z');
    };
    TechniquesChartComponent.prototype.drawStage = function (that, techniquesByStage, selectedTechniquesByStage, stage, svg) {
        var _this = this;
        var attributeDomain = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineStage.techniques[stage].filter(function (_) { return techniquesByStage[stage].hasOwnProperty(_); });
        var stageWidth = svg.chartSize.width - PARAMETERS_OFFSET * VISIBLE_PARAMS - PARAMETER_FIRST_VERTICAL_PADDING - 25;
        var metricRange = [0, stageWidth];
        var attributeRange = [15, TECHNIQUE_HEIGHT * attributeDomain.length + 15];
        var metricScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
            .domain([
            0,
            __WEBPACK_IMPORTED_MODULE_2_d3__["max"](__WEBPACK_IMPORTED_MODULE_2_d3__["values"](techniquesByStage[stage]).map(function (_) { return _.count; })),
        ])
            .rangeRound(metricRange)
            .nice();
        var attributeScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleBand"]()
            .domain(attributeDomain)
            .rangeRound(attributeRange)
            .paddingInner(0.5)
            .paddingOuter(0.25);
        var data = this._prepareTechniqueParameters(techniquesByStage, stage);
        // STAGE LABELS
        __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__["a" /* D3ChartHelper */].addText(that, [true], 'stage-label', 10, 10, __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineStage.labels[stage]);
        // TECHNIQUES
        this._drawTechniqueBars(that, data, 'technique', attributeScale, metricScale, this._initTechniquePosition, this._setTechniqueTransition);
        // Selected TECHNIQUES
        var selectedData = this._prepareTechniqueParameters(selectedTechniquesByStage, stage);
        this._drawTechniqueBars(that, selectedData, 'active-technique', attributeScale, metricScale, this._initTechniquePosition, this._setTechniqueTransition);
        // TECHNIQUE LABELS INSIDE BAR
        var techniqueLabels = __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__["a" /* D3ChartHelper */].addText(that, data, 'technique', 10, function (_, i) { return TECHNIQUE_HEIGHT * (i + 0.5); }, function (d) { return __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].stageTechnique.labels[d.technique]; }, 'start', stageWidth, 0, null, '1.7em');
        techniqueLabels.raise();
        // TECHNIQUE CHARTS
        var oldParameterGroups = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](that).selectAll('g.technique-chart').data(data);
        oldParameterGroups.exit().remove();
        var parameterGroups = oldParameterGroups.enter()
            .append('g')
            .attr('class', 'technique-chart')
            .merge(oldParameterGroups)
            .attr('transform', function (d, i) { return "translate(" + (stageWidth + PARAMETER_FIRST_HORIZONTAL_PADDING) + ", " + (i * TECHNIQUE_HEIGHT + PARAMETER_FIRST_VERTICAL_PADDING) + " )"; })
            .style('clip-path', "url(#myClip)");
        var parameterList = __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].stageTechnique.params;
        // Group Of Parameter Charts
        var oldCharts = parameterGroups.selectAll('g.charts').data(function (d) { return [d]; });
        oldCharts.exit().remove();
        var charts = oldCharts.enter()
            .append('g')
            .attr('class', 'charts')
            .merge(oldCharts)
            .attr('transform', function (d) {
            if (!_this.scrollCoordinates.hasOwnProperty(stage)) {
                _this.scrollCoordinates[stage] = {};
                _this.scrollCoordinates[stage][d.technique] = 0;
            }
            if (!_this.scrollCoordinates[stage].hasOwnProperty(d.technique)) {
                _this.scrollCoordinates[stage][d.technique] = 0;
            }
            return "translate(" + _this.scrollCoordinates[stage][d.technique] + ", 0)";
        });
        // EACH CHART
        var oldParameterCharts = charts
            .selectAll('g.chart')
            .data(function (d) {
            return parameterList[d.technique].map(function (parameter) { return [d.technique, parameter]; });
        });
        oldParameterCharts.exit().remove();
        var parameterCharts = oldParameterCharts.enter()
            .append('g')
            .attr('class', 'chart')
            .attr('transform', function (_a, chartIndex) {
            var technique = _a[0];
            return "translate(" + (chartIndex * (PARAMETER_HORIZONTAL_PADDING + PARAMETER_WIDTH) + PARAMETER_FIRST_HORIZONTAL_PADDING) + ", 0)";
        })
            .merge(oldParameterCharts);
        var parameterScrollData = data.map(function (d) {
            return {
                technique: d.technique,
                parametersLength: __WEBPACK_IMPORTED_MODULE_2_d3__["keys"](d.parameters).length,
                parameterNeedLeftScroll: _this.scrollCoordinates[stage][d.technique] < 0,
                parameterNeedRightScroll: _this.scrollCoordinates[stage][d.technique] + __WEBPACK_IMPORTED_MODULE_2_d3__["keys"](d.parameters).length * PARAMETERS_OFFSET > VISIBLE_PARAMS * PARAMETERS_OFFSET,
            };
        });
        // Left Chevron BUTTON-GROUP
        var oldLeftButton = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](that).selectAll('g.left-button').data(parameterScrollData);
        oldLeftButton.exit().remove();
        var leftButton = oldLeftButton.enter()
            .append('g')
            .attr('class', 'left-button')
            .attr('transform', function (_, i) { return "translate(" + (stageWidth + PARAMETER_FIRST_HORIZONTAL_PADDING) + ", " + (i * TECHNIQUE_HEIGHT + PARAMETER_FIRST_VERTICAL_PADDING) + " )"; })
            .merge(oldLeftButton)
            .attr('visibility', function (d) { return d.parameterNeedLeftScroll ? 'visible' : 'hidden'; });
        // Left Chevron
        var oldLeftPath = leftButton.selectAll('path').data([true]);
        oldLeftPath.exit().remove();
        oldLeftPath.enter()
            .append('path')
            .attr('d', "M 10 10 L 0 " + TECHNIQUE_HEIGHT / 2 + " L 10 " + (TECHNIQUE_HEIGHT - 10) + " Z");
        // Right Chevron BUTTON-GROUP
        var oldRightButton = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](that).selectAll('g.right-button').data(parameterScrollData);
        oldRightButton.exit().remove();
        var rightButton = oldRightButton.enter()
            .append('g')
            .attr('class', 'right-button')
            .attr('transform', function (_, i) { return "translate(" + (stageWidth + (PARAMETERS_OFFSET * VISIBLE_PARAMS) + PARAMETER_FIRST_HORIZONTAL_PADDING + 5) + ", " + (i * TECHNIQUE_HEIGHT + PARAMETER_FIRST_VERTICAL_PADDING) + " )"; })
            .merge(oldRightButton)
            .attr('visibility', function (d) { return d.parameterNeedRightScroll ? 'visible' : 'hidden'; });
        // Right Chevron
        var oldRightPath = rightButton.selectAll('path').data([true]);
        oldRightPath.exit().remove();
        oldRightPath.enter()
            .append('path')
            .attr('d', "M 0 10 L 10 " + TECHNIQUE_HEIGHT / 2 + " L 0 " + (TECHNIQUE_HEIGHT - 10) + " Z");
        var self = this;
        parameterCharts.each(function (_a) {
            var technique = _a[0], parameter = _a[1];
            self.drawParameter(this, [technique, parameter], techniquesByStage, selectedTechniquesByStage, stage, svg);
        });
        var observable = __WEBPACK_IMPORTED_MODULE_5_rxjs_Observable__["a" /* Observable */].create(function (observer) { return _this.observer = observer; });
        observable.debounceTime(animationTime).subscribe(function (value) {
            _this.scrollChart(charts.filter(function (d) { return d.technique === value.technique; }), stage, value, leftButton.filter(function (d) { return d.technique === value.technique; }), rightButton.filter(function (d) { return d.technique === value.technique; }));
        });
        // SCROLL LEFT-RIGHT
        leftButton.on('click', function (d) {
            _this.observer.next({ technique: d.technique, parametersLength: d.parametersLength, direction: false });
        });
        rightButton.on('click', function (d) {
            _this.observer.next({ technique: d.technique, parametersLength: d.parametersLength, direction: true });
        });
    };
    TechniquesChartComponent.prototype.scrollChart = function (chart, stage, value, leftButton, rightButton) {
        if (value.direction) {
            if (this.scrollCoordinates[stage][value.technique] + value.parametersLength * PARAMETERS_OFFSET > (VISIBLE_PARAMS * PARAMETERS_OFFSET)) {
                this.scrollCoordinates[stage][value.technique] -= PARAMETERS_OFFSET;
                leftButton.attr('visibility', 'visible');
            }
        }
        else {
            if (this.scrollCoordinates[stage][value.technique] < 0) {
                this.scrollCoordinates[stage][value.technique] += PARAMETERS_OFFSET;
                rightButton.attr('visibility', 'visible');
            }
        }
        if (this.scrollCoordinates[stage][value.technique] + (value.parametersLength * PARAMETERS_OFFSET) === (VISIBLE_PARAMS * PARAMETERS_OFFSET)) {
            rightButton.attr('visibility', 'hidden');
        }
        if (this.scrollCoordinates[stage][value.technique] === 0) {
            leftButton.attr('visibility', 'hidden');
        }
        chart.transition()
            .duration(animationTime)
            .attr('transform', "translate(" + this.scrollCoordinates[stage][value.technique] + ", 0)");
    };
    TechniquesChartComponent.prototype.drawParameter = function (that, _a, techniquesByStage, selectedTechniquesByStage, stage, svg) {
        var technique = _a[0], parameter = _a[1];
        // PARAMETER LABEL
        __WEBPACK_IMPORTED_MODULE_4__charts_d3_chart_helper__["a" /* D3ChartHelper */].addText(that, [true], 'technique-label', 0, 10, parameter.title, 'start', PARAMETER_WIDTH);
        var values = __WEBPACK_IMPORTED_MODULE_2_d3__["values"](techniquesByStage[stage][technique].parameters[parameter.name]);
        var _b = this._getParameterValues(parameter, values, svg, values), metricValues = _b[0], paramAttributeDomain = _b[1];
        //Metric axis
        var paramMetricScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
            .domain([0, __WEBPACK_IMPORTED_MODULE_2_d3__["max"](metricValues)])
            .rangeRound([0, PARAMETER_WIDTH])
            .nice();
        //Attribute axis
        var rectAttributeScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleBand"]()
            .domain(__WEBPACK_IMPORTED_MODULE_2_d3__["range"](metricValues.length))
            .rangeRound([TECHNIQUE_HEIGHT - PARAMETER_VERTICAL_PADDING, PARAMETER_VERTICAL_PADDING])
            .paddingInner(0.2)
            .paddingOuter(0.5);
        // DRAW PARAMS ALL
        this._drawParameterBars(that, metricValues, 'parameter', rectAttributeScale, paramMetricScale, this._initParameterPosition, this._setParameterTransition, this._bindTooltips, paramAttributeDomain);
        // SELECTED PARAMS
        if (selectedTechniquesByStage && stage in selectedTechniquesByStage && technique in selectedTechniquesByStage[stage]) {
            var selectedValues = __WEBPACK_IMPORTED_MODULE_2_d3__["values"](selectedTechniquesByStage[stage][technique].parameters[parameter.name]);
            var selectedMetricValues = this._getParameterValues(parameter, selectedValues, svg, values)[0];
            this._drawParameterBars(that, selectedMetricValues, 'active-parameter', rectAttributeScale, paramMetricScale, this._initParameterPosition, this._setParameterTransition, this._bindTooltips, paramAttributeDomain);
        }
        else {
            var selectedMetricValues = this._getParameterValues(parameter, [], svg, values)[0];
            this._drawParameterBars(that, selectedMetricValues, 'active-parameter', rectAttributeScale, paramMetricScale, this._initParameterPosition, this._setParameterTransition, this._bindTooltips, paramAttributeDomain);
        }
    };
    TechniquesChartComponent.prototype._setTechniqueTransition = function (rectAttributeScale, metricScale) {
        // *trollface*
        var y0 = metricScale(0);
        var rectWidth = rectAttributeScale.bandwidth();
        return function (datum) {
            var y1 = metricScale(datum.count);
            var y = Math.min(y0, y1), height = Math.abs(y1 - y0);
            // *trollface*
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this)
                .transition()
                .duration(500)
                .delay(function (_, i) { return (i + 1) * 10; })
                .attr('y', rectAttributeScale(datum.technique))
                .attr('x', y)
                .attr('height', rectWidth)
                .attr('width', height);
        };
    };
    TechniquesChartComponent.prototype._initTechniquePosition = function (rectAttributeScale, metricScale) {
        // *TROLLFACE*
        var rectWidth = rectAttributeScale.bandwidth();
        return function (datum) {
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this)
                .attr('y', rectAttributeScale(datum.technique))
                .attr('x', metricScale(0))
                .attr('height', rectWidth)
                .attr('width', 0);
        };
    };
    TechniquesChartComponent.prototype._setParameterTransition = function (rectAttributeScale, metricScale) {
        // *trollface*
        var y0 = metricScale(0);
        var rectWidth = rectAttributeScale.bandwidth();
        return function (datum, index) {
            var y1 = metricScale(datum);
            var y = Math.min(y0, y1), height = Math.abs(y1 - y0);
            // *trollface*
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this)
                .transition()
                .duration(500)
                .delay(function (_, i) { return (i + 1) * 10; })
                .attr('y', rectAttributeScale(index))
                .attr('x', y)
                .attr('height', rectWidth)
                .attr('width', height);
        };
    };
    TechniquesChartComponent.prototype._initParameterPosition = function (rectAttributeScale, metricScale) {
        // *trollface*
        var rectWidth = rectAttributeScale.bandwidth();
        return function (datum, index) {
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this)
                .attr('y', rectAttributeScale(index))
                .attr('x', metricScale(0))
                .attr('height', rectWidth)
                .attr('width', 0);
        };
    };
    TechniquesChartComponent.prototype._prepareIterationTechniques = function (iterations) {
        return iterations.reduce(function (acc, s) {
            if (!acc.hasOwnProperty(s.stage)) {
                acc[s.stage] = {};
            }
            if (!acc[s.stage].hasOwnProperty(s.technique)) {
                acc[s.stage][s.technique] = {
                    count: 1,
                    parameters: {},
                };
                s.parameters.forEach(function (param) {
                    acc[s.stage][s.technique].parameters[param.name] = [param.value || param.stringValue];
                });
            }
            else {
                acc[s.stage][s.technique].count++;
                s.parameters.forEach(function (param) {
                    acc[s.stage][s.technique].parameters[param.name].push(param.value || param.stringValue);
                });
            }
            return acc;
        }, {});
    };
    TechniquesChartComponent.prototype._prepareTechniqueParameters = function (data, stage) {
        if (!data) {
            return [];
        }
        return __WEBPACK_IMPORTED_MODULE_3__train_config__["a" /* trainConfig */].pipelineStage.techniques[stage]
            .filter(function (_) { return data[stage].hasOwnProperty(_); })
            .map(function (technique) {
            return {
                technique: technique,
                parameters: data[stage][technique].parameters,
                count: data[stage][technique].count,
            };
        });
    };
    TechniquesChartComponent.prototype._bindTooltips = function (selection, paramAttributeDomain) {
        selection.on('mouseover', function (_, index) {
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"]('.toolTip').remove();
            var divTooltip = __WEBPACK_IMPORTED_MODULE_2_d3__["select"]('body').append('div').attr('class', 'toolTip');
            divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_2_d3__["event"].pageX + 10 + 'px');
            divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_2_d3__["event"].pageY - 25 + 'px');
            divTooltip.style('display', 'inline-block');
            divTooltip.html("Value: " + paramAttributeDomain[index] + " Count: " + _);
        })
            .on('mouseout', function () {
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"]('.toolTip').remove();
        });
    };
    TechniquesChartComponent.prototype._getParameterValues = function (parameter, currentValues, svg, originalValues) {
        var _this = this;
        var paramAttributeDomain, result;
        if (parameter.type === 'continuous') {
            var _a = __WEBPACK_IMPORTED_MODULE_2_d3__["extent"](originalValues), start_1 = _a[0], stop_1 = _a[1];
            var step_1 = (stop_1 - start_1) / TICKS_COUNT;
            paramAttributeDomain = __WEBPACK_IMPORTED_MODULE_2_d3__["range"](start_1, stop_1, step_1).concat([stop_1]).map(function (_) { return _this._formatFloat(_); });
            result = currentValues.reduce(function (acc, value) {
                var index = Math.floor((value - start_1) / step_1);
                acc[index]++;
                return acc;
            }, new Array(paramAttributeDomain.length).fill(0));
        }
        else {
            paramAttributeDomain = __WEBPACK_IMPORTED_MODULE_2_d3__["extent"](originalValues);
            result = currentValues.reduce(function (acc, value) {
                var index = paramAttributeDomain.indexOf(value);
                acc[index]++;
                return acc;
            }, new Array(paramAttributeDomain.length).fill(0));
        }
        return [result, paramAttributeDomain];
    };
    TechniquesChartComponent.prototype._drawTechniqueBars = function (el, data, classSelector, attributeScale, metricScale, _initTechniquePosition, _setTechniqueTransition) {
        var oldBars = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](el).selectAll("rect." + classSelector)
            .data(data);
        oldBars.exit().remove();
        var bars = oldBars.enter()
            .append('rect')
            .attr('class', classSelector)
            .each(_initTechniquePosition(attributeScale, metricScale))
            .merge(oldBars);
        bars
            .each(_setTechniqueTransition(attributeScale, metricScale));
        bars.order();
    };
    TechniquesChartComponent.prototype._drawParameterBars = function (el, data, classSelector, rectAttributeScale, paramMetricScale, _initParameterPosition, _setParameterTransition, _bindTooltips, paramAttributeDomain) {
        var oldBars = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](el).selectAll("rect." + classSelector)
            .data(data);
        oldBars.exit().remove();
        var bars = oldBars.enter()
            .append('rect')
            .attr('class', classSelector)
            .each(_initParameterPosition(rectAttributeScale, paramMetricScale))
            .merge(oldBars);
        bars
            .each(_setParameterTransition(rectAttributeScale, paramMetricScale));
        bars.order();
        _bindTooltips(bars, paramAttributeDomain);
    };
    TechniquesChartComponent.prototype._formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-2');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TechniquesChartComponent.prototype, "iterations", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], TechniquesChartComponent.prototype, "selectedIterations", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], TechniquesChartComponent.prototype, "styleHeight", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.width'),
        __metadata("design:type", Object)
    ], TechniquesChartComponent.prototype, "styleWidth", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], TechniquesChartComponent.prototype, "_svgElement", void 0);
    TechniquesChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'train-techniques-chart',
            changeDetection: __WEBPACK_IMPORTED_MODULE_0__angular_core__["j" /* ChangeDetectionStrategy */].OnPush,
            template: "\n    <svg #canvas width='960' height='500'>\n      <defs>\n        <clipPath id=\"myClip\">\n          <rect [attr.x]=\"clipPadding\" y=\"0\"\n            [attr.width]=\"clipWidth\"\n            [attr.height]=\"clipHeight\"></rect>\n        </clipPath>\n      </defs>\n    </svg>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], TechniquesChartComponent);
    return TechniquesChartComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/train.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TrainComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var TrainComponent = (function () {
    function TrainComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.validity = false;
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_2__utils_activity_observer__["a" /* ActivityObserver */]();
    }
    TrainComponent.prototype.clear = function () {
        this.selectedInputData = null;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('child'),
        __metadata("design:type", Object)
    ], TrainComponent.prototype, "childComponent", void 0);
    TrainComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-train',
            template: "\n    <asset-operations [type]=\"selectedInputData?.entity === config.asset.values.ALBUM ? config.asset.values.CV_MODEL : config.asset.values.MODEL\" [selectedItems]=\"[]\"></asset-operations>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <library-selector\n          [inputLabel]=\"'Input Data'\"\n          [available]=\"[config.asset.values.TABLE, config.asset.values.FLOW, config.asset.values.ALBUM]\"\n          [(value)]=\"selectedInputData\"\n          [title]=\"'Select Training Input Data'\"></library-selector>\n      </div>\n      <div class=\"col-md-6\">\n        <div class=\"pull-right\">\n          <button class=\"btn btn-md btn-clear\"\n            (click)=\"childComponent?.clear && childComponent.clear(); clear();\">\n            Clear\n          </button>\n          <button class=\"btn btn-md btn-apply\" (click)=\"_savingObserver.observe(childComponent.submit())\"\n            [disabled]=\"!validity || (_savingObserver.active | async)\">\n            Train\n          </button>\n        </div>\n      </div>\n    </div>\n    <model-create #child\n      *ngIf=\"selectedInputData?.entity === config.asset.values.TABLE || selectedInputData?.entity === config.asset.values.FLOW\"\n      [(inputEntity)]=\"selectedInputData\"\n      (changeValidity)=\"validity = $event\"></model-create>\n    <app-cv-model-create #child\n      *ngIf=\"selectedInputData?.entity === config.asset.values.ALBUM\"\n      [inputData]=\"selectedInputData.object\"\n      (changeValidity)=\"validity = $event\"></app-cv-model-create>\n  "
        })
    ], TrainComponent);
    return TrainComponent;
}());



/***/ }),

/***/ "../../../../../src/app/train/train.config.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return trainConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_interface__ = __webpack_require__("../../../../../src/app/train/model.interface.ts");


var trainConfig = {
    type: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].Type, {
        labels: {
            LINEAR: 'Linear Regression',
            LOGISTIC: 'Logistic Regression',
        },
    }),
    modelStatus: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].Status, {
        labels: {
            ACTIVE: 'Done',
            TRAINING: 'Training',
            PREDICTING: 'Predicting',
            ERROR: 'Error',
            CANCELLED: 'Cancelled',
        },
    }),
    trainState: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["b" /* IModelTrainSummary */].TrainState, {
        labels: {
            TRAINING: 'Training',
            REFINING: 'Refining',
            COMPLETE: 'Complete',
        },
    }),
    variableImportanceDecision: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["c" /* IVariableImportance */].Decision, {
        labels: {
            REJECTED: 'Rejected',
            CONFIRMED: 'Confirmed',
            TENTATIVE: 'Tentative',
            SHADOW: 'Shadow Attribute',
        },
    }),
    pipelineStage: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage, {
        labels: {
            OUTLIERS_TREATMENT: 'Outlier Treatment',
            DESKEWING: 'DeSkewing',
            IMPUTATION: 'Imputation',
            NORMALIZATION: 'Normalization',
            MULTICOLINEARITY_TREATMENT: 'Multicolinearity',
            MODEL_PRIMITIVES: 'Model Primitives',
        },
        techniques: {
            OUTLIERS_TREATMENT: [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.OT_STDDEV, __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.OT_KMEANS],
            DESKEWING: [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.DS_BOXCOX, __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.DS_MANLY, __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.DS_BOXCOX_MOD],
            IMPUTATION: [
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.IM_KNN,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.IM_LINEAR,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.IM_EXPONENT,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.IM_POLYNOM,
            ],
            NORMALIZATION: [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.NM_ZSCORE, __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.NM_MINMAX, __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.NM_INDEX],
            MULTICOLINEARITY_TREATMENT: [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MC_PCA],
            MODEL_PRIMITIVES: [
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_GLM,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_GLM_ELASTIC_NET,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_RANDOM_FOREST,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_SVM,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_XGBOOST,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_DECISION_TREE,
                __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_DNN,
            ],
        },
        defaultTechniques: {
            OUTLIERS_TREATMENT: null,
            DESKEWING: null,
            IMPUTATION: null,
            NORMALIZATION: null,
            MULTICOLINEARITY_TREATMENT: null,
            MODEL_PRIMITIVES: [__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique.MP_GLM],
        }
    }),
    pipelineOrder: [
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.OUTLIERS_TREATMENT,
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.DESKEWING,
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.IMPUTATION,
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.NORMALIZATION,
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.MULTICOLINEARITY_TREATMENT,
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.MODEL_PRIMITIVES,
    ],
    requiredStages: [
        __WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].PipelineStage.MODEL_PRIMITIVES,
    ],
    stageTechnique: Object(__WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */])(__WEBPACK_IMPORTED_MODULE_1__model_interface__["a" /* IModel */].StageTechnique, {
        labels: {
            OT_STDDEV: 'Standard Deviation',
            OT_KMEANS: 'K Means Probability Percentile',
            DS_BOXCOX: 'Box Cox',
            DS_MANLY: 'Manly',
            DS_BOXCOX_MOD: 'Modified Box Cox',
            IM_KNN: 'KNN',
            IM_LINEAR: 'Linear',
            IM_EXPONENT: 'Exponential',
            IM_POLYNOM: 'Polynomial',
            NM_ZSCORE: 'Z-score Normalizer',
            NM_MINMAX: 'Min-Max Normalizer',
            NM_INDEX: 'Index Normalizer',
            MC_PCA: 'PCA',
            MP_GLM: 'GLM (Logistic/Linear)',
            MP_GLM_ELASTIC_NET: 'GLM - Elastic Net',
            MP_RANDOM_FOREST: 'Random Forest',
            MP_SVM: 'Support Vector Machine (SVM)',
            MP_XGBOOST: 'XGBoost',
            MP_DECISION_TREE: 'Decision Tree',
            MP_DNN: 'Deep Neural Network',
        },
        params: __WEBPACK_IMPORTED_MODULE_0__config__["b" /* describeEnum */].ensureType({
            OT_STDDEV: [
                {
                    type: 'continuous',
                    name: 'sigma',
                    title: 'Sigma (SD)',
                    min: 0.5,
                    max: 3,
                }
            ],
            OT_KMEANS: [
                {
                    type: 'continuous',
                    name: 'min_percentile',
                    title: 'Min Percentile',
                    min: 0,
                    max: 0.2,
                }
            ],
            DS_BOXCOX: [
                {
                    type: 'continuous',
                    name: 'lambda',
                    title: 'lambda',
                    min: 0,
                    max: 1,
                }
            ],
            DS_MANLY: [
                {
                    type: 'continuous',
                    name: 'lambda',
                    title: 'lambda',
                    min: 0,
                    max: 1,
                }
            ],
            DS_BOXCOX_MOD: [
                {
                    type: 'continuous',
                    name: 'lambda',
                    title: 'lambda',
                    min: 0,
                    max: 1,
                }
            ],
            IM_KNN: [],
            IM_LINEAR: [],
            IM_EXPONENT: [],
            IM_POLYNOM: [
                {
                    type: 'categorical',
                    name: 'order',
                    title: 'order',
                    options: [1, 2, 3, 4, 5, 6, 7],
                }
            ],
            NM_ZSCORE: [],
            NM_MINMAX: [],
            NM_INDEX: [
                {
                    type: 'categorical',
                    name: 'operator',
                    title: 'Index Operator',
                    options: ['multiply', 'divide'],
                }
            ],
            MC_PCA: [
                {
                    type: 'continuous',
                    name: 'pcs_number',
                    title: 'Number of PCs',
                    min: 0.03,
                    max: 0.99,
                }
            ],
            MP_GLM: [],
            MP_GLM_ELASTIC_NET: [
                {
                    type: 'continuous',
                    name: 'alpha',
                    title: 'alpha (lasso/L1)',
                    min: 0.0,
                    max: 1.0,
                },
                {
                    type: 'continuous',
                    name: 'lambda',
                    title: 'lambda (ridge/L2)',
                    min: 0.001,
                    max: 100.0,
                    step: 0.001,
                },
            ],
            MP_RANDOM_FOREST: [
                {
                    type: 'continuous',
                    name: 'size_term_nodes',
                    title: 'size_term_nodes',
                    min: 0.00001,
                    max: 0.1,
                    step: 0.00001,
                },
                {
                    type: 'continuous',
                    name: 'trees_number',
                    title: 'Number of trees',
                    min: 100,
                    max: 500,
                    step: 1,
                },
                {
                    type: 'continuous',
                    name: 'multiplier',
                    title: 'multiplier',
                    min: 1.0,
                    max: 2.0,
                },
            ],
            MP_SVM: [
                {
                    type: 'continuous',
                    name: 'c',
                    title: 'C (Penalty)',
                    min: 1.0,
                    max: 2.0,
                },
                {
                    type: 'categorical',
                    name: 'kernel',
                    title: 'kernel',
                    options: ['linear', 'rbf', 'poly', 'sigmoid'],
                },
                {
                    type: 'continuous',
                    name: 'degree',
                    title: 'degree',
                    min: 1.0,
                    max: 3.0,
                },
                {
                    type: 'continuous',
                    name: 'gamma',
                    title: 'gamma',
                    min: 1.0,
                    max: 2.0,
                },
            ],
            MP_XGBOOST: [
                {
                    type: 'continuous',
                    name: 'rate',
                    title: 'Learning Rate',
                    min: 2 / 1000,
                    max: 10 / 100,
                    step: 2 / 1000,
                },
                {
                    type: 'continuous',
                    name: 'row_sampling',
                    title: 'Row Sampling',
                    min: 0.5,
                    max: 1.0,
                },
                {
                    type: 'continuous',
                    name: 'col_sampling',
                    title: 'Column Sampling',
                    min: 0.4,
                    max: 1.0,
                },
                {
                    type: 'continuous',
                    name: 'min_leaf_weight',
                    title: 'Min leaf weight',
                    min: 0.1,
                    max: 3.0,
                },
                {
                    type: 'continuous',
                    name: 'max_tree_depth',
                    title: 'max_tree_depth (integer)',
                    min: 4,
                    max: 10,
                    step: 1,
                },
            ],
            MP_DECISION_TREE: [],
            MP_DNN: [],
        }),
    }),
    hints: {
        validationHelpText: "Unless any of these datasets defined manually, <br />\n      system will select some training dataset part to use for validation.",
    }
};


/***/ }),

/***/ "../../../../../src/app/train/train.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TrainModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_ui_core_ui_module__ = __webpack_require__("../../../../../src/app/core-ui/core-ui.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_cv_model_service__ = __webpack_require__("../../../../../src/app/services/cv-model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__train_component__ = __webpack_require__("../../../../../src/app/train/train.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__model_context_component__ = __webpack_require__("../../../../../src/app/train/model-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__model_create_component__ = __webpack_require__("../../../../../src/app/train/model-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__model_create_advanced_component__ = __webpack_require__("../../../../../src/app/train/model-create-advanced.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__model_view_component__ = __webpack_require__("../../../../../src/app/train/model-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__model_view_embed_component__ = __webpack_require__("../../../../../src/app/train/model-view-embed.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__model_summary_component__ = __webpack_require__("../../../../../src/app/train/model-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__cv_model_create_component__ = __webpack_require__("../../../../../src/app/train/cv-model-create.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__cv_model_view_component__ = __webpack_require__("../../../../../src/app/train/cv-model-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__cv_model_summary_component__ = __webpack_require__("../../../../../src/app/train/cv-model-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__model_retrain_component__ = __webpack_require__("../../../../../src/app/train/model-retrain.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__confusion_chart_component__ = __webpack_require__("../../../../../src/app/train/confusion-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__model_status_color_directive__ = __webpack_require__("../../../../../src/app/train/model-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__cv_model_status_color_directive__ = __webpack_require__("../../../../../src/app/train/cv-model-status-color.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__roc_chart_directive__ = __webpack_require__("../../../../../src/app/train/roc-chart.directive.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__albums_albums_module__ = __webpack_require__("../../../../../src/app/albums/albums.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__model_view_advanced_component__ = __webpack_require__("../../../../../src/app/train/model-view-advanced.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__model_pipeline_summary_component__ = __webpack_require__("../../../../../src/app/train/model-pipeline-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__model_evaluation_summary_component__ = __webpack_require__("../../../../../src/app/train/model-evaluation-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__model_train_summary_component__ = __webpack_require__("../../../../../src/app/train/model-train-summary.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__charts_charts_module__ = __webpack_require__("../../../../../src/app/charts/charts.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__techniques_chart_component__ = __webpack_require__("../../../../../src/app/train/techniques-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__label_component__ = __webpack_require__("../../../../../src/app/train/label.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
































var TrainModule = (function () {
    function TrainModule() {
    }
    TrainModule_1 = TrainModule;
    TrainModule.forRoot = function () {
        return {
            ngModule: TrainModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_6__services_model_service__["a" /* ModelService */],
                __WEBPACK_IMPORTED_MODULE_7__services_cv_model_service__["a" /* CVModelService */],
            ],
        };
    };
    TrainModule = TrainModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_3__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_4__core_core_module__["a" /* CoreModule */],
                __WEBPACK_IMPORTED_MODULE_29__charts_charts_module__["a" /* ChartsModule */],
                __WEBPACK_IMPORTED_MODULE_5__core_ui_core_ui_module__["a" /* CoreUIModule */],
                __WEBPACK_IMPORTED_MODULE_23__tables_tables_module__["a" /* TablesModule */],
                __WEBPACK_IMPORTED_MODULE_24__albums_albums_module__["a" /* AlbumsModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_8__train_component__["a" /* TrainComponent */],
                __WEBPACK_IMPORTED_MODULE_9__model_context_component__["a" /* ModelContextComponent */],
                __WEBPACK_IMPORTED_MODULE_10__model_create_component__["a" /* ModelCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_11__model_create_advanced_component__["a" /* ModelCreateAdvancedComponent */],
                __WEBPACK_IMPORTED_MODULE_12__model_view_component__["a" /* ModelViewComponent */],
                __WEBPACK_IMPORTED_MODULE_25__model_view_advanced_component__["a" /* ModelViewAdvancedComponent */],
                __WEBPACK_IMPORTED_MODULE_14__model_summary_component__["a" /* ModelSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_26__model_pipeline_summary_component__["a" /* ModelPipelineSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_28__model_train_summary_component__["a" /* ModelTrainSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_15__cv_model_create_component__["a" /* CVModelCreateComponent */],
                __WEBPACK_IMPORTED_MODULE_16__cv_model_view_component__["a" /* CVModelViewComponent */],
                __WEBPACK_IMPORTED_MODULE_13__model_view_embed_component__["a" /* ModelViewEmbedComponent */],
                __WEBPACK_IMPORTED_MODULE_17__cv_model_summary_component__["a" /* CVModelSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_18__model_retrain_component__["a" /* ModelRetrainComponent */],
                __WEBPACK_IMPORTED_MODULE_19__confusion_chart_component__["a" /* ConfusionChartComponent */],
                __WEBPACK_IMPORTED_MODULE_27__model_evaluation_summary_component__["a" /* ModelEvaluationSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_20__model_status_color_directive__["a" /* ModelStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_21__cv_model_status_color_directive__["a" /* CVModelStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_22__roc_chart_directive__["a" /* ROCChartDirective */],
                __WEBPACK_IMPORTED_MODULE_30__techniques_chart_component__["a" /* TechniquesChartComponent */],
                __WEBPACK_IMPORTED_MODULE_31__label_component__["a" /* TrainLabelComponent */],
            ],
            exports: [
                __WEBPACK_IMPORTED_MODULE_13__model_view_embed_component__["a" /* ModelViewEmbedComponent */],
                __WEBPACK_IMPORTED_MODULE_14__model_summary_component__["a" /* ModelSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_17__cv_model_summary_component__["a" /* CVModelSummaryComponent */],
                __WEBPACK_IMPORTED_MODULE_20__model_status_color_directive__["a" /* ModelStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_21__cv_model_status_color_directive__["a" /* CVModelStatusColorDirective */],
                __WEBPACK_IMPORTED_MODULE_31__label_component__["a" /* TrainLabelComponent */],
            ],
        })
    ], TrainModule);
    return TrainModule;
    var TrainModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/train/train.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return trainRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__train_component__ = __webpack_require__("../../../../../src/app/train/train.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__model_context_component__ = __webpack_require__("../../../../../src/app/train/model-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cv_model_view_component__ = __webpack_require__("../../../../../src/app/train/cv-model-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__model_view_component__ = __webpack_require__("../../../../../src/app/train/model-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__model_retrain_component__ = __webpack_require__("../../../../../src/app/train/model-retrain.component.ts");





var trainRoutes = [
    {
        path: 'train',
        redirectTo: 'train/create',
    },
    {
        path: 'train/create',
        component: __WEBPACK_IMPORTED_MODULE_0__train_component__["a" /* TrainComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__model_context_component__["a" /* ModelContextComponent */],
    },
    {
        path: 'train/cv/:modelId',
        component: __WEBPACK_IMPORTED_MODULE_2__cv_model_view_component__["a" /* CVModelViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__model_context_component__["a" /* ModelContextComponent */],
    },
    {
        path: 'train/:modelId',
        component: __WEBPACK_IMPORTED_MODULE_3__model_view_component__["a" /* ModelViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__model_context_component__["a" /* ModelContextComponent */],
    },
    {
        path: 'train/:modelId/retrain',
        component: __WEBPACK_IMPORTED_MODULE_4__model_retrain_component__["a" /* ModelRetrainComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_1__model_context_component__["a" /* ModelContextComponent */],
    },
];


/***/ }),

/***/ "../../../../../src/app/utils/activity-observer.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ActivityObserver; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_BehaviorSubject__ = __webpack_require__("../../../../rxjs/_esm5/BehaviorSubject.js");


var ActivityObserver = (function () {
    function ActivityObserver() {
        this._output = new __WEBPACK_IMPORTED_MODULE_1_rxjs_BehaviorSubject__["a" /* BehaviorSubject */](false);
    }
    Object.defineProperty(ActivityObserver.prototype, "active", {
        // use it with async pipe (to prevent a lot of calls from digest)
        get: function () {
            return this._output.asObservable();
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ActivityObserver.prototype, "isActive", {
        // use it in sync way (when there are no any digest stuff)
        get: function () {
            return this._output.getValue();
        },
        enumerable: true,
        configurable: true
    });
    ActivityObserver.prototype.observe = function (action) {
        var _this = this;
        this._output.next(true);
        var newInput = action.share();
        if (this._input) {
            this._input = __WEBPACK_IMPORTED_MODULE_0_rxjs_Observable__["a" /* Observable */].merge(this._input, newInput);
        }
        else {
            this._input = newInput;
        }
        if (this._inputSubscription) {
            this._inputSubscription.unsubscribe();
        }
        this._inputSubscription = this._input.subscribe(function () { }, function () { return _this._inputComplete(); }, function () { return _this._inputComplete(); });
        return newInput;
    };
    ActivityObserver.prototype._inputComplete = function () {
        if (this._inputSubscription) {
            this._inputSubscription.unsubscribe();
        }
        this._input = undefined;
        this._output.next(false);
    };
    return ActivityObserver;
}());



/***/ }),

/***/ "../../../../../src/app/utils/code.constants.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return SQL_SUPPORTER_OPERATORS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return SQL_SUPPORTED_FUNCTIONS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EXCEL_SUPPORTED_FUNCTIONS; });
var SQL_SUPPORTER_OPERATORS = [
    { name: 'SELECT' },
    { name: 'FROM' },
    { name: 'DISTINCT' },
    { name: 'WHERE' },
    { name: 'GROUP BY' },
    { name: 'ORDER BY' },
    { name: 'HAVING' },
    { name: 'ASC' },
    { name: 'DESC' },
    { name: 'AS' },
    { name: 'ALL' },
    { name: 'INTERSECT' },
    { name: 'EXCEPT' },
    { name: 'MINUS' },
    { name: 'BETWEEN' },
    { name: 'LIKE' },
    { name: 'IN' },
    { name: 'AND' },
    { name: 'OR' },
    { name: 'UNION' },
    { name: 'INNER JOIN' },
    { name: 'LEFT OUTER' },
    { name: 'RIGHT OUTER' },
    { name: 'TEXT' },
    { name: 'NUMERIC' },
    { name: 'DOUBLE' },
    { name: 'PRECISION' },
];
var SQL_SUPPORTED_FUNCTIONS = [
    {
        name: 'CUME_DIST',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Calculates the cumulative distribution of a value within a window or partition.',
        disabled: false
    },
    {
        name: 'FIRST_VALUE',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The FIRST_VALUE returns the value of the specified expression with respect to the first row in the window frame.',
        disabled: false
    },
    {
        name: 'LAG',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The LAG window function returns the values for a row at a given offset above (before) the current row in the partition.',
        disabled: false
    },
    {
        name: 'LAST_VALUE',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The LAST_VALUE function returns the value of the expression with respect to the last row in the frame.',
        disabled: false
    },
    {
        name: 'LEAD',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The LEAD window function returns the values for a row at a given offset below (after) the current row in the partition.',
        disabled: false
    },
    {
        name: 'LISTAGG',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'For each group in a query, the LISTAGG window function orders the rows for each group according to the ORDER BY expression, then concatenates the values into a single string.',
        disabled: false
    },
    {
        name: 'MEDIAN',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Calculates the median value for the range of values in a window or partition. NULL values in the range are ignored.MEDIAN is an inverse distribution function that assumes a continuous distribution model.',
        disabled: false
    },
    {
        name: 'NTH_VALUE',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The NTH_VALUE window function returns the expression value of the specified row of the window frame relative to the first row of the window.',
        disabled: false
    },
    {
        name: 'PERCENTILE_CONT',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'PERCENTILE_CONT is an inverse distribution function that assumes a continuous distribution model. It takes a percentile value and a sort specification, and returns an interpolated value that would fall into the given percentile value with respect to the sort specification.',
        disabled: false
    },
    {
        name: 'PERCENTILE_DISC',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'PERCENTILE_DISC is an inverse distribution function that assumes a discrete distribution model. It takes a percentile value and a sort specification and returns an element from the given set.',
        disabled: false
    },
    {
        name: 'RATIO_TO_REPORT',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Calculates the ratio of a value to the sum of the values in a window or partition.',
        disabled: false
    },
    {
        name: 'STDDEV_POP',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The STDDEV_SAMP and STDDEV_POP window functions return the sample and population standard deviation of a set of numeric values (integer, decimal, or floating-point). ',
        disabled: false
    },
    {
        name: 'STDDEV_SAMP',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The STDDEV_SAMP and STDDEV_POP window functions return the sample and population standard deviation of a set of numeric values (integer, decimal, or floating-point). ',
        disabled: false
    },
    {
        name: 'STDDEV',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Returns the statistical standard deviation of all values in the specified expression.',
        disabled: false
    },
    {
        name: 'VAR_POP',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The VAR_SAMP and VAR_POP window functions return the sample and population variance of a set of numeric values (integer, decimal, or floating-point).',
        disabled: false
    },
    {
        name: 'VAR_SAMP',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The VAR_SAMP and VAR_POP window functions return the sample and population variance of a set of numeric values (integer, decimal, or floating-point).',
        disabled: false
    },
    {
        name: 'VARIANCE',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The VAR_SAMP and VAR_POP functions return the sample and population variance of a set of numeric values (integer, decimal, or floating-point). The result of the VAR_SAMP function is equivalent to the squared sample standard deviation of the same set of values.',
        disabled: false
    },
    {
        name: 'DENSE_RANK',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The DENSE_RANK window function determines the rank of a value in a group of values, based on the ORDER BY expression in the OVER clause. If the optional PARTITION BY clause is present, the rankings are reset for each group of rows. Rows with equal values for the ranking criteria receive the same rank.',
        disabled: false
    },
    {
        name: 'NTILE',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The NTILE window function divides ordered rows in the partition into the specified number of ranked groups of as equal size as possible and returns the group that a given row falls into.',
        disabled: false
    },
    {
        name: 'PERCENT_RANK',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Calculates the percent rank of a given row.',
        disabled: false
    },
    {
        name: 'RANK',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Order the table by the quantity sold (default ascending), and assign a rank to each row. ',
        disabled: false
    },
    {
        name: 'ROW_NUMBER',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Determines the ordinal number of the current row within a group of rows, counting from 1, based on the ORDER BY expression in the OVER clause. If the optional PARTITION BY clause is present, the ordinal numbers are reset for each group of rows. Rows with equal values for the ORDER BY expressions receive the different row numbers nondeterministically.',
        disabled: false
    },
    {
        name: 'SUM',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The Sum() function returns the summed value of an expression.',
        disabled: false
    },
    {
        name: 'COUNT',
        arguments: [
            {
                title: 'column_name'
            },
        ],
        brief: 'The COUNT() function returns the number of rows that matches a specified criteria.',
        disabled: false
    },
    {
        name: 'MAX',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The MAX() function returns the largest value of the selected column.',
        disabled: false
    },
    {
        name: 'MIN',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The MIN() function returns the smallest value of the selected column.',
        disabled: false
    },
    {
        name: 'AVG',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'The AVG() function returns the average value of a numeric column.',
        disabled: false
    },
    {
        name: 'LEN',
        arguments: [
            {
                title: 'column_name',
            }
        ],
        brief: 'Returns the length of a text field',
        disabled: false
    },
    {
        name: 'COALESCE',
        arguments: [
            {
                title: '... expression of any type',
            }
        ],
        brief: 'Evaluates the arguments in order and returns the current value of the first expression that initially does not evaluate to NULL',
        disabled: false
    },
    {
        name: 'CONCAT',
        arguments: [
            {
                title: '... string[]',
            }
        ],
        brief: 'Concatenate all arguments. NULL arguments are ignored.',
        disabled: false
    },
    {
        name: 'ABS',
        arguments: [
            {
                title: 'value',
            }
        ],
        brief: 'Returns the absolute value of a number. The absolute value of a number is the number without its sign.',
        disabled: false
    },
    {
        name: 'CEILING',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'significance',
            }
        ],
        brief: 'Returns number rounded up, away from zero, to the nearest multiple of significance.',
        disabled: false
    },
    {
        name: 'FLOOR',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'significance',
            }
        ],
        brief: 'The floor() method rounds a number DOWNWARDS to the nearest integer, and returns the result.If the passed argument is an integer, the value will not be rounded.',
        disabled: false
    },
    {
        name: 'ROUND',
        arguments: [
            {
                title: 'column_name',
            },
            {
                title: 'decimals',
            }
        ],
        brief: 'Rounds a numeric field to the number of decimals specified',
        disabled: false
    },
    {
        name: 'LN',
        arguments: [
            {
                title: 'number',
            }
        ],
        brief: 'Returns the natural logarithm of a number. Natural logarithms are based on the constant e.',
        disabled: false
    },
    {
        name: 'LOG',
        arguments: [
            {
                title: 'number',
            },
            {
                title: '[base]',
            }
        ],
        brief: 'The log() function returns the natural logarithm of a number, or the logarithm of number to base.',
        disabled: false
    },
    {
        name: 'SQRT',
        arguments: [
            {
                title: 'number',
            },
        ],
        brief: 'Gets square root',
        disabled: false
    },
    {
        name: 'CBRT',
        arguments: [
            {
                title: 'number',
            },
        ],
        brief: 'Gets cube root',
        disabled: false
    },
    {
        name: 'CEIL',
        arguments: [
            {
                title: 'number',
            },
        ],
        brief: 'Smallest integer not less than argument',
        disabled: false
    },
    {
        name: 'CAST',
        arguments: [
            {
                title: 'column_name as TEXT | NUMERIC | ...',
            },
        ],
        brief: 'Casts column type',
        disabled: false
    },
];
var EXCEL_SUPPORTED_FUNCTIONS = [
    {
        name: 'ABS',
        arguments: [
            {
                title: 'value',
            }
        ],
        brief: 'Returns the absolute value of a number. The absolute value of a number is the number without its sign.',
        disabled: false
    },
    {
        name: 'CEILING',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'significance',
            }
        ],
        brief: 'Returns number rounded up, away from zero, to the nearest multiple of significance.',
        disabled: false
    },
    {
        name: 'CONCATENATE',
        arguments: [
            {
                title: 'text1',
            },
            {
                title: '[text2, ...]',
            }
        ],
        brief: 'Function to join two or more text strings into one string.',
        disabled: false
    },
    {
        name: 'FLOOR',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'significance',
            }
        ],
        brief: 'The floor() method rounds a number DOWNWARDS to the nearest integer, and returns the result.If the passed argument is an integer, the value will not be rounded.',
        disabled: false
    },
    {
        name: 'IF',
        arguments: [
            {
                title: 'logical_test',
            },
            {
                title: 'value_if_true',
            },
            {
                title: '[value_if_false]',
            }
        ],
        brief: 'The IF function allows you to make logical comparisons between a value and what you expect. In its simplest form1, the IF function says IF(Something is True, then do something, otherwise do something else)So an IF statement can have two results. The first result is if your comparison is True, the second if your comparison is False.',
        disabled: false
    },
    {
        name: 'LN',
        arguments: [
            {
                title: 'number',
            }
        ],
        brief: 'Returns the natural logarithm of a number. Natural logarithms are based on the constant e.',
        disabled: false
    },
    {
        name: 'LOG',
        arguments: [
            {
                title: 'number',
            },
            {
                title: '[base]',
            }
        ],
        brief: 'The log() function returns the natural logarithm of a number, or the logarithm of number to base.',
        disabled: false
    },
    {
        name: 'LOG10',
        arguments: [
            {
                title: 'number',
            }
        ],
        brief: 'Returns the base-10 logarithm of a number.',
        disabled: false
    },
    {
        name: 'ROUND',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'num_digits',
            }
        ],
        brief: 'The ROUND function rounds a number to a specified number of digits. For example, if cell A1 contains 23.7825, and you want to round that value to two decimal places.',
        disabled: false
    },
    {
        name: 'ROUNDUP',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'num_digits',
            }
        ],
        brief: '',
        disabled: false
    },
    {
        name: 'ROUNDDOWN',
        arguments: [
            {
                title: 'number',
            },
            {
                title: 'num_digits',
            }
        ],
        brief: '',
        disabled: false
    },
];


/***/ }),

/***/ "../../../../../src/app/utils/dnd.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DndUtil; });
var DndUtil = (function () {
    function DndUtil() {
    }
    DndUtil.getDragImageElement = function (title) {
        var dragImageElement = document.createElement('div');
        dragImageElement.classList.add('draggable-cloned-wrapper');
        dragImageElement.style.position = 'absolute';
        dragImageElement.style.top = '-1000px';
        dragImageElement.style.padding = '5px';
        dragImageElement.innerHTML = this.getTableTemplate(title);
        return dragImageElement;
    };
    // TODO: what about word-breaking?
    DndUtil.getTableTemplate = function (tableName) {
        if (tableName === void 0) { tableName = 'Table'; }
        return "\n        <div class=\"dragged-wrapper\">\n            <i class=\"icons icon-doc\" style=\"font-size: 2em;\"></i>\n            <div class=\"dragged-title\">" + tableName + "</div>\n        </div>\n    ";
    };
    return DndUtil;
}());



/***/ }),

/***/ "../../../../../src/app/utils/forms.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppFormArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return AppFormGroup; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var AppFormArray = (function (_super) {
    __extends(AppFormArray, _super);
    function AppFormArray(controls, validators) {
        return _super.call(this, controls, validators) || this;
    }
    return AppFormArray;
}(__WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormArray */]));

var AppFormGroup = (function (_super) {
    __extends(AppFormGroup, _super);
    function AppFormGroup(controls, validators) {
        return _super.call(this, controls, validators) || this;
    }
    return AppFormGroup;
}(__WEBPACK_IMPORTED_MODULE_0__angular_forms__["c" /* FormGroup */]));



/***/ }),

/***/ "../../../../../src/app/utils/misc.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MiscUtils; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_lodash__);



var MiscUtils = (function () {
    function MiscUtils() {
    }
    MiscUtils.formatBytes = function (bytes, decimals) {
        if (decimals === void 0) { decimals = 2; }
        if (bytes === 0)
            return '0 Byte';
        var k = 1024;
        var sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
        var i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(decimals)) + " " + sizes[i];
    };
    MiscUtils.cancelEvent = function (e) {
        var event = e || window.event;
        if (event) {
            event.cancelBubble = true;
            event.returnValue = false;
            event.stopPropagation && event.stopPropagation();
            event.preventDefault && event.preventDefault();
        }
    };
    MiscUtils.downloadUrl = function (url, name) {
        if (!('chrome' in window)) {
            var hiddenIFrameID = 'hiddenDownloader', iframe = document.getElementById(hiddenIFrameID);
            if (iframe === null) {
                iframe = document.createElement('iframe');
                iframe.id = hiddenIFrameID;
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
            }
            iframe.src = url;
        }
        else {
            var link = document.createElement('a');
            link.download = name + '.csv';
            link.href = url;
            link.click();
        }
        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].of(true).delay(1000);
    };
    MiscUtils.fillForm = function (form, data, disabled, keepLastArrayMember) {
        if (disabled === void 0) { disabled = false; }
        if (keepLastArrayMember === void 0) { keepLastArrayMember = true; }
        // set initial values for form controls (recursively)
        if (data === undefined) {
            return;
        }
        if (disabled) {
            form.disable();
        }
        else {
            form.enable();
        }
        // ControlGroup
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["c" /* FormGroup */]) {
            data = data || {};
            var props = Object.keys(form.controls);
            for (var i = 0; i < props.length; ++i) {
                var abstractControlItem = form.controls[props[i]];
                this.fillForm(abstractControlItem, data[props[i]], disabled, keepLastArrayMember);
            }
        }
        // ControlArray
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormArray */]) {
            data = data || [];
            // we drop all extra sub forms, but keep at least one
            while (form.length > data.length && form.length > 1) {
                form.removeAt(form.length - 1);
            }
            // in no data to fill, last kept subform gets disabled instead of removing
            if (!data.length && form.controls[0]) {
                keepLastArrayMember
                    ? form.controls[0].disable()
                    : form.removeAt(0);
            }
            for (var i = 0; i < data.length; ++i) {
                var abstractControlItem = form.controls[i] || MiscUtils.__editFormExtendArray(form);
                this.fillForm(abstractControlItem, data[i], disabled, keepLastArrayMember);
            }
        }
        // Control
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]) {
            form.setValue(data);
        }
    };
    MiscUtils.__editFormExtendArray = function (controlArray) {
        // to extend control array (see _editForm)
        var prototypeControl = controlArray.controls[0] || new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](); // could be even smarter
        var control = MiscUtils._cloneForm(prototypeControl);
        control.enable();
        controlArray.push(control);
        return control;
    };
    MiscUtils._cloneForm = function (form) {
        // ControlGroup
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["c" /* FormGroup */]) {
            var props = Object.keys(form.controls);
            var control = new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["c" /* FormGroup */]({}, form.validator, form.asyncValidator);
            for (var i = 0; i < props.length; ++i) {
                var abstractControlItem = form.controls[props[i]];
                control.addControl(props[i], this._cloneForm(abstractControlItem));
            }
            return control;
        }
        // ControlArray
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormArray */]) {
            var length_1 = form.controls.length;
            var control = new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["a" /* FormArray */]([], form.validator, form.asyncValidator);
            for (var i = 0; i < length_1; ++i) {
                var abstractControlItem = form.controls[i];
                control.push(this._cloneForm(abstractControlItem));
            }
            return control;
        }
        // Control
        if (form instanceof __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]) {
            // how to set default values? :/
            return new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, form.validator, form.asyncValidator);
        }
        // TODO: throw error
    };
    MiscUtils.standardDeviation = function (values) {
        var avg = MiscUtils.average(values);
        var squareDiffs = values.map(function (value) {
            var diff = value - avg;
            return diff * diff;
        });
        var avgSquareDiff = MiscUtils.average(squareDiffs);
        return Math.sqrt(avgSquareDiff);
    };
    MiscUtils.sum = function (data) {
        return data.reduce(function (sum, value) {
            return sum + value;
        }, 0);
    };
    MiscUtils.average = function (data) {
        return MiscUtils.sum(data) / data.length;
    };
    MiscUtils.distinctUntilChangedDeep = function (observable) {
        var previousValue;
        return observable.filter(function (value) { return !__WEBPACK_IMPORTED_MODULE_2_lodash__["isEqual"](value, previousValue); }).do(function (value) {
            previousValue = value;
        });
    };
    MiscUtils.generateUUID = function () {
        var d = new Date().getTime();
        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
            /* tslint:disable:no-bitwise */
            var r = (d + Math.random() * 16) % 16 || 0;
            d = Math.floor(d / 16);
            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);
            /* tslint:enable */
        });
        return uuid;
    };
    MiscUtils.getRandomInt = function (min, max) {
        return Math.floor(Math.random() * (max - min)) + min;
    };
    MiscUtils.random = function (min, max) {
        return Math.random() * (max - min) + min;
    };
    MiscUtils.shuffleArray = function (oldArray) {
        var array = oldArray.slice(0), j = 0, temp = null;
        for (var i = array.length - 1; i > 0; i -= 1) {
            j = Math.floor(Math.random() * (i + 1));
            temp = array[i];
            array[i] = array[j];
            array[j] = temp;
        }
        return array;
    };
    return MiscUtils;
}());



/***/ }),

/***/ "../../../../../src/app/utils/reactive-loader.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ReactiveLoader; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");

var ReactiveLoader = (function () {
    function ReactiveLoader(loaderFunction, initiallyLoaded) {
        if (initiallyLoaded === void 0) { initiallyLoaded = false; }
        var _this = this;
        this._loaded = false;
        this._loaded = initiallyLoaded;
        this._requestQueue = new __WEBPACK_IMPORTED_MODULE_0_rxjs_Subject__["a" /* Subject */]();
        this._resultQueue = this._requestQueue.switchMap(function (_) {
            _this._loaded = false;
            return loaderFunction(_);
        }).map(function (_) {
            _this._loaded = true;
            return _;
        });
    }
    ReactiveLoader.prototype.load = function (arg) {
        this._requestQueue.next(arg);
    };
    ReactiveLoader.prototype.subscribe = function (next) {
        return this._resultQueue.subscribe(next);
    };
    ReactiveLoader.prototype.complete = function () {
        this._requestQueue.complete();
    };
    Object.defineProperty(ReactiveLoader.prototype, "loaded", {
        get: function () {
            return this._loaded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ReactiveLoader.prototype, "value", {
        get: function () {
            return this._resultQueue;
        },
        enumerable: true,
        configurable: true
    });
    return ReactiveLoader;
}());



/***/ }),

/***/ "../../../../../src/app/utils/validators.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppValidators; });
var AppValidators = (function () {
    function AppValidators() {
    }
    // to match regex pattern
    AppValidators.match = function (pattern) {
        if (pattern === void 0) { pattern = /^.*$/; }
        pattern = (typeof pattern === 'string') ? RegExp(pattern) : pattern;
        return function (control) {
            var value = control.value ? '' + control.value : '';
            return value.match(pattern) ? null :
                { match: { actualValue: value, pattern: pattern } };
        };
    };
    AppValidators.equal = function (equal) {
        return function (control) {
            //@todo i guess it's might be other ways to determine wheater control has binded or not
            if (control['_onChange'].length) {
                var targetControl = control.root.get(equal);
                return targetControl && targetControl.touched && targetControl.value === control.value ? null :
                    { equal: { actualValue: control.value, requiredValue: targetControl.value } };
            }
        };
    };
    AppValidators.notEqual = function (notEqual, controlName) {
        return function (control) {
            if (control['_onChange'].length) {
                var targetControl = control.root.get(notEqual);
                return targetControl && targetControl.value !== control.value ? null :
                    {
                        notEqual: {
                            actualValue: controlName // equals %value% in config.validatorErrors
                        }
                    };
            }
        };
    };
    AppValidators.number = function (control) {
        return !AppValidators._validators.number(control) ? null :
            { number: { actualValue: control.value, pattern: AppValidators._regex.number } };
    };
    AppValidators.float = function (control) {
        return !AppValidators._validators.float(control) ? null :
            { float: { actualValue: control.value, pattern: AppValidators._regex.float } };
    };
    AppValidators.min = function (min) {
        return function (control) {
            var v = +control.value;
            return (!isNaN(v) && v >= +min)
                ? null
                : { min: { actualValue: control.value, min: min } };
        };
    };
    AppValidators.max = function (max) {
        return function (control) {
            var v = +control.value;
            return (!isNaN(v) && v <= +max)
                ? null
                : { max: { actualValue: control.value, max: max } };
        };
    };
    AppValidators.email = function (control) {
        return !AppValidators._validators.email(control) ? null :
            { email: { actualValue: control.value, pattern: AppValidators._regex.email } };
    };
    AppValidators.url = function (control) {
        return !AppValidators._validators.url(control) ? null :
            { url: { actualValue: control.value, pattern: AppValidators._regex.url } };
    };
    AppValidators.date = function (control) {
        return !AppValidators._validators.date(control) ? null :
            { date: { actualValue: control.value, pattern: AppValidators._regex.date } };
    };
    AppValidators.password = function (control) {
        return !AppValidators._validators.password(control) ? null :
            { password: { actualValue: control.value, pattern: AppValidators._regex.password } };
    };
    AppValidators.isTrue = function (control) {
        return control.value === true ? null :
            { isTrue: { actualValue: control.value, requiredValue: true } };
    };
    AppValidators.isFalse = function (control) {
        return control.value === false ? null :
            { isFalse: { actualValue: control.value, requiredValue: false } };
    };
    AppValidators.crossValidate = function (parentControl, childControls, fn) {
        parentControl.valueChanges.subscribe(function (value) {
            childControls.forEach(function (childControl) {
                childControl.setValidators(fn(value));
                childControl.updateValueAndValidity();
            });
        });
    };
    AppValidators._regex = {
        number: /^\d*$/,
        float: /^\d*(\.\d+)?$/,
        email: /^[^\s@]+@[^\s@]+\.[^\s@]+$/,
        url: /^https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,}$/,
        date: /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,
        password: /^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[^\W\s]).{10,}$/,
    };
    AppValidators._validators = {
        number: AppValidators.match(AppValidators._regex.number),
        float: AppValidators.match(AppValidators._regex.float),
        email: AppValidators.match(AppValidators._regex.email),
        url: AppValidators.match(AppValidators._regex.url),
        date: AppValidators.match(AppValidators._regex.date),
        password: AppValidators.match(AppValidators._regex.password),
    };
    return AppValidators;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-component-widget.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartComponentWidget; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__split_dock_split_dock_tab__ = __webpack_require__("../../../../../src/split-dock/split-dock-tab.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();


var ChartComponentWidget = (function (_super) {
    __extends(ChartComponentWidget, _super);
    function ChartComponentWidget(events, componentReference) {
        var _this = _super.call(this) || this;
        _this.events = events;
        _this.componentReference = componentReference;
        _this.icons = [
            {
                selector: 'p-SplitDockTab-tabEditIcon',
                tooltip: 'Edit',
                processMessage: function () {
                    _this.onEditRequest();
                },
            },
            {
                selector: 'p-SplitDockTab-tabFilterIcon',
                tooltip: 'Toggle Filter Area',
                processMessage: function () {
                    _this.componentReference.instance.toggleFilters();
                },
            },
            {
                selector: 'p-SplitDockTab-tabRefreshIcon',
                tooltip: 'Refresh',
                processMessage: function () {
                    _this.update();
                },
            },
            {
                selector: 'p-SplitDockTab-tabExportIcon',
                tooltip: 'Download',
                processMessage: function () {
                    _this.componentReference.instance.download();
                },
            },
        ];
        _this._refreshSubject = new __WEBPACK_IMPORTED_MODULE_1_rxjs_ReplaySubject__["a" /* ReplaySubject */](1);
        _this._refreshSubject.asObservable().debounceTime(100).subscribe(function () {
            _this.componentReference.instance.refresh();
        });
        _this.node.appendChild(_this.componentReference.location.nativeElement);
        return _this;
    }
    Object.defineProperty(ChartComponentWidget.prototype, "instance", {
        get: function () {
            return this.componentReference.instance;
        },
        enumerable: true,
        configurable: true
    });
    ChartComponentWidget.prototype.onAfterAttach = function (msg) {
        this.events.emit('CHART_ADDED', this);
    };
    ChartComponentWidget.prototype.onCloseRequest = function (msg) {
        this.componentReference.destroy();
        this.dispose();
        this._refreshSubject.unsubscribe();
        // @TODO remove widget IDashboardWidget from dashboard.widgets array
        this.events.emit('CHART_REMOVED', this);
    };
    ChartComponentWidget.prototype.onUpdateRequest = function () {
        this._refreshSubject.next(true);
    };
    ChartComponentWidget.prototype.onResize = function () {
        this._refreshSubject.next(true);
    };
    ChartComponentWidget.prototype.onActivateRequest = function () {
        this.events.emit('CHART_SELECTED', this);
    };
    ChartComponentWidget.prototype.onEditRequest = function () {
        this.events.emit('CHART_EDIT', this.componentReference.instance.config.guid);
    };
    return ChartComponentWidget;
}(__WEBPACK_IMPORTED_MODULE_0__split_dock_split_dock_tab__["a" /* SplitDockTab */].IWidget));



/***/ }),

/***/ "../../../../../src/app/visualize/chart-edit-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return MetricsListPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AttributesListPipe; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ChartEditContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var MetricsListPipe = (function () {
    function MetricsListPipe() {
    }
    MetricsListPipe.prototype.transform = function (items, metrics) {
        return items.map(function (item) {
            var foundMetric = metrics.find(function (metric) { return metric.columnName === item.name; });
            return __assign({}, item, { type: foundMetric ? foundMetric.aggregator : null });
        });
    };
    MetricsListPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'metricslist' })
    ], MetricsListPipe);
    return MetricsListPipe;
}());

var AttributesListPipe = (function () {
    function AttributesListPipe() {
    }
    AttributesListPipe.prototype.transform = function (items, attributes) {
        return items.map(function (item) {
            var isActive = !!attributes.find(function (attribute) { return attribute === item.name; });
            return __assign({}, item, { isActive: isActive });
        });
    };
    AttributesListPipe = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["T" /* Pipe */])({ name: 'attributeslist' })
    ], AttributesListPipe);
    return AttributesListPipe;
}());

var ChartEditContextComponent = (function () {
    function ChartEditContextComponent() {
        this.classes = 'glued';
        this.types = __WEBPACK_IMPORTED_MODULE_2__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].chart.options.aggregationType.list, __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].chart.options.aggregationType.labels);
        this.menuOpen = [true, true, true];
    }
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__dashboard_edit_state__["a" /* DashboardEditState */])
    ], ChartEditContextComponent.prototype, "state", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], ChartEditContextComponent.prototype, "classes", void 0);
    ChartEditContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-edit-context',
            template: "\n    <ul class=\"nav nav-stacked\" *ngIf=\"state.widgetForm\">\n      <li class=\"open\">\n        <a class=\"brand-background\">\n          <i class=\"glyphicon glyphicon-menu-left\"\n            (click)=\"state.navigateBack()\" title=\"Back to Dashboard Layout\"></i>\n          <span>{{state.widgetForm.controls['name'].value}}</span>\n          <i class=\"iconapp iconapp-visuals\"></i>\n        </a>\n      </li>\n      <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n        <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n          <i class=\"glyphicon glyphicon-th-list\"></i>\n          <span>Input</span>\n        </a>\n        <ul class=\"nav nav-pills submenu with-dropdown\">\n          <li *ngFor=\"let item of state.tableList\" [ngClass]=\"{'active': item && state.isCurrentTable(item.id)}\">\n            <span class=\"dropdown pull-right\">\n              <a (click)=\"state.setWidgetTable(item.id)\">\n                <i [ngClass]=\"{'glyphicon glyphicon-ok': state.isCurrentTable(item.id)}\"></i>\n              </a>\n            </span>\n            <a class=\"dot-iconapp iconapp-tables\"\n              (click)=\"state.setWidgetTable(item.id)\"\n              [title]=\"item.name\">\n              {{item.name}}\n            </a>\n          </li>\n          <li *ngFor=\"let item of state.modelList\" [ngClass]=\"{'active': item && state.isCurrentModel(item.id)}\">\n            <span class=\"dropdown pull-right\">\n              <a (click)=\"state.setWidgetModel(item.id)\">\n                <i [ngClass]=\"{'glyphicon glyphicon-ok': state.isCurrentModel(item.id)}\"></i>\n              </a>\n            </span>\n            <a class=\"dot-iconapp iconapp-models\"\n              (click)=\"state.setWidgetModel(item.id)\"\n              [title]=\"item.name\">\n              {{item.name}}\n            </a>\n          </li>\n          <li *ngIf=\"!state.tableList.length && !state.modelList.length\"><a>No inputs available</a></li>\n        </ul>\n      </li>\n      <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[2]}\">\n        <a (click)=\"menuOpen[2] = !menuOpen[2]\">\n          <i class=\"glyphicon glyphicon-stats\"></i>\n          <span>Metrics</span>\n        </a>\n        <ul class=\"nav nav-pills submenu with-dropdown tiny\">\n          <li *ngFor=\"let item of state.metrList | metricslist : state.widgetForm.controls.metrics.value\"\n            [ngClass]=\"{'active': !!item.type}\">\n            <span class=\"dropdown pull-right\" dropdown>\n              <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li *ngFor=\"let type of types\" [ngClass]=\"{'active': item.type === type.id}\">\n                  <a class=\"dropdown-item link\" (click)=\"state.setMetric(item.name, type.id)\">\n                    {{type.text}}\n                  </a>\n                </li>\n                <ng-template [ngIf]=\"!!item.type\">\n                  <li role=\"separator\" class=\"divider\"></li>\n                  <li><a (click)=\"state.setMetric(item.name)\" class=\"dropdown-item link\">Remove</a></li>\n                </ng-template>\n              </ul>\n            </span>\n            <a *ngIf=\"!item.type\" [title]=\"item.displayName\">\n              {{item.displayName}}\n            </a>\n            <a *ngIf=\"!!item.type\" [title]=\"item.displayName\">\n              {{item.type}}({{item.displayName}})\n            </a>\n          </li>\n          <li *ngIf=\"!state.metrList.length\"><a>No Metrics Available</a></li>\n        </ul>\n      </li>\n      <li class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[1]}\">\n        <a (click)=\"menuOpen[1] = !menuOpen[1]\">\n          <i class=\"glyphicon glyphicon-tags\"></i>\n          <span>Attributes</span>\n        </a>\n        <ul class=\"nav nav-pills submenu with-dropdown tiny\">\n          <li *ngFor=\"let item of state.attrList | attributeslist : state.widgetForm.controls.attributes.value\"\n            [ngClass]=\"{'active': item.isActive}\"\n            (click)=\"state.toggleAttribute(item.name, !item.isActive)\">\n            <span class=\"dropdown pull-right\">\n              <a>\n                <i [ngClass]=\"{'glyphicon glyphicon-ok': item.isActive}\"></i>\n              </a>\n            </span>\n            <a [title]=\"item.displayName\">\n              {{item.displayName}}\n            </a>\n          </li>\n          <li *ngIf=\"!state.attrList.length\"><a>No Attributes</a></li>\n        </ul>\n      </li>\n    </ul>",
        })
    ], ChartEditContextComponent);
    return ChartEditContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-edit-filters.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartEditFiltersComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ChartEditFiltersComponent = (function () {
    function ChartEditFiltersComponent() {
        var _this = this;
        this.config = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */];
        // todo: remove loader here
        this._dimensionsLoader = new __WEBPACK_IMPORTED_MODULE_1__utils_reactive_loader__["a" /* ReactiveLoader */](function () {
            var input = _this.state.getCurrentInput();
            var data = { tableId: null, metrics: [], attributes: [] };
            if (!input) {
                return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of(data);
            }
            switch (input.type) {
                case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.TABLE:
                    data.tableId = input.id;
                    input.table.columns.forEach(function (column) {
                        if (column.columnType === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.columnType.values.METRIC) {
                            data.metrics.push(column);
                        }
                        else if (column.columnType === __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].table.column.columnType.values.ATTRIBUTE) {
                            data.attributes.push(column);
                        }
                    });
                    break;
                case __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */].asset.values.MODEL:
                    data.tableId = input.model.input;
                    data.metrics = [input.model.responseColumn];
                    data.attributes = input.model.predictorColumns.slice();
                    break;
                default:
                    throw new Error('Unsupported input type');
            }
            return __WEBPACK_IMPORTED_MODULE_2_rxjs_Observable__["a" /* Observable */].of(data);
        });
        this._dimensionsLoader.subscribe(function (data) {
            _this.dimensions = data;
        });
    }
    ChartEditFiltersComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.formSubscription && this.formSubscription.unsubscribe();
        this.formSubscription = this.state.widgetForm.controls['input'].valueChanges.subscribe(function () {
            _this._dimensionsLoader.load();
        });
        this._dimensionsLoader.load();
    };
    ChartEditFiltersComponent.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    ChartEditFiltersComponent.prototype.isChecked = function (name) {
        return this.state.widgetForm.value.chartFilters.findIndex(function (_) { return _ === name; }) >= 0;
    };
    ChartEditFiltersComponent.prototype.isCrossFilter = function (name) {
        var _this = this;
        return this.state.form.value.crossFilters.findIndex(function (_) { return _.tableId === _this.dimensions.tableId && _.columnName === name; }) >= 0;
    };
    ChartEditFiltersComponent.prototype.switchCrossFilter = function (name, enable) {
        var _this = this;
        var value = this.state.form.value.crossFilters.filter(function (_) { return _.tableId !== _this.dimensions.tableId || _.columnName !== name; });
        if (enable) {
            value.push({
                tableId: this.dimensions.tableId,
                columnName: name,
            });
        }
        this.state.form.controls.crossFilters.setValue(value);
    };
    ChartEditFiltersComponent.prototype.checkChange = function (name, checked) {
        var value = this.state.widgetForm.value.chartFilters.filter(function (_) { return _ !== name; });
        if (checked) {
            value.push(name);
        }
        this.state.widgetForm.controls.chartFilters.setValue(value);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_state__["a" /* DashboardEditState */])
    ], ChartEditFiltersComponent.prototype, "state", void 0);
    ChartEditFiltersComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-edit-filters',
            template: "\n    <table class=\"table table-striped\">\n      <thead>\n      <tr>\n        <th>Name</th>\n        <th>Show On Chart</th>\n        <th>Local Filter</th>\n        <th>Cross Filter</th>\n      </tr>\n      </thead>\n      <tbody>\n        <tr *ngFor=\"let metric of dimensions?.metrics;let i = index\">\n          <td>\n            <label class=\"checkbox ellipsis\" [title]=\"metric.displayName\">\n              <i class=\"fa fa-sort-numeric-asc\"></i>\n              {{metric.displayName}}\n            </label>\n          </td>\n          <td>\n            <app-check\n            [checked]=\"isChecked(metric.name)\"\n            (checkedChange)=\"checkChange(metric.name, $event)\"></app-check>\n          </td>\n          <td>\n            <app-check [type]=\"'radio'\"\n              [name]=\"'filterMetric_' + i\"\n              [checked]=\"!isCrossFilter(metric.name)\"\n              (checkedChange)=\"switchCrossFilter(metric.name, $event)\"\n              [value]=\"false\"></app-check>\n          </td>\n          <td>\n            <app-check [type]=\"'radio'\"\n              [name]=\"'filterMetric_' + i\"\n              [checked]=\"isCrossFilter(metric.name)\"\n              (checkedChange)=\"switchCrossFilter(metric.name, $event)\"\n              [value]=\"true\"></app-check>\n          </td>\n        </tr>\n        <tr *ngFor=\"let attribute of dimensions?.attributes;let i = index\">\n          <td>\n            <label class=\"checkbox ellipsis\" [title]=\"attribute.displayName\">\n              <i class=\"fa fa-tag\"></i>\n              {{attribute.displayName}}\n            </label>\n          </td>\n          <td>\n            <app-check [checked]=\"isChecked(attribute.name)\"\n              (checkedChange)=\"checkChange(attribute.name, $event)\"></app-check>\n          </td>\n          <td>\n            <app-check [type]=\"'radio'\"\n              [name]=\"'filterAttribute_' + i\"\n              [checked]=\"!isCrossFilter(attribute.name)\"\n              (checkedChange)=\"switchCrossFilter(attribute.name, $event)\"\n              [value]=\"false\"></app-check>\n          </td>\n          <td>\n            <app-check [type]=\"'radio'\"\n              [name]=\"'filterAttribute' + i\"\n              [checked]=\"isCrossFilter(attribute.name)\"\n              (checkedChange)=\"switchCrossFilter(attribute.name, $event)\"\n              [value]=\"true\"></app-check>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], ChartEditFiltersComponent);
    return ChartEditFiltersComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-edit-groups.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartEditGroupsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ChartEditGroupsComponent = (function () {
    function ChartEditGroupsComponent(tables) {
        var _this = this;
        this.tables = tables;
        this.config = __WEBPACK_IMPORTED_MODULE_4__config__["a" /* default */];
        this.attributeControl = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required);
        this.groupsForm = new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["a" /* FormArray */]([
            new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
                columnName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
                mergedValue: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
                values: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(1)),
            }),
        ]);
        this.uniqueValues = [];
        // todo: remove loader here
        this._valuesLoader = new __WEBPACK_IMPORTED_MODULE_5__utils_reactive_loader__["a" /* ReactiveLoader */](function (attributes) {
            var input = _this.state.getCurrentInput();
            var currentCache = _this.uniqueValues;
            var uncachedAttributes = attributes.filter(function (attribute) {
                return !currentCache.find(function (_) { return _.columnName === attribute; });
            });
            if (!uncachedAttributes.length) {
                return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].of(currentCache);
            }
            var observables = uncachedAttributes.map(function (attribute) {
                return _this.tables.values(input.table.id, {
                    column_name: attribute,
                    search: '',
                    limit: 100,
                }).map(function (_) {
                    return {
                        columnName: attribute,
                        values: _.data,
                    };
                });
            });
            return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].forkJoin(observables).map(function (values) {
                return currentCache.concat(values);
            });
        });
        this._valuesLoader.subscribe(function (newCache) {
            _this.uniqueValues = newCache;
        });
    }
    ChartEditGroupsComponent.prototype.ngOnChanges = function () {
        var _this = this;
        // groups binding
        this.formGroupsSubscription = this.state.widgetForm.controls['groups'].valueChanges.subscribe(function (groups) {
            __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(_this.groupsForm, groups);
        });
        __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.groupsForm, this.state.widgetForm.value.groups);
        // attributes binding
        this.formAttributesSubscription = this.state.widgetForm.controls['attributes'].valueChanges.subscribe(function (attributes) {
            _this._valuesLoader.load(attributes);
            __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(_this.groupsForm, []);
            _this.fillWidgetForm();
        });
        this._valuesLoader.load(this.state.widgetForm.controls['attributes'].value);
    };
    ChartEditGroupsComponent.prototype.ngOnDestroy = function () {
        this.formGroupsSubscription && this.formGroupsSubscription.unsubscribe();
        this.formAttributesSubscription && this.formAttributesSubscription.unsubscribe();
    };
    ChartEditGroupsComponent.prototype.addGroup = function (attribute) {
        this.groupsForm.push(this.newGroupForm(attribute));
    };
    ChartEditGroupsComponent.prototype.newGroupForm = function (attribute) {
        return new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["c" /* FormGroup */]({
            columnName: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](attribute, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            mergedValue: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].required),
            values: new __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_2__angular_forms__["g" /* Validators */].minLength(1)),
        });
    };
    ChartEditGroupsComponent.prototype.findAttrValues = function (attr) {
        var valuesCache = this.uniqueValues.find(function (_) { return _.columnName === attr; });
        return valuesCache ? valuesCache.values : [];
    };
    ChartEditGroupsComponent.prototype.fillWidgetForm = function () {
        __WEBPACK_IMPORTED_MODULE_3__utils_misc__["a" /* MiscUtils */].fillForm(this.state.widgetForm.controls['groups'], this.groupsForm.value);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__dashboard_edit_state__["a" /* DashboardEditState */])
    ], ChartEditGroupsComponent.prototype, "state", void 0);
    ChartEditGroupsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-edit-groups',
            template: "\n    <app-spinner [visibility]=\"!_valuesLoader.loaded\"></app-spinner>\n    <div *ngIf=\"_valuesLoader.loaded\" class=\"panel-body\">\n      <div class=\"row pt5\">\n        <div class=\"col-xs-6\">\n          <app-select [label]=\"'Attribute'\" [control]=\"attributeControl\"\n            [options]=\"state.getWidgetAttributeColumns() | tableColumnSelectOptions\"></app-select>\n        </div>\n        <div class=\"col-xs-6\">\n          <button class=\"btn btn-default btn-block\" (click)=\"addGroup(attributeControl.value)\"\n            [disabled]=\"!attributeControl.value\"\n            title=\"Add Group\">Add Group\n            <i class=\"glyphicon glyphicon-plus\"></i>\n          </button>\n        </div>\n      </div>\n      <div class=\"row pt5\" *ngFor=\"let controlGroup of groupsForm.controls; let j = index\">\n        <ng-template [ngIf]=\"controlGroup.value['columnName']\">\n          <div class=\"col-xs-3\">\n            <app-input [value]=\"controlGroup.value['columnName']\" [readonly]=\"true\"></app-input>\n          </div>\n          <div class=\"col-xs-3\">\n            <app-input [control]=\"controlGroup['controls']['mergedValue']\"></app-input>\n          </div>\n          <div class=\"col-xs-5\">\n            <app-select\n              [multiple]=\"true\"\n              [control]=\"controlGroup['controls']['values']\"\n              [options]=\"findAttrValues(controlGroup.value['columnName'])\"></app-select>\n          </div>\n          <div class=\"col-xs-1\">\n            <button class=\"btn btn-default pull-right\" (click)=\"groupsForm.removeAt(j)\"\n              title=\"Remove Group\">\n              <i class=\"glyphicon glyphicon-remove\"></i>\n            </button>\n          </div>\n        </ng-template>\n      </div>\n      <button class=\"btn btn-block btn-primary\" (click)=\"fillWidgetForm()\">Update</button>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_table_service__["a" /* TableService */]])
    ], ChartEditGroupsComponent);
    return ChartEditGroupsComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-edit.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__charts_dock_panel_component__ = __webpack_require__("../../../../../src/app/visualize/charts-dock-panel.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__chart_factory__ = __webpack_require__("../../../../../src/app/visualize/chart.factory.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ChartEditComponent = (function () {
    function ChartEditComponent(componentFactoryResolver) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.config = __WEBPACK_IMPORTED_MODULE_7__config__["a" /* default */];
        this.activeTab = 0;
        this._selectedMetrics = [];
        this._selectedAttributes = [];
        this.groupsForm = new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["a" /* FormArray */]([
            new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["c" /* FormGroup */]({
                columnName: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_5__angular_forms__["g" /* Validators */].required),
                mergedValue: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_5__angular_forms__["g" /* Validators */].required),
                values: new __WEBPACK_IMPORTED_MODULE_5__angular_forms__["b" /* FormControl */]([], __WEBPACK_IMPORTED_MODULE_5__angular_forms__["g" /* Validators */].minLength(1)),
            })
        ]);
        this._getMetricDisplayName = function (columnName, state) {
            var column = state.metrList.find(function (column) { return column.name === columnName; });
            if (!column) {
                throw new Error('Could not find column');
            }
            return column.displayName || column.name;
        };
        this._getAttributeDisplayName = function (columnName, state) {
            var column = state.attrList.find(function (column) { return column.name === columnName; });
            if (!column) {
                throw new Error('Could not find column');
            }
            return column.displayName || column.name;
        };
    }
    Object.defineProperty(ChartEditComponent.prototype, "instance", {
        get: function () {
            return this.compRef.instance;
        },
        enumerable: true,
        configurable: true
    });
    ChartEditComponent.prototype.ngOnChanges = function () {
        var _this = this;
        this.formSubscription && this.formSubscription.unsubscribe();
        this.formSubscription = __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */]
            .distinctUntilChangedDeep(this.state.widgetForm.valueChanges)
            .debounceTime(100).subscribe(function (_) { return _this.syncFromFormValue(_); });
        this.syncFromFormValue(this.state.widgetForm.value);
    };
    ChartEditComponent.prototype.ngOnDestroy = function () {
        this.compRef && this.compRef.destroy();
        this.optsRef && this.optsRef.destroy();
        this.formSubscription && this.formSubscription.unsubscribe();
        this._compRefFiltersSubscription && this._compRefFiltersSubscription.unsubscribe();
    };
    ChartEditComponent.prototype.setMetrics = function (metrics) {
        this.state.widgetForm.controls['metrics'].setValue(metrics.slice());
    };
    ChartEditComponent.prototype.setAttributes = function (attributes) {
        this.state.widgetForm.controls['attributes'].setValue(attributes.slice());
        this.checkHierarchy(attributes);
    };
    ChartEditComponent.prototype.syncFromFormValue = function (widget) {
        var _this = this;
        var oldConfig = this.compRef ? this.compRef.instance.config : null;
        var newConfig = __WEBPACK_IMPORTED_MODULE_4_lodash__["cloneDeep"](widget);
        this._selectedMetrics = newConfig.metrics;
        this._selectedAttributes = newConfig.attributes;
        __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].fillForm(this.groupsForm, newConfig.groups);
        // change replace ComponentWidget to another
        if (!oldConfig || !__WEBPACK_IMPORTED_MODULE_4_lodash__["isEqual"](oldConfig.type, newConfig.type)) {
            this.compRef && this.compRef.destroy();
            this.compRef = __WEBPACK_IMPORTED_MODULE_2__chart_factory__["b" /* ChartFactory */].createComponentInstance(this.widgetPlaceholder, this.componentFactoryResolver, __WEBPACK_IMPORTED_MODULE_4_lodash__["cloneDeep"](newConfig));
            this.optsRef && this.optsRef.destroy();
            this.optsRef = __WEBPACK_IMPORTED_MODULE_2__chart_factory__["b" /* ChartFactory */].createOptionsComponentInstance(this.chartOptions, this.componentFactoryResolver, this.state);
            this._compRefFiltersSubscription && this._compRefFiltersSubscription.unsubscribe();
            this._compRefFiltersSubscription = this.compRef.instance.filtersChange.asObservable().subscribe(function (filters) {
                _this.state.widgetForm.controls['filters'].setValue(filters, {
                    emitEvent: false,
                });
            });
        }
        else if (this.compRef) {
            this.compRef.instance.config = __WEBPACK_IMPORTED_MODULE_4_lodash__["cloneDeep"](newConfig);
        }
    };
    ChartEditComponent.prototype.checkHierarchy = function (attributes) {
        var currentInput = this.state.getCurrentInput();
        if (currentInput) {
            var stats_1 = this.state.getCurrentInput().stats;
            var uniqueCounts_1 = attributes.map(function (attribute) {
                return stats_1.find(function (_) { return _.columnName === attribute; }).uniqueCount || 1;
            });
            var isHierarchy = uniqueCounts_1.slice(0, -1).every(function (count, idx) {
                return count < uniqueCounts_1[idx + 1];
            });
            var options = this.state.widgetForm.value.options;
            if (options.hierarchy !== isHierarchy && isHierarchy) {
                options.hierarchy = isHierarchy;
                this.state.widgetForm.controls['options'].setValue(options);
                if (this.optsRef) {
                    this.optsRef.instance.state = this.state;
                }
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_state__["a" /* DashboardEditState */])
    ], ChartEditComponent.prototype, "state", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('layout'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__charts_dock_panel_component__["a" /* ChartsDockComponent */])
    ], ChartEditComponent.prototype, "layout", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('widgetPlaceholder', { read: __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */] }),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */])
    ], ChartEditComponent.prototype, "widgetPlaceholder", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('chartOptions', { read: __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */] }),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */])
    ], ChartEditComponent.prototype, "chartOptions", void 0);
    ChartEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-edit',
            template: "\n    <div style=\"position: relative\">\n      <div class=\"row\">\n        <div class=\"col-xs-6\">\n          <div class=\"tabpanel\">\n            <!-- Nav tabs -->\n            <ul class=\"nav nav-tabs\" role=\"tablist\">\n              <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 0}\">\n                <a (click)=\"activeTab = 0\">Chart Basics</a>\n              </li>\n              <li role=\"presentation\" [ngClass]=\"{'active': activeTab === 1}\">\n                <a (click)=\"activeTab = 1\">Chart Options</a>\n              </li>\n              <li *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.TABLE\"\n                role=\"presentation\" [ngClass]=\"{'active': activeTab === 2}\">\n                <a (click)=\"activeTab = 2\">Filters</a>\n              </li>\n              <li *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.MODEL\"\n                role=\"presentation\" [ngClass]=\"{'active': activeTab === 3}\">\n                <a (click)=\"activeTab = 3\">Simulation</a>\n              </li>\n              <li *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.TABLE\"\n                role=\"presentation\" [ngClass]=\"{'active': activeTab === 4}\">\n                <a (click)=\"activeTab = 4\">Grouping</a>\n              </li>\n            </ul>\n          </div>\n          <div class=\"panel panel-default\" [hidden]=\"activeTab !== 0\">\n            <div class=\"panel-body\">\n              <app-input [label]=\"'Chart Name'\" [control]=\"state.widgetForm.controls['name']\"\n              ></app-input>\n              <div class=\"btn-group btn-group-justified\" role=\"group\" aria-label=\"Chart Types\">\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg \"\n                    title=\"Line Chart\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.LINE)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.LINE}\">\n                    <i class=\"fa fa-line-chart\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"Bar Chart\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.BAR)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.BAR}\">\n                    <i class=\"fa fa-bar-chart\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"Pie Chart\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.PIE)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.PIE}\">\n                    <i class=\"fa fa-pie-chart\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"Scatter Plot\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.SCATTER)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.SCATTER}\">\n                    <i class=\"fa fa-braille\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"Geo Heat Map\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.GEO)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.GEO}\">\n                    <i class=\"fa fa-map\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"Table\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.TABLE)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.TABLE}\">\n                    <i class=\"fa fa-table\"></i></button>\n                </div>\n                <div class=\"btn-group btn-group-lg\" role=\"group\">\n                  <button type=\"button\" class=\"btn btn-default btn-lg\"\n                    title=\"One-Dimensional Scatter Plot\"\n                    (click)=\"state.widgetForm.controls['type'].setValue(config.chart.type.values.ONEDSCATTER)\"\n                    [ngClass]=\"{'active': state.widgetForm.value.type === config.chart.type.values.ONEDSCATTER}\">\n                    <i class=\"fa fa-microchip\"></i></button>\n                </div>\n              </div>\n              <ng-template [ngIf]=\"_selectedMetrics.length > 1\">\n                <h3>Metrics Order:</h3>\n                <div class=\"list-group\" style=\"cursor: move;\"\n                  dnd-sortable-container [sortableData]=\"_selectedMetrics\">\n                  <li class=\"list-group-item\" *ngFor=\"let metric of _selectedMetrics; let i = index\"\n                    dnd-sortable\n                    [sortableIndex]=\"i\"\n                    (onDragEnd)=\"setMetrics(_selectedMetrics)\">\n                    {{metric.columnName | apply: _getMetricDisplayName: state}}\n                  </li>\n                </div>\n              </ng-template>\n              <ng-template [ngIf]=\"_selectedAttributes.length > 1\">\n                <h3>Attributes Order:</h3>\n                <div class=\"list-group\" style=\"cursor: move;\"\n                  dnd-sortable-container [sortableData]=\"_selectedAttributes\">\n                  <li class=\"list-group-item\" *ngFor=\"let attr of _selectedAttributes; let i = index\"\n                    dnd-sortable\n                    [sortableIndex]=\"i\"\n                    (onDragEnd)=\"setAttributes(_selectedAttributes)\">\n                    {{attr | apply: _getAttributeDisplayName: state}}\n                  </li>\n                </div>\n              </ng-template>\n            </div>\n          </div>\n          <div class=\"panel panel-default\" [hidden]=\"activeTab !== 1\">\n            <div class=\"panel-body\">\n              <div #chartOptions></div>\n            </div>\n          </div>\n          <div *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.TABLE\"\n            class=\"panel panel-default\" [hidden]=\"activeTab !== 2\">\n            <chart-edit-filters [state]=\"state\"></chart-edit-filters>\n          </div>\n          <div *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.MODEL\"\n            class=\"panel panel-default\" [hidden]=\"activeTab !== 3\"\n            style=\"height:320px;overflow-y: auto;overflow-x: hidden;padding: 10px;background: white;border: 1px solid #C0C0C0;border-top: none;\"\n          >\n            <chart-generators-selector\n              [label]=\"'Predictors Values'\"\n              [modelId]=\"state.widgetForm.value.input?.id\"\n              [generators]=\"state.widgetForm.controls['generators'].value\"\n              (generatorsChange)=\"state.widgetForm.controls['generators'].setValue($event)\"\n              [chartGenerators]=\"state.widgetForm.controls['chartGenerators'].value\"\n              (chartGeneratorsChange)=\"state.widgetForm.controls['chartGenerators'].setValue($event)\"\n            ></chart-generators-selector>\n          </div>\n          <div *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.TABLE\"\n            class=\"panel panel-default\" [hidden]=\"activeTab !== 4\">\n            <chart-edit-groups [state]=\"state\"></chart-edit-groups>\n          </div>\n        </div>\n        <div class=\"col-xs-6\">\n          <div class=\"p-Widget p-DockPanel\" style=\"margin-bottom: 10px;\">\n            <div class=\"p-Widget p-SplitDockTab p-DockPanel-tab\">\n              <div title=\"\" class=\"p-SplitDockTab-tab p-mod-current p-mod-closable\">\n                <div class=\"p-SplitDockTab-tabIcon\"></div>\n                <div class=\"p-SplitDockTab-tabLabel\">{{state.widgetForm.controls['name'].value}}</div>\n                <div class=\"p-SplitDockTab-tabFilterIcon\" (click)=\"instance.toggleFilters()\"></div>\n                <div class=\"p-SplitDockTab-tabRefreshIcon\" (click)=\"instance.refresh()\"></div>\n                <div class=\"p-SplitDockTab-tabExportIcon\" (click)=\"instance.download()\"></div>\n              </div>\n            </div>\n            <div class=\"p-Widget p-DockPanel-widget\" style=\"height: 350px;\">\n              <div #widgetPlaceholder></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"col-xs-12 flex-col\" [adaptiveHeight]=\"{property: 'height', minHeight: 250, targetHeight: 500}\">\n          <table-view-embed\n            *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.TABLE\"\n            [id]=\"state.widgetForm.value.input.id\"></table-view-embed>\n          <model-view-embed\n            *ngIf=\"state.widgetForm.value.input?.type === config.asset.values.MODEL\"\n            [modelId]=\"state.widgetForm.value.input.id\"></model-view-embed>\n        </div>\n      </div>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["p" /* ComponentFactoryResolver */]])
    ], ChartEditComponent);
    return ChartEditComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-filter.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartFilterComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ChartFilterComponent = (function () {
    function ChartFilterComponent(tables) {
        var _this = this;
        this.tables = tables;
        this.CHECKBOXES_LIMIT = 5;
        this.CATEGORICAL_LIMIT = 250;
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.options = [];
        this._selected = [];
        this.debouncer = new __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__["a" /* Subject */]();
        this.getColumnValuesLoader = function (search) {
            return _this.tables
                .values(_this.table.id, {
                column_name: _this.columnName,
                search: search || '',
                limit: _this.CATEGORICAL_LIMIT,
            })
                .map(function (result) { return result.data; });
        };
    }
    ChartFilterComponent.prototype.ngOnInit = function () {
        this.initDebouncer();
    };
    ChartFilterComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('stats' in changes || 'table' in changes || 'columnName' in changes) {
            if (!this.table) {
                return;
            }
            if (!this.stats) {
                return;
            }
            var columnStat = this.stats.find(function (stat) { return stat.columnName === _this.columnName; });
            if (!columnStat) {
                return;
            }
            var column = this.table.columns.find(function (_) { return _.name === _this.columnName; });
            if (!column) {
                return;
            }
            this.column = column;
            this.columnStats = columnStat;
            if (this.column.variableType === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.variableType.values.CATEGORICAL) {
                this.getColumnValuesLoader().subscribe(function (data) {
                    _this.options = data;
                    _this._selected = _this.value
                        ? _this.value.values.slice() : _this.options.slice();
                });
            }
        }
        else if ('value' in changes) {
            if (this.column.variableType === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.variableType.values.CATEGORICAL) {
                this._selected = this.value
                    ? this.value.values.slice() : this.options.slice();
            }
        }
    };
    ChartFilterComponent.prototype.getSelectedIndex = function (name) {
        return this._selected.indexOf(name);
    };
    ChartFilterComponent.prototype.isAllChecked = function () {
        return this._selected.length >= this.options.length;
    };
    ChartFilterComponent.prototype.isChecked = function (name) {
        return this.getSelectedIndex(name) >= 0;
    };
    ChartFilterComponent.prototype.checkAll = function (checked) {
        this._selected = checked ? this.options.slice() : [];
        this.debouncer.next({ columnName: this.column.name, type: 'categorical', values: this._selected.slice() });
    };
    ChartFilterComponent.prototype.checkChange = function (name, checked) {
        var selected = __WEBPACK_IMPORTED_MODULE_5_lodash__["intersection"](this._selected, this.options).filter(function (_) { return _ !== name; });
        if (checked) {
            selected.push(name);
        }
        this._selected = selected;
        this.debouncer.next({ columnName: this.column.name, type: 'categorical', values: this._selected.slice() });
    };
    ChartFilterComponent.prototype.onRangeValueChange = function (value) {
        var min = value[0], max = value[1];
        this.debouncer.next({ columnName: this.column.name, type: 'continuous', min: min, max: max });
    };
    ChartFilterComponent.prototype.onSelectValueChange = function (values) {
        this.debouncer.next({ columnName: this.column.name, type: 'categorical', values: (values || []).slice() });
    };
    ChartFilterComponent.prototype.ngOnDestroy = function () {
        this.debouncerSubscription && this.debouncerSubscription.unsubscribe();
        this.autoSuggestSubscription && this.autoSuggestSubscription.unsubscribe();
    };
    ChartFilterComponent.prototype.initDebouncer = function () {
        var _this = this;
        this.debouncerSubscription && this.debouncerSubscription.unsubscribe();
        this.debouncerSubscription = __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].distinctUntilChangedDeep(this.debouncer.asObservable())
            .debounceTime(0)
            .subscribe(function (value) { return _this.valueChange.emit(value); });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ChartFilterComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartFilterComponent.prototype, "stats", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ChartFilterComponent.prototype, "table", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ChartFilterComponent.prototype, "columnName", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ChartFilterComponent.prototype, "valueChange", void 0);
    ChartFilterComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-filter',
            template: "\n    <div *ngIf=\"columnStats\" [ngSwitch]=\"column.variableType\">\n      <div *ngSwitchCase=\"config.table.column.variableType.values.CONTINUOUS\">\n        <label>{{column.displayName}}</label>\n        <span *ngIf=\"columnStats.min === columnStats.max\">{{columnStats.min | number: '1.0-1'}}</span>\n        <app-slider *ngIf=\"columnStats.min < columnStats.max\"\n          [min]=\"columnStats.min\"\n          [max]=\"columnStats.max\"\n          [step]=\"(columnStats.max - columnStats.min)/100\"\n          [value]=\"value ? [value['min'], value['max']] : [columnStats.min, columnStats.max]\"\n          [range]=\"true\"\n          (valueChange)=\"onRangeValueChange($event)\"\n        ></app-slider>\n      </div>\n      <div *ngSwitchCase=\"config.table.column.variableType.values.CATEGORICAL\"\n        [ngSwitch]=\"columnStats.uniqueCount <= CHECKBOXES_LIMIT\">\n        <div\n          *ngSwitchCase=\"true\">\n          <label>{{column.displayName}}</label>\n          <ng-template [ngIf]=\"options\">\n            <app-check\n              [label]=\"'(all)'\"\n              [checked]=\"isAllChecked()\"\n              (checkedChange)=\"checkAll($event)\">\n            </app-check>\n            <app-check *ngFor=\"let value of options\"\n              [label]=\"value\"\n              [checked]=\"isChecked(value)\"\n              (checkedChange)=\"checkChange(value, $event)\">\n            </app-check>\n          </ng-template>\n        </div>\n        <div\n          *ngSwitchDefault=\"\" [ngSwitch]=\"columnStats.uniqueCount <= CATEGORICAL_LIMIT\">\n          <app-select\n            *ngSwitchCase=\"true\"\n            [multiple]=\"true\"\n            [label]=\"column.displayName\"\n            [options]=\"options\"\n            [value]=\"(value && value['values']) ? ['values'] : options\"\n            (valueChange)=\"onSelectValueChange($event)\"\n          ></app-select>\n          <span *ngSwitchDefault=\"\">\n            {{column.displayName}} contains more than {{CATEGORICAL_LIMIT}} values. Filter is unavailable.\n          </span>\n        </div>\n      </div>\n      <div *ngSwitchCase=\"config.table.column.variableType.values.BOOLEAN\">\n        <label>{{column.displayName}}</label>\n        <app-check *ngFor=\"let value of [true, false]\"\n          [label]=\"value\"\n          [checked]=\"isChecked(value)\"\n          (checkedChange)=\"checkChange(value, $event)\">\n        </app-check>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_6__services_table_service__["a" /* TableService */]])
    ], ChartFilterComponent);
    return ChartFilterComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-filters-modal.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartFiltersModalComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



var ChartFiltersModalComponent = (function () {
    function ChartFiltersModalComponent() {
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this.filtersChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.crossFiltersChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
    }
    ChartFiltersModalComponent.prototype.open = function () {
        this.modal.show();
    };
    ChartFiltersModalComponent.prototype.doSubmit = function () {
        this.filtersChange.emit(this.filters);
        this.crossFiltersChange.emit(this.crossFilters);
        this.modal.hide();
    };
    ChartFiltersModalComponent.prototype.isChecked = function (name) {
        return this.filters.findIndex(function (_) { return _ === name; }) >= 0;
    };
    ChartFiltersModalComponent.prototype.isCrossFilter = function (name) {
        var _this = this;
        return this.crossFilters.findIndex(function (_) { return _.tableId === _this.dimensions.tableId && _.columnName === name; }) >= 0;
    };
    ChartFiltersModalComponent.prototype.checkChange = function (name, checked) {
        var value = this.filters.filter(function (_) { return _ !== name; });
        if (checked) {
            value.push(name);
        }
        this.filters = value;
    };
    ChartFiltersModalComponent.prototype.switchCrossFilter = function (name, enable) {
        var _this = this;
        var value = this.crossFilters.filter(function (_) { return _.tableId !== _this.dimensions.tableId || _.columnName !== name; });
        if (enable) {
            value.push({
                tableId: this.dimensions.tableId,
                columnName: name,
            });
        }
        this.crossFilters = value;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ChartFiltersModalComponent.prototype, "dimensions", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartFiltersModalComponent.prototype, "filters", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartFiltersModalComponent.prototype, "crossFilters", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ChartFiltersModalComponent.prototype, "filtersChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ChartFiltersModalComponent.prototype, "crossFiltersChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ChartFiltersModalComponent.prototype, "modal", void 0);
    ChartFiltersModalComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-filters-modal',
            template: "\n    <app-modal #modal\n      *ngIf=\"dimensions && filters\"\n      [sizeClass]=\"config.modal.size.LARGE\"\n      [title]=\"'Choose Filters to Show on Chart'\"\n      [buttons]=\"[{'class': 'btn-primary', title: 'Save' }]\"\n      (buttonClick)=\"doSubmit()\">\n\n      <app-form-group [title]=\"'Metrics'\">\n        <div class=\"row\" *ngFor=\"let metric of dimensions.metrics;let i = index\">\n          <div class=\"col-md-3\">\n            <label class=\"checkbox\">{{metric.displayName}}</label>\n          </div>\n          <div class=\"col-md-3\">\n            <app-check [label]=\"'Show on Chart'\"\n              [checked]=\"isChecked(metric.name)\"\n              (checkedChange)=\"checkChange(metric.name, $event)\"></app-check>\n          </div>\n          <div class=\"col-md-3\">\n            <app-check [type]=\"'radio'\" [label]=\"'Local Filter'\"\n              [name]=\"'filterMetric_' + i\"\n              [checked]=\"!isCrossFilter(metric.name)\"\n              (checkedChange)=\"switchCrossFilter(metric.name, $event)\"\n              [value]=\"false\"></app-check>\n          </div>\n          <div class=\"col-md-3\">\n            <app-check [type]=\"'radio'\" [label]=\"'Cross Filter'\"\n              [name]=\"'filterMetric_' + i\"\n              [checked]=\"isCrossFilter(metric.name)\"\n              (checkedChange)=\"switchCrossFilter(metric.name, $event)\"\n              [value]=\"true\"></app-check>\n          </div>\n        </div>\n      </app-form-group>\n      <app-form-group [title]=\"'Attributes'\">\n        <div class=\"row\" *ngFor=\"let attribute of dimensions.attributes;let i = index\">\n          <div class=\"col-md-3\">\n            <label class=\"checkbox\">{{attribute.displayName}}</label>\n          </div>\n\n          <div class=\"col-md-3\">\n            <app-check [label]=\"'Show on Chart'\"\n              [checked]=\"isChecked(attribute.name)\"\n              (checkedChange)=\"checkChange(attribute.name, $event)\"></app-check>\n          </div>\n\n          <div class=\"col-md-3\">\n            <app-check [type]=\"'radio'\" [label]=\"'Local Filter'\"\n              [name]=\"'filterAttribute_' + i\"\n              [checked]=\"!isCrossFilter(attribute.name)\"\n              (checkedChange)=\"switchCrossFilter(attribute.name, $event)\"\n              [value]=\"false\"></app-check>\n          </div>\n          <div class=\"col-md-3\">\n            <app-check [type]=\"'radio'\" [label]=\"'Cross Filter'\"\n              [name]=\"'filterAttribute' + i\"\n              [checked]=\"isCrossFilter(attribute.name)\"\n              (checkedChange)=\"switchCrossFilter(attribute.name, $event)\"\n              [value]=\"true\"></app-check>\n          </div>\n        </div>\n      </app-form-group>\n    </app-modal>"
        })
    ], ChartFiltersModalComponent);
    return ChartFiltersModalComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-generator.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartGeneratorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__interfaces_table_interface__ = __webpack_require__("../../../../../src/app/interfaces/table.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var ChartGeneratorComponent = (function () {
    function ChartGeneratorComponent(tables) {
        var _this = this;
        this.tables = tables;
        this.valueChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.options = [];
        this._selected = [];
        this.steps = 10;
        this.debouncer = new __WEBPACK_IMPORTED_MODULE_2_rxjs_Subject__["a" /* Subject */]();
        this.getColumnValuesLoader = function (search) {
            return _this.tables
                .values(_this.table.id, {
                column_name: _this.columnName,
                search: search || '',
                limit: 20
            })
                .map(function (result) { return result.data; });
        };
        this.debouncer
            .debounceTime(100)
            .subscribe(function (value) { return _this.valueChange.emit(value); });
    }
    ChartGeneratorComponent.prototype.ngOnChanges = function (changes) {
        var _this = this;
        if ('stats' in changes || 'table' in changes || 'columnName' in changes) {
            if (!this.table) {
                return;
            }
            if (!this.stats) {
                return;
            }
            var columnStat = this.stats.find(function (stat) { return stat.columnName === _this.columnName; });
            if (!columnStat) {
                return;
            }
            var column = this.table.columns.find(function (_) { return _.name === _this.columnName; });
            if (!column) {
                return;
            }
            this.column = column;
            this.columnStats = columnStat;
            if (this.column.variableType === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.variableType.values.CATEGORICAL) {
                this.getColumnValuesLoader().subscribe(function (data) { return _this.options = data; });
            }
        }
        if ('value' in changes) {
            if (this.column.variableType === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.variableType.values.CATEGORICAL) {
                this._selected = this.value
                    ? this.value.values.slice() : [];
            }
            else {
                this.steps = this.value ? this.value.steps : 10;
            }
        }
    };
    ChartGeneratorComponent.prototype.getIndex = function (name) {
        return this._selected.indexOf(name);
    };
    ChartGeneratorComponent.prototype.isChecked = function (name) {
        return this.getIndex(name) >= 0;
    };
    ChartGeneratorComponent.prototype.checkChange = function (name, checked) {
        if (checked) {
            this._selected.push(name);
        }
        else {
            this._selected.splice(this.getIndex(name), 1);
        }
        this.debouncer.next({ columnName: this.column.name, type: 'categorical', values: this._selected.slice() });
    };
    ChartGeneratorComponent.prototype.onRangeValueChange = function (value) {
        var min = value[0], max = value[1];
        this.debouncer.next({ columnName: this.column.name, type: 'continuous', min: min, max: max, steps: this.steps });
    };
    ChartGeneratorComponent.prototype.onSelectValueChange = function (values) {
        this.debouncer.next({ columnName: this.column.name, type: 'categorical', values: (values || []).slice() });
    };
    ChartGeneratorComponent.prototype.onStepsChange = function (steps) {
        this.steps = steps;
        var _a = this.value ? [this.value.min, this.value.max] : [this.columnStats.min, this.columnStats.max], min = _a[0], max = _a[1];
        this.debouncer.next({ columnName: this.column.name, type: 'continuous', min: min, max: max, steps: steps });
    };
    ChartGeneratorComponent.prototype.ngOnDestroy = function () {
        this.autoSuggestSubscription && this.autoSuggestSubscription.unsubscribe();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ChartGeneratorComponent.prototype, "value", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartGeneratorComponent.prototype, "stats", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object)
    ], ChartGeneratorComponent.prototype, "table", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ChartGeneratorComponent.prototype, "columnName", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ChartGeneratorComponent.prototype, "valueChange", void 0);
    ChartGeneratorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-generator',
            template: "\n    <div *ngIf=\"columnStats\" [ngSwitch]=\"column.variableType\">\n      <div *ngSwitchCase=\"config.table.column.variableType.values.CONTINUOUS\">\n        <label>{{column.displayName}}</label>\n        <app-slider *ngIf=\"steps > 1\"\n          [min]=\"columnStats.min\"\n          [max]=\"columnStats.max\"\n          [step]=\"(columnStats.max - columnStats.min)/100\"\n          [value]=\"value ? [value['min'], value['max']] : [columnStats.min, columnStats.max]\"\n          [range]=\"true\"\n          (valueChange)=\"onRangeValueChange($event)\"\n        ></app-slider>\n        <app-slider *ngIf=\"steps === 1\"\n          [min]=\"columnStats.min\"\n          [max]=\"columnStats.max\"\n          [step]=\"(columnStats.max - columnStats.min)/100\"\n          [value]=\"value ? [value['min']] : [columnStats.min]\"\n          [range]=\"false\"\n          (valueChange)=\"onRangeValueChange($event.concat([columnStats.max]))\"\n        ></app-slider>\n        <div style=\"margin-top:5px;\">\n          <app-input [label]=\"'Values'\" [type]=\"'number'\" [value]=\"steps\" [min]=\"1\"\n            (valueChange)=\"onStepsChange($event)\"></app-input>\n        </div>\n      </div>\n      <div *ngSwitchCase=\"config.table.column.variableType.values.CATEGORICAL\"\n        [ngSwitch]=\"columnStats.uniqueCount <= 5\">\n        <div\n          *ngSwitchCase=\"true\">\n          <label>{{column.displayName}}</label>\n          <ng-template [ngIf]=\"options\">\n            <app-check *ngFor=\"let value of options\"\n              [label]=\"value\"\n              [checked]=\"isChecked(value)\"\n              (checkedChange)=\"checkChange(value, $event)\">\n            </app-check>\n          </ng-template>\n        </div>\n        <div *ngSwitchDefault=\"\">\n          <app-select [multiple]=\"true\"\n            [label]=\"column.displayName || column.name\"\n            [options]=\"options\"\n            [value]=\"_selected\"\n            (valueChange)=\"onSelectValueChange($event)\"\n          ></app-select>\n        </div>\n      </div>\n      <div *ngSwitchCase=\"config.table.column.variableType.values.BOOLEAN\">\n        <label>{{column.displayName}}</label>\n        <app-check *ngFor=\"let value of [true, false]\"\n          [label]=\"value\"\n          [checked]=\"isChecked(value)\"\n          (checkedChange)=\"checkChange(value, $event)\">\n        </app-check>\n      </div>\n    </div>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_table_service__["a" /* TableService */]])
    ], ChartGeneratorComponent);
    return ChartGeneratorComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart-generators-selector.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartGeneratorsSelectorComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_ui_components_modal_component__ = __webpack_require__("../../../../../src/app/core-ui/components/modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var ChartGeneratorsSelectorComponent = (function () {
    function ChartGeneratorsSelectorComponent(models, tables) {
        var _this = this;
        this.models = models;
        this.tables = tables;
        this.generatorsChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.chartGeneratorsChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.disabled = false;
        this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        this._loader = new __WEBPACK_IMPORTED_MODULE_4__utils_reactive_loader__["a" /* ReactiveLoader */](function (modelId) {
            return _this.models.get(modelId).flatMap(function (model) {
                return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].forkJoin(__WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].of(model), _this.tables.get(model.input), _this.tables.getStatistic(model.input).map(function (_) { return _.stats; }));
            });
        });
        this._loader.subscribe(function (_a) {
            var model = _a[0], table = _a[1], stats = _a[2];
            _this.model = model;
            _this.table = table;
            _this.stats = stats;
            _this.initGenerators();
        });
    }
    ChartGeneratorsSelectorComponent.prototype.ngOnChanges = function (changes) {
        if ('modelId' in changes) {
            this._loader.load(this.modelId);
        }
    };
    ChartGeneratorsSelectorComponent.prototype.initGenerators = function () {
        var _this = this;
        this.generators = this.model.predictorColumns.map(function (column) {
            var isCategorical = column.variableType !== __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].table.column.variableType.values.CONTINUOUS;
            var stats = _this.stats.find(function (_) { return _.columnName === column.name; });
            var oldValue = _this.generators.find(function (_) { return _.columnName === column.name; });
            if (isCategorical) {
                var values = oldValue ? oldValue.values : [stats.mostFrequentValue];
                return {
                    columnName: column.name,
                    type: 'categorical',
                    values: values,
                };
            }
            else {
                var _a = oldValue || stats, min = _a.min, max = _a.max;
                return {
                    columnName: column.name,
                    type: 'continuous',
                    min: min,
                    max: max,
                    steps: oldValue ? oldValue.steps : 1,
                };
            }
        });
        this.generatorsChange.emit(this.generators);
    };
    ChartGeneratorsSelectorComponent.prototype.setGenerator = function (name, value) {
        var index = this.generators.findIndex(function (_) { return _.columnName === name; });
        if (index >= 0 && !__WEBPACK_IMPORTED_MODULE_5_lodash__["isEqual"](this.generators[index], value)) {
            this.generators = this.generators.slice();
            this.generators[index] = value;
            this.generatorsChange.emit(this.generators);
        }
    };
    ChartGeneratorsSelectorComponent.prototype.getGenerator = function (name) {
        return this.generators.find(function (_) { return _.columnName === name; });
    };
    ChartGeneratorsSelectorComponent.prototype.toggleChartGenerator = function (columnName, checked) {
        var value = this.chartGenerators.filter(function (_) { return _ !== columnName; });
        if (checked) {
            value.push(columnName);
        }
        this.chartGenerators = value;
        this.chartGeneratorsChange.emit(this.chartGenerators);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartGeneratorsSelectorComponent.prototype, "generators", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ChartGeneratorsSelectorComponent.prototype, "generatorsChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array)
    ], ChartGeneratorsSelectorComponent.prototype, "chartGenerators", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */])
    ], ChartGeneratorsSelectorComponent.prototype, "chartGeneratorsChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ChartGeneratorsSelectorComponent.prototype, "label", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", String)
    ], ChartGeneratorsSelectorComponent.prototype, "modelId", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], ChartGeneratorsSelectorComponent.prototype, "disabled", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('modal'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1__core_ui_components_modal_component__["a" /* ModalComponent */])
    ], ChartGeneratorsSelectorComponent.prototype, "modal", void 0);
    ChartGeneratorsSelectorComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'chart-generators-selector',
            template: "\n    <app-spinner [visibility]=\"!_loader.loaded\"></app-spinner>\n    <ng-template [ngIf]=\"_loader.loaded\">\n      <div *ngFor=\"let column of model.predictorColumns\" class=\"bordered hover-bar\">\n        <!--{{filter | json}}-->\n        <chart-generator\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [value]=\"getGenerator(column.name)\"\n          [columnName]=\"column.name\"\n          (valueChange)=\"setGenerator(column.name, $event)\"></chart-generator>\n        <hr />\n        <app-check [label]=\"'Show on chart'\"\n          [checked]=\"chartGenerators.indexOf(column.name) > -1\"\n          (checkedChange)=\"toggleChartGenerator(column.name, $event)\"></app-check>\n      </div>\n    </ng-template>\n  "
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_6__services_table_service__["a" /* TableService */]])
    ], ChartGeneratorsSelectorComponent);
    return ChartGeneratorsSelectorComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart.abstract.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartAbstract; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var ChartAbstract = (function () {
    function ChartAbstract(tables, models, crossFilterBus, dataFetch, el, events) {
        var _this = this;
        this.tables = tables;
        this.models = models;
        this.crossFilterBus = crossFilterBus;
        this.dataFetch = dataFetch;
        this.el = el;
        this.events = events;
        this.filtersChange = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this._filters = {};
        this.generators = {};
        this.showFilters = true;
        this._dataRequests = new __WEBPACK_IMPORTED_MODULE_5_rxjs_Subject__["a" /* Subject */]();
        this._crossFilters = [];
        this._metaLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function (asset) {
            switch (asset.type) {
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                    return _this.models.get(asset.id).flatMap(function (model) {
                        return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].forkJoin(_this.tables.get(model.input), _this.tables.getStatistic(model.input).map(function (_) { return _.stats; }));
                    });
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                    return __WEBPACK_IMPORTED_MODULE_1_rxjs_Observable__["a" /* Observable */].forkJoin(_this.tables.get(asset.id), _this.tables.getStatistic(asset.id).map(function (_) { return _.stats; }));
                default:
                    throw new Error('Unsupported asset type');
            }
        });
        this._metaLoader.subscribe(function (_a) {
            var table = _a[0], stats = _a[1];
            _this.table = table;
            _this.stats = stats;
            _this.refresh();
        });
        crossFilterBus.subscribe(function (items) {
            _this._crossFilters = items.filter(function (_) { return _this.input && _.tableId === _this.input.id; }).map(function (_) { return _.filter; });
            _this._crossFilters.forEach(function (filter) { return _this.setFilter(filter); });
        });
        this._dataLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function (request) { return _this.dataFetch.fetchData(request).debounceTime(0); });
        this._dataLoader.subscribe(function (data) {
            if (!__WEBPACK_IMPORTED_MODULE_6_lodash__["isEqual"](data, _this._response)) {
                _this.visualizeData(_this._response = data);
            }
        });
        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].distinctUntilChangedDeep(this._dataRequests.asObservable()).debounceTime(300)
            .subscribe(function (request) { return _this._dataLoader.load(request); });
    }
    Object.defineProperty(ChartAbstract.prototype, "options", {
        get: function () {
            return Object.assign({}, this.defaultOptions, this.config.options);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChartAbstract.prototype, "config", {
        get: function () {
            //return this._config;
            // TODO: fix edit-layout to use event emitter subscription instead
            return Object.assign(this._config, { filters: __WEBPACK_IMPORTED_MODULE_6_lodash__["values"](this._filters) });
        },
        set: function (value) {
            var _this = this;
            if (!value) {
                return;
            }
            if (this._config && this._config.type !== value.type) {
                throw new Error('Can not change type of already initialized chart');
            }
            if (!('groups' in value)) {
                value.groups = [];
            }
            this._config = value;
            this._filters = this._config.chartFilters.reduce(function (acc, columnName) {
                if (_this._filters[columnName]) {
                    acc[columnName] = _this._filters[columnName];
                }
                else if (_this._config.filters) {
                    var configFilter = _this._config.filters.find(function (_) { return _.columnName === columnName; });
                    if (configFilter) {
                        acc[columnName] = configFilter;
                    }
                }
                return acc;
            }, {});
            this._crossFilters.forEach(function (filter) { return _this._filters[filter.columnName] = Object.assign({}, filter); });
            if (value.chartGenerators) {
                this.generators = this._config.chartGenerators.reduce(function (acc, generatorName) {
                    acc[generatorName] = _this.generators[generatorName] || Object.assign({}, value.generators.find(function (_) { return _.columnName === generatorName; }));
                    return acc;
                }, {});
            }
            else {
                this.generators = {};
            }
            this.onInputChange();
            this.getData();
        },
        enumerable: true,
        configurable: true
    });
    ChartAbstract.prototype.setFilter = function (filter) {
        if (filter && !__WEBPACK_IMPORTED_MODULE_6_lodash__["isEqual"](filter, this._filters[filter.columnName])) {
            this._filters[filter.columnName] = filter;
            if (this.input && this.input.type === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE) {
                this.crossFilterBus.push({
                    tableId: this.input.id,
                    filter: filter,
                });
            }
            this.filtersChange.emit(__WEBPACK_IMPORTED_MODULE_6_lodash__["values"](this._filters));
            this.getData();
        }
    };
    ChartAbstract.prototype.setGenerator = function (generator) {
        if (generator && !__WEBPACK_IMPORTED_MODULE_6_lodash__["isEqual"](generator, this.generators[generator.columnName])) {
            this.generators[generator.columnName] = generator;
            this.getData();
        }
    };
    Object.defineProperty(ChartAbstract.prototype, "filters", {
        get: function () {
            return this._filters;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChartAbstract.prototype, "input", {
        get: function () {
            return this._config ? this._config.input : null;
        },
        enumerable: true,
        configurable: true
    });
    ChartAbstract.prototype.onInputChange = function () {
        if (!this.input) {
            return;
        }
        this._metaLoader.load(this.input);
    };
    ChartAbstract.prototype.getData = function () {
        var _this = this;
        if (!this.input || !this._config.metrics /*|| !this._config.attributes*/ || !this._config.metrics.length /*|| !this._config.attributes.length*/) {
            this._dataRequests.next(null);
            return;
        }
        var request = {
            asset: this.input,
            filters: Object.keys(this._filters).map(function (_) { return _this._filters[_]; }),
            aggregations: (this._config.metrics || []),
            groupBy: this._config.attributes,
            groups: (this._config.groups || []),
            limit: this._rowsLimit,
        };
        if (this.input.type === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL) {
            request.generators = this._config.generators.map(function (_) {
                return _this.generators[_.columnName] || _;
            });
        }
        this._dataRequests.next(request);
    };
    ChartAbstract.prototype.ngOnInit = function () {
        this.refresh();
    };
    ChartAbstract.prototype.ngOnDestroy = function () {
        this.selector && $(this.selector.nativeElement).empty();
    };
    ChartAbstract.prototype.toggleFilters = function () {
        this.showFilters = !this.showFilters;
        if (this.filtersBox) {
            $(this.filtersBox.nativeElement).toggle(this.showFilters);
            this.refresh();
        }
    };
    ChartAbstract.prototype.refresh = function () {
        var $el = $(this.el.nativeElement);
        this.boxWidth = $el.width();
        this.boxHeight = $el.height();
        if (!this.input) {
            return;
        }
        this.visualizeData(this._response);
    };
    ChartAbstract.prototype.download = function () {
        if (!this._response) {
            return;
        }
        var data = [this._response.columns.map(function (column) { return column.displayName; })].concat(this._response.data).map(function (row) {
            return row.map(function (value) {
                return "\"" + value.toString().replace(/"/g, '""') + "\"";
            }).join(',');
        }).join('\n');
        var url = "data:application/octet-stream;charset=utf-8," + encodeURIComponent(data);
        __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].downloadUrl(url, this.table.name);
    };
    ChartAbstract.prototype.edit = function () {
        this.events.emit('CHART_EDIT', this.config.guid);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ChartAbstract.prototype, "filtersChange", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('canvas'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ChartAbstract.prototype, "selector", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('filterEl'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */])
    ], ChartAbstract.prototype, "filtersBox", void 0);
    return ChartAbstract;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/chart.factory.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return ChartFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CHART_ENTRY_COMPONENTS; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__ = __webpack_require__("../../../../../src/app/interfaces/dashboard.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__charts_pie_chart_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/pie-chart-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__charts_line_chart_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/line-chart-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__charts_geo_heat_map_component__ = __webpack_require__("../../../../../src/app/visualize/charts/geo-heat-map.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_geo_heat_map_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/geo-heat-map-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__charts_one_dimensional_scatter_plot_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/one-dimensional-scatter-plot-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__charts_table_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/table-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__charts_one_dimensional_scatter_plot_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/one-dimensional-scatter-plot-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__charts_line_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/line-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__charts_pie_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/pie-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__charts_scatter_plot_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/scatter-plot-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__charts_scatter_plot_chart_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/scatter-plot-chart-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__charts_bar_chart_options_component__ = __webpack_require__("../../../../../src/app/visualize/charts/bar-chart-options.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__charts_bar_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/bar-chart.component.ts");














var ChartFactory;
(function (ChartFactory) {
    function getComponentClass(chartType) {
        switch (chartType) {
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.BAR:
                return __WEBPACK_IMPORTED_MODULE_13__charts_bar_chart_component__["a" /* BarChartComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.LINE:
                return __WEBPACK_IMPORTED_MODULE_8__charts_line_chart_component__["a" /* LineChartComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.PIE:
                return __WEBPACK_IMPORTED_MODULE_9__charts_pie_chart_component__["a" /* PieChartComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.SCATTER:
                return __WEBPACK_IMPORTED_MODULE_10__charts_scatter_plot_chart_component__["a" /* ScatterPlotChartComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.GEO:
                return __WEBPACK_IMPORTED_MODULE_3__charts_geo_heat_map_component__["a" /* GeoHeatMapComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.TABLE:
                return __WEBPACK_IMPORTED_MODULE_6__charts_table_chart_component__["a" /* TableChartComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.ONEDSCATTER:
                return __WEBPACK_IMPORTED_MODULE_5__charts_one_dimensional_scatter_plot_chart_component__["a" /* OneDimensionalScatterPlotChartComponent */];
            default:
                throw new Error('Unknown Chart Type');
        }
    }
    function getOptionsClass(chartType) {
        // @TODO Replace with common options interface
        switch (chartType) {
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.BAR:
                return __WEBPACK_IMPORTED_MODULE_12__charts_bar_chart_options_component__["a" /* BarChartOptionsComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.LINE:
                return __WEBPACK_IMPORTED_MODULE_2__charts_line_chart_options_component__["a" /* LineChartOptionsComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.PIE:
                return __WEBPACK_IMPORTED_MODULE_1__charts_pie_chart_options_component__["a" /* PieChartOptionsComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.SCATTER:
                return __WEBPACK_IMPORTED_MODULE_11__charts_scatter_plot_chart_options_component__["a" /* ScatterPlotChartOptionsComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.GEO:
                return __WEBPACK_IMPORTED_MODULE_4__charts_geo_heat_map_options_component__["a" /* GeoHeatMapOptionsComponent */];
            case __WEBPACK_IMPORTED_MODULE_0__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.ONEDSCATTER:
                return __WEBPACK_IMPORTED_MODULE_7__charts_one_dimensional_scatter_plot_options_component__["a" /* OneDimensionalScatterPlotOptionsComponent */];
            default:
                return null;
        }
    }
    ChartFactory.getOptionsClass = getOptionsClass;
    function createOptionsComponentInstance(viewContainer, componentFactoryResolver, state) {
        var optionsClass = ChartFactory.getOptionsClass(state.widgetForm.value.type);
        if (!optionsClass) {
            return;
        }
        var factory = componentFactoryResolver.resolveComponentFactory(optionsClass);
        var compRef = viewContainer.createComponent(factory);
        compRef.instance.state = state;
        return compRef;
    }
    ChartFactory.createOptionsComponentInstance = createOptionsComponentInstance;
    function createComponentInstance(viewContainer, componentFactoryResolver, config) {
        var factory = componentFactoryResolver.resolveComponentFactory(getComponentClass(config.type));
        var compRef = viewContainer.createComponent(factory);
        compRef.instance.config = config;
        return compRef;
    }
    ChartFactory.createComponentInstance = createComponentInstance;
})(ChartFactory || (ChartFactory = {}));
var CHART_ENTRY_COMPONENTS = [
    __WEBPACK_IMPORTED_MODULE_8__charts_line_chart_component__["a" /* LineChartComponent */],
    __WEBPACK_IMPORTED_MODULE_13__charts_bar_chart_component__["a" /* BarChartComponent */],
    __WEBPACK_IMPORTED_MODULE_12__charts_bar_chart_options_component__["a" /* BarChartOptionsComponent */],
    __WEBPACK_IMPORTED_MODULE_9__charts_pie_chart_component__["a" /* PieChartComponent */],
    __WEBPACK_IMPORTED_MODULE_1__charts_pie_chart_options_component__["a" /* PieChartOptionsComponent */],
    __WEBPACK_IMPORTED_MODULE_2__charts_line_chart_options_component__["a" /* LineChartOptionsComponent */],
    __WEBPACK_IMPORTED_MODULE_10__charts_scatter_plot_chart_component__["a" /* ScatterPlotChartComponent */],
    __WEBPACK_IMPORTED_MODULE_11__charts_scatter_plot_chart_options_component__["a" /* ScatterPlotChartOptionsComponent */],
    __WEBPACK_IMPORTED_MODULE_3__charts_geo_heat_map_component__["a" /* GeoHeatMapComponent */],
    __WEBPACK_IMPORTED_MODULE_4__charts_geo_heat_map_options_component__["a" /* GeoHeatMapOptionsComponent */],
    __WEBPACK_IMPORTED_MODULE_6__charts_table_chart_component__["a" /* TableChartComponent */],
    __WEBPACK_IMPORTED_MODULE_5__charts_one_dimensional_scatter_plot_chart_component__["a" /* OneDimensionalScatterPlotChartComponent */],
    __WEBPACK_IMPORTED_MODULE_7__charts_one_dimensional_scatter_plot_options_component__["a" /* OneDimensionalScatterPlotOptionsComponent */],
];


/***/ }),

/***/ "../../../../../src/app/visualize/charts-dock-panel.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartsDockComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_widgets_lib_widget__ = __webpack_require__("../../../../@phosphor/widgets/lib/widget.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_widgets_lib_widget___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__phosphor_widgets_lib_widget__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__ = __webpack_require__("../../../../../src/app/interfaces/dashboard.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__chart_factory__ = __webpack_require__("../../../../../src/app/visualize/chart.factory.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_algorithm_lib__ = __webpack_require__("../../../../@phosphor/algorithm/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_algorithm_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__phosphor_algorithm_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__chart_component_widget__ = __webpack_require__("../../../../../src/app/visualize/chart-component-widget.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__split_dock_split_dock_panel__ = __webpack_require__("../../../../../src/split-dock/split-dock-panel.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var ChartsDockComponent = (function () {
    function ChartsDockComponent(componentFactoryResolver, crossFilterBus, zone, events, el) {
        var _this = this;
        this.componentFactoryResolver = componentFactoryResolver;
        this.crossFilterBus = crossFilterBus;
        this.zone = zone;
        this.events = events;
        this.el = el;
        this.editMode = false;
        this.onWidgetsLoaded = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.onLayoutModified = new __WEBPACK_IMPORTED_MODULE_0__angular_core__["v" /* EventEmitter */]();
        this.classes = 'flex-col';
        this._onWindowResize = function () {
            _this.zone.run(function () {
                _this.dock && _this.dock.update();
            });
        };
        this.zone.runOutsideAngular(function () {
            _this.dock = new __WEBPACK_IMPORTED_MODULE_9__split_dock_split_dock_panel__["a" /* SplitDockPanel */]({}, _this.events);
            _this.dock.addClass('flex-rubber');
            _this.dock.layoutModified.connect(function () {
                _this.onLayoutModified.emit(_this.saveLayout());
            }, _this);
        });
    }
    Object.defineProperty(ChartsDockComponent.prototype, "crossFilters", {
        set: function (value) {
            this.crossFilterBus.crossFilters = value || [];
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(ChartsDockComponent.prototype, "dashboard", {
        set: function (value) {
            if (value) {
                this.crossFilterBus.crossFilters = value.crossFilters;
                this.dock.restoreLayout({
                    main: this.loadLayout(value.layout, value.widgets)
                });
                this.onWidgetsLoaded.emit(Object(__WEBPACK_IMPORTED_MODULE_4__phosphor_algorithm_lib__["toArray"])(this.dock.widgets()));
            }
        },
        enumerable: true,
        configurable: true
    });
    ChartsDockComponent.prototype.createContent = function (componentReference, title) {
        var widget = new __WEBPACK_IMPORTED_MODULE_7__chart_component_widget__["a" /* ChartComponentWidget */](this.events, componentReference);
        widget.title.label = title;
        widget.title.closable = this.editMode;
        return widget;
    };
    ChartsDockComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            try {
                __WEBPACK_IMPORTED_MODULE_1__phosphor_widgets_lib_widget__["Widget"].attach(_this.dock, _this.el.nativeElement);
            }
            catch (e) {
                console.log(e); // @TODO DO SOMETHING
            }
        });
    };
    ChartsDockComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.addEventListener('resize', _this._onWindowResize);
        });
    };
    ChartsDockComponent.prototype.ngOnDestroy = function () {
        var _this = this;
        this.zone.runOutsideAngular(function () {
            window.removeEventListener('resize', _this._onWindowResize);
        });
    };
    ChartsDockComponent.prototype.loadLayout = function (layout, widgets) {
        var _this = this;
        if (!layout) {
            return null;
        }
        if (layout.type === 'split-area') {
            return {
                type: layout.type,
                sizes: layout.sizes,
                orientation: layout.orientation,
                children: layout['children'].map(function (item) {
                    return _this.loadLayout(item, widgets);
                })
            };
        }
        if (layout.type === 'tab-area') {
            return {
                type: layout.type,
                widget: this.getWidget(widgets[layout.widget])
            };
        }
    };
    ChartsDockComponent.prototype.getWidget = function (data) {
        // Trying to find existing widget in layout
        var oldWidget = Object(__WEBPACK_IMPORTED_MODULE_4__phosphor_algorithm_lib__["toArray"])(this.dock.widgets()).find(function (widget) {
            return data.guid === widget.componentReference.instance.config.guid;
        });
        if (oldWidget) {
            oldWidget.instance.config = data;
            return oldWidget;
        }
        // If no widget foung in layout - create one
        var compRef = __WEBPACK_IMPORTED_MODULE_3__chart_factory__["b" /* ChartFactory */].createComponentInstance(this.viewContainer, this.componentFactoryResolver, data);
        return this.createContent(compRef, data.name);
    };
    ChartsDockComponent.prototype.createWidget = function (data) {
        if (!data.guid) {
            data.guid = __WEBPACK_IMPORTED_MODULE_6__utils_misc__["a" /* MiscUtils */].generateUUID();
        }
        var compRef = __WEBPACK_IMPORTED_MODULE_3__chart_factory__["b" /* ChartFactory */].createComponentInstance(this.viewContainer, this.componentFactoryResolver, data);
        return this.createContent(compRef, data.name);
    };
    ChartsDockComponent.prototype.addComponent = function (data, mode) {
        if (mode === void 0) { mode = 'split-top'; }
        var widget = this.createWidget(data);
        this.dock.addWidget(widget, { mode: mode });
        return widget;
    };
    ChartsDockComponent.prototype.addComponentDetached = function (data, event) {
        var widget = this.createWidget(data);
        var clientX = event.clientX, clientY = event.clientY;
        this.dock.addWidgetDetached(widget, clientX, clientY);
        return widget;
    };
    ChartsDockComponent.prototype.saveLayout = function () {
        return this.dock.saveLayout();
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Boolean)
    ], ChartsDockComponent.prototype, "editMode", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ChartsDockComponent.prototype, "onWidgetsLoaded", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["P" /* Output */])(),
        __metadata("design:type", Object)
    ], ChartsDockComponent.prototype, "onLayoutModified", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], ChartsDockComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('anchor', { read: __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */] }),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_0__angular_core__["_13" /* ViewContainerRef */])
    ], ChartsDockComponent.prototype, "viewContainer", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Array),
        __metadata("design:paramtypes", [Array])
    ], ChartsDockComponent.prototype, "crossFilters", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", Object),
        __metadata("design:paramtypes", [Object])
    ], ChartsDockComponent.prototype, "dashboard", null);
    ChartsDockComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'charts-dock-panel',
            template: '<div #anchor></div>',
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["p" /* ComponentFactoryResolver */],
            __WEBPACK_IMPORTED_MODULE_5__cross_filter_bus__["a" /* CrossFilterBus */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */],
            __WEBPACK_IMPORTED_MODULE_8__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */]])
    ], ChartsDockComponent);
    return ChartsDockComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/charts/axis-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AxisChart; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__d3_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/d3-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3__ = __webpack_require__("../../../../d3/index.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();



var offset = 7;
var shift = 20;
var DIVIDER = '||';
var AxisChart = (function (_super) {
    __extends(AxisChart, _super);
    function AxisChart(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this._rowsLimit = 100;
        return _this;
    }
    AxisChart.prototype.visualizeData = function (data) {
        var _this = this;
        this.margin = { top: 40, right: 20 + this.potentialLegendWidth, bottom: 80, left: 80 };
        _super.prototype.visualizeData.call(this, data);
        if (!data || !data.data || !data.data[0]) {
            this.preparedSeries = [];
            return;
        }
        this.prepareSeries(data);
        this.xz = __WEBPACK_IMPORTED_MODULE_2_d3__["range"](this.rowsCount);
        this.yz = __WEBPACK_IMPORTED_MODULE_2_d3__["range"](this.seriesCount).map(function (i) {
            return _this.preparedSeries[i].values.map(function (row) {
                return row.value;
            });
        });
        this.yMin = __WEBPACK_IMPORTED_MODULE_2_d3__["min"](this.yz, function (y) {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["min"](y);
        });
        this.yMax = __WEBPACK_IMPORTED_MODULE_2_d3__["max"](this.yz, function (y) {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["max"](y);
        });
        if (!('orientation' in this.options) || this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
            this.attributeScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleBand"]()
                .domain(this.xz)
                .rangeRound([0, this.width])
                .padding(0.08);
            this.metricScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
                .domain([Math.min(this.yMin, 0), Math.max(this.yMax, 0)])
                .range([this.height, 0])
                .nice(10);
        }
        else {
            this.attributeScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleBand"]()
                .domain(this.xz)
                .rangeRound([0, this.height])
                .padding(0.08);
            this.metricScale = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
                .domain([Math.min(this.yMin, 0), Math.max(this.yMax, 0)])
                .range([0, this.width])
                .nice(10);
        }
    };
    // gridlines in x axis function
    AxisChart.prototype.makeXGridlines = function () {
        if (!('orientation' in this.options) || this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["axisBottom"](this.attributeScale)
                .ticks(5);
        }
        else {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["axisBottom"](this.metricScale)
                .ticks(5);
        }
    };
    // gridlines in y axis function
    AxisChart.prototype.makeYGridlines = function () {
        if (!('orientation' in this.options) || this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["axisLeft"](this.metricScale)
                .ticks(5);
        }
        else {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["axisLeft"](this.attributeScale)
                .ticks(5);
        }
    };
    AxisChart.prototype.makeGridLines = function () {
        this.chartArea.selectAll('g.grid').remove();
        if (this.options.xGrid) {
            // add the X gridlines
            this.chartArea.append('g')
                .attr('class', 'grid')
                .attr('transform', 'translate(0,' + this.height + ')')
                .call(this.makeXGridlines()
                .tickSize(-this.height)
                .tickFormat(function () { return ''; }));
        }
        if (this.options.yGrid) {
            // add the Y gridlines
            this.chartArea.append('g')
                .attr('class', 'grid')
                .call(this.makeYGridlines()
                .tickSize(-this.width)
                .tickFormat(function () { return ''; }));
        }
    };
    AxisChart.prototype.findIndex = function (item, level, t) {
        var index = t ? this.preparedSeries[0].values.length - 1 : 0;
        var found = false;
        this.preparedSeries[0].values.forEach(function (value, i) {
            if (value.label.slice(0, level + 1).join(DIVIDER) === item && (!found || t)) {
                index = i;
                found = true;
            }
        });
        return index;
    };
    AxisChart.prototype.getAttributeGroups = function (attributeIndex) {
        var _this = this;
        return this._response.data.reduce(function (acc, row, j, rows) {
            var key = row.slice(0, attributeIndex + 1).map(function (_) { return String(_); }).join(DIVIDER); // TODO: quote divider in attribute values
            var last = (j === rows.length - 1) || (row[attributeIndex] !== rows[j + 1][attributeIndex]);
            var existingGroupIndex = acc.findIndex(function (group) { return group.attr === key; });
            if (existingGroupIndex === -1) {
                acc.push({
                    level: attributeIndex,
                    attr: key,
                    start: _this.attributeScale(_this.findIndex(key, attributeIndex)),
                    end: _this.attributeScale(_this.findIndex(key, attributeIndex, true)) + _this.attributeScale.bandwidth(),
                });
            }
            else if (last) {
                acc[existingGroupIndex].end =
                    _this.attributeScale(_this.findIndex(key, attributeIndex, true)) + _this.attributeScale.bandwidth();
            }
            return acc;
        }, []);
    };
    AxisChart.prototype.refreshAxes = function (showCenterLine) {
        var _this = this;
        this.chartArea.selectAll('text').remove();
        this.chartArea.select('g.x-axis').remove();
        this.chartArea.select('g.y-axis').remove();
        this.chartArea.selectAll('g.chartGroup').remove();
        this.chartArea.selectAll('path.divider').remove();
        if (!this.preparedSeries.length) {
            return;
        }
        var attributeGroups = this.config.attributes.reduce(function (acc, attr, index) {
            acc.push.apply(acc, _this.getAttributeGroups(index));
            return acc;
        }, []);
        if (!('orientation' in this.options)
            || this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
            var centerAxis = this.chartArea.select('g.center-line');
            // Center Line
            if (showCenterLine) {
                var center = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
                    .rangeRound([0, this.width]);
                var centerLine = __WEBPACK_IMPORTED_MODULE_2_d3__["axisTop"](center).ticks(0);
                var line = centerAxis.size()
                    ? centerAxis
                    : this.chartArea.append('g').attr('class', 'center-line');
                if (!centerAxis.size()) {
                    line.call(centerLine).attr('transform', 'translate(0,' + this.height + ')');
                }
                line.call(centerLine).transition().duration(500).attr('transform', 'translate(0,' + this.metricScale(0) + ')');
            }
            else if (centerAxis.size()) {
                centerAxis.remove();
            }
            //X Axis + title
            if (this.config.options && 'hierarchy' in this.config.options && this.config.options.hierarchy) {
                var groups = this.chartArea.selectAll('.chartGroup')
                    .data(attributeGroups);
                groups.enter()
                    .append('g')
                    .attr('class', 'chartGroup')
                    .call(function (d) { return _this.drawVerticalGroups(d); });
                var rects = this.chartArea.selectAll('g.chartGroup').selectAll('rect').data(function (d, i) { return [attributeGroups[i]]; });
                rects.call(function (d) { return _this.drawVerticalRects(d); });
                rects.exit().remove();
                rects.enter()
                    .append('rect')
                    .attr('class', 'overlay')
                    .call(function (d) { return _this.drawVerticalRects(d); });
                var dividersStart = this.chartArea.selectAll('g.chartGroup').selectAll('path.divider1').data(function (d, i) { return [attributeGroups[i]]; });
                dividersStart.call(function (d) { return _this.drawVerticalDivider1(d); });
                dividersStart.exit().remove();
                dividersStart.enter()
                    .append('path')
                    .attr('class', 'divider1')
                    .call(function (d) { return _this.drawVerticalDivider1(d); });
                var dividersEnd = this.chartArea.selectAll('g.chartGroup').selectAll('path.divider2').data(function (d, i) { return [attributeGroups[i]]; });
                dividersEnd.call(function (d) { return _this.drawVerticalDivider2(d); });
                dividersEnd.exit().remove();
                dividersEnd.enter()
                    .append('path')
                    .attr('class', 'divider2')
                    .call(function (d) { return _this.drawVerticalDivider2(d); });
                var texts = this.chartArea.selectAll('g.chartGroup').selectAll('text').data(function (d, i) { return [attributeGroups[i]]; });
                texts.call(function (d) { return _this.drawVerticalText(d); });
                texts.exit().remove();
                texts.enter()
                    .append('text')
                    .call(function (d) { return _this.drawVerticalText(d); });
                var planks = this.chartArea.selectAll('g.chartGroup').selectAll('rect.plank').data(function (d, i) { return [attributeGroups[i]]; });
                planks.call(function (d) { return _this.drawVerticalPlank(d); });
                planks.exit().remove();
                planks.enter()
                    .append('rect')
                    .attr('class', 'plank')
                    .call(function (d) { return _this.drawVerticalPlank(d); });
                // XAxis
                var xAxisOrdinal = __WEBPACK_IMPORTED_MODULE_2_d3__["axisBottom"](this.attributeScale)
                    .tickValues([])
                    .tickSizeOuter(offset);
                this.chartArea.append('g')
                    .attr('class', 'x-axis')
                    .attr('transform', "translate(0, " + this.height + ")")
                    .call(xAxisOrdinal);
            }
            else {
                //non hierarchy
                var xl = this.attributeScale.copy();
                xl.domain(__WEBPACK_IMPORTED_MODULE_2_d3__["range"](this.preparedSeries[0].values.length));
                var xAxis = __WEBPACK_IMPORTED_MODULE_2_d3__["axisBottom"](xl).ticks(10);
                this.chartArea.append('g')
                    .attr('class', 'x-axis')
                    .attr('transform', 'translate(0,' + this.height + ')')
                    .call(xAxis)
                    .selectAll('text')
                    .text(function (key) {
                    return _this.preparedSeries[0].values[key].label.join(', ');
                })
                    .attr('transform', "rotate(" + this.options.xAxisAngle + ")")
                    .each(this._trimTextWrap(xl.bandwidth() * 2));
            }
            this.chartArea.append('text')
                .attr('text-anchor', 'middle')
                .attr('transform', "translate(" + (this.width / 2) + ", " + (this.height + this.margin.bottom - 5) + ")")
                .text(this.options.xAxisTitle || (this.preparedSeries[0].label).join(', '))
                .each(this._trimTextWrap(this.width));
            var yAxis = __WEBPACK_IMPORTED_MODULE_2_d3__["axisLeft"](this.metricScale).tickFormat(this.metricScale.tickFormat(10)).ticks(10);
            this.chartArea.append('g')
                .attr('class', 'y-axis')
                .call(yAxis)
                .selectAll('text')
                .attr('transform', "rotate(" + this.options.yAxisAngle + ")");
            this.chartArea.append('text')
                .attr('text-anchor', 'middle')
                .attr('transform', "translate(0, -10)") // on top of left axis
                .text(this.options.yAxisTitle || this.preparedSeries.map(function (_) { return _.column.displayName || _.column.name; }).join('/'))
                .each(this._trimTextWrap(this.margin.left * 2));
        }
        else if (this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
            var centerAxis = this.chartArea.select('g.center-line');
            // Center Line
            if (showCenterLine) {
                var center = __WEBPACK_IMPORTED_MODULE_2_d3__["scaleLinear"]()
                    .rangeRound([0, this.height]);
                var centerLine = __WEBPACK_IMPORTED_MODULE_2_d3__["axisRight"](center).ticks(0);
                var line = centerAxis.size()
                    ? centerAxis
                    : this.chartArea.append('g').attr('class', 'center-line');
                if (!centerAxis.size()) {
                    line.call(centerLine).attr('transform', 'translate(' + this.height + ', 0)');
                }
                line.call(centerLine).transition().duration(500).attr('transform', 'translate(' + this.metricScale(0) + ', 0 )');
            }
            else if (centerAxis.size()) {
                centerAxis.remove();
            }
            //X Axis + title
            if (this.config.options && 'hierarchy' in this.config.options && this.config.options.hierarchy) {
                var groups = this.chartArea.selectAll('g.chartGroup')
                    .data(attributeGroups);
                groups.call(function (d) { return _this.drawHorizontalGroups(d); });
                groups.exit().remove();
                groups.enter()
                    .append('g')
                    .attr('class', 'chartGroup')
                    .call(function (d) { return _this.drawHorizontalGroups(d); });
                var rects = this.chartArea.selectAll('g.chartGroup').selectAll('rect').data(function (d, i) { return [attributeGroups[i]]; });
                rects.call(function (d) { return _this.drawHorizontalRects(d); });
                rects.exit().remove();
                rects.enter()
                    .append('rect')
                    .attr('class', 'overlay')
                    .call(function (d) { return _this.drawHorizontalRects(d); });
                var dividersStart = this.chartArea.selectAll('g.chartGroup').selectAll('path.divider1').data(function (d, i) { return [attributeGroups[i]]; });
                dividersStart.call(function (d) { return _this.drawHorizontalDivider1(d); });
                dividersStart.exit().remove();
                dividersStart.enter()
                    .append('path')
                    .attr('class', 'divider1')
                    .call(function (d) { return _this.drawHorizontalDivider1(d); });
                var dividersEnd = this.chartArea.selectAll('g.chartGroup').selectAll('path.divider2').data(function (d, i) { return [attributeGroups[i]]; });
                dividersEnd.call(function (d) { return _this.drawHorizontalDivider2(d); });
                dividersEnd.exit().remove();
                dividersEnd.enter()
                    .append('path')
                    .attr('class', 'divider2')
                    .call(function (d) { return _this.drawHorizontalDivider2(d); });
                var texts = this.chartArea.selectAll('g.chartGroup').selectAll('text').data(function (d, i) { return [attributeGroups[i]]; });
                texts.call(function (d) { return _this.drawHorizontalText(d); });
                texts.exit().remove();
                texts.enter()
                    .append('text')
                    .call(function (d) { return _this.drawHorizontalText(d); });
                var planks = this.chartArea.selectAll('g.chartGroup').selectAll('rect.plank').data(function (d, i) { return [attributeGroups[i]]; });
                planks.call(function (d) { return _this.drawHorizontalPlank(d); });
                planks.exit().remove();
                planks.enter()
                    .append('rect')
                    .attr('class', 'plank')
                    .call(function (d) { return _this.drawHorizontalPlank(d); });
                var xAxisOrdinal = __WEBPACK_IMPORTED_MODULE_2_d3__["axisLeft"](this.attributeScale)
                    .tickValues([])
                    .tickSizeOuter(offset);
                this.chartArea.append('g')
                    .attr('class', 'y-axis')
                    .attr('transform', "translate(0, 0)")
                    .call(xAxisOrdinal);
            }
            else {
                //non hierarchy
                var xl = this.attributeScale.copy();
                xl.domain(__WEBPACK_IMPORTED_MODULE_2_d3__["range"](this.preparedSeries[0].values.length));
                var xAxis = __WEBPACK_IMPORTED_MODULE_2_d3__["axisLeft"](xl).ticks(10);
                this.chartArea.append('g')
                    .attr('class', 'y-axis')
                    .attr('transform', 'translate(0, 0)')
                    .call(xAxis)
                    .selectAll('text')
                    .text(function (key) {
                    return _this.preparedSeries[0].values[key].label.join(', ');
                })
                    .attr('transform', "rotate(" + this.options.xAxisAngle + ")")
                    .each(this._trimTextWrap(/*xl.bandwidth()*/ this.margin.left));
            }
            this.chartArea.append('text')
                .attr('text-anchor', 'middle')
                .attr('transform', "translate(" + (this.width / 2) + ", " + (this.height + 50) + ") rotate(" + this.options.yAxisAngle + ")")
                .text(this.options.yAxisTitle || this.preparedSeries.map(function (_) { return _.column.displayName || _.column.name; }).join('/'))
                .each(this._trimTextWrap(this.width));
            var yAxis = __WEBPACK_IMPORTED_MODULE_2_d3__["axisBottom"](this.metricScale).tickFormat(this.metricScale.tickFormat(10)).ticks(10);
            this.chartArea.append('g')
                .attr('class', 'x-axis')
                .attr('transform', 'translate(0,' + this.height + ')')
                .call(yAxis)
                .selectAll('text')
                .attr('transform', "rotate(" + this.options.yAxisAngle + ")")
                .each(this._trimTextWrap(this.attributeScale.bandwidth() * 2));
            this.chartArea.append('text')
                .attr('text-anchor', 'middle')
                .attr('transform', "translate(0, -10) rotate(" + this.options.xAxisAngle + ")")
                .text(this.options.xAxisTitle || this.preparedSeries[0].label.join(', '));
        }
        __WEBPACK_IMPORTED_MODULE_2_d3__["selectAll"]('g.x-axis g.tick line')
            .each(function (_, i) {
            if ((i % 2)) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).attr('y2', 6);
                return;
            }
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).attr('y2', 26);
        });
        __WEBPACK_IMPORTED_MODULE_2_d3__["selectAll"]('g.x-axis g.tick text')
            .each(function (_, i) {
            if ((i % 2)) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).attr('y', 8);
                return;
            }
            __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).attr('y', 28);
        });
    };
    AxisChart.prototype.drawVerticalRects = function (d) {
        var _this = this;
        d.attr('x', function (value) {
            return value.start;
        })
            .attr('y', function (value) { return -(_this.height + offset + shift * (_this.config.attributes.length - value.level - 1)); })
            .attr('width', function (value) { return value.end - value.start; })
            .attr('height', function (value) { return _this.height + offset + shift * (_this.config.attributes.length - value.level); });
    };
    AxisChart.prototype.drawVerticalDivider1 = function (d) {
        var _this = this;
        d.attr('d', function (value) {
            return "M" + value.start + "," + shift * (value.level ? _this.config.attributes.length - value.level - 1 : 1) + "V" + (-_this.height - shift * (_this.config.attributes.length - value.level - 1) - offset);
        });
    };
    AxisChart.prototype.drawVerticalDivider2 = function (d) {
        var _this = this;
        d.attr('d', function (value) {
            return "M" + value.end + "," + shift * (value.level ? _this.config.attributes.length - value.level - 1 : 1) + "V" + (-_this.height - shift * (_this.config.attributes.length - value.level - 1) - offset);
        });
    };
    AxisChart.prototype.drawVerticalPlank = function (d) {
        var self = this;
        d.attr('x', function (value) { return value.start; })
            .attr('y', 0)
            .attr('width', function (value) { return value.end - value.start; })
            .attr('height', '1em')
            .attr('fill', 'transparent')
            .on('mouseover', function (value) {
            if (value.level < self.config.attributes.length - 1) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('rect.overlay').style('fill', '#dcdcdc');
            }
        })
            .on('mouseleave', function (value) {
            if (value.level < self.config.attributes.length - 1) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('rect.overlay').style('fill', 'transparent');
            }
        });
    };
    AxisChart.prototype.drawVerticalText = function (d) {
        var self = this;
        d.text(function (value) {
            return value.attr.split(DIVIDER)[value.level];
        }).attr('x', function (value) {
            var width = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).node().getComputedTextLength();
            return (value.start + value.end - width) / 2;
        })
            .attr('y', '1em')
            .attr('text-anchor', 'start');
        //trim
        d.each(function (value) {
            return self._trimTextWrap(value.end - value.start).bind(this)();
        });
    };
    AxisChart.prototype.drawVerticalGroups = function (d) {
        var _this = this;
        d.attr('class', 'chartGroup')
            .attr('transform', function (value) { return "translate(0, " + (_this.height + offset + shift * (_this.config.attributes.length - value.level - 1)) + ")"; });
    };
    AxisChart.prototype.drawHorizontalRects = function (d) {
        var _this = this;
        d.attr('y', function (value) { return value.start; })
            .attr('x', function (value) { return -shift * (value.level ? _this.config.attributes.length - value.level - 1 : 1); })
            .attr('height', function (value) { return value.end - value.start; })
            .attr('width', function (value) { return _this.width + shift * (_this.config.attributes.length - value.level); });
    };
    AxisChart.prototype.drawHorizontalDivider1 = function (d) {
        var _this = this;
        d.attr('d', function (value) {
            return "M" + -shift * (_this.config.attributes.length - value.level - 1) + "," + value.start + "H " + (_this.width + shift * (_this.config.attributes.length - value.level - 1));
        });
    };
    AxisChart.prototype.drawHorizontalDivider2 = function (d) {
        var _this = this;
        d.attr('d', function (value) {
            return "M" + -shift * (_this.config.attributes.length - value.level - 1) + "," + value.end + "H " + (_this.width + shift * (_this.config.attributes.length - value.level - 1));
        });
    };
    AxisChart.prototype.drawHorizontalPlank = function (d) {
        var self = this;
        d.attr('x', function (value) {
            var textWidth = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('text').node().getComputedTextLength();
            return -shift * (self.config.attributes.length - value.level - 1) - 10 - textWidth;
        })
            .attr('y', function (value) { return value.start; })
            .attr('height', function (value) { return value.end - value.start; })
            .attr('width', function () {
            return __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('text').node().getComputedTextLength();
        })
            .attr('fill', 'transparent')
            .on('mouseover', function (value) {
            if (value.level < self.config.attributes.length - 1) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('rect.overlay').style('fill', '#dcdcdc');
            }
        })
            .on('mouseleave', function (value) {
            if (value.level < self.config.attributes.length - 1) {
                __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this.parentNode).select('rect.overlay').style('fill', 'transparent');
            }
        });
    };
    AxisChart.prototype.drawHorizontalText = function (d) {
        var _this = this;
        d.attr('y', function (value) {
            var width = __WEBPACK_IMPORTED_MODULE_2_d3__["select"](this).node().getComputedTextLength();
            return (value.start + value.end - width) / 2;
        })
            .attr('x', function (value) { return -shift * (_this.config.attributes.length - value.level - 1) - 10; })
            .attr('text-anchor', 'end')
            .attr('transform', "rotate(0)")
            .text(function (value) {
            return value.attr.split(DIVIDER)[value.level];
        });
    };
    AxisChart.prototype.drawHorizontalGroups = function (d) {
        var _this = this;
        d.attr('transform', function (value) { return "translate(" + (0 - shift * (_this.config.attributes.length - value.level - 1)) + ", 0)"; });
    };
    return AxisChart;
}(__WEBPACK_IMPORTED_MODULE_0__d3_chart_component__["a" /* D3Chart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/bar-chart-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BarChartOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__descriptions__ = __webpack_require__("../../../../../src/app/visualize/charts/descriptions.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var BarChartOptionsComponent = (function (_super) {
    __extends(BarChartOptionsComponent, _super);
    function BarChartOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.optionDescriptions = __WEBPACK_IMPORTED_MODULE_5__descriptions__["a" /* descriptions */];
        _this.typeOpts = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.type.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.type.labels);
        _this.orientationOpts = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.labels);
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            yAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            yAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            type: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.type.values.GROUPED),
            orientation: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.VERTICAL),
            hierarchy: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            xGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            yGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
        });
        return _this;
    }
    BarChartOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'bar-chart-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n      <app-input [label]=\"'Attributes Axis Label'\"\n        [control]=\"form.controls['xAxisTitle']\"></app-input>\n      <app-input [label]=\"'Metrics Axis Label'\"\n        [control]=\"form.controls['yAxisTitle']\"></app-input>\n<!--\n      <app-select [label]=\"'X-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n        [control]=\"form.controls['xAxisAngle']\"></app-select>\n      <app-select [label]=\"'Y-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n        [control]=\"form.controls['yAxisAngle']\"></app-select>\n-->\n      <app-select\n        [label]=\"'Type'\"\n        [control]=\"form.controls['type']\"\n        [options]=\"typeOpts\">\n      </app-select>\n      <app-select [label]=\"'Orientation'\"\n        [control]=\"form.controls['orientation']\"\n        [options]=\"orientationOpts\">\n      </app-select>\n      <app-check [label]=\"'Enable Hierarchy Attributes'\"\n        [control]=\"form.controls['hierarchy']\"\n        [helpText]=\"optionDescriptions.hierarchy\"></app-check>\n      <app-check [label]=\"'Vertical Grid'\"\n        [control]=\"form.controls['xGrid']\"></app-check>\n      <app-check [label]=\"'Horizontal Grid'\"\n        [control]=\"form.controls['yGrid']\"></app-check>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], BarChartOptionsComponent);
    return BarChartOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_4__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/bar-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BarChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__axis_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/axis-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var BarChartComponent = (function (_super) {
    __extends(BarChartComponent, _super);
    function BarChartComponent(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__["a" /* DashboardCharts */].defaultBarChartOptions;
        return _this;
    }
    BarChartComponent.prototype.visualizeData = function (data) {
        var _this = this;
        _super.prototype.visualizeData.call(this, data);
        if (!this.width || !this.height || !this.svgHeight || !this.svgWidth || !this.yz) {
            return;
        }
        var y0Positive = new Array(this.rowsCount).fill(0);
        var y0Negative = new Array(this.rowsCount).fill(0);
        //data for stacked bars
        var y01z = this.yz.map(function (values, i) {
            var res = values.map(function (d, key) {
                var row = [y0Negative[key], y0Positive[key], d];
                if (d >= 0) {
                    y0Positive[key] += d;
                }
                else if (d < 0) {
                    y0Negative[key] += d;
                }
                return row;
            });
            res['series'] = i;
            return res;
        });
        var y1Min = __WEBPACK_IMPORTED_MODULE_6_d3__["min"](y01z, function (y) {
            return __WEBPACK_IMPORTED_MODULE_6_d3__["min"](y, function (d) {
                return d[0] + d[2];
            });
        });
        var y1Max = __WEBPACK_IMPORTED_MODULE_6_d3__["max"](y01z, function (y) {
            return __WEBPACK_IMPORTED_MODULE_6_d3__["max"](y, function (d) {
                return d[1] + d[2];
            });
        });
        var showCenterLine = false;
        if (this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
            // GROUPED
            this.metricScale.domain([Math.min(this.yMin, 0), Math.max(this.yMax, 0)]);
            if (this.yMin < 0 && this.yMax > 0) {
                showCenterLine = true;
            }
        }
        else {
            // STACKED
            this.metricScale.domain([Math.min(y1Min, 0), Math.max(y1Max, 0)]);
            if (y1Min < 0 && y1Max > 0) {
                showCenterLine = true;
            }
        }
        this.drawLegend();
        this.refreshAxes(showCenterLine);
        this.makeGridLines();
        if (this.preparedSeries.length) {
            //draw series
            this.preparedSeries.forEach(function (series, i) {
                //const previousSeries = this.previousSeries.find(_ => _.column.name === metricName);
                var previousSeries = _this.previousSeries[i];
                if (previousSeries && previousSeries.series) {
                    series.series = previousSeries.series;
                    previousSeries.series = null;
                    _this.drawRects(i, previousSeries);
                }
                else {
                    _this.newSeries(i);
                    _this.drawRects(i);
                }
            });
            var tooltipValues_1 = [];
            this.preparedSeries.forEach(function (series, i) {
                for (var j = 0; j < _this.rowsCount; j++) {
                    tooltipValues_1.push({ rectId: series.name + ":" + series.values[j].hash, group: series.values[j].label, metric: series.name, value: series.values[j].value });
                }
            });
            //bindings
            this.chartArea.selectAll('g.series rect')
                .on('mouseover', function () {
                __WEBPACK_IMPORTED_MODULE_6_d3__["select"]('.toolTip').remove();
                var rectId = __WEBPACK_IMPORTED_MODULE_6_d3__["select"](this).attr('data-rect-id');
                var tooltip = tooltipValues_1.find(function (_) { return _.rectId === rectId; });
                if (tooltip) {
                    var divTooltip = __WEBPACK_IMPORTED_MODULE_6_d3__["select"]('body').append('div').attr('class', 'toolTip');
                    divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_6_d3__["event"].pageX + 10 + 'px');
                    divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_6_d3__["event"].pageY - 25 + 'px');
                    divTooltip.style('display', 'inline-block');
                    divTooltip.html("<b>" + tooltip.group + "</b><br />" + tooltip.metric + " = " + tooltip.value);
                }
            })
                .on('mouseout', function () {
                __WEBPACK_IMPORTED_MODULE_6_d3__["select"]('.toolTip').remove();
            });
            var _loop_1 = function (i) {
                var _loop_2 = function (j) {
                    var currentRect = this_1.preparedSeries[i].values[j].rect;
                    var d = y01z[i][j];
                    if (!currentRect) {
                        return "continue";
                    }
                    currentRect.transition()
                        .duration(500)
                        .delay(function () {
                        return (j + 1) * 10;
                    })
                        .attr('x', function () {
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return _this.attributeScale(j) + _this.attributeScale.bandwidth() / _this.seriesCount * i;
                            }
                            // STACKED
                            return _this.attributeScale(j);
                        }
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return d[2] < 0 ? _this.metricScale(d[2]) : _this.metricScale(0);
                            }
                            // STACKED
                            return d[2] < 0 ? _this.metricScale(d[2] + d[0]) : _this.metricScale(d[1]);
                        }
                    })
                        .attr('y', function () {
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return d[2] < 0 ? _this.metricScale(0) : _this.metricScale(d[2]);
                            }
                            // STACKED
                            return d[2] < 0 ? _this.metricScale(d[0]) : _this.metricScale(d[2] + d[1]);
                        }
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return _this.attributeScale(j) + _this.attributeScale.bandwidth() / _this.seriesCount * i;
                            }
                            // STACKED
                            return _this.attributeScale(j);
                        }
                    })
                        .attr('width', function () {
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return _this.attributeScale.bandwidth() / _this.seriesCount;
                            }
                            // STACKED
                            return _this.attributeScale.bandwidth();
                        }
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return (d[2] < 0)
                                    ? Math.abs(_this.metricScale(0) - _this.metricScale(d[2]))
                                    : Math.abs(_this.metricScale(d[2]) - _this.metricScale(0));
                            }
                            // STACKED
                            return (d[2] < 0)
                                ? Math.abs(_this.metricScale(0) - _this.metricScale(d[2]))
                                : Math.abs(_this.metricScale(0) - _this.metricScale(d[2]));
                        }
                    })
                        .attr('height', function () {
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return (d[2] < 0)
                                    ? Math.abs(_this.metricScale(0) - _this.metricScale(d[2]))
                                    : Math.abs(_this.metricScale(d[2]) - _this.metricScale(0));
                            }
                            // STACKED
                            return (d[2] < 0)
                                ? Math.abs(_this.metricScale(0) - _this.metricScale(d[2]))
                                : Math.abs(_this.metricScale(d[2]) - _this.metricScale(0));
                        }
                        if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                            if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                                // GROUPED
                                return _this.attributeScale.bandwidth() / _this.seriesCount;
                            }
                            // STACKED
                            return _this.attributeScale.bandwidth();
                        }
                    });
                };
                for (var j = 0; j < this_1.rowsCount; j++) {
                    _loop_2(j);
                }
            };
            var this_1 = this;
            //drawing
            for (var i = 0; i < this.seriesCount; i++) {
                _loop_1(i);
            }
        }
        this.previousSeries.forEach(function (_) { return _.series && _.series.remove(); });
        this.previousSeries = this.preparedSeries;
        this.chartArea.selectAll('g.series').raise();
    };
    BarChartComponent.prototype.newSeries = function (i1) {
        this.preparedSeries[i1].series = this.chartArea
            .append('g')
            .attr('class', 'series');
    };
    BarChartComponent.prototype.newRect = function (i1, j1) {
        var _this = this;
        this.preparedSeries[i1].values[j1].rect = this.preparedSeries[i1].series
            .append('rect')
            .attr('data-rect-id', this.preparedSeries[i1].name + ":" + this.preparedSeries[i1].values[j1].hash)
            .attr('x', function () {
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                return _this.attributeScale(j1);
            }
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                return _this.metricScale(0);
            }
        })
            .attr('y', function () {
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                return _this.metricScale(0);
            }
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                return _this.attributeScale(j1);
            }
        })
            .attr('width', function () {
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                    return _this.attributeScale.bandwidth() / _this.preparedSeries.length;
                }
                return _this.attributeScale.bandwidth();
            }
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                return 0;
            }
        })
            .attr('height', function () {
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                return 0;
            }
            if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                if (_this.options.type === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].chart.options.type.values.GROUPED) {
                    return _this.attributeScale.bandwidth() / _this.preparedSeries.length;
                }
                return _this.attributeScale.bandwidth();
            }
        });
    };
    BarChartComponent.prototype.drawRects = function (i1, previousSeries) {
        this.preparedSeries[i1].series.attr('fill', this.chartColorScale(i1));
        var j1 = 0;
        var _loop_3 = function () {
            var currentHash = this_2.preparedSeries[i1].values[j1].hash;
            var previousValue = previousSeries && previousSeries.values.find(function (value) { return value.hash === currentHash; });
            if (previousValue && previousValue.rect) {
                this_2.preparedSeries[i1].values[j1].rect = previousValue.rect;
                previousValue.rect = null;
            }
            else {
                this_2.newRect(i1, j1);
            }
            j1++;
        };
        var this_2 = this;
        while (j1 < this.rowsCount) {
            _loop_3();
        }
        if (previousSeries) {
            for (var i = 0; i < previousSeries.values.length; i++) {
                if (previousSeries.values[i].rect) {
                    previousSeries.values[i].rect.remove();
                }
            }
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], BarChartComponent.prototype, "styleHeight", void 0);
    BarChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'bar-chart',
            template: "\n    <div class=\"flex-col vertical-align\" style=\"width: 100%\"\n      *ngIf=\"!config.attributes.length || !config.metrics.length\">\n      <div class=\"text-center\" style=\"width: 100%\">\n        <a (click)=\"edit()\" style=\"font-size: 50px\"><i class=\"glyphicon glyphicon-pencil\"></i>Edit</a>\n      </div>\n    </div>\n    <div class=\"flex-rubber\" [hidden]=\"!config.attributes.length || !config.metrics.length\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"960\" height=\"500\"></svg>\n      </div>\n    </div>\n    <div #filterEl [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config?.chartFilters?.length + config?.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_8__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_2__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_9__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */]])
    ], BarChartComponent);
    return BarChartComponent;
}(__WEBPACK_IMPORTED_MODULE_3__axis_chart_component__["a" /* AxisChart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/chart-options.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ChartOptionsAbstract; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");

var ChartOptionsAbstract = (function () {
    function ChartOptionsAbstract() {
    }
    ChartOptionsAbstract.prototype.ngOnDestroy = function () {
        this.formSubscription && this.formSubscription.unsubscribe();
    };
    Object.defineProperty(ChartOptionsAbstract.prototype, "state", {
        get: function () {
            return this._state;
        },
        set: function (state) {
            var _this = this;
            this._state = state;
            this.formSubscription && this.formSubscription.unsubscribe();
            __WEBPACK_IMPORTED_MODULE_0__utils_misc__["a" /* MiscUtils */].fillForm(this.form, this._state.widgetForm.value.options);
            this.formSubscription = this.form.valueChanges.distinctUntilChanged().debounceTime(200).subscribe(function (value) {
                _this._state.widgetForm.controls.options.setValue(value);
            });
        },
        enumerable: true,
        configurable: true
    });
    return ChartOptionsAbstract;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/charts/chart.interfaces.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardCharts; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__charts_d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");

var DashboardCharts;
(function (DashboardCharts) {
    'use strict';
    var CategoricalGamma = __WEBPACK_IMPORTED_MODULE_0__charts_d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma;
    var ChartOrientation;
    (function (ChartOrientation) {
        ChartOrientation["VERTICAL"] = "VERTICAL";
        ChartOrientation["HORIZONTAL"] = "HORIZONTAL";
    })(ChartOrientation = DashboardCharts.ChartOrientation || (DashboardCharts.ChartOrientation = {}));
    var Gamma;
    (function (Gamma) {
        Gamma["RAINBOW"] = "RAINBOW";
        Gamma["MAGMA"] = "MAGMA";
        Gamma["BLUES"] = "BLUES";
        Gamma["GREENS"] = "GREENS";
        Gamma["REDS"] = "REDS";
        Gamma["GREYS"] = "GREYS";
        Gamma["RED_BLUE"] = "RED_BLUE";
    })(Gamma = DashboardCharts.Gamma || (DashboardCharts.Gamma = {}));
    var GeoHeatMapType;
    (function (GeoHeatMapType) {
        GeoHeatMapType["STATE"] = "STATE";
        GeoHeatMapType["COUNTY"] = "COUNTY";
        GeoHeatMapType["ZIP"] = "ZIP";
    })(GeoHeatMapType = DashboardCharts.GeoHeatMapType || (DashboardCharts.GeoHeatMapType = {}));
    var DrawMethod;
    (function (DrawMethod) {
        DrawMethod["AREA"] = "AREA";
        DrawMethod["BUBBLE"] = "BUBBLE";
    })(DrawMethod = DashboardCharts.DrawMethod || (DashboardCharts.DrawMethod = {}));
    var BarChartType;
    (function (BarChartType) {
        BarChartType["STACKED"] = "STACKED";
        BarChartType["GROUPED"] = "GROUPED";
    })(BarChartType = DashboardCharts.BarChartType || (DashboardCharts.BarChartType = {}));
    // Defaults
    DashboardCharts.defaultChartOptions = {
        title: '',
        subtitle: '',
    };
    DashboardCharts.defaultAxisChartOptions = {
        title: '',
        subtitle: '',
        xAxisTitle: '',
        yAxisTitle: '',
        xAxisAngle: 0,
        yAxisAngle: 0,
        orientation: DashboardCharts.ChartOrientation.VERTICAL,
        xGrid: false,
        yGrid: false,
    };
    DashboardCharts.defaultScatterPlotChartOptions = {
        title: '',
        subtitle: '',
        xAxisTitle: '',
        yAxisTitle: '',
        xAxisAngle: 0,
        yAxisAngle: 0,
        hierarchy: false,
        xGrid: false,
        yGrid: false,
        gamma: Gamma.RAINBOW,
    };
    DashboardCharts.defaultLineChartOptions = {
        title: '',
        subtitle: '',
        xAxisTitle: '',
        yAxisTitle: '',
        xAxisAngle: 0,
        yAxisAngle: 0,
        orientation: DashboardCharts.ChartOrientation.VERTICAL,
        hierarchy: false,
        xGrid: false,
        yGrid: false,
    };
    DashboardCharts.defaultBarChartOptions = {
        title: '',
        subtitle: '',
        xAxisTitle: '',
        yAxisTitle: '',
        xAxisAngle: 0,
        yAxisAngle: 0,
        type: DashboardCharts.BarChartType.GROUPED,
        orientation: DashboardCharts.ChartOrientation.VERTICAL,
        hierarchy: false,
        xGrid: false,
        yGrid: false,
    };
    DashboardCharts.defaultGeoHeatMapOptions = {
        title: '',
        subtitle: '',
        geoType: DashboardCharts.GeoHeatMapType.STATE,
        gamma: Gamma.BLUES,
        stateColumn: null,
        countyColumn: null,
        drawMethod: DashboardCharts.DrawMethod.AREA,
        bubbleSize: 30,
    };
    DashboardCharts.defaultOneDimensionalScatterPlotChartOptions = {
        title: '',
        subtitle: '',
        xAxisTitle: null,
        yJitter: false,
        bubbleSize: 5,
        categoricalGamma: CategoricalGamma.category10,
    };
})(DashboardCharts || (DashboardCharts = {}));


/***/ }),

/***/ "../../../../../src/app/visualize/charts/d3-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return D3Chart; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__chart_abstract__ = __webpack_require__("../../../../../src/app/visualize/chart.abstract.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3__ = __webpack_require__("../../../../d3/index.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();




var D3Chart = (function (_super) {
    __extends(D3Chart, _super);
    function D3Chart(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.potentialLegendWidth = 100;
        _this.previousSeries = [];
        _this.preparedSeries = [];
        _this.decimalPipe = new __WEBPACK_IMPORTED_MODULE_2__angular_common__["d" /* DecimalPipe */]('en-US');
        return _this;
    }
    D3Chart.prototype.visualizeData = function (data) {
        this.svg = __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this.selector.nativeElement);
        this.svgWidth = parseInt(this.svg.style('width'), 10);
        this.svgHeight = parseInt(this.svg.style('height'), 10);
        //this.potentialLegendWidth = 70; //@TODO calculate it
        this.margin = this.margin || { top: 40, right: 10 + this.potentialLegendWidth, bottom: 10, left: 10 };
        this.width = this.svgWidth - this.margin.left - this.margin.right;
        this.height = this.svgHeight - this.margin.top - this.margin.bottom;
        this.chartArea = this.svg.select('g.chartArea');
        if (!this.chartArea.size()) {
            this.chartArea = this.svg
                .append('g')
                .attr('class', 'chartArea')
                .attr('transform', 'translate(' + this.margin.left + ',' + this.margin.top + ')');
        }
    };
    D3Chart.prototype.prepareSeries = function (data) {
        var _this = this;
        if (!data || !data.data || !data.data[0]) {
            return;
        }
        this.preparedSeries = [];
        // preparing data
        var metricIndexes = (this.config.metrics || []).map(function (metric) { return data.columns.findIndex(function (_) { return _.name === metric.columnName; }); }).filter(function (_) { return _ >= 0; });
        var attributeIndexes = (this.config.attributes || []).map(function (attribute) { return data.columns.findIndex(function (_) { return _.name === attribute; }); }).filter(function (_) { return _ >= 0; });
        this.preparedSeries = metricIndexes.map(function (columnIndex, index) {
            var column = _this._response.columns[columnIndex];
            return {
                metric: _this.config.metrics[index],
                series: null,
                name: _this.config.metrics[index].aggregator + "(" + column.displayName + ")",
                column: column,
                innerName: column.name,
                label: attributeIndexes.map(function (_) { return data.columns[_]; }).map(function (_) { return _.displayName || _.name; }),
                values: data.data.map(function (row) {
                    return {
                        hash: attributeIndexes.map(function (_) {
                            return encodeURIComponent(row[_]);
                        }).join('&'),
                        label: attributeIndexes.map(function (_) {
                            if (data.columns[_].dataType === __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */].table.column.dataType.values.DOUBLE) {
                                return _this.decimalPipe.transform(parseFloat(row[_]), '1.0-1');
                            }
                            return String(row[_]);
                        }),
                        rect: null,
                        value: row[columnIndex],
                    };
                }),
            };
        });
        this.seriesCount = this.preparedSeries.length; // The number of series.
        this.rowsCount = this.preparedSeries.reduce(function (acc, row) {
            return Math.max(acc, row.values.length);
        }, 0);
        this.chartColorScale = __WEBPACK_IMPORTED_MODULE_3_d3__["scaleOrdinal"]()
            .domain(__WEBPACK_IMPORTED_MODULE_3_d3__["range"](this.seriesCount))
            .range(__WEBPACK_IMPORTED_MODULE_3_d3__["schemeCategory10"]);
        //sort
        this.preparedSeries.forEach(function (row) {
            row.values.sort(function (a, b) {
                if (a.hash < b.hash) {
                    return -1;
                }
                else {
                    return 1;
                }
            });
        });
    };
    D3Chart.prototype.drawLegend = function (height) {
        var _this = this;
        this.svg.selectAll('.legend').remove();
        if (!this.preparedSeries || !this.preparedSeries.length || !this._response || !('columns' in this._response) || !this._response.columns.length) {
            return;
        }
        var legend = this.svg.selectAll('.legend')
            .data(this.preparedSeries.map(function (_) { return _.metric.aggregator + "(" + (_.column.displayName || _.column.name) + ")"; }))
            .enter().append('g')
            .attr('class', 'legend')
            .attr('transform', function (d, i) {
            return "translate(" + (_this.width + _this.margin.left + _this.potentialLegendWidth) + ", " + i * 20 + ")";
        });
        legend.append('rect')
            .attr('x', -18)
            .attr('y', height ? 18 : 9)
            .attr('width', 18)
            .attr('height', height ? height : 18)
            .style('fill', function (d, i) {
            return _this.chartColorScale(i);
        });
        legend.append('text')
            .attr('x', -24)
            .attr('y', 18)
            .attr('dy', '.35em')
            .style('text-anchor', 'end')
            .text(function (d) {
            return d;
        })
            .each(this._trimTextWrap(this.potentialLegendWidth - 26));
        this.svg.selectAll('text.titles').remove();
        //Title
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 15)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '16px')
            .style('text-decoration', 'underline')
            .text(this.options.title);
        //SubTitle
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 30)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '10px')
            .text(this.options.subtitle);
    };
    D3Chart.prototype._trimTextWrap = function (width) {
        return function () {
            var self = __WEBPACK_IMPORTED_MODULE_3_d3__["select"](this), textLength = self.node().getComputedTextLength(), text = self.text();
            while (textLength > width && text.length > 0) {
                text = text.slice(0, -1);
                self.text(text + '…');
                textLength = self.node().getComputedTextLength();
            }
        };
    };
    return D3Chart;
}(__WEBPACK_IMPORTED_MODULE_0__chart_abstract__["a" /* ChartAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/descriptions.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return descriptions; });
var descriptions = {
    hierarchy: 'Allows Attribute Values to be grouped based on hierarchy specified in Chart Basics Tab'
};


/***/ }),

/***/ "../../../../../src/app/visualize/charts/geo-heat-map-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GeoHeatMapOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var GeoHeatMapOptionsComponent = (function (_super) {
    __extends(GeoHeatMapOptionsComponent, _super);
    function GeoHeatMapOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.gammas = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.gamma.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.gamma.labels);
        _this.geoTypes = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.geoType.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.geoType.labels);
        _this.bubbleSizes = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList([10, 15, 30, 50, 100]);
        _this.dotTypes = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.drawMethod.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.drawMethod.labels);
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            geoType: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultGeoHeatMapOptions.geoType),
            gamma: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultGeoHeatMapOptions.gamma),
            stateColumn: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            countyColumn: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            drawMethod: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultGeoHeatMapOptions.drawMethod),
            bubbleSize: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultGeoHeatMapOptions.bubbleSize),
        });
        return _this;
    }
    GeoHeatMapOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'geo-heat-map-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n      <app-select [label]=\"'Gamma'\" [control]=\"form.controls['gamma']\"\n        [options]=\"gammas\">\n      </app-select>\n      <app-select [label]=\"'Type'\" [control]=\"form.controls['geoType']\"\n        [options]=\"geoTypes\">\n      </app-select>\n      <ng-template\n        [ngIf]=\"form.controls['geoType']?.value === config.chart.options.geoType.values.COUNTY\">\n        <app-select [label]=\"'State Column'\" [control]=\"form.controls['stateColumn']\"\n          [options]=\"state.getWidgetAttributeColumns() | tableColumnSelectOptions\">\n        </app-select>\n        <app-select [label]=\"'County Column'\" [control]=\"form.controls['countyColumn']\"\n          [options]=\"state.getWidgetAttributeColumns() | tableColumnSelectOptions\">\n        </app-select>\n      </ng-template>\n      <ng-template [ngIf]=\"form.controls['geoType']?.value !== config.chart.options.geoType.values.ZIP\">\n        <app-select [label]=\"'Mode'\" [control]=\"form.controls['drawMethod']\"\n          [options]=\"dotTypes\">\n        </app-select>\n      </ng-template>\n      <ng-template [ngIf]=\"form.controls['drawMethod']?.value === config.chart.options.drawMethod.values.BUBBLE\n          || form.controls['geoType']?.value === config.chart.options.geoType.values.ZIP\">\n        <app-select [label]=\"'Max Bubble Size (px)'\" [control]=\"form.controls['bubbleSize']\"\n          [options]=\"bubbleSizes\">\n        </app-select>\n      </ng-template>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], GeoHeatMapOptionsComponent);
    return GeoHeatMapOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_4__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/geo-heat-map.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GeoHeatMapComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__d3_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/d3-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__geodata_service__ = __webpack_require__("../../../../../src/app/visualize/geodata.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__ = __webpack_require__("../../../../d3-scale-chromatic/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_topojson__ = __webpack_require__("../../../../topojson/index.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};















var MIN_BUBBLE_RADIUS = 2;
var FONT_SIZE = 10;
var BUBBLE_LEGEND_PADDING = 5;
var GeoHeatMapComponent = (function (_super) {
    __extends(GeoHeatMapComponent, _super);
    function GeoHeatMapComponent(tables, models, bus, dataFetch, el, events, geoData, zone) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.geoData = geoData;
        _this.zone = zone;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].defaultGeoHeatMapOptions;
        _this._rule = 0;
        return _this;
    }
    GeoHeatMapComponent.prototype.visualizeData = function (data) {
        var _this = this;
        _super.prototype.visualizeData.call(this, data);
        if (!this.width || !this.height || !this.svgHeight || !this.svgWidth || !data) {
            return;
        }
        var width = this.svgWidth - this.margin.left - this.margin.right;
        var height = this.svgHeight - this.margin.top - this.margin.bottom;
        this._scale = Math.min(height / 600, width / 960);
        this.chartArea
            .attr('transform', "translate(" + (this.margin.left + (width - 960 * this._scale) / 2) + "," + (this.margin.top + (height - 600 * this._scale) / 2) + ") scale(" + this._scale + ")");
        if (!data || !data.data || !data.data[0]) {
            return;
        }
        this.chartArea.selectAll('.paths').remove();
        this.chartArea.selectAll('.bubbles').remove();
        this.chartArea.selectAll('.counties-mesh').remove();
        this.chartArea.selectAll('.country-mesh').remove();
        this.chartArea.selectAll('.states-mesh').remove();
        this._defs = this.svg.select('defs');
        var metricIndexes = this.config.metrics.map(function (_) { return data.columns.findIndex(function (column) { return column.name === _.columnName; }); });
        var metricLabels = this.config.metrics.map(function (metric) {
            var column = data.columns.find(function (column) { return column.name === metric.columnName; });
            return metric.aggregator + "(" + (column.displayName || metric.columnName) + ")";
        });
        if (this.options.geoType === __WEBPACK_IMPORTED_MODULE_9__config__["a" /* default */].chart.options.geoType.values.COUNTY) {
            __WEBPACK_IMPORTED_MODULE_8_rxjs_Observable__["a" /* Observable */].forkJoin(this.geoData.getUSMap(), this.geoData.getCountyNames()).subscribe(function (_a) {
                var us = _a[0], counties = _a[1];
                var stateIndex = data.columns.findIndex(function (column) { return column.name === _this.options.stateColumn; });
                var countyIndex = data.columns.findIndex(function (column) { return column.name === _this.options.countyColumn; });
                var series = __WEBPACK_IMPORTED_MODULE_12_d3__["map"]();
                var countiesInverted = __WEBPACK_IMPORTED_MODULE_11_lodash__["keyBy"](counties, function (county) {
                    return county.code + "|" + county.name;
                });
                data.data.forEach(function (row) {
                    if (row[stateIndex] && row[countyIndex]) {
                        var key = row[stateIndex] + "|" + row[countyIndex];
                        var county = countiesInverted[key];
                        if (county) {
                            series.set(String(county.id), metricIndexes.map(function (_) { return +row[_]; }));
                        }
                        else {
                            //console.log(row);
                        }
                    }
                });
                var path = __WEBPACK_IMPORTED_MODULE_12_d3__["geoPath"]();
                _this._drawCountryContours(path, us);
                if (_this.options.drawMethod === __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].DrawMethod.BUBBLE) {
                    _this._drawCountiesContours(path, us);
                    _this._drawTopologiesBubble(__WEBPACK_IMPORTED_MODULE_14_topojson__["feature"](us, us.objects.counties).features, path, series, counties, metricLabels);
                }
                else {
                    _this._drawTopologiesPath(__WEBPACK_IMPORTED_MODULE_14_topojson__["feature"](us, us.objects.counties).features, path, series, counties, metricLabels);
                    _this._drawStateContours(path, us);
                }
            });
        }
        else if (this.options.geoType === __WEBPACK_IMPORTED_MODULE_9__config__["a" /* default */].chart.options.geoType.values.STATE) {
            __WEBPACK_IMPORTED_MODULE_8_rxjs_Observable__["a" /* Observable */].forkJoin(this.geoData.getUSMap(), this.geoData.getStateNames()).subscribe(function (_a) {
                var us = _a[0], states = _a[1];
                var stateIndex = data.columns.findIndex(function (column) { return column.name === _this.config.attributes[0]; });
                var series = __WEBPACK_IMPORTED_MODULE_12_d3__["map"]();
                var field = 'code';
                var statesInverted = __WEBPACK_IMPORTED_MODULE_11_lodash__["keyBy"](states, function (state) {
                    return state[field];
                });
                data.data.forEach(function (row) {
                    if (row[stateIndex]) {
                        var state = statesInverted[row[stateIndex]];
                        if (state) {
                            series.set(String(state.id), metricIndexes.map(function (_) { return +row[_]; }));
                        }
                        else {
                            //console.log(row);
                        }
                    }
                });
                var path = __WEBPACK_IMPORTED_MODULE_12_d3__["geoPath"]();
                _this._drawCountryContours(path, us);
                _this._drawStateContours(path, us);
                if (_this.options.drawMethod === __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].DrawMethod.BUBBLE) {
                    _this._drawTopologiesBubble(__WEBPACK_IMPORTED_MODULE_14_topojson__["feature"](us, us.objects.states).features, path, series, states, metricLabels);
                }
                else {
                    _this._drawTopologiesPath(__WEBPACK_IMPORTED_MODULE_14_topojson__["feature"](us, us.objects.states).features, path, series, states, metricLabels);
                }
            });
        }
        else {
            __WEBPACK_IMPORTED_MODULE_8_rxjs_Observable__["a" /* Observable */].forkJoin(this.geoData.getUSMap(), this.geoData.getZIPCoords()).subscribe(function (_a) {
                var us = _a[0], usCommonData = _a[1];
                var series = __WEBPACK_IMPORTED_MODULE_12_d3__["map"]();
                data.data.forEach(function (row) {
                    var usObject = usCommonData[row[0]];
                    if (usObject) {
                        series.set(usObject.zip_code, metricIndexes.map(function (_) { return +row[_]; }));
                    }
                });
                var path = __WEBPACK_IMPORTED_MODULE_12_d3__["geoPath"]();
                _this._drawCountryContours(path, us);
                _this._drawStateContours(path, us);
                _this._drawZipBubble(usCommonData, series, metricLabels);
            });
        }
        this.zone.runOutsideAngular(function () {
            var zoom = __WEBPACK_IMPORTED_MODULE_12_d3__["zoom"]()
                .scaleExtent([0.5, 10])
                .on('zoom', _this._zoomed.bind(_this));
            _this.svg.call(zoom);
        });
    };
    GeoHeatMapComponent.prototype._gamma = function (arg) {
        switch (this.options.gamma) {
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.BLUES:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["a" /* interpolateBlues */](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.GREENS:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["b" /* interpolateGreens */](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.REDS:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["e" /* interpolateReds */](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.GREYS:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["c" /* interpolateGreys */](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.MAGMA:
                return __WEBPACK_IMPORTED_MODULE_12_d3__["interpolateMagma"](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.RAINBOW:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["f" /* interpolateSpectral */](arg);
            case __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].Gamma.RED_BLUE:
                return __WEBPACK_IMPORTED_MODULE_13_d3_scale_chromatic__["d" /* interpolateRdBu */](arg);
        }
    };
    GeoHeatMapComponent.prototype._drawTopologiesPath = function (topologies, path, series, dictionary, metricLabels) {
        var _this = this;
        var colorScale = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]()
            .range([0, 1])
            .domain(__WEBPACK_IMPORTED_MODULE_12_d3__["extent"](series.values(), function (_) { return _[0]; }))
            .clamp(true);
        var preparedData = topologies
            .map(function (t) {
            var value = series.has("" + +t.id)
                ? series.get("" + +t.id)[0]
                : null;
            return Object.assign({
                value: value,
                USObject: dictionary["" + +t.id],
            }, t);
        });
        this.chartArea
            .append('g')
            .attr('class', 'paths')
            .selectAll('path')
            .data(preparedData)
            .enter()
            .append('path')
            .attr('fill', function (row) {
            return row.value !== null
                ? _this._gamma(colorScale(row.value))
                : 'url(#checkers)';
        })
            .attr('d', path)
            .append('title')
            .text(function (row) {
            var value = row.value === null
                ? 'N/A'
                : String(row.value);
            return row.USObject ? row.USObject.name + ", " + row.USObject.code + ": " + value : '';
        });
        this._legend([colorScale], metricLabels);
    };
    GeoHeatMapComponent.prototype._drawTopologiesBubble = function (topologies, path, series, dictionary, metricLabels) {
        var _this = this;
        var sizeScale = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]()
            .range([MIN_BUBBLE_RADIUS, +this.options.bubbleSize])
            .domain([0, __WEBPACK_IMPORTED_MODULE_12_d3__["max"]([0].concat(series.values().map(function (_) { return _[0]; })))])
            .clamp(true);
        var colorScale = (this.config.metrics.length >= 2)
            ? __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]().range([0, 1]).domain(__WEBPACK_IMPORTED_MODULE_12_d3__["extent"](series.values(), function (_) { return _[1]; }))
            : null;
        var opacityScale = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]()
            .domain(sizeScale.domain())
            .range([0.8, 0.2]);
        var preparedData = topologies
            .filter(function (t) { return series.has("" + +t.id) && "" + +t.id in dictionary; })
            .map(function (t) {
            var values = series.get("" + +t.id);
            return Object.assign({
                values: values,
                USObject: dictionary["" + +t.id],
                radius: sizeScale(values[0]),
            }, t);
        });
        this.chartArea
            .append('g')
            .attr('class', 'bubbles')
            .selectAll('circle')
            .data(preparedData)
            .enter()
            .append('circle')
            .attr('transform', function (row) {
            var centroid = path.centroid(row);
            return centroid ? "translate(" + centroid + ")" : '';
        })
            .attr('r', function (row) {
            return row.radius + 'px';
        })
            .attr('fill-opacity', function (row) { return opacityScale(row.values[0]); })
            .attr('fill', function (row) {
            return _this._gamma(colorScale ? colorScale(row.values[1]) : 1.0);
        })
            .append('title')
            .text(function (row) {
            return row.USObject.name + " " + metricLabels.map(function (label, i) { return label + ": " + row.values[i]; }).join(', ');
        });
        this._legend([sizeScale, colorScale], metricLabels);
    };
    GeoHeatMapComponent.prototype._drawZipBubble = function (commonData, series, metricLabels) {
        var _this = this;
        var sizeScale = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]()
            .range([MIN_BUBBLE_RADIUS, +this.options.bubbleSize])
            .domain([0, __WEBPACK_IMPORTED_MODULE_12_d3__["max"]([0].concat(series.values().map(function (_) { return _[0]; })))])
            .clamp(true);
        var colorScale = (this.config.metrics.length >= 2)
            ? __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]().range([0, 1]).domain(__WEBPACK_IMPORTED_MODULE_12_d3__["extent"](series.values(), function (_) { return _[1]; }))
            : null;
        var projection = __WEBPACK_IMPORTED_MODULE_12_d3__["geoAlbersUsa"]().scale(1280);
        var opacityScale = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]()
            .domain(sizeScale.domain())
            .range([0.8, 0.2]);
        var data = series.keys().filter(function (key) { return key in commonData; }).map(function (key) {
            var values = series.get(key);
            return {
                values: values,
                USObject: commonData[key],
                radius: sizeScale(values[0]),
            };
        });
        this.chartArea
            .append('g')
            .attr('class', 'bubbles')
            .attr('transform', "translate(0, 50)")
            .selectAll('circle')
            .data(data)
            .enter()
            .append('circle')
            .attr('transform', function (row) {
            var center = projection([row.USObject.longitude, row.USObject.latitude]);
            return center ? "translate(" + center + ")" : '';
        })
            .attr('r', function (row) {
            return row.radius + 'px';
        })
            .attr('fill-opacity', function (row) { return opacityScale(row.values[0]); })
            .attr('fill', function (row) {
            return _this._gamma(colorScale ? colorScale(row.values[1]) : 1.0);
        })
            .append('title')
            .text(function (row) {
            return "Zip: " + row.USObject.zip_code + " State: " + row.USObject.stateName + " " +
                metricLabels.map(function (label, i) { return label + ": " + row.values[i]; }).join(', ');
        });
        this._legend([sizeScale, colorScale], metricLabels);
    };
    GeoHeatMapComponent.prototype._legend = function (scales, metricLabels) {
        var _this = this;
        var legendWidth = this.svgWidth / 4;
        var h = 20;
        this.svg.selectAll('rect.legend').remove();
        this.svg.select('.legend-axis').remove();
        this.svg.selectAll('.label').remove();
        this.svg.selectAll('.legend-circle-label').remove();
        this.svg.selectAll('.legend-circle').remove();
        this.svg.selectAll('.titles').remove();
        //Title
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 15)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '16px')
            .style('text-decoration', 'underline')
            .text(this.options.title);
        //SubTitle
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 30)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', FONT_SIZE + 'px')
            .text(this.options.subtitle);
        var legendRightMostX = this.svgWidth - this.margin.right + this.potentialLegendWidth;
        if (this.options.drawMethod === __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].DrawMethod.BUBBLE || this.options.geoType === __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].GeoHeatMapType.ZIP) {
            var _a = scales[0].domain(), valueMin = _a[0], valueMax = _a[1];
            var data = [valueMin, (valueMax - valueMin) / 2, valueMax];
            var selection = this.svg.append('g');
            selection.append('rect').attr('transform', "translate(" + (this.svgWidth - 100) + ", 20)");
            var circles = selection.attr('class', 'legend-circle').selectAll('circle')
                .data(data)
                .enter();
            var bubbleSize_1 = this.options.bubbleSize * this._scale;
            circles.append('circle').attr('clip-path', 'url(#cut-off-circle)')
                .attr('transform', function (_, i) {
                return "translate(" + (legendRightMostX - bubbleSize_1) + ",  " + (40 + i * (25 + BUBBLE_LEGEND_PADDING)) + ")";
            })
                .attr('r', function (value) {
                var radius = scales[0](value) || MIN_BUBBLE_RADIUS;
                return radius ? radius * _this._scale + 'px' : MIN_BUBBLE_RADIUS * _this._scale + 'px';
            })
                .attr('fill', this._gamma(1.0));
            circles.append('text')
                .attr('class', 'label')
                .style('text-anchor', 'end')
                .style('fill', 'black')
                .style('font-size', FONT_SIZE + 'px')
                .attr('alignment-baseline', 'middle')
                .attr('y', function (value, i) { return 40 + i * (25 + BUBBLE_LEGEND_PADDING); })
                .attr('x', legendRightMostX - BUBBLE_LEGEND_PADDING - (bubbleSize_1 * 2))
                .text(function (d) {
                return _this.decimalPipe.transform(parseFloat(String(d)), '1.0-1');
            });
            this.svg.append('text').attr('class', 'label')
                .attr('transform', "translate(" + legendRightMostX + ", 10)")
                .style('text-anchor', 'end')
                .text(metricLabels[0]);
        }
        if (this.config.metrics.length >= 2
            || (this.options.drawMethod === __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].DrawMethod.AREA && this.options.geoType !== __WEBPACK_IMPORTED_MODULE_2__chart_interfaces__["a" /* DashboardCharts */].GeoHeatMapType.ZIP)) {
            var colorMetricIndex = scales.length > 1 ? 1 : 0;
            this._defs.select("#gradient-" + this.config.guid + "-" + this._rule).remove();
            this._rule++;
            var legend = this._defs.append('svg:linearGradient')
                .attr('id', "gradient-" + this.config.guid + "-" + this._rule)
                .attr('spreadMethod', 'pad');
            for (var i = 1; i <= 10; i++) {
                legend.append('stop').attr('offset', i * 10 + "%").attr('stop-color', this._gamma(i / 10)).attr('stop-opacity', 1);
            }
            this.svg.append('rect')
                .attr('class', 'legend')
                .attr('width', legendWidth)
                .attr('height', h).style('fill', "url(#gradient-" + this.config.guid + "-" + this._rule + ")").attr('transform', 'translate(10,10)');
            var x = __WEBPACK_IMPORTED_MODULE_12_d3__["scaleLinear"]().range([0, legendWidth]).domain(scales[colorMetricIndex].domain());
            var xAxis = __WEBPACK_IMPORTED_MODULE_12_d3__["axisBottom"](x).tickFormat(x.tickFormat(4)).ticks(4);
            this.svg.append('g').attr('class', 'legend-axis').attr('transform', 'translate(10,30)').call(xAxis);
            this.svg.append('text').attr('class', 'label').attr('transform', "translate(" + (legendWidth + 20) + ", " + (h + 5) + ")").style('text-anchor', 'start')
                .text(metricLabels[colorMetricIndex]);
        }
    };
    GeoHeatMapComponent.prototype._drawCountryContours = function (path, us) {
        this.chartArea.append('path')
            .data(__WEBPACK_IMPORTED_MODULE_14_topojson__["feature"](us, us.objects.nation).features)
            .attr('class', 'country-shape')
            .attr('d', path);
    };
    GeoHeatMapComponent.prototype._drawCountiesContours = function (path, us) {
        this.chartArea.append('path')
            .datum(__WEBPACK_IMPORTED_MODULE_14_topojson__["mesh"](us, us.objects.counties, function (a, b) {
            return a !== b;
        }))
            .attr('class', 'counties-mesh')
            .attr('d', path);
    };
    GeoHeatMapComponent.prototype._drawStateContours = function (path, us) {
        this.chartArea.append('path')
            .datum(__WEBPACK_IMPORTED_MODULE_14_topojson__["mesh"](us, us.objects.states, function (a, b) {
            return a !== b;
        }))
            .attr('class', 'states-mesh')
            .attr('d', path);
    };
    GeoHeatMapComponent.prototype._zoomed = function () {
        this.chartArea.attr('transform', "translate(" + __WEBPACK_IMPORTED_MODULE_12_d3__["event"].transform.x + ", " + __WEBPACK_IMPORTED_MODULE_12_d3__["event"].transform.y + ") scale(" + this._scale * __WEBPACK_IMPORTED_MODULE_12_d3__["event"].transform.k + ")");
        this.chartArea.selectAll('g.bubbles circle').each(function (_, index, nodeList) {
            __WEBPACK_IMPORTED_MODULE_12_d3__["select"](nodeList[index]).attr('r', function (value) {
                return value.radius / __WEBPACK_IMPORTED_MODULE_12_d3__["event"].transform.k + 'px';
            });
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], GeoHeatMapComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], GeoHeatMapComponent.prototype, "styleHeight", void 0);
    GeoHeatMapComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'geo-heat-chart',
            template: "\n    <div class=\"flex-col vertical-align\" style=\"width: 100%\"\n      *ngIf=\"!config.attributes.length || !config.metrics.length\">\n      <div class=\"text-center\" style=\"width: 100%\">\n        <a (click)=\"edit()\" style=\"font-size: 50px\"><i class=\"glyphicon glyphicon-pencil\"></i>Edit</a>\n      </div>\n    </div>\n    <div class=\"flex-rubber\" [hidden]=\"!config.attributes.length || !config.metrics.length\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"960\" height=\"500\" stroke-linejoin=\"round\" stroke-linecap=\"round\">\n          <defs>\n            <pattern id=\"checkers\"\n              x=\"0\" y=\"0\" width=\"12\" height=\"12\" patternUnits=\"userSpaceOnUse\" >\n              <rect fill=\"#eee\" x=\"0\" width=\"6\" height=\"6\" y=\"0\"/>\n              <rect fill=\"#eee\" x=\"6\" width=\"6\" height=\"6\" y=\"6\"/>\n            </pattern>\n            <filter id=\"blur\">\n              <feGaussianBlur stdDeviation=\"5\"></feGaussianBlur>\n            </filter>\n            <clipPath id=\"cut-off-circle\">\n              <rect x=\"-55\" y=\"-13\" width=\"500\" height=\"26\" />\n            </clipPath>\n          </defs>\n        </svg>\n      </div>\n    </div>\n    <div #filterEl [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config?.chartFilters?.length + config?.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_4__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_3__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_5__cross_filter_bus__["a" /* CrossFilterBus */],
            __WEBPACK_IMPORTED_MODULE_6__services_data_fetching_service__["a" /* DatafetchingService */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */],
            __WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_10__geodata_service__["a" /* GeoDataService */],
            __WEBPACK_IMPORTED_MODULE_0__angular_core__["N" /* NgZone */]])
    ], GeoHeatMapComponent);
    return GeoHeatMapComponent;
}(__WEBPACK_IMPORTED_MODULE_1__d3_chart_component__["a" /* D3Chart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/line-chart-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LineChartOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var LineChartOptionsComponent = (function (_super) {
    __extends(LineChartOptionsComponent, _super);
    function LineChartOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.orientationOpts = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.labels);
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            yAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            yAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            orientation: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.VERTICAL),
            hierarchy: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            xGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            yGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
        });
        return _this;
    }
    LineChartOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'line-chart-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n      <app-input [label]=\"'Attributes Axis Label'\"\n        [control]=\"form.controls['xAxisTitle']\"></app-input>\n      <app-input [label]=\"'Metrics Axis Label'\"\n        [control]=\"form.controls['yAxisTitle']\"></app-input>\n<!--\n      <app-select [label]=\"'X-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n        [control]=\"form.controls['xAxisAngle']\"></app-select>\n      <app-select [label]=\"'Y-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n        [control]=\"form.controls['yAxisAngle']\"></app-select>\n-->\n      <app-select [label]=\"'Orientation'\"\n        [control]=\"form.controls['orientation']\"\n        [options]=\"orientationOpts\">\n      </app-select>\n      <app-check [label]=\"'Hierarchy Attributes'\"\n        [control]=\"form.controls['hierarchy']\"></app-check>\n      <app-check [label]=\"'Vertical Grid'\"\n        [control]=\"form.controls['xGrid']\"></app-check>\n      <app-check [label]=\"'Horizontal Grid'\"\n        [control]=\"form.controls['yGrid']\"></app-check>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], LineChartOptionsComponent);
    return LineChartOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_4__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/line-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LineChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__axis_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/axis-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var LineChartComponent = (function (_super) {
    __extends(LineChartComponent, _super);
    function LineChartComponent(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__["a" /* DashboardCharts */].defaultLineChartOptions;
        return _this;
    }
    LineChartComponent.prototype.visualizeData = function (data) {
        var _this = this;
        _super.prototype.visualizeData.call(this, data);
        if (!data || !data.data || !data.data[0]) {
            return;
        }
        this.drawLegend(3);
        if (!('orientation' in this.options) || this.options.orientation === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
            this.metricScale.domain([Math.min(this.yMin, 0), Math.max(this.yMax, 0)]);
        }
        this.refreshAxes(this.yMin < 0 && this.yMax > 0);
        this.makeGridLines();
        if (this.preparedSeries.length) {
            var valueline_1 = __WEBPACK_IMPORTED_MODULE_6_d3__["line"]()
                .x(function (d, i) {
                if (!('orientation' in _this.options) || _this.options.orientation === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                    return _this.attributeScale(i) + _this.attributeScale.bandwidth() / 2;
                }
                if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                    return _this.metricScale(d.value);
                }
            })
                .y(function (d, i) {
                if (!('orientation' in _this.options) || _this.options.orientation === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.VERTICAL) {
                    return _this.metricScale(d.value);
                }
                if (_this.options.orientation === __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.orientation.values.HORIZONTAL) {
                    return _this.attributeScale(i) + _this.attributeScale.bandwidth() / 2;
                }
            });
            this.preparedSeries.forEach(function (series, i) {
                //const previousSeries = this.previousSeries.find(_ => _.column.name === series.column.name);
                var previousSeries = _this.previousSeries[i];
                var metricName = series.column.name;
                if (previousSeries && previousSeries.series) {
                    series.series = previousSeries.series;
                    previousSeries.series = null;
                }
                else {
                    series.series = _this.chartArea
                        .append('path')
                        .attr('class', 'series')
                        .attr('data-series', metricName);
                }
                series.series.transition()
                    .attr('d', valueline_1(series.values))
                    .style('stroke', _this.chartColorScale(i))
                    .style('stroke-width', '2px')
                    .style('fill', 'none');
            });
        }
        this.previousSeries.forEach(function (_) { return _.series && _.series.remove(); });
        this.previousSeries = this.preparedSeries;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], LineChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], LineChartComponent.prototype, "styleHeight", void 0);
    LineChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'line-chart',
            template: "\n    <div class=\"flex-rubber\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"960\" height=\"500\"></svg>\n      </div>\n    </div>\n    <div #filterEl [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config.chartFilters?.length + config.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_9__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_8__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_1__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_7__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */]])
    ], LineChartComponent);
    return LineChartComponent;
}(__WEBPACK_IMPORTED_MODULE_3__axis_chart_component__["a" /* AxisChart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/one-dimensional-scatter-plot-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OneDimensionalScatterPlotChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__chart_abstract__ = __webpack_require__("../../../../../src/app/visualize/chart.abstract.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var OneDimensionalScatterPlotChartComponent = (function (_super) {
    __extends(OneDimensionalScatterPlotChartComponent, _super);
    function OneDimensionalScatterPlotChartComponent(tables, models, dataFetch, bus, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_4__chart_interfaces__["a" /* DashboardCharts */].defaultOneDimensionalScatterPlotChartOptions;
        _this._rowsLimit = 10000;
        return _this;
    }
    OneDimensionalScatterPlotChartComponent.prototype.visualizeData = function (data) {
        if (!data || !data.data || !data.data[0]) {
            return;
        }
        var attributeIndices = this.config.attributes.map(function (attr) { return data.columns.findIndex(function (column) { return column.name === attr; }); });
        var metricIndices = this.config.metrics.map(function (metric) { return data.columns.findIndex(function (column) { return column.name === metric.columnName; }); });
        this.chartOptions = {
            circleRadius: this.options.bubbleSize,
            seriesGamma: this.options.categoricalGamma,
            yJitter: this.options.yJitter,
            title: this.options.title,
            subtitle: this.options.subtitle,
            labelX: this.options.xAxisTitle,
        };
        this.chartData = {
            metrics: this.config.metrics.map(function (metric) {
                var columnInfo = data.columns.find(function (_) { return _.name === metric.columnName; });
                return {
                    name: columnInfo
                        ? columnInfo.displayName || columnInfo.name
                        : metric.columnName,
                };
            }),
            attributes: this.config.attributes.map(function (attribute) {
                var columnInfo = data.columns.find(function (_) { return _.name === attribute; });
                return {
                    name: columnInfo
                        ? columnInfo.displayName || columnInfo.name
                        : attribute,
                };
            }),
            series: [{
                    title: this.options.xAxisTitle,
                    data: data.data.map(function (row) {
                        return {
                            values: metricIndices.map(function (_) { return row[_]; }),
                            attributes: attributeIndices.map(function (_) { return row[_]; }),
                        };
                    }),
                }],
        };
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], OneDimensionalScatterPlotChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], OneDimensionalScatterPlotChartComponent.prototype, "styleHeight", void 0);
    OneDimensionalScatterPlotChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'scatter-plot-chart',
            template: "\n    <div class=\"flex-rubber\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <chart-one-d-scatter *ngIf=\"chartData\" [data]=\"chartData\" [options]=\"chartOptions\"></chart-one-d-scatter>\n      </div>\n    </div>\n    <div #filters [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config.chartFilters?.length + config.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_2__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_7__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */]])
    ], OneDimensionalScatterPlotChartComponent);
    return OneDimensionalScatterPlotChartComponent;
}(__WEBPACK_IMPORTED_MODULE_6__chart_abstract__["a" /* ChartAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/one-dimensional-scatter-plot-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return OneDimensionalScatterPlotOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__charts_d3_chart_helper__ = __webpack_require__("../../../../../src/app/charts/d3-chart.helper.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var CategoricalGamma = __WEBPACK_IMPORTED_MODULE_6__charts_d3_chart_helper__["a" /* D3ChartHelper */].CategoricalGamma;
var OneDimensionalScatterPlotOptionsComponent = (function (_super) {
    __extends(OneDimensionalScatterPlotOptionsComponent, _super);
    function OneDimensionalScatterPlotOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.gammas = Object.keys(CategoricalGamma);
        _this.bubbleSizes = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList([5, 10, 15]);
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            yJitter: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultOneDimensionalScatterPlotChartOptions.yJitter),
            categoricalGamma: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultOneDimensionalScatterPlotChartOptions.categoricalGamma),
            bubbleSize: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultOneDimensionalScatterPlotChartOptions.bubbleSize),
        });
        return _this;
    }
    OneDimensionalScatterPlotOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'one-d-chart-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n      <app-input [label]=\"'Attributes Axis Label'\"\n        [control]=\"form.controls['xAxisTitle']\"></app-input>\n      <app-check\n        [label]=\"'Add Jitter'\"\n        [control]=\"form.controls['yJitter']\"\n      ></app-check>\n      <app-select [label]=\"'Gamma'\" [control]=\"form.controls['categoricalGamma']\"\n        [options]=\"gammas\">\n      </app-select>\n      <app-select [label]=\"'Max Bubble Size (px)'\" [control]=\"form.controls['bubbleSize']\"\n        [options]=\"bubbleSizes\">\n      </app-select>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], OneDimensionalScatterPlotOptionsComponent);
    return OneDimensionalScatterPlotOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_4__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/pie-chart-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PieChartOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var PieChartOptionsComponent = (function (_super) {
    __extends(PieChartOptionsComponent, _super);
    function PieChartOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
        });
        return _this;
    }
    PieChartOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'pie-chart-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], PieChartOptionsComponent);
    return PieChartOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_3__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/pie-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PieChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__d3_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/d3-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var PieChartComponent = (function (_super) {
    __extends(PieChartComponent, _super);
    function PieChartComponent(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_3__chart_interfaces__["a" /* DashboardCharts */].defaultChartOptions;
        return _this;
    }
    PieChartComponent.prototype.visualizeData = function (data) {
        var _this = this;
        _super.prototype.visualizeData.call(this, data);
        this.chartArea.selectAll('.arc').remove(); //@TODO ANIMATE
        if (!this.width || !this.height || !this.svgHeight || !this.svgWidth) {
            return;
        }
        this.prepareSeries(data);
        var width = this.margin.left + this.width / 2;
        var height = this.margin.top + this.height / 2;
        this.chartColorScale = __WEBPACK_IMPORTED_MODULE_5_d3__["scaleOrdinal"]()
            .domain(__WEBPACK_IMPORTED_MODULE_5_d3__["range"](this.rowsCount))
            .range(__WEBPACK_IMPORTED_MODULE_5_d3__["schemeCategory20"]);
        this.chartArea.attr('transform', 'translate(' + width + ',' + height + ')');
        var radius = Math.min(this.width, this.height) / 2;
        var pie = __WEBPACK_IMPORTED_MODULE_5_d3__["pie"]()
            .sort(null)
            .value(function (d) {
            return d.value;
        });
        var path = __WEBPACK_IMPORTED_MODULE_5_d3__["arc"]()
            .outerRadius(radius - 10)
            .innerRadius(0);
        this.drawLegend();
        if (!this.preparedSeries.length) {
            return;
        }
        var arc = this.chartArea.selectAll('.arc')
            .data(pie(this.preparedSeries[0].values))
            .enter()
            .append('g')
            .attr('class', 'arc');
        arc.append('path')
            .attr('d', path)
            .attr('fill', function (d, i) {
            return _this.chartColorScale(i);
        });
        var tooltipValues = [];
        this.preparedSeries.forEach(function (series) {
            for (var j = 0; j < _this.rowsCount; j++) {
                tooltipValues.push({ label: series.values[j].label + ' ' + series.name, value: series.values[j].value });
            }
        });
        //bindings
        this.chartArea.selectAll('g.arc')
            .on('mouseover', function (_, index) {
            __WEBPACK_IMPORTED_MODULE_5_d3__["select"]('.toolTip').remove();
            var divTooltip = __WEBPACK_IMPORTED_MODULE_5_d3__["select"]('body').append('div').attr('class', 'toolTip');
            divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_5_d3__["event"].pageX + 10 + 'px');
            divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_5_d3__["event"].pageY - 25 + 'px');
            divTooltip.style('display', 'inline-block');
            if (tooltipValues[index] && 'label' in tooltipValues[index] && 'value' in tooltipValues[index]) {
                divTooltip.html(tooltipValues[index].label + " : " + tooltipValues[index].value);
            }
        })
            .on('mouseout', function () {
            __WEBPACK_IMPORTED_MODULE_5_d3__["select"]('.toolTip').remove();
        });
        this.previousSeries = this.preparedSeries;
    };
    PieChartComponent.prototype.drawLegend = function () {
        var _this = this;
        this.svg.selectAll('.legend').remove();
        if (!this.preparedSeries.length || !this._response.columns.length) {
            return;
        }
        var seriesToDraw = this.preparedSeries[0];
        var legend = this.svg.selectAll('.legend')
            .data(seriesToDraw.values.map(function (data) {
            return data.label + (" " + seriesToDraw.metric.aggregator + "(" + (seriesToDraw.column.displayName || seriesToDraw.column.name) + ")");
        }))
            .enter().append('g')
            .attr('class', 'legend')
            .attr('transform', function (d, i) {
            return "translate(" + (_this.width + _this.margin.left + _this.potentialLegendWidth) + ", " + i * 20 + ")";
        });
        legend.append('rect')
            .attr('x', -18)
            .attr('y', 9)
            .attr('width', 18)
            .attr('height', 18)
            .style('fill', function (d, i) {
            return _this.chartColorScale(i);
        });
        legend.append('text')
            .attr('x', -24)
            .attr('y', 18)
            .attr('dy', '.35em')
            .style('text-anchor', 'end')
            .text(function (d) {
            return d;
        });
        this.svg.selectAll('text.titles').remove();
        //Title
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 15)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '16px')
            .style('text-decoration', 'underline')
            .text(this.options.title);
        //SubTitle
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 30)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '10px')
            .text(this.options.subtitle);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], PieChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], PieChartComponent.prototype, "styleHeight", void 0);
    PieChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'pie-chart',
            template: "\n    <div class=\"flex-rubber\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"960\" height=\"500\"></svg>\n      </div>\n    </div>\n    <div #filterEl [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config.chartFilters?.length + config.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_7__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_1__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_6__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_4__services_event_service__["a" /* EventService */]])
    ], PieChartComponent);
    return PieChartComponent;
}(__WEBPACK_IMPORTED_MODULE_2__d3_chart_component__["a" /* D3Chart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/scatter-plot-chart-options.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ScatterPlotChartOptionsComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__ = __webpack_require__("../../../../../src/app/core-ui/components/app-select.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__chart_options__ = __webpack_require__("../../../../../src/app/visualize/charts/chart-options.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var ScatterPlotChartOptionsComponent = (function (_super) {
    __extends(ScatterPlotChartOptionsComponent, _super);
    function ScatterPlotChartOptionsComponent() {
        var _this = _super.call(this) || this;
        _this.config = __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */];
        _this.gammas = __WEBPACK_IMPORTED_MODULE_3__core_ui_components_app_select_component__["b" /* AppSelectOptionData */].fromList(__WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.gamma.list, __WEBPACK_IMPORTED_MODULE_2__config__["a" /* default */].chart.options.gamma.labels);
        _this.form = new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["c" /* FormGroup */]({
            title: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            subtitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            yAxisTitle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](null),
            xAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            yAxisAngle: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](0, __WEBPACK_IMPORTED_MODULE_1__angular_forms__["g" /* Validators */].required),
            hierarchy: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            xGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            yGrid: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](false),
            gamma: new __WEBPACK_IMPORTED_MODULE_1__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].Gamma.RAINBOW),
        });
        return _this;
    }
    ScatterPlotChartOptionsComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'scatter-plot-chart-options',
            template: "\n    <div class=\"form-group\" *ngIf=\"form\">\n      <app-input [label]=\"'Chart Title'\"\n        [control]=\"form.controls['title']\"></app-input>\n      <app-input [label]=\"'Chart Subtitle'\"\n        [control]=\"form.controls['subtitle']\"></app-input>\n      <app-input [label]=\"'X Axis Label'\"\n        [control]=\"form.controls['xAxisTitle']\"></app-input>\n      <app-input [label]=\"'Y Axis Label'\"\n        [control]=\"form.controls['yAxisTitle']\"></app-input>\n      <!--\n            <app-select [label]=\"'X-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n              [control]=\"form.controls['xAxisAngle']\"></app-select>\n            <app-select [label]=\"'Y-Axis Label Rotation'\" [options]=\"[-90,-45,0,45,90]\"\n              [control]=\"form.controls['yAxisAngle']\"></app-select>\n      -->\n      <app-select [label]=\"'Gamma'\" [control]=\"form.controls['gamma']\"\n        [options]=\"gammas\">\n      </app-select>\n      <app-check [label]=\"'Vertical Grid'\"\n        [control]=\"form.controls['xGrid']\"></app-check>\n      <app-check [label]=\"'Horizontal Grid'\"\n        [control]=\"form.controls['yGrid']\"></app-check>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [])
    ], ScatterPlotChartOptionsComponent);
    return ScatterPlotChartOptionsComponent;
}(__WEBPACK_IMPORTED_MODULE_4__chart_options__["a" /* ChartOptionsAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/scatter-plot-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ScatterPlotChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__d3_chart_component__ = __webpack_require__("../../../../../src/app/visualize/charts/d3-chart.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









var scales = {
    'PURE': ['#7f3b08', '#b35806', '#e08214', '#fdb863', '#fee0b6', '#f7f7f7', '#d8daeb', '#b2abd2', '#8073ac', '#542788', '#2d004b'],
    'SPECTRAL': ['#d53e4f', '#f46d43', '#fdae61', '#fee08b', '#e6f598', '#abdda4', '#66c2a5', '#3288bd'],
    'REDBLACKGREEN': ['#ff0000', '#AA0000', '#550000', '#005500', '#00AA00', '#00ff00'],
    'VIRIDIS': ['#440154', '#440256', '#450457', '#450559', '#46075a', '#46085c', '#460a5d', '#460b5e', '#470d60', '#470e61', '#471063', '#471164', '#471365', '#481467', '#481668', '#481769', '#48186a', '#481a6c', '#481b6d', '#481c6e', '#481d6f', '#481f70', '#482071', '#482173', '#482374', '#482475', '#482576', '#482677', '#482878', '#482979', '#472a7a', '#472c7a', '#472d7b', '#472e7c', '#472f7d', '#46307e', '#46327e', '#46337f', '#463480', '#453581', '#453781', '#453882', '#443983', '#443a83', '#443b84', '#433d84', '#433e85', '#423f85', '#424086', '#424186', '#414287', '#414487', '#404588', '#404688', '#3f4788', '#3f4889', '#3e4989', '#3e4a89', '#3e4c8a', '#3d4d8a', '#3d4e8a', '#3c4f8a', '#3c508b', '#3b518b', '#3b528b', '#3a538b', '#3a548c', '#39558c', '#39568c', '#38588c', '#38598c', '#375a8c', '#375b8d', '#365c8d', '#365d8d', '#355e8d', '#355f8d', '#34608d', '#34618d', '#33628d', '#33638d', '#32648e', '#32658e', '#31668e', '#31678e', '#31688e', '#30698e', '#306a8e', '#2f6b8e', '#2f6c8e', '#2e6d8e', '#2e6e8e', '#2e6f8e', '#2d708e', '#2d718e', '#2c718e', '#2c728e', '#2c738e', '#2b748e', '#2b758e', '#2a768e', '#2a778e', '#2a788e', '#29798e', '#297a8e', '#297b8e', '#287c8e', '#287d8e', '#277e8e', '#277f8e', '#27808e', '#26818e', '#26828e', '#26828e', '#25838e', '#25848e', '#25858e', '#24868e', '#24878e', '#23888e', '#23898e', '#238a8d', '#228b8d', '#228c8d', '#228d8d', '#218e8d', '#218f8d', '#21908d', '#21918c', '#20928c', '#20928c', '#20938c', '#1f948c', '#1f958b', '#1f968b', '#1f978b', '#1f988b', '#1f998a', '#1f9a8a', '#1e9b8a', '#1e9c89', '#1e9d89', '#1f9e89', '#1f9f88', '#1fa088', '#1fa188', '#1fa187', '#1fa287', '#20a386', '#20a486', '#21a585', '#21a685', '#22a785', '#22a884', '#23a983', '#24aa83', '#25ab82', '#25ac82', '#26ad81', '#27ad81', '#28ae80', '#29af7f', '#2ab07f', '#2cb17e', '#2db27d', '#2eb37c', '#2fb47c', '#31b57b', '#32b67a', '#34b679', '#35b779', '#37b878', '#38b977', '#3aba76', '#3bbb75', '#3dbc74', '#3fbc73', '#40bd72', '#42be71', '#44bf70', '#46c06f', '#48c16e', '#4ac16d', '#4cc26c', '#4ec36b', '#50c46a', '#52c569', '#54c568', '#56c667', '#58c765', '#5ac864', '#5cc863', '#5ec962', '#60ca60', '#63cb5f', '#65cb5e', '#67cc5c', '#69cd5b', '#6ccd5a', '#6ece58', '#70cf57', '#73d056', '#75d054', '#77d153', '#7ad151', '#7cd250', '#7fd34e', '#81d34d', '#84d44b', '#86d549', '#89d548', '#8bd646', '#8ed645', '#90d743', '#93d741', '#95d840', '#98d83e', '#9bd93c', '#9dd93b', '#a0da39', '#a2da37', '#a5db36', '#a8db34', '#aadc32', '#addc30', '#b0dd2f', '#b2dd2d', '#b5de2b', '#b8de29', '#bade28', '#bddf26', '#c0df25', '#c2df23', '#c5e021', '#c8e020', '#cae11f', '#cde11d', '#d0e11c', '#d2e21b', '#d5e21a', '#d8e219', '#dae319', '#dde318', '#dfe318', '#e2e418', '#e5e419', '#e7e419', '#eae51a', '#ece51b', '#efe51c', '#f1e51d', '#f4e61e', '#f6e620', '#f8e621', '#fbe723', '#fde725'],
};
var LEGEND_WIDTH = 50;
var ScatterPlotChartComponent = (function (_super) {
    __extends(ScatterPlotChartComponent, _super);
    function ScatterPlotChartComponent(tables, models, dataFetch, bus, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_5__chart_interfaces__["a" /* DashboardCharts */].defaultScatterPlotChartOptions;
        _this._rowsLimit = 100;
        return _this;
    }
    ScatterPlotChartComponent_1 = ScatterPlotChartComponent;
    ScatterPlotChartComponent.prototype.visualizeData = function (data) {
        var _this = this;
        this.margin = { top: 40, right: 20, bottom: 50, left: 50 };
        if (this.config.metrics.length > 2) {
            this.margin.right += LEGEND_WIDTH;
        }
        _super.prototype.visualizeData.call(this, data);
        if (!this.width || !this.height || !this.svgHeight || !this.svgWidth) {
            return;
        }
        this.prepareSeries(data);
        this.chartArea.selectAll('text.axis-label').remove();
        this.chartArea.select('.balls').remove(); //@TODO
        this.chartArea.selectAll('.ball-label').remove(); //@TODO
        var xMin = null, xMax = null, yMin = null, yMax = null, valueMin = null, valueMax = null;
        if (this.preparedSeries.length < 2) {
            return;
        }
        this.preparedSeries[0].values.forEach(function (data) {
            if (xMin === null) {
                xMin = data.value;
            }
            if (xMax === null) {
                xMax = data.value;
            }
            xMin = Math.min(xMin, data.value);
            xMax = Math.max(xMax, data.value);
        });
        this.preparedSeries[1].values.forEach(function (data) {
            if (yMin === null) {
                yMin = data.value;
            }
            if (yMax === null) {
                yMax = data.value;
            }
            yMin = Math.min(yMin, data.value);
            yMax = Math.max(yMax, data.value);
        });
        var scale = scales[this.options.gamma];
        var colourPct = [];
        if (this.preparedSeries.length === 3) {
            this.preparedSeries[2].values.forEach(function (data) {
                if (valueMin === null) {
                    valueMin = data.value;
                }
                if (valueMax === null) {
                    valueMax = data.value;
                }
                valueMin = Math.min(valueMin, data.value);
                valueMax = Math.max(valueMax, data.value);
            });
            // create colour scale
            var pct = ScatterPlotChartComponent_1.linspace(0, 100, scale.length).map(function (d) {
                return Math.round(d);
            });
            colourPct = __WEBPACK_IMPORTED_MODULE_7_d3__["zip"](pct.map(function (_) { return _ + '%'; }), scale, pct);
            this.chartColorScale = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleOrdinal"]()
                .domain([valueMin, valueMax])
                .range(scale);
        }
        else {
            this.chartColorScale = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleOrdinal"]()
                .domain([valueMin, valueMax])
                .range(__WEBPACK_IMPORTED_MODULE_7_d3__["schemeCategory20"]);
        }
        // magic here :)
        var titleMargin = 50;
        var circleRadius = 10;
        this.xScale = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleLinear"]()
            .clamp(false)
            .domain([xMin, xMax])
            .range([circleRadius, this.width - circleRadius - titleMargin]);
        var _a = [0, this.width].map(function (_) { return _this.xScale.invert(_); }), xMinExtended = _a[0], xMaxExtended = _a[1];
        this.xScale
            .domain([xMinExtended, xMaxExtended])
            .range([0, this.width])
            .nice(10);
        this.yScale = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleLinear"]()
            .clamp(false)
            .domain([yMin, yMax])
            .range([this.height - circleRadius, circleRadius]);
        var _b = [this.height, 0].map(function (_) { return _this.yScale.invert(_); }), yMinExtended = _b[0], yMaxExtended = _b[1];
        this.yScale
            .domain([yMinExtended, yMaxExtended])
            .range([this.height, 0])
            .nice(10);
        var dots = [];
        var balls = this.chartArea
            .append('g')
            .attr('class', 'balls');
        var _loop_1 = function (j) {
            var x = this_1.xScale(this_1.preparedSeries[0].values[j].value);
            var y = this_1.yScale(this_1.preparedSeries[1].values[j].value);
            var circle = balls
                .append('g')
                .attr('class', 'ball')
                .attr('transform', "translate(" + x + ", " + y + ")")
                .attr('fill', function () {
                if (_this.preparedSeries.length < 3) {
                    return _this.chartColorScale(0);
                }
                var percent = (_this.preparedSeries[2].values[j].value - valueMin) * 100 / (valueMax - valueMin);
                var res = colourPct.find(function (_) { return _[2] >= percent; });
                return res[1];
            });
            circle.append('circle')
                .attr('cx', 0)
                .attr('cy', 0)
                .attr('r', circleRadius)
                .style('fill-opacity', 1);
            var labelX = x + circleRadius + 2;
            this_1.chartArea
                .append('text')
                .attr('class', 'ball-label')
                .style('text-anchor', 'left')
                .style('fill', 'black')
                .attr('y', y + 4)
                .attr('x', labelX)
                .text(this_1.preparedSeries[0].values[j].label.join(', '))
                .each(this_1._trimTextWrap(this_1.width - x - circleRadius - 2));
            dots.push(circle);
            //bindings
            this_1.chartArea.selectAll('.ball')
                .on('mouseover', function (_, index) {
                __WEBPACK_IMPORTED_MODULE_7_d3__["select"]('.toolTip').remove();
                var divTooltip = __WEBPACK_IMPORTED_MODULE_7_d3__["select"]('body').append('div').attr('class', 'toolTip');
                divTooltip.style('left', __WEBPACK_IMPORTED_MODULE_7_d3__["event"].pageX + 10 + 'px');
                divTooltip.style('top', __WEBPACK_IMPORTED_MODULE_7_d3__["event"].pageY - 25 + 'px');
                divTooltip.style('display', 'inline-block');
                if (_this.preparedSeries[0].values[index]) {
                    divTooltip.text(_this.preparedSeries[0].values[index].label.join(', '));
                }
            })
                .on('mouseout', function () {
                __WEBPACK_IMPORTED_MODULE_7_d3__["select"]('.toolTip').remove();
            });
        };
        var this_1 = this;
        for (var j = 0; j < this.rowsCount; j++) {
            _loop_1(j);
        }
        var maxXAbs = Math.max(1, Math.abs(xMin), Math.abs(xMax));
        var xFormatPrecision = __WEBPACK_IMPORTED_MODULE_7_d3__["precisionPrefix"]((xMax - xMin) / 10, maxXAbs);
        var xFormat = __WEBPACK_IMPORTED_MODULE_7_d3__["formatPrefix"]("." + xFormatPrecision, maxXAbs);
        var xAxis = this.chartArea.select('g.x-axis');
        var xLine = __WEBPACK_IMPORTED_MODULE_7_d3__["axisBottom"](this.xScale).tickFormat(xFormat).ticks(10);
        var xLineDom = xAxis.size()
            ? xAxis
            : this.chartArea.append('g').attr('class', 'x-axis');
        xAxis.size()
            ? xLineDom.call(xLine).transition().duration(500).attr('transform', 'translate(0, ' + this.height + ')')
            : xLineDom.call(xLine).attr('transform', 'translate(0, ' + this.height + ')');
        var xAxisColumn = this.preparedSeries[0].column;
        this.chartArea.append('text')
            .attr('class', 'axis-label')
            .attr('text-anchor', 'middle') // this makes it easy to centre the text as the transform is applied to the anchor
            .attr('transform', "translate(" + (this.width / 2) + ", " + (this.height + this.margin.bottom - 5) + ")") // centre below axis
            .text(this.options.xAxisTitle || this.config.metrics[0].aggregator + "(" + (xAxisColumn.displayName || xAxisColumn.name) + ")")
            .each(this._trimTextWrap(this.width));
        var maxYAbs = Math.max(1, Math.abs(yMin), Math.abs(yMax));
        var yFormatPrecision = __WEBPACK_IMPORTED_MODULE_7_d3__["precisionPrefix"]((yMax - yMin) / 10, maxYAbs);
        var yFormat = __WEBPACK_IMPORTED_MODULE_7_d3__["formatPrefix"]("." + yFormatPrecision, maxYAbs);
        var yAxis = this.chartArea.select('g.y-axis');
        var yLine = __WEBPACK_IMPORTED_MODULE_7_d3__["axisLeft"](this.yScale).tickFormat(yFormat).ticks(10);
        var yLineDom = yAxis.size()
            ? yAxis
            : this.chartArea.append('g').attr('class', 'y-axis');
        yAxis.size()
            ? yLineDom.call(yLine).transition().duration(500).attr('transform', 'translate(0, 0)')
            : yLineDom.call(yLine).attr('transform', 'translate(0, 0)');
        var yAxisColumn = this.preparedSeries[1].column;
        this.chartArea.append('text')
            .attr('class', 'axis-label')
            .attr('text-anchor', 'middle') // this makes it easy to centre the text as the transform is applied to the anchor
            .attr('transform', "translate(0, -10)") // on top of left axis
            .text(this.options.yAxisTitle || this.config.metrics[1].aggregator + "(" + (yAxisColumn.displayName || yAxisColumn.name) + ")")
            .each(this._trimTextWrap(this.margin.left * 2));
        this.drawCenterLines(yMin < 0 && yMax > 0, xMin < 0 && xMax > 0);
        if (this.preparedSeries.length > 2) {
            this.drawGradientLegend(colourPct, valueMin, valueMax);
        }
        else {
            this.removeGradientLegend();
        }
        // Titles
        this.svg.selectAll('text.titles').remove();
        // Title
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 15)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '16px')
            .style('text-decoration', 'underline')
            .text(this.options.title);
        // SubTitle
        this.svg.append('text')
            .attr('x', (this.svgWidth / 2))
            .attr('y', 30)
            .attr('text-anchor', 'middle')
            .attr('class', 'titles')
            .style('font-size', '10px')
            .text(this.options.subtitle);
    };
    ScatterPlotChartComponent.prototype.drawCenterLines = function (xCenterLine, yCenterLine) {
        var centerXAxis = this.chartArea.select('g.x-center-line');
        if (xCenterLine) {
            var center = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleLinear"]()
                .rangeRound([0, this.width]);
            var centerLine = __WEBPACK_IMPORTED_MODULE_7_d3__["axisTop"](center).ticks(0);
            var line = centerXAxis.size()
                ? centerXAxis
                : this.chartArea.append('g').attr('class', 'x-center-line');
            if (!centerXAxis.size()) {
                line.call(centerLine).attr('transform', 'translate(0,' + this.height + ')');
            }
            line.call(centerLine).transition().duration(500).attr('transform', 'translate(0,' + this.yScale(0) + ')');
        }
        else if (centerXAxis.size()) {
            centerXAxis.remove();
        }
        var centerYAxis = this.chartArea.select('g.y-center-line');
        if (yCenterLine) {
            var center = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleLinear"]()
                .rangeRound([this.height, 0]);
            var centerLine = __WEBPACK_IMPORTED_MODULE_7_d3__["axisRight"](center).ticks(0);
            var line = centerYAxis.size()
                ? centerYAxis
                : this.chartArea.append('g').attr('class', 'y-center-line');
            if (!centerYAxis.size()) {
                line.call(centerLine).attr('transform', 'translate(' + this.width + ', 0)');
            }
            line.call(centerLine).transition().duration(500).attr('transform', 'translate(' + this.xScale(0) + ', 0)');
        }
        else if (centerYAxis.size()) {
            centerYAxis.remove();
        }
    };
    ScatterPlotChartComponent.prototype.drawGradientLegend = function (colourPct, valueMin, valueMax) {
        // add the legend now
        var legendFullHeight = this.height;
        var legendFullWidth = LEGEND_WIDTH;
        var legendMargin = { top: 20, bottom: 20, left: 5, right: 20 };
        // use same margins as main plot
        var legendWidth = legendFullWidth - legendMargin.left - legendMargin.right;
        var legendHeight = legendFullHeight - legendMargin.top - legendMargin.bottom;
        this.svg.select('g.gradient-legend').remove();
        this.legend = this.svg
            .append('g')
            .attr('class', 'gradient-legend')
            .attr('width', legendFullWidth)
            .attr('height', legendFullHeight)
            .attr('transform', 'translate(' + (this.svgWidth - legendMargin.left - legendFullWidth) + ',' +
            legendMargin.top + ')');
        // clear current legend
        this.legend.selectAll('*').remove();
        var colorColumn = this.preparedSeries[2].column;
        this.legend.append('text')
            .attr('class', 'axis-label')
            .attr('text-anchor', 'middle') // this makes it easy to centre the text as the transform is applied to the anchor
            .attr('transform', "translate(" + legendWidth / 2 + ", -10)") // on top of legend
            .text(this.options.yAxisTitle || this.config.metrics[1].aggregator + "(" + (colorColumn.displayName || colorColumn.name) + ")")
            .each(this._trimTextWrap(legendFullWidth));
        // append gradient bar
        var gradient = this.legend.append('defs')
            .append('linearGradient')
            .attr('id', 'gradient')
            .attr('x1', '0%') // bottom
            .attr('y1', '100%')
            .attr('x2', '0%') // to top
            .attr('y2', '0%')
            .attr('spreadMethod', 'pad');
        colourPct.forEach(function (d) {
            gradient.append('stop')
                .attr('offset', d[0])
                .attr('stop-color', d[1])
                .attr('stop-opacity', 1);
        });
        this.legend.append('rect')
            .attr('x1', 0)
            .attr('y1', 0)
            .attr('width', legendWidth)
            .attr('height', legendHeight)
            .style('fill', 'url(#gradient)');
        // create a scale and axis for the legend
        var legendScale = __WEBPACK_IMPORTED_MODULE_7_d3__["scaleLinear"]()
            .domain([valueMin, valueMax])
            .range([legendHeight, 0]);
        var legendAxis = __WEBPACK_IMPORTED_MODULE_7_d3__["axisRight"](legendScale)
            .ticks(10);
        this.legend.append('g')
            .attr('class', 'legend axis')
            .attr('transform', 'translate(' + legendWidth + ', 0)')
            .call(legendAxis);
    };
    ScatterPlotChartComponent.prototype.removeGradientLegend = function () {
        this.svg.select('g.gradient-legend').remove();
    };
    ScatterPlotChartComponent.linspace = function (start, end, n) {
        var out = [];
        var delta = (end - start) / (n - 1);
        var i = 0;
        while (i < (n - 1)) {
            out.push(start + (i * delta));
            i++;
        }
        out.push(end);
        return out;
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], ScatterPlotChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], ScatterPlotChartComponent.prototype, "styleHeight", void 0);
    ScatterPlotChartComponent = ScatterPlotChartComponent_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'scatter-plot-chart',
            template: "\n    <div class=\"flex-rubber\">\n      <div class=\"svg\" style=\"width: 100%; height: 100%;\">\n        <svg #canvas width=\"960\" height=\"500\"></svg>\n      </div>\n    </div>\n    <div #filters [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config.chartFilters?.length + config.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_2__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_8__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_6__services_event_service__["a" /* EventService */]])
    ], ScatterPlotChartComponent);
    return ScatterPlotChartComponent;
    var ScatterPlotChartComponent_1;
}(__WEBPACK_IMPORTED_MODULE_4__d3_chart_component__["a" /* D3Chart */]));



/***/ }),

/***/ "../../../../../src/app/visualize/charts/table-chart.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TableChartComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__chart_abstract__ = __webpack_require__("../../../../../src/app/visualize/chart.abstract.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_d3__ = __webpack_require__("../../../../d3/index.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











var TableChartComponent = (function (_super) {
    __extends(TableChartComponent, _super);
    function TableChartComponent(tables, models, bus, dataFetch, el, events) {
        var _this = _super.call(this, tables, models, bus, dataFetch, el, events) || this;
        _this.classes = 'row-flex';
        _this.styleHeight = '100%';
        _this.defaultOptions = __WEBPACK_IMPORTED_MODULE_6__chart_interfaces__["a" /* DashboardCharts */].defaultChartOptions;
        _this._decimalPipe = new __WEBPACK_IMPORTED_MODULE_7__angular_common__["d" /* DecimalPipe */]('en-US');
        return _this;
    }
    TableChartComponent.prototype.visualizeData = function (data) {
        var _this = this;
        this._div = __WEBPACK_IMPORTED_MODULE_10_d3__["select"](this.selector.nativeElement);
        var oldTable = this._div.selectAll('table.table').data([true]);
        if (!data || !data.data || !data.data[0]) {
            oldTable.remove();
            return;
        }
        var table = oldTable.enter()
            .append('table')
            .attr('class', 'table')
            .merge(oldTable);
        var oldHeader = table.selectAll('thead').data([true]);
        var header = oldHeader.enter()
            .append('thead')
            .merge(oldHeader);
        var columns = data.columns.map(function (column) {
            var aggregatedColumn = _this.config.metrics.find(function (_) { return _.columnName === column.name; });
            if (aggregatedColumn && aggregatedColumn.aggregator) {
                return aggregatedColumn.aggregator + "(" + column.displayName + ")";
            }
            return column.displayName;
        });
        var oldHeaderColumns = header.selectAll('th').data(columns);
        oldHeaderColumns.exit().remove();
        oldHeaderColumns.enter()
            .append('th')
            .merge(oldHeaderColumns)
            .text(function (d) { return d; });
        var oldBody = table.selectAll('tbody').data([true]);
        var body = oldBody.enter()
            .append('tbody')
            .merge(oldBody);
        var oldRows = body.selectAll('tr').data(data.data);
        oldRows.exit().remove();
        var rows = oldRows.enter()
            .append('tr')
            .merge(oldRows);
        rows.order();
        var oldCols = rows.selectAll('td').data(function (d) { return d; });
        oldCols.exit().remove();
        oldCols.enter()
            .append('td')
            .merge(oldCols)
            .order()
            .text(function (d, i) {
            switch (data.columns[i].dataType) {
                case __WEBPACK_IMPORTED_MODULE_8__config__["a" /* default */].table.column.dataType.values.DOUBLE:
                    return _this._formatFloat(d);
                default:
                    return d;
            }
        });
    };
    TableChartComponent.prototype._formatFloat = function (value) {
        return this._decimalPipe.transform(value, '1.0-3');
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('class'),
        __metadata("design:type", Object)
    ], TableChartComponent.prototype, "classes", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["x" /* HostBinding */])('style.height'),
        __metadata("design:type", Object)
    ], TableChartComponent.prototype, "styleHeight", void 0);
    TableChartComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'visualize-chart-table',
            template: "\n    <div class=\"flex-rubber\">\n      <div #canvas class=\"table-scroll\" style=\"width: 100%; height: 100%; overflow-y: auto;\">\n      </div>\n    </div>\n    <div #filterEl [hidden]=\"!showFilters\" class=\"chart-filters flex-static\"\n      *ngIf=\"(config.chartFilters?.length + config.chartGenerators?.length)\"\n      style=\"position: relative; width: 25%; padding-left: 5px; border-left: 1px solid #C0C0C0;\"\n    >\n      <app-spinner [visibility]=\"!_metaLoader.loaded\"></app-spinner>\n      <ng-template [ngIf]=\"_metaLoader.loaded\">\n        <chart-filter *ngFor=\"let columnName of config.chartFilters\"\n          [value]=\"filters[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setFilter($event)\"></chart-filter>\n        <chart-generator *ngFor=\"let columnName of config.chartGenerators\"\n          [value]=\"generators[columnName]\"\n          [stats]=\"stats\"\n          [table]=\"table\"\n          [columnName]=\"columnName\"\n          (valueChange)=\"setGenerator($event)\"></chart-generator>\n      </ng-template>\n    </div>\n  ",
            styles: ["\n    @media (min-width: 992px) {\n      .chart-filters {\n        width: 25%;\n        padding-left: 5px;\n        border-left: 1px solid #C0C0C0;\n      }\n    }\n  "],
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_table_service__["a" /* TableService */], __WEBPACK_IMPORTED_MODULE_2__services_model_service__["a" /* ModelService */], __WEBPACK_IMPORTED_MODULE_3__cross_filter_bus__["a" /* CrossFilterBus */], __WEBPACK_IMPORTED_MODULE_4__services_data_fetching_service__["a" /* DatafetchingService */], __WEBPACK_IMPORTED_MODULE_0__angular_core__["t" /* ElementRef */], __WEBPACK_IMPORTED_MODULE_5__services_event_service__["a" /* EventService */]])
    ], TableChartComponent);
    return TableChartComponent;
}(__WEBPACK_IMPORTED_MODULE_9__chart_abstract__["a" /* ChartAbstract */]));



/***/ }),

/***/ "../../../../../src/app/visualize/cross-filter-bus.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CrossFilterBus; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_rxjs_BehaviorSubject__ = __webpack_require__("../../../../rxjs/_esm5/BehaviorSubject.js");
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var CrossFilterBus = (function (_super) {
    __extends(CrossFilterBus, _super);
    function CrossFilterBus() {
        return _super.call(this, []) || this;
    }
    Object.defineProperty(CrossFilterBus.prototype, "crossFilters", {
        get: function () {
            return this._crossFilters;
        },
        set: function (value) {
            var _this = this;
            this._crossFilters = value;
            var items = this.value.filter(function (item) {
                return _this._crossFilters.findIndex(function (_) { return _.tableId === item.tableId && _.columnName === item.filter.columnName; }) >= 0;
            });
            _super.prototype.next.call(this, items);
        },
        enumerable: true,
        configurable: true
    });
    CrossFilterBus.prototype.push = function (item) {
        if (this._crossFilters.find(function (_) { return _.tableId === item.tableId && _.columnName === item.filter.columnName; })) {
            var items = this.value.filter(function (_) {
                return _.tableId !== item.tableId || _.filter.columnName !== item.filter.columnName;
            });
            items.push(item);
            _super.prototype.next.call(this, items);
        }
    };
    return CrossFilterBus;
}(__WEBPACK_IMPORTED_MODULE_0_rxjs_BehaviorSubject__["a" /* BehaviorSubject */]));



/***/ }),

/***/ "../../../../../src/app/visualize/dashboard-edit-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardEditContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_components_library_selector_component__ = __webpack_require__("../../../../../src/app/core/components/library-selector.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var DRAG_THRESHOLD = 5;
var DashboardEditContextComponent = (function () {
    function DashboardEditContextComponent(events, route, router, dashboards) {
        var _this = this;
        this.events = events;
        this.route = route;
        this.router = router;
        this.dashboards = dashboards;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.menuOpen = [true, true];
        this.dashboardList = [];
        this._dashboardsLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.dashboards.list(); });
        this._dashboardsLoader.subscribe(function (data) {
            _this.dashboardList = data.data.filter(function (_) { return _; }).map(function (dashboard) {
                return { id: dashboard.id, text: dashboard.name };
            });
        });
    }
    DashboardEditContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.data.forEach(function (data) {
            data.subject.subscribe(function (state) {
                _this.state = state;
            });
        });
        /*this.eventsSubscription = this.events.subscribe((event: IEvent) => {
          if (event.type === 'UPDATE_MODEL_LIST') {
            this._modelsLoader.load();
          }
          if (event.type === 'UPDATE_TABLE_LIST') {
            this._tablesLoader.load();
          }
        });*/
        this._dashboardsLoader.load();
    };
    DashboardEditContextComponent.prototype.ngOnDestroy = function () {
        this.eventsSubscription && this.eventsSubscription.unsubscribe();
    };
    DashboardEditContextComponent.prototype.onAssetSelect = function ($event) {
        var inputs = this.state.form.value.inputs || [];
        if (inputs.findIndex(function (asset) { return asset.id === $event.id && asset.type === $event.entity; }) < 0) {
            inputs.push({ id: $event.id, type: $event.entity });
            this.state.form.controls.inputs.setValue(inputs);
        }
    };
    DashboardEditContextComponent.prototype.onInputMouseDown = function (event, asset) {
        __WEBPACK_IMPORTED_MODULE_5__utils_misc__["a" /* MiscUtils */].cancelEvent(event);
        this._inputMouseDownEvent = { event: event, asset: asset };
    };
    DashboardEditContextComponent.prototype.onInputAddClick = function (input) {
        var _this = this;
        this.state.navigateBack();
        var pendingMessage = {
            data: this.state.generateWidget(input),
        };
        window.setTimeout(function () {
            _this.events.emit('ADD_CHART', pendingMessage);
        });
    };
    DashboardEditContextComponent.prototype.onInputRemoveClick = function (input) {
        this.state.removeInput(input);
    };
    DashboardEditContextComponent.prototype.onInputMouseUp = function () {
        __WEBPACK_IMPORTED_MODULE_5__utils_misc__["a" /* MiscUtils */].cancelEvent();
        if (this._inputMouseDownEvent) {
            this.state.setPreviewInput(this._inputMouseDownEvent.asset);
        }
        this._inputMouseDownEvent = null;
    };
    DashboardEditContextComponent.prototype.onInputMouseMove = function (event) {
        var _this = this;
        if (this._inputMouseDownEvent) {
            var dx = Math.abs(event.clientX - this._inputMouseDownEvent.event.clientX);
            var dy = Math.abs(event.clientY - this._inputMouseDownEvent.event.clientY);
            if (dx >= DRAG_THRESHOLD || dy >= DRAG_THRESHOLD) {
                this.state.navigateBack();
                var pendingMessage_1 = {
                    event: event,
                    data: this.state.generateWidget(this._inputMouseDownEvent.asset),
                };
                this._inputMouseDownEvent = null;
                window.setTimeout(function () {
                    _this.events.emit('ADD_DETACHED_CHART', pendingMessage_1);
                });
            }
        }
    };
    DashboardEditContextComponent.prototype.switchDashboard = function (dashboardId) {
        this.state.navigateBack();
        if (dashboardId) {
            this.router.navigate(['/desk/visualize/', dashboardId, 'edit']);
        }
        else {
            this.router.navigate(['/desk/visualize/create']);
        }
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('selector'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__core_components_library_selector_component__["a" /* LibrarySelectorComponent */])
    ], DashboardEditContextComponent.prototype, "selector", void 0);
    DashboardEditContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'visualize-dashboard-edit-context',
            template: "\n    <library-selector\n      #selector\n      [hidden]=\"true\"\n      [inputLabel]=\"'Add Table/Model To Dashboard'\"\n      [value]=\"null\"\n      (valueChange)=\"onAssetSelect($event)\"\n      [available]=\"[config.asset.values.TABLE, config.asset.values.MODEL]\"></library-selector>\n    <div class=\"group\">\n      <button type=\"button\"\n        class=\"btn btn-primary btn-alt btn-block\"\n        [routerLink]=\"['/desk', 'visualize', 'create']\"\n      >Create New Dashboard\n      </button>\n    </div>\n    <div style=\"min-height:40px; position: relative\">\n      <app-spinner [visibility]=\"!dashboardList\" [height]=\"40\"></app-spinner>\n      <app-select *ngIf=\"dashboardList.length\"\n        [placeholder]=\"'- Select Dashboard -'\"\n        [value]=\"state?.dashboard?.id\"\n        (valueChange)=\"switchDashboard($event)\"\n        [options]=\"dashboardList\"></app-select>\n    </div>\n    <ng-template [ngIf]=\"state\">\n      <app-spinner [visibility]=\"!state.ready\"></app-spinner>\n      <div *ngIf=\"state.ready\" class=\"menu\">\n        <div class=\"glued-nav\" [ngClass]=\"{'shifted': !!state.widgetForm || !!state.previewInput}\">\n          <ul class=\"nav nav-stacked glued\">\n            <li class=\"has-submenu\" (mousemove)=\"onInputMouseMove($event)\"\n              [ngClass]=\"{'open': menuOpen[0]}\">\n              <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n                <i class=\"glyphicon glyphicon-th-list\"></i>\n                <span>Inputs</span>\n              </a>\n              <ul class=\"nav nav-pills submenu with-dropdown\">\n                <li *ngFor=\"let item of state.tableList\" [ngClass]=\"{'active': item && state.isCurrentTable(item.id)}\">\n                  <span class=\"dropdown pull-right\">\n                    <a (click)=\"onInputAddClick({id: item.id,type:config.asset.values.TABLE })\">\n                      <i class=\"glyphicon glyphicon-plus\"></i>\n                    </a>\n                    <a (click)=\"onInputRemoveClick({id: item.id,type:config.asset.values.TABLE })\">\n                      <i class=\"glyphicon glyphicon-trash\"></i>\n                    </a>\n                  </span>\n                  <a class=\"dot-iconapp iconapp-tables\"\n                    (mousedown)=\"onInputMouseDown($event, {id: item.id, type: config.asset.values.TABLE})\"\n                    (mouseup)=\"onInputMouseUp()\"\n                    [title]=\"item.name\">\n                    {{item.name}}\n                  </a>\n                </li>\n                <li *ngFor=\"let item of state.modelList\" [ngClass]=\"{'active': item && state.isCurrentModel(item.id)}\">\n                  <span class=\"dropdown pull-right\">\n                    <a (click)=\"onInputAddClick({id: item.id,type:config.asset.values.MODEL })\">\n                      <i class=\"glyphicon glyphicon-plus\"></i>\n                    </a>\n                    <a (click)=\"onInputRemoveClick({id: item.id,type:config.asset.values.MODEL })\">\n                      <i class=\"glyphicon glyphicon-trash\"></i>\n                    </a>\n                  </span>\n                  <a class=\"dot-iconapp iconapp-models\"\n                    (mousedown)=\"onInputMouseDown($event, {id: item.id, type: config.asset.values.MODEL})\"\n                    (mouseup)=\"onInputMouseUp()\"\n                    [title]=\"item.name\">\n                    {{item.name}}\n                  </a>\n                </li>\n                <li *ngIf=\"!state.modelList.length && !state.tableList.length\"><a>No inputs</a></li>\n                <li style=\"padding: 3px 15px\">\n                  <button type=\"button\" class=\"btn btn-primary btn-alt btn-block\" (click)=\"selector.show()\">\n                    Add Table/Model\n                  </button>\n                </li>\n              </ul>\n            </li>\n            <li *mocksOnly=\"true\" class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[1]}\">\n              <a (click)=\"menuOpen[1] = !menuOpen[1]\">\n                <i class=\"iconapp iconapp-visuals\"></i>\n                <span>Charts</span>\n              </a>\n              <ul class=\"nav nav-pills submenu with-dropdown\">\n                <li *ngFor=\"let item of state.form.value.widgets;let i = index\">\n                  <span class=\"dropdown pull-right\">\n                      <i class=\"glyphicon glyphicon-edit\"></i>\n                  </span>\n                  <a (click)=\"state.selectWidget(i)\" [title]=\"item.name\">\n                    {{item.name}}\n                  </a>\n                </li>\n                <li *ngIf=\"!state.form.value.widgets || !state.form.value.widgets.length\"><a>No charts</a></li>\n              </ul>\n            </li>\n          </ul>\n          <chart-edit-context *ngIf=\"state.widgetForm\" [state]=\"state\"></chart-edit-context>\n          <ul *ngIf=\"state.previewInput\" class=\"nav nav-stacked glued\">\n            <li class=\"open\">\n              <a class=\"brand-background\">\n                <i class=\"glyphicon glyphicon-menu-left\"\n                  (click)=\"state.navigateBack()\" title=\"Back to Dashboard Layout\"></i>\n                <span>{{state.getPreviewAsset()?.name}}</span>\n                <i class=\"iconapp\"\n                  [ngClass]=\"{'iconapp-tables': state.previewInput.type === config.asset.values.TABLE, 'iconapp-models': state.previewInput.type === config.asset.values.MODEL}\"\n                ></i>\n              </a>\n            </li>\n          </ul>\n          <div class=\"clear\"></div>\n        </div>\n      </div>\n    </ng-template>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__services_event_service__["a" /* EventService */],
            __WEBPACK_IMPORTED_MODULE_4__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_4__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_6__services_dashboard_service__["a" /* DashboardService */]])
    ], DashboardEditContextComponent);
    return DashboardEditContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/dashboard-edit-layout.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardEditLayoutComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__charts_dock_panel_component__ = __webpack_require__("../../../../../src/app/visualize/charts-dock-panel.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__utils_activity_observer__ = __webpack_require__("../../../../../src/app/utils/activity-observer.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var DashboardEditLayoutComponent = (function () {
    function DashboardEditLayoutComponent(events, dashboards, router) {
        this.events = events;
        this.dashboards = dashboards;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this._savingObserver = new __WEBPACK_IMPORTED_MODULE_8__utils_activity_observer__["a" /* ActivityObserver */]();
        this._pendingWidget = null;
    }
    DashboardEditLayoutComponent.prototype.saveDashboard = function () {
        var _this = this;
        var requestData = Object.assign({}, this.state.form.value, {
            crossFilter: false,
        });
        // save only links to those inputs we really use
        requestData.inputs = requestData.widgets.map(function (_) { return _.input; }).reduce(function (acc, input) {
            if (!acc.find(function (_) { return _.id === input.id && _.type === input.type; })) {
                acc.push(input);
            }
            return acc;
        }, []);
        var observable = (this.state.dashboard && 'id' in this.state.dashboard)
            ? this.dashboards.update(this.state.dashboard.id, requestData)
            : this.dashboards.create(requestData);
        this._savingObserver.observe(observable).subscribe(function (dashboard) {
            _this.router.navigate(['/desk/visualize/', dashboard.id]);
        });
    };
    DashboardEditLayoutComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.eventSubscription = this.events.subscribe(function (event) {
            if (event.type === 'ADD_CHART') {
                _this.addChart(event.data.data);
            }
            if (event.type === 'ADD_DETACHED_CHART') {
                _this.addDetachedChart(event.data.event, event.data.data);
            }
            if (event.type === 'CHART_EDIT') {
                var index = _this.state.getWidgetIndexByGuid(event.data);
                if (index > -1) {
                    _this.state.selectWidget(index);
                }
            }
        });
    };
    DashboardEditLayoutComponent.prototype.ngOnDestroy = function () {
        this.eventSubscription && this.eventSubscription.unsubscribe();
    };
    DashboardEditLayoutComponent.prototype.addChart = function (data) {
        this.layout.addComponent(data);
    };
    DashboardEditLayoutComponent.prototype.addDetachedChart = function (event, data) {
        if (this._pendingWidget && !this._pendingWidget.isAttached) {
            this._pendingWidget.dispose();
        }
        this._pendingWidget = this.layout.addComponentDetached(data, event);
    };
    DashboardEditLayoutComponent.prototype.onLayoutModified = function (data) {
        var parseResult = this.parseLayout(data.main);
        if (!__WEBPACK_IMPORTED_MODULE_9_lodash__["isEqual"](this.state.form.value.widgets || [], parseResult.widgets)) {
            __WEBPACK_IMPORTED_MODULE_4__utils_misc__["a" /* MiscUtils */].fillForm(this.state.form.controls.widgets, parseResult.widgets);
        }
        if (!__WEBPACK_IMPORTED_MODULE_9_lodash__["isEqual"](this.state.form.value.layout, parseResult.layout)) {
            this.state.form.controls.layout.setValue(parseResult.layout);
        }
    };
    DashboardEditLayoutComponent.prototype.parseLayout = function (data) {
        var widgets = [];
        var recursion = function (data) {
            if (!data) {
                return null;
            }
            if (data.type === 'split-area') {
                return {
                    type: data.type,
                    sizes: data.sizes,
                    orientation: data.orientation,
                    children: data.children.map(function (item) {
                        return recursion(item);
                    }),
                };
            }
            if (data.type === 'tab-area') {
                var component = data.widget.instance;
                var id = widgets.length;
                widgets.push(component.config);
                return {
                    type: data.type,
                    widget: id,
                };
            }
        };
        return {
            layout: recursion(data),
            widgets: widgets,
        };
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["D" /* Input */])(),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_5__dashboard_edit_state__["a" /* DashboardEditState */])
    ], DashboardEditLayoutComponent.prototype, "state", void 0);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('layout'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_2__charts_dock_panel_component__["a" /* ChartsDockComponent */])
    ], DashboardEditLayoutComponent.prototype, "layout", void 0);
    DashboardEditLayoutComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'visualize-dashboard-edit-layout',
            template: "\n    <div *ngIf=\"state\" style=\"position: relative\">\n      <div class=\"row\">\n        <div class=\"col-xs-6\">\n          <app-input [label]=\"'Dashboard Name'\" [control]=\"state.form.controls['name']\"></app-input>\n        </div>\n        <div class=\"col-xs-6\">\n          <button\n            [disabled]=\"!state.form.valid || (_savingObserver.active | async)\"\n            (click)=\"saveDashboard()\"\n            class=\"btn btn-primary\"\n          >Save</button>\n        </div>\n      </div>\n    </div>\n    <charts-dock-panel #layout\n      [adaptiveHeight]=\"{minHeight: 500, pageMargin: 15, property: 'min-height'}\"\n      [dashboard]=\"state.form.value\"\n      [editMode]=\"true\"\n      [crossFilters]=\"state.form.controls['crossFilters'].value\"\n      (onLayoutModified)=\"onLayoutModified($event)\"\n    ></charts-dock-panel>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_event_service__["a" /* EventService */], __WEBPACK_IMPORTED_MODULE_7__services_dashboard_service__["a" /* DashboardService */], __WEBPACK_IMPORTED_MODULE_6__angular_router__["c" /* Router */]])
    ], DashboardEditLayoutComponent);
    return DashboardEditLayoutComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/dashboard-edit-state.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardEditState; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return DashboardEditStateFactory; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__ = __webpack_require__("../../../../../src/app/interfaces/dashboard.interface.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__charts_chart_interfaces__ = __webpack_require__("../../../../../src/app/visualize/charts/chart.interfaces.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__utils_misc__ = __webpack_require__("../../../../../src/app/utils/misc.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__services_table_service__ = __webpack_require__("../../../../../src/app/services/table.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__services_model_service__ = __webpack_require__("../../../../../src/app/services/model.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_modal_service__ = __webpack_require__("../../../../../src/app/services/modal.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__utils_forms__ = __webpack_require__("../../../../../src/app/utils/forms.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};













var DashboardEditState = (function () {
    function DashboardEditState(tables, models, modals, dashboard) {
        var _this = this;
        this.tables = tables;
        this.models = models;
        this.modals = modals;
        this.dashboard = null;
        this.attrList = [];
        this.metrList = [];
        this._selectedWidget = null;
        this._previewInput = null;
        this._inputsCache = [];
        var widgetForm = new __WEBPACK_IMPORTED_MODULE_12__utils_forms__["b" /* AppFormGroup */]({
            input: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required),
            type: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required),
            name: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null),
            chartFilters: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            filters: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            generators: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            chartGenerators: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            metrics: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            attributes: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
            options: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](__WEBPACK_IMPORTED_MODULE_4__charts_chart_interfaces__["a" /* DashboardCharts */].defaultChartOptions),
            guid: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required),
            groups: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
        });
        widgetForm.disable();
        this.form = new __WEBPACK_IMPORTED_MODULE_12__utils_forms__["b" /* AppFormGroup */]({
            widgets: new __WEBPACK_IMPORTED_MODULE_12__utils_forms__["a" /* AppFormArray */]([widgetForm], __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].compose([__WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].minLength(1)])),
            name: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required),
            layout: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */](null, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required),
            inputs: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([], [__WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].required, __WEBPACK_IMPORTED_MODULE_0__angular_forms__["g" /* Validators */].minLength(1)]),
            crossFilters: new __WEBPACK_IMPORTED_MODULE_0__angular_forms__["b" /* FormControl */]([]),
        });
        if (dashboard) {
            this.dashboard = dashboard;
            __WEBPACK_IMPORTED_MODULE_5__utils_misc__["a" /* MiscUtils */].fillForm(this.form, __WEBPACK_IMPORTED_MODULE_11_lodash__["cloneDeep"](dashboard));
        }
        this._inputsLoader = new __WEBPACK_IMPORTED_MODULE_6__utils_reactive_loader__["a" /* ReactiveLoader */](function (assets) {
            if (!assets.length) {
                return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].of([]);
            }
            var currentAssets = _this._inputsCache.filter(function (assetInfo) {
                return !!assets.find(function (_) { return _.id === assetInfo.id && _.type === assetInfo.type; });
            });
            var missingAssets = assets.filter(function (asset) {
                return !currentAssets.find(function (_) { return _.id === asset.id && _.type === asset.type; });
            });
            if (!missingAssets.length) {
                return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].of(currentAssets);
            }
            var missingObservables = __WEBPACK_IMPORTED_MODULE_11_lodash__["chain"](missingAssets)
                .groupBy('type')
                .map(function (typeAssets, type) {
                var assetIds = typeAssets.map(function (_) { return _.id; });
                switch (type) {
                    case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                        return _this.tables.getMany(assetIds).flatMap(function (tables) {
                            return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].forkJoin.apply(__WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */], tables.map(function (table) {
                                return _this.tables.getStatistic(table.id).map(function (stats) {
                                    return {
                                        id: table.id,
                                        type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE,
                                        table: table,
                                        stats: stats.stats,
                                    };
                                });
                            }));
                        });
                    case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                        return _this.models.getMany(assetIds).flatMap(function (models) {
                            return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].forkJoin.apply(__WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */], models.map(function (model) {
                                return _this.tables.getStatistic(model.input).map(function (stats) {
                                    return {
                                        id: model.id,
                                        type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL,
                                        model: model,
                                        stats: stats.stats,
                                    };
                                });
                            }));
                        });
                }
            })
                .value();
            return __WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */].forkJoin.apply(__WEBPACK_IMPORTED_MODULE_7_rxjs_Observable__["a" /* Observable */], missingObservables).map(function (items) {
                return currentAssets.concat.apply(currentAssets, items);
            });
        });
        this._inputsLoader.subscribe(function (items) {
            _this._inputsCache = items;
        });
        this.form.controls['inputs'].valueChanges.subscribe(function (inputs) {
            _this._inputsLoader.load(inputs);
        });
        this._inputsLoader.load(this.form.controls['inputs'].value);
    }
    Object.defineProperty(DashboardEditState.prototype, "ready", {
        get: function () {
            return this._inputsLoader.loaded;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DashboardEditState.prototype, "widgetForm", {
        get: function () {
            if (this._selectedWidget !== null) {
                return this.form.controls['widgets'].controls[this._selectedWidget];
            }
            return null;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DashboardEditState.prototype, "previewInput", {
        get: function () {
            return this._previewInput;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DashboardEditState.prototype, "modelList", {
        get: function () {
            return this._inputsCache.filter(function (_) { return _.type === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL; }).map(function (_) { return _.model; });
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(DashboardEditState.prototype, "tableList", {
        get: function () {
            return this._inputsCache.filter(function (_) { return _.type === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE; }).map(function (_) { return _.table; });
        },
        enumerable: true,
        configurable: true
    });
    DashboardEditState.prototype.getWidgetAttributeColumns = function () {
        var _this = this;
        return this.attrList.filter(function (column) { return _this.widgetForm.value.attributes.includes(column.name); });
    };
    DashboardEditState.prototype.getWidgetMetricColumns = function () {
        var _this = this;
        return this.metrList.filter(function (column) { return _this.widgetForm.value.metrics.find(function (_) { return _.columnName === column.name; }); });
    };
    DashboardEditState.prototype.getPreviewAsset = function () {
        if (!this._previewInput) {
            return null;
        }
        var assetInfo = this.findInputInfo(this._previewInput);
        if (!assetInfo) {
            return null;
        }
        switch (assetInfo.type) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                return assetInfo.table;
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                return assetInfo.model;
            default:
                throw new Error('Unsupported asset as input');
        }
    };
    DashboardEditState.prototype.setPreviewInput = function (value) {
        this._selectedWidget = null;
        this._previewInput = value;
    };
    DashboardEditState.prototype.navigateBack = function () {
        this._selectedWidget = null;
        this._previewInput = null;
    };
    DashboardEditState.prototype.getWidgetIndexByGuid = function (guid) {
        return this.form.value.widgets.findIndex(function (widget) { return widget.guid === guid; });
    };
    DashboardEditState.prototype.selectWidget = function (i) {
        this._selectedWidget = i;
        this._previewInput = null;
        var widgetForm = this.widgetForm;
        if (widgetForm.value.input) {
            var inputInfo = this.findInputInfo(widgetForm.value.input);
            if (!inputInfo) {
                throw new Error('Input info not found in cache');
            }
            switch (inputInfo.type) {
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                    this.setAttributesAndMetricsFromTable(inputInfo.table);
                    break;
                case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                    this.setAttributesAndMetricsFromModel(inputInfo.model);
                    break;
                default:
                    throw new Error('Unsupported asset as input');
            }
        }
    };
    DashboardEditState.prototype.generateWidget = function (asset) {
        var inputInfo = this.findInputInfo(asset);
        if (!inputInfo) {
            throw new Error('Input info not found in cache');
        }
        switch (inputInfo.type) {
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE:
                return this.generateWidgetByTable(inputInfo.table);
            case __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL:
                return this.generateWidgetByModel(inputInfo);
            default:
                throw new Error('Unsupported asset as input');
        }
    };
    DashboardEditState.prototype.determineBestChartType = function (config) {
        switch (true) {
            case config.metrics.length === 1 && config.metrics[0].aggregator === __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardAggregationType.NO_AGGREGATE:
                return __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.ONEDSCATTER;
            case config.attributes.length >= 3 && config.metrics.length <= 2:
                return __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.SCATTER;
            case config.attributes.length === 2 && config.metrics.length >= 2 && config.metrics.length <= 3:
                return __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.SCATTER;
        }
        return __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.BAR;
    };
    DashboardEditState.prototype.setWidgetTable = function (tableId) {
        var inputInfo = this.findInputInfo({
            id: tableId,
            type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE,
        });
        if (!inputInfo) {
            throw new Error('Input info not found in cache');
        }
        this.setAttributesAndMetricsFromTable(inputInfo.table);
        this.widgetForm.patchValue(this.generateWidgetByTable(inputInfo.table));
    };
    DashboardEditState.prototype.setWidgetModel = function (modelId) {
        var inputInfo = this.findInputInfo({
            id: modelId,
            type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL,
        });
        if (!inputInfo) {
            throw new Error('Input info not found in cache');
        }
        this.setAttributesAndMetricsFromModel(inputInfo.model);
        this.widgetForm.patchValue(this.generateWidgetByModel(inputInfo));
    };
    DashboardEditState.prototype.isCurrentTable = function (tableId) {
        return this.isCurrentAsset({ id: tableId, type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE });
    };
    DashboardEditState.prototype.isCurrentModel = function (modelId) {
        return this.isCurrentAsset({ id: modelId, type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL });
    };
    DashboardEditState.prototype.isCurrentAsset = function (asset) {
        if (this._previewInput) {
            return __WEBPACK_IMPORTED_MODULE_11_lodash__["isEqual"](this._previewInput, asset);
        }
        if (this.widgetForm && this.widgetForm.value.input) {
            return __WEBPACK_IMPORTED_MODULE_11_lodash__["isEqual"](this.widgetForm.value.input, asset);
        }
        return false;
    };
    DashboardEditState.prototype.getCurrentInput = function () {
        if (this.widgetForm && this.widgetForm.value.input) {
            return this.findInputInfo(this.widgetForm.value.input);
        }
        return null;
    };
    DashboardEditState.prototype.removeInput = function (input) {
        this.navigateBack();
        var value = this.form.value;
        var inputIsUsed = __WEBPACK_IMPORTED_MODULE_11_lodash__["some"](value.widgets || [], function (_) {
            return _.input.id === input.id && _.input.type === input.type;
        });
        if (inputIsUsed) {
            this.modals.alert('First remove all charts using this input');
            return;
        }
        var newInputs = value.inputs.filter(function (_) {
            return _.id !== input.id || _.type !== input.type;
        });
        this.form.controls['inputs'].setValue(newInputs);
    };
    DashboardEditState.prototype.setMetric = function (columnName, aggregator) {
        var metrics = this.widgetForm.value.metrics.filter(function (_) { return _.columnName !== columnName; });
        if (aggregator) {
            metrics.push({ columnName: columnName, aggregator: aggregator });
        }
        this.widgetForm.controls.metrics.setValue(metrics);
        // fix chart type to best one
        var bestType = this.determineBestChartType(this.widgetForm.value);
        this.widgetForm.controls['type'].setValue(bestType);
    };
    DashboardEditState.prototype.toggleAttribute = function (attrName, checked) {
        if (!this.widgetForm) {
            return;
        }
        var attributes = this.widgetForm.value.attributes.filter(function (_) { return _ !== attrName; });
        if (checked) {
            attributes.push(attrName);
        }
        this.widgetForm.controls.attributes.setValue(attributes);
        // fix chart type to best one
        var bestType = this.determineBestChartType(this.widgetForm.value);
        this.widgetForm.controls['type'].setValue(bestType);
    };
    DashboardEditState.prototype.findInputInfo = function (input) {
        return this._inputsCache.find(function (_) {
            return _.id === input.id && _.type === input.type;
        });
    };
    DashboardEditState.prototype.generateWidgetByTable = function (table) {
        //const attributes = table.columns.filter(column => column.columnType === config.table.column.columnType.values.ATTRIBUTE);
        //const metrics = table.columns.filter(column => column.columnType === config.table.column.columnType.values.METRIC);
        return {
            type: __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.BAR,
            name: this._uniqueWidgetName(table.name),
            input: { id: table.id, type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.TABLE },
            metrics: [],
            attributes: [],
            filters: [],
            generators: [],
            chartGenerators: [],
            chartFilters: [],
        };
    };
    DashboardEditState.prototype.generateWidgetByModel = function (input) {
        var generators = input.model.predictorColumns.map(function (column) {
            var isCategorical = column.variableType !== __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.variableType.values.CONTINUOUS;
            var stats = input.stats.find(function (_) { return _.columnName === column.name; });
            if (isCategorical) {
                return {
                    columnName: column.name,
                    type: 'categorical',
                    values: ('mostFrequentValue' in stats) ? [stats.mostFrequentValue] : [],
                };
            }
            else {
                var min = stats.min, max = stats.max;
                return {
                    columnName: column.name,
                    type: 'continuous',
                    min: min,
                    max: max,
                    steps: 1,
                };
            }
        });
        return {
            type: __WEBPACK_IMPORTED_MODULE_2__interfaces_dashboard_interface__["a" /* IDashboard */].DashboardChartType.BAR,
            name: this._uniqueWidgetName(input.model.name),
            input: { id: input.model.id, type: __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].asset.values.MODEL },
            metrics: [],
            attributes: [],
            filters: [],
            generators: generators,
            chartGenerators: [],
            chartFilters: [],
        };
    };
    DashboardEditState.prototype.setAttributesAndMetricsFromTable = function (table) {
        this.attrList = table.columns.filter(function (column) { return column.columnType === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.columnType.values.ATTRIBUTE; });
        this.metrList = table.columns.filter(function (column) { return column.columnType === __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */].table.column.columnType.values.METRIC; });
    };
    DashboardEditState.prototype.setAttributesAndMetricsFromModel = function (model) {
        this.attrList = model.predictorColumns;
        this.metrList = [model.responseColumn];
    };
    DashboardEditState.prototype._uniqueWidgetName = function (desiredName) {
        var currentWidgetNames = (this.form.value.widgets || []).map(function (_) { return _.name; });
        var seqId = 0;
        var uniqueName = desiredName;
        while (currentWidgetNames.find(function (_) { return _ === uniqueName; })) {
            seqId++;
            uniqueName = desiredName + " #" + seqId;
        }
        return uniqueName;
    };
    return DashboardEditState;
}());

var DashboardEditStateFactory = (function () {
    function DashboardEditStateFactory(tables, models, modals) {
        this.tables = tables;
        this.models = models;
        this.modals = modals;
    }
    DashboardEditStateFactory.prototype.createInstance = function (dashboard) {
        return new DashboardEditState(this.tables, this.models, this.modals, dashboard);
    };
    DashboardEditStateFactory = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_8__services_table_service__["a" /* TableService */],
            __WEBPACK_IMPORTED_MODULE_9__services_model_service__["a" /* ModelService */],
            __WEBPACK_IMPORTED_MODULE_10__services_modal_service__["a" /* ModalService */]])
    ], DashboardEditStateFactory);
    return DashboardEditStateFactory;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/dashboard-edit.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardEditComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_layout_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var DashboardEditComponent = (function () {
    function DashboardEditComponent(route, router, dashboards, stateFactory) {
        this.route = route;
        this.router = router;
        this.dashboards = dashboards;
        this.stateFactory = stateFactory;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
    }
    DashboardEditComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.data.forEach(function (data) {
            _this.bridge = data.subject;
        });
        this.route.params.forEach(function (params) {
            if (params['dashboardId']) {
                _this.dashboards.get(params['dashboardId']).subscribe(function (data) {
                    _this.bridge.next(_this.state = _this.stateFactory.createInstance(data));
                });
            }
            else {
                _this.bridge.next(_this.state = _this.stateFactory.createInstance());
            }
        });
    };
    DashboardEditComponent.prototype._onDashboardDeleted = function () {
        this.router.navigate(['/desk', 'visualize']);
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["_11" /* ViewChild */])('layoutEdit'),
        __metadata("design:type", __WEBPACK_IMPORTED_MODULE_3__dashboard_edit_layout_component__["a" /* DashboardEditLayoutComponent */])
    ], DashboardEditComponent.prototype, "layoutEdit", void 0);
    DashboardEditComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'visualize-dashboard-edit',
            template: "\n    <asset-operations [type]=\"config.asset.values.DASHBOARD\" [selectedItems]=\"[state?.dashboard]\"\n      (onDelete)=\"_onDashboardDeleted()\">\n      <h2 style=\"padding: 0\" *ngIf=\"state\" [ngSwitch]=\"true\">\n        <ng-template [ngSwitchCase]=\"!!state.widgetForm || !!state.previewInput\">\n          <a (click)=\"state.navigateBack()\">{{state.form.value.name || '{New Dashboard}'}}</a>\n        </ng-template>\n        <ng-template ngSwitchDefault>\n          {{state.form.value.name || '{New Dashboard}'}}\n        </ng-template>\n\n        <ng-template [ngIf]=\"!!state.widgetForm\">\n          / {{state.widgetForm.controls['name'].value}}\n        </ng-template>\n        <ng-template [ngIf]=\"!!state.previewInput\">\n          / {{state.getPreviewAsset().name}} (asset)\n        </ng-template>\n      </h2>\n    </asset-operations>\n    <ng-container *ngIf=\"state\" [ngSwitch]=\"true\">\n      <chart-edit *ngSwitchCase=\"!!state.widgetForm\"\n        [state]=\"state\"\n      ></chart-edit>\n      <table-view-embed *ngSwitchCase=\"state.previewInput && state.previewInput.type === config.asset.values.TABLE\"\n        [adaptiveHeight]=\"{minHeight: 450}\"\n        [id]=\"state.previewInput.id\"\n      ></table-view-embed>\n      <model-view-embed *ngSwitchCase=\"state.previewInput && state.previewInput.type === config.asset.values.MODEL\"\n        [adaptiveHeight]=\"{minHeight: 450}\"\n        [modelId]=\"state.previewInput.id\"\n      ></model-view-embed>\n      <visualize-dashboard-edit-layout #layoutEdit *ngSwitchDefault\n        [state]=\"state\"\n      ></visualize-dashboard-edit-layout>\n    </ng-container>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */],
            __WEBPACK_IMPORTED_MODULE_5__services_dashboard_service__["a" /* DashboardService */],
            __WEBPACK_IMPORTED_MODULE_4__dashboard_edit_state__["b" /* DashboardEditStateFactory */]])
    ], DashboardEditComponent);
    return DashboardEditComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/geodata.service.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return GeoDataService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__("../../../http/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_core_memoizeObservable__ = __webpack_require__("../../../../../src/app/core/core.memoizeObservable.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_lodash__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var us = __webpack_require__("../../../../us-atlas/us/10m.json");
var GeoDataService = (function () {
    function GeoDataService(http) {
        this.http = http;
    }
    GeoDataService.prototype.getUSMap = function () {
        return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].of(us);
    };
    GeoDataService.prototype.getCountyNames = function () {
        return this.http.get('/assets/topojson/us-county-names.json').map(function (res) { return res.json(); }).map(function (counties) {
            return __WEBPACK_IMPORTED_MODULE_4_lodash__["keyBy"](counties, function (county) {
                return county.id;
            });
        });
    };
    GeoDataService.prototype.getStateNames = function () {
        return this.http.get('/assets/topojson/us-state-names.json').map(function (res) { return res.json(); }).map(function (states) {
            return __WEBPACK_IMPORTED_MODULE_4_lodash__["keyBy"](states, function (state) {
                return state.id;
            });
        });
    };
    GeoDataService.prototype.getZIPCoords = function () {
        return this.http.get('/assets/topojson/us_common_data.json').map(function (res) { return res.json(); }).map(function (objects) {
            return __WEBPACK_IMPORTED_MODULE_4_lodash__["keyBy"](objects, function (object) {
                return object.zip_code;
            });
        });
    };
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__core_core_memoizeObservable__["a" /* MemoizeObservable */])(),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */])
    ], GeoDataService.prototype, "getUSMap", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__core_core_memoizeObservable__["a" /* MemoizeObservable */])(),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */])
    ], GeoDataService.prototype, "getCountyNames", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__core_core_memoizeObservable__["a" /* MemoizeObservable */])(),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */])
    ], GeoDataService.prototype, "getStateNames", null);
    __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__core_core_memoizeObservable__["a" /* MemoizeObservable */])(),
        __metadata("design:type", Function),
        __metadata("design:paramtypes", []),
        __metadata("design:returntype", __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */])
    ], GeoDataService.prototype, "getZIPCoords", null);
    GeoDataService = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["A" /* Injectable */])(),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* Http */]])
    ], GeoDataService);
    return GeoDataService;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/visualize-context.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VisualizeContextComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__config__ = __webpack_require__("../../../../../src/app/config.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__ = __webpack_require__("../../../../../src/app/utils/reactive-loader.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__services_event_service__ = __webpack_require__("../../../../../src/app/services/event.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





var VisualizeContextComponent = (function () {
    function VisualizeContextComponent(dashboards, events) {
        var _this = this;
        this.dashboards = dashboards;
        this.events = events;
        this.config = __WEBPACK_IMPORTED_MODULE_1__config__["a" /* default */];
        this.visualizeList = [];
        this.menuOpen = [true];
        this._dashboardsLoader = new __WEBPACK_IMPORTED_MODULE_2__utils_reactive_loader__["a" /* ReactiveLoader */](function () { return _this.dashboards.list(); });
        this._dashboardsLoader.subscribe(function (data) {
            _this.visualizeList = data.data;
        });
    }
    VisualizeContextComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.refreshDashboardList();
        this.eventSubscription = this.events.subscribe(function (event) {
            if (event.type === 'UPDATE_DASHBOARD_LIST') {
                _this.refreshDashboardList();
            }
        });
    };
    VisualizeContextComponent.prototype.refreshDashboardList = function () {
        this._dashboardsLoader.load();
    };
    VisualizeContextComponent.prototype.onDeleteDashboard = function (dashboard) {
        this.dashboards.delete(dashboard);
    };
    VisualizeContextComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-visualize-context',
            template: "\n    <div class=\"group\">\n      <button type=\"button\"\n        class=\"btn btn-primary btn-alt btn-block\"\n        [routerLink]=\"['/desk/visualize/create']\"\n      >Create New Dashboard\n      </button>\n    </div>\n    <div class=\"menu\">\n      <ul class=\"nav nav-stacked\">\n        <app-spinner [visibility]=\"!_dashboardsLoader.loaded\"></app-spinner>\n        <li *ngIf=\"_dashboardsLoader.loaded\"\n          class=\"has-submenu\" [ngClass]=\"{'open': menuOpen[0]}\">\n          <a (click)=\"menuOpen[0] = !menuOpen[0]\">\n            <i class=\"iconapp iconapp-visuals\"></i>\n            <span>Dashboards</span>\n          </a>\n          <ul class=\"nav nav-pills submenu with-dropdown\">\n            <li *ngFor=\"let item of visualizeList\" [routerLinkActive]=\"['active']\">\n              <span class=\"dropdown pull-right\" dropdown>\n                <a data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"true\">\n                  <i class=\"glyphicon glyphicon-option-horizontal\"></i>\n                </a>\n                <ul class=\"dropdown-menu\">\n                  <li [routerLinkActive]=\"['active']\">\n                    <a [routerLink]=\"['/desk', 'visualize', item.id]\"\n                      class=\"dropdown-item link\">\n                      View\n                    </a>\n                  </li>\n                  <li>\n                    <a [routerLink]=\"['/desk', 'visualize', item.id, 'edit']\"\n                      class=\"dropdown-item link\">\n                      Edit\n                    </a>\n                  </li>\n                  <li><a (click)=\"onDeleteDashboard(item)\" class=\"dropdown-item link\">Trash</a></li>\n                </ul>\n              </span>\n              <a [routerLink]=\"['/desk', 'visualize', item.id]\"\n                [title]=\"item.name\">\n                {{item.name}}\n              </a>\n              <!--<a [routerLink]=\"['/desk','visualize', item.id]\"\n              [title]=\"item.name\">\n              {{item.name}}\n            </a>-->\n            </li>\n            <li *ngIf=\"!visualizeList.length\"><a>No reports</a></li>\n          </ul>\n        </li>\n      </ul>\n    </div>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__services_dashboard_service__["a" /* DashboardService */],
            __WEBPACK_IMPORTED_MODULE_4__services_event_service__["a" /* EventService */]])
    ], VisualizeContextComponent);
    return VisualizeContextComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/visualize-view.component.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VisualizeViewComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config__ = __webpack_require__("../../../../../src/app/config.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var VisualizeViewComponent = (function () {
    function VisualizeViewComponent(dashboards, route, router) {
        this.dashboards = dashboards;
        this.route = route;
        this.router = router;
        this.config = __WEBPACK_IMPORTED_MODULE_3__config__["a" /* default */];
    }
    VisualizeViewComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.route.params.forEach(function (params) {
            _this.dashboards.get(params['dashboardId']).subscribe(function (data) {
                _this.dashboard = data;
            });
        });
    };
    VisualizeViewComponent.prototype._onDashboardDeleted = function () {
        this.router.navigate(['/desk', 'visualize']);
    };
    VisualizeViewComponent = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["n" /* Component */])({
            selector: 'app-view-visualize',
            template: "\n    <asset-operations [type]=\"config.asset.values.DASHBOARD\" [selectedItems]=\"[dashboard]\"\n      (onDelete)=\"_onDashboardDeleted()\">\n      <h2 style=\"padding: 0\">{{dashboard?.name}}</h2>\n    </asset-operations>\n    <charts-dock-panel *ngIf=\"dashboard\"\n      [adaptiveHeight]=\"{minHeight: 500, pageMargin: 15, property: 'min-height'}\"\n      [dashboard]=\"dashboard\"\n      [editMode]=\"false\"></charts-dock-panel>\n  ",
        }),
        __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_dashboard_service__["a" /* DashboardService */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["a" /* ActivatedRoute */],
            __WEBPACK_IMPORTED_MODULE_2__angular_router__["c" /* Router */]])
    ], VisualizeViewComponent);
    return VisualizeViewComponent;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/visualize.module.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return VisualizeModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__chart_factory__ = __webpack_require__("../../../../../src/app/visualize/chart.factory.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_core_module__ = __webpack_require__("../../../../../src/app/core/core.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__visualize_routes__ = __webpack_require__("../../../../../src/app/visualize/visualize.routes.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__tables_tables_module__ = __webpack_require__("../../../../../src/app/tables/tables.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__train_train_module__ = __webpack_require__("../../../../../src/app/train/train.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__cross_filter_bus__ = __webpack_require__("../../../../../src/app/visualize/cross-filter-bus.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__geodata_service__ = __webpack_require__("../../../../../src/app/visualize/geodata.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__charts_charts_module__ = __webpack_require__("../../../../../src/app/charts/charts.module.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__dashboard_edit_state__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-state.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__visualize_context_component__ = __webpack_require__("../../../../../src/app/visualize/visualize-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__dashboard_edit_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__charts_dock_panel_component__ = __webpack_require__("../../../../../src/app/visualize/charts-dock-panel.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__dashboard_edit_context_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__chart_filter_component__ = __webpack_require__("../../../../../src/app/visualize/chart-filter.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__chart_filters_modal_component__ = __webpack_require__("../../../../../src/app/visualize/chart-filters-modal.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__chart_generators_selector_component__ = __webpack_require__("../../../../../src/app/visualize/chart-generators-selector.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__chart_generator_component__ = __webpack_require__("../../../../../src/app/visualize/chart-generator.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__chart_edit_component__ = __webpack_require__("../../../../../src/app/visualize/chart-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__chart_edit_filters_component__ = __webpack_require__("../../../../../src/app/visualize/chart-edit-filters.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__chart_edit_groups_component__ = __webpack_require__("../../../../../src/app/visualize/chart-edit-groups.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__ = __webpack_require__("../../../../../src/app/visualize/chart-edit-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__dashboard_edit_layout_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-layout.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__visualize_view_component__ = __webpack_require__("../../../../../src/app/visualize/visualize-view.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__services_data_fetching_service__ = __webpack_require__("../../../../../src/app/services/data-fetching.service.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__services_dashboard_service__ = __webpack_require__("../../../../../src/app/services/dashboard.service.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};





























var VisualizeModule = (function () {
    function VisualizeModule() {
    }
    VisualizeModule_1 = VisualizeModule;
    VisualizeModule.forRoot = function () {
        return {
            ngModule: VisualizeModule_1,
            providers: [
                __WEBPACK_IMPORTED_MODULE_10__geodata_service__["a" /* GeoDataService */],
                __WEBPACK_IMPORTED_MODULE_27__services_data_fetching_service__["a" /* DatafetchingService */],
                __WEBPACK_IMPORTED_MODULE_28__services_dashboard_service__["a" /* DashboardService */],
                __WEBPACK_IMPORTED_MODULE_6__visualize_routes__["a" /* DashboardFormResolve */],
                __WEBPACK_IMPORTED_MODULE_9__cross_filter_bus__["a" /* CrossFilterBus */],
                __WEBPACK_IMPORTED_MODULE_12__dashboard_edit_state__["b" /* DashboardEditStateFactory */],
                __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__["c" /* MetricsListPipe */],
                __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__["a" /* AttributesListPipe */],
            ],
        };
    };
    VisualizeModule = VisualizeModule_1 = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_2__angular_core__["I" /* NgModule */])({
            imports: [
                __WEBPACK_IMPORTED_MODULE_4__angular_router__["d" /* RouterModule */],
                __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser__["a" /* BrowserModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["d" /* FormsModule */],
                __WEBPACK_IMPORTED_MODULE_1__angular_forms__["f" /* ReactiveFormsModule */],
                // deep cortex modules
                __WEBPACK_IMPORTED_MODULE_5__core_core_module__["a" /* CoreModule */],
                __WEBPACK_IMPORTED_MODULE_7__tables_tables_module__["a" /* TablesModule */],
                __WEBPACK_IMPORTED_MODULE_8__train_train_module__["a" /* TrainModule */],
                __WEBPACK_IMPORTED_MODULE_11__charts_charts_module__["a" /* ChartsModule */],
            ],
            declarations: [
                __WEBPACK_IMPORTED_MODULE_13__visualize_context_component__["a" /* VisualizeContextComponent */],
                __WEBPACK_IMPORTED_MODULE_14__dashboard_edit_component__["a" /* DashboardEditComponent */],
                __WEBPACK_IMPORTED_MODULE_26__visualize_view_component__["a" /* VisualizeViewComponent */],
                __WEBPACK_IMPORTED_MODULE_16__dashboard_edit_context_component__["a" /* DashboardEditContextComponent */],
                __WEBPACK_IMPORTED_MODULE_15__charts_dock_panel_component__["a" /* ChartsDockComponent */],
                __WEBPACK_IMPORTED_MODULE_17__chart_filter_component__["a" /* ChartFilterComponent */],
                __WEBPACK_IMPORTED_MODULE_18__chart_filters_modal_component__["a" /* ChartFiltersModalComponent */],
                __WEBPACK_IMPORTED_MODULE_19__chart_generators_selector_component__["a" /* ChartGeneratorsSelectorComponent */],
                __WEBPACK_IMPORTED_MODULE_20__chart_generator_component__["a" /* ChartGeneratorComponent */],
                __WEBPACK_IMPORTED_MODULE_21__chart_edit_component__["a" /* ChartEditComponent */],
                __WEBPACK_IMPORTED_MODULE_22__chart_edit_filters_component__["a" /* ChartEditFiltersComponent */],
                __WEBPACK_IMPORTED_MODULE_23__chart_edit_groups_component__["a" /* ChartEditGroupsComponent */],
                __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__["b" /* ChartEditContextComponent */],
                __WEBPACK_IMPORTED_MODULE_25__dashboard_edit_layout_component__["a" /* DashboardEditLayoutComponent */],
                __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__["c" /* MetricsListPipe */],
                __WEBPACK_IMPORTED_MODULE_24__chart_edit_context_component__["a" /* AttributesListPipe */]
            ].concat(__WEBPACK_IMPORTED_MODULE_3__chart_factory__["a" /* CHART_ENTRY_COMPONENTS */]),
            exports: [
                __WEBPACK_IMPORTED_MODULE_13__visualize_context_component__["a" /* VisualizeContextComponent */],
                __WEBPACK_IMPORTED_MODULE_14__dashboard_edit_component__["a" /* DashboardEditComponent */],
                __WEBPACK_IMPORTED_MODULE_26__visualize_view_component__["a" /* VisualizeViewComponent */],
            ],
            entryComponents: __WEBPACK_IMPORTED_MODULE_3__chart_factory__["a" /* CHART_ENTRY_COMPONENTS */].slice(),
        })
    ], VisualizeModule);
    return VisualizeModule;
    var VisualizeModule_1;
}());



/***/ }),

/***/ "../../../../../src/app/visualize/visualize.routes.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DashboardFormResolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return visualizeRoutes; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__ = __webpack_require__("../../../../../src/app/core/core.mocks-only.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_ui_components_spinner_component__ = __webpack_require__("../../../../../src/app/core-ui/components/spinner.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__visualize_context_component__ = __webpack_require__("../../../../../src/app/visualize/visualize-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__dashboard_edit_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__dashboard_edit_context_component__ = __webpack_require__("../../../../../src/app/visualize/dashboard-edit-context.component.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__visualize_view_component__ = __webpack_require__("../../../../../src/app/visualize/visualize-view.component.ts");
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};









var DashboardFormResolve = (function () {
    function DashboardFormResolve() {
    }
    DashboardFormResolve.prototype.resolve = function (route) {
        return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__["a" /* Observable */].of(new __WEBPACK_IMPORTED_MODULE_2_rxjs_ReplaySubject__["a" /* ReplaySubject */](1));
    };
    DashboardFormResolve = __decorate([
        Object(__WEBPACK_IMPORTED_MODULE_1__angular_core__["A" /* Injectable */])()
    ], DashboardFormResolve);
    return DashboardFormResolve;
}());

var visualizeRoutes = [
    {
        path: 'visualize',
        component: __WEBPACK_IMPORTED_MODULE_4__core_ui_components_spinner_component__["a" /* SpinnerComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_5__visualize_context_component__["a" /* VisualizeContextComponent */],
        //redirectTo: 'visualize/create',
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
    {
        path: 'visualize/create',
        component: __WEBPACK_IMPORTED_MODULE_6__dashboard_edit_component__["a" /* DashboardEditComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_7__dashboard_edit_context_component__["a" /* DashboardEditContextComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
        resolve: { subject: DashboardFormResolve },
    },
    {
        path: 'visualize/:dashboardId',
        component: __WEBPACK_IMPORTED_MODULE_8__visualize_view_component__["a" /* VisualizeViewComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_5__visualize_context_component__["a" /* VisualizeContextComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
    },
    {
        path: 'visualize/:dashboardId/edit',
        component: __WEBPACK_IMPORTED_MODULE_6__dashboard_edit_component__["a" /* DashboardEditComponent */],
        sideComponent: __WEBPACK_IMPORTED_MODULE_7__dashboard_edit_context_component__["a" /* DashboardEditContextComponent */],
        canActivate: [__WEBPACK_IMPORTED_MODULE_0__core_core_mocks_only__["a" /* IfMocksGuard */]],
        resolve: { subject: DashboardFormResolve },
    },
];


/***/ }),

/***/ "../../../../../src/environments/environment.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return environment; });
var environment = {
    production: true,
    mocks: false,
};


/***/ }),

/***/ "../../../../../src/lib/jquery.selectareas.ts":
/***/ (function(module, exports) {

var cancelEvent = function (e) {
    var event = e || window.event || {};
    event.cancelBubble = true;
    event.returnValue = false;
    /* tslint:disable:no-unused-expression */
    event.stopPropagation && event.stopPropagation();
    event.preventDefault && event.preventDefault();
    /* tslint:enable */
};
var ImageArea = (function () {
    function ImageArea(parent) {
        var _this = this;
        this.parent = parent;
        this.$resizeHandlers = {};
        this.resizeHorizontally = true;
        this.resizeVertically = true;
        this.selectionOffset = [0, 0];
        this.selectionOrigin = [0, 0];
        this.area = {
            label: 'New Label',
            x: 0,
            y: 0,
            z: 0,
            height: 0,
            width: 0,
        };
        this.$image = this.parent.$image;
        this.options = this.parent.options;
        // Initialize an outline layer and place it above the trigger layer
        this.$outline = $('<div class=\'select-areas-outline\' />')
            .css({
            opacity: this.options.outlineOpacity,
            position: 'absolute',
        })
            .insertAfter(this.parent.$trigger);
        // Initialize a selection layer and place it above the outline layer
        this.$selection = $('<div />')
            .addClass('select-areas-background-area')
            .css({
            background: '#fff url(' + this.$image.attr('src') + ') no-repeat',
            backgroundSize: this.$image.width() + 'px',
            position: 'absolute',
        })
            .attr('title', this.area.label)
            .insertAfter(this.$outline);
        // Initialize all handlers
        if (this.options.allowResize) {
            $.each(['nw', 'n', 'ne', 'e', 'se', 's', 'sw', 'w'], function (key, card) {
                _this.$resizeHandlers[card] = $('<div class=\'select-areas-resize-handler ' + card + '\'/>')
                    .css({
                    opacity: 0.5,
                    position: 'absolute',
                    cursor: card + '-resize',
                })
                    .insertAfter(_this.$selection)
                    .mousedown(function (e) { return _this.pickResizeHandler(e); })
                    .bind('touchstart', function (e) { return _this.pickResizeHandler(e); });
            });
        }
        var bindToInput = function ($obj) {
            $obj.on('keydown', function (e) {
                var event = e || window.event || {};
                event.cancelBubble = true;
                event.stopPropagation && event.stopPropagation();
            });
            $obj.on('keyup', function (e) { return _this.changeLabel(e); });
            return $obj;
        };
        this.$input = bindToInput($('<input type="text" class="tag-label" value=""/>').val(this.area.label));
        this.$label = $('<div class=\'selection-label\'></div>').prepend(this.$input).insertAfter(this.$selection);
        // initialize delete button
        if (this.options.allowDelete) {
            var bindToDelete = function ($obj) {
                $obj.click(function (e) { return _this.deleteSelection(e); })
                    .bind('touchstart', function (e) { return _this.deleteSelection(e); })
                    .bind('tap', function (e) { return _this.deleteSelection(e); });
                return $obj;
            };
            this.$btDelete = bindToDelete($('<div class=\'delete-area\' />'))
                .append(bindToDelete($('<div title="Remove" class="select-areas-delete-area" />')))
                .insertAfter(this.$selection);
        }
        if (this.options.allowMove) {
            this.$selection
                .mousedown(function (e) { return _this.pickSelection(e); })
                .bind('touchstart', function (e) { return _this.pickSelection(e); });
        }
        if (this.options.allowEdit) {
            this.$label
                .mousedown(function (e) { return _this.pickInput(e); })
                .bind('touchstart', function (e) { return _this.pickInput(e); });
        }
        this.focus();
    }
    ImageArea.prototype.getElementOffset = function (object) {
        var offset = $(object).offset();
        return [offset.left, offset.top];
    };
    ImageArea.prototype.getMousePosition = function (event) {
        var imageOffset = this.getElementOffset(this.$image);
        if (!event.pageX) {
            if (event.originalEvent) {
                event = event.originalEvent;
            }
            if (event.changedTouches) {
                event = event.changedTouches[0];
            }
            if (event.touches) {
                event = event.touches[0];
            }
        }
        var x = event.pageX - imageOffset[0], y = event.pageY - imageOffset[1];
        x = (x < 0) ? 0 : (x > this.$image.width()) ? this.$image.width() : x;
        y = (y < 0) ? 0 : (y > this.$image.height()) ? this.$image.height() : y;
        return [x, y];
    };
    ImageArea.prototype.blur = function () {
        this.area.z = 0;
        this.$outline.removeClass('selected');
        this.refresh('blur');
    };
    ImageArea.prototype.focus = function (event) {
        if (event) {
            $(':focus').blur();
        }
        this.parent.blurAll();
        this.area.z = 100;
        this.$outline.addClass('selected');
        this.refresh();
    };
    ImageArea.prototype.getData = function () {
        return this.area;
    };
    ImageArea.prototype.fireEvent = function (event) {
        this.$image.trigger(event, [this.parent.areaIndex(self), this.parent.areas()]);
    };
    ImageArea.prototype.off = function () {
        var _this = this;
        var events = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            events[_i] = arguments[_i];
        }
        $.each(events, function (key, val) {
            _this.on(val);
        });
    };
    ImageArea.prototype.on = function (type, handler) {
        var browserEvent, mobileEvent;
        switch (type) {
            case 'start':
                browserEvent = 'mousedown';
                mobileEvent = 'touchstart';
                break;
            case 'move':
                browserEvent = 'mousemove';
                mobileEvent = 'touchmove';
                break;
            case 'stop':
                browserEvent = 'mouseup';
                mobileEvent = 'touchend';
                break;
            default:
                return;
        }
        if (handler && jQuery.isFunction(handler)) {
            $(window.document).on(browserEvent, handler).on(mobileEvent, handler);
        }
        else {
            $(window.document).off(browserEvent).off(mobileEvent);
        }
    };
    ImageArea.prototype.updateSelection = function () {
        // Update the outline layer
        this.$outline.css({
            cursor: 'default',
            width: this.area.width,
            height: this.area.height,
            left: this.area.x,
            top: this.area.y,
            'z-index': this.area.z,
        });
        // Update the selection layer
        this.$selection.css({
            backgroundPosition: (-this.area.x - 2) + 'px ' + (-this.area.y - 2) + 'px',
            cursor: this.options.allowMove ? 'move' : 'default',
            width: (this.area.width - 4 > 0) ? (this.area.width - 4) : 0,
            height: (this.area.height - 4 > 0) ? (this.area.height - 4) : 0,
            left: this.area.x + 2,
            top: this.area.y + 2,
            'z-index': this.area.z + 2,
        });
    };
    ImageArea.prototype.updateResizeHandlers = function (show) {
        var _this = this;
        if (!this.options.allowResize) {
            return;
        }
        if (show) {
            $.each(this.$resizeHandlers, function (name, $handler) {
                var semiwidth = Math.round($handler.width() / 2), semiheight = Math.round($handler.height() / 2), vertical = name[0], horizontal = name[name.length - 1];
                var top, left;
                if (vertical === 'n') {
                    top = -semiheight;
                }
                else if (vertical === 's') {
                    top = _this.area.height - semiheight - 1;
                }
                else {
                    top = Math.round(_this.area.height / 2) - semiheight - 1;
                }
                if (horizontal === 'e') {
                    left = _this.area.width - semiwidth - 1;
                }
                else if (horizontal === 'w') {
                    left = -semiwidth;
                }
                else {
                    left = Math.round(_this.area.width / 2) - semiwidth - 1;
                }
                $handler.css({
                    display: 'block',
                    left: _this.area.x + left,
                    top: _this.area.y + top,
                    'z-index': _this.area.z + 1,
                });
            });
        }
        else {
            $('.select-areas-resize-handler').each(function () {
                $(this).css({ display: 'none' });
            });
        }
    };
    ImageArea.prototype.updateLabel = function (active) {
        var rightSide = this.area.x >= 0.7 * this.$image.width();
        var bottomSide = this.area.y >= 0.7 * this.$image.height();
        if (this.$label) {
            this.$label.css({
                left: !rightSide ? this.area.x : 'auto',
                right: rightSide ? this.$image.width() - this.area.x - this.area.width : 'auto',
                top: !bottomSide ? this.area.y + this.area.height : 'auto',
                bottom: bottomSide ? this.$image.height() - this.area.y : 'auto',
                'z-index': this.area.z + 100,
            });
        }
        if (this.$input) {
            this.$input.css({
                width: this.options.allowEdit ? Math.max(this.area.width, 70) : 'auto',
                'text-align': rightSide ? 'right' : 'left',
            });
            this.$input.prop('readonly', !(active && this.options.allowEdit));
            if (this.$input.is(':focus') && !active) {
                this.$input.blur();
            }
        }
    };
    ImageArea.prototype.updateBtDelete = function (visible) {
        if (this.$btDelete) {
            this.$btDelete.css({
                display: visible ? 'block' : 'none',
                left: this.area.x + this.area.width + 1,
                top: this.area.y - this.$btDelete.outerHeight() - 1,
                'z-index': this.area.z + 1,
            });
        }
    };
    ImageArea.prototype.updateCursor = function (cursorType) {
        this.$outline.css({
            cursor: cursorType,
        });
        this.$selection.css({
            cursor: cursorType,
        });
    };
    ImageArea.prototype.refresh = function (sender) {
        switch (sender) {
            case 'startSelection':
                this.parent._refresh();
                this.updateSelection();
                this.updateResizeHandlers();
                this.updateBtDelete(true);
                this.updateLabel(false);
                break;
            case 'pickSelection':
            case 'pickResizeHandler':
                this.updateResizeHandlers();
                break;
            case 'pickInput':
                this.updateLabel(true);
                break;
            case 'resizeSelection':
                this.updateSelection();
                this.updateResizeHandlers();
                this.updateCursor('crosshair');
                this.updateBtDelete(true);
                this.updateLabel(false);
                break;
            case 'moveSelection':
                this.updateSelection();
                this.updateResizeHandlers();
                this.updateCursor('move');
                this.updateBtDelete(true);
                this.updateLabel(false);
                break;
            case 'blur':
                this.updateSelection();
                this.updateResizeHandlers();
                this.updateBtDelete(false);
                this.updateLabel(false);
                break;
            // case 'releaseSelection':
            default:
                this.updateSelection();
                this.updateResizeHandlers(true);
                this.updateBtDelete(true);
                this.updateLabel(false);
        }
    };
    ImageArea.prototype.startSelection = function (event) {
        var _this = this;
        cancelEvent(event);
        // Reset the selection size
        this.area.width = this.options.minSize[0];
        this.area.height = this.options.minSize[1];
        this.focus(event);
        this.on('move', function (e) { return _this.resizeSelection(e); });
        this.on('stop', function (e) { return _this.releaseSelection(e); });
        // Get the selection origin
        this.selectionOrigin = this.getMousePosition(event);
        if (this.selectionOrigin[0] + this.area.width > this.$image.width()) {
            this.selectionOrigin[0] = this.$image.width() - this.area.width;
        }
        if (this.selectionOrigin[1] + this.area.height > this.$image.height()) {
            this.selectionOrigin[1] = this.$image.height() - this.area.height;
        }
        // And set its position
        this.area.x = this.selectionOrigin[0];
        this.area.y = this.selectionOrigin[1];
        this.refresh('startSelection');
    };
    ImageArea.prototype.pickSelection = function (event) {
        var _this = this;
        cancelEvent(event);
        this.focus(event);
        this.on('move', function (e) { return _this.moveSelection(e); });
        this.on('stop', function (e) { return _this.releaseSelection(e); });
        var mousePosition = this.getMousePosition(event);
        // Get the selection offset relative to the mouse position
        this.selectionOffset[0] = mousePosition[0] - this.area.x;
        this.selectionOffset[1] = mousePosition[1] - this.area.y;
        this.refresh('pickSelection');
    };
    ImageArea.prototype.pickInput = function (event) {
        cancelEvent(event);
        this.focus(event);
        this.refresh('pickInput');
        this.$input.focus();
    };
    ImageArea.prototype.pickResizeHandler = function (event) {
        var _this = this;
        cancelEvent(event);
        this.focus(event);
        var card = event.target.className.split(' ')[1];
        if (card[card.length - 1] === 'w') {
            this.selectionOrigin[0] += this.area.width;
            this.area.x = this.selectionOrigin[0] - this.area.width;
        }
        if (card[0] === 'n') {
            this.selectionOrigin[1] += this.area.height;
            this.area.y = this.selectionOrigin[1] - this.area.height;
        }
        if (card === 'n' || card === 's') {
            this.resizeHorizontally = false;
        }
        else if (card === 'e' || card === 'w') {
            this.resizeVertically = false;
        }
        this.on('move', function (e) { return _this.resizeSelection(e); });
        this.on('stop', function (e) { return _this.releaseSelection(e); });
        this.refresh('pickResizeHandler');
    };
    ImageArea.prototype.resizeSelection = function (event) {
        cancelEvent(event);
        this.focus(event);
        var mousePosition = this.getMousePosition(event);
        var options = this.options;
        // Get the selection size
        var height = mousePosition[1] - this.selectionOrigin[1], width = mousePosition[0] - this.selectionOrigin[0];
        // If the selection size is smaller than the minimum size set it to minimum size
        if (Math.abs(width) < options.minSize[0]) {
            width = (width >= 0) ? options.minSize[0] : -options.minSize[0];
        }
        if (Math.abs(height) < options.minSize[1]) {
            height = (height >= 0) ? options.minSize[1] : -options.minSize[1];
        }
        // Test if the selection size exceeds the image bounds
        if (this.selectionOrigin[0] + width < 0 || this.selectionOrigin[0] + width > this.$image.width()) {
            width = -width;
        }
        if (this.selectionOrigin[1] + height < 0 || this.selectionOrigin[1] + height > this.$image.height()) {
            height = -height;
        }
        // Test if the selection size is bigger than the maximum size (ignored if minSize > maxSize)
        if (options.maxSize[0] > options.minSize[0] && options.maxSize[1] > options.minSize[1]) {
            if (Math.abs(width) > options.maxSize[0]) {
                width = (width >= 0) ? options.maxSize[0] : -options.maxSize[0];
            }
            if (Math.abs(height) > options.maxSize[1]) {
                height = (height >= 0) ? options.maxSize[1] : -options.maxSize[1];
            }
        }
        // Set the selection size
        if (this.resizeHorizontally) {
            this.area.width = width;
        }
        if (this.resizeVertically) {
            this.area.height = height;
        }
        // If any aspect ratio is specified
        if (options.aspectRatio) {
            // Calculate the new width and height
            if ((width > 0 && height > 0) || (width < 0 && height < 0)) {
                if (this.resizeHorizontally) {
                    height = Math.round(width / options.aspectRatio);
                }
                else {
                    width = Math.round(height * options.aspectRatio);
                }
            }
            else {
                if (this.resizeHorizontally) {
                    height = -Math.round(width / options.aspectRatio);
                }
                else {
                    width = -Math.round(height * options.aspectRatio);
                }
            }
            // Test if the new size exceeds the image bounds
            if (this.selectionOrigin[0] + width > this.$image.width()) {
                width = this.$image.width() - this.selectionOrigin[0];
                height = (height > 0) ? Math.round(width / options.aspectRatio) : -Math.round(width / options.aspectRatio);
            }
            if (this.selectionOrigin[1] + height < 0) {
                height = -this.selectionOrigin[1];
                width = (width > 0) ? -Math.round(height * options.aspectRatio) : Math.round(height * options.aspectRatio);
            }
            if (this.selectionOrigin[1] + height > this.$image.height()) {
                height = this.$image.height() - this.selectionOrigin[1];
                width = (width > 0) ? Math.round(height * options.aspectRatio) : -Math.round(height * options.aspectRatio);
            }
            // Set the selection size
            this.area.width = width;
            this.area.height = height;
        }
        if (this.area.width < 0) {
            this.area.width = Math.abs(this.area.width);
            this.area.x = this.selectionOrigin[0] - this.area.width;
        }
        else {
            this.area.x = this.selectionOrigin[0];
        }
        if (this.area.height < 0) {
            this.area.height = Math.abs(this.area.height);
            this.area.y = this.selectionOrigin[1] - this.area.height;
        }
        else {
            this.area.y = this.selectionOrigin[1];
        }
        this.fireEvent('changing');
        this.refresh('resizeSelection');
    };
    ImageArea.prototype.moveSelection = function (event) {
        if (!this.options.allowMove) {
            return;
        }
        cancelEvent(event);
        this.focus(event);
        var mousePosition = this.getMousePosition(event);
        this.moveTo({
            x: mousePosition[0] - this.selectionOffset[0],
            y: mousePosition[1] - this.selectionOffset[1],
        });
        this.fireEvent('changing');
    };
    ImageArea.prototype.moveTo = function (point) {
        // Set the selection position on the x-axis relative to the bounds
        // of the image
        if (point.x > 0) {
            if (point.x + this.area.width < this.$image.width()) {
                this.area.x = point.x;
            }
            else {
                this.area.x = this.$image.width() - this.area.width;
            }
        }
        else {
            this.area.x = 0;
        }
        // Set the selection position on the y-axis relative to the bounds
        // of the image
        if (point.y > 0) {
            if (point.y + this.area.height < this.$image.height()) {
                this.area.y = point.y;
            }
            else {
                this.area.y = this.$image.height() - this.area.height;
            }
        }
        else {
            this.area.y = 0;
        }
        this.refresh('moveSelection');
    };
    ImageArea.prototype.releaseSelection = function (event) {
        cancelEvent(event);
        this.off('move', 'stop');
        // Update the selection origin
        this.selectionOrigin[0] = this.area.x;
        this.selectionOrigin[1] = this.area.y;
        // Reset the resize constraints
        this.resizeHorizontally = true;
        this.resizeVertically = true;
        this.fireEvent('changed');
        this.refresh('releaseSelection');
    };
    ImageArea.prototype.changeLabel = function (event) {
        this.area.label = event.target.value;
        this.$selection.attr('title', this.area.label);
        this.fireEvent('changed');
    };
    ImageArea.prototype.deleteSelection = function (event, silent) {
        cancelEvent(event);
        this.$selection.remove();
        this.$outline.remove();
        $.each(this.$resizeHandlers, function (card, $handler) {
            $handler.remove();
        });
        if (this.$btDelete) {
            this.$btDelete.remove();
        }
        this.$label.remove();
        this.parent._remove(this.parent.areaIndex(self));
        if (!silent) {
            this.fireEvent('changed');
        }
    };
    ImageArea.prototype.nudge = function (point) {
        point.x = this.area.x;
        point.y = this.area.y;
        if (point.d) {
            point.y = this.area.y + point.d;
        }
        if (point.u) {
            point.y = this.area.y - point.u;
        }
        if (point.l) {
            point.x = this.area.x - point.l;
        }
        if (point.r) {
            point.x = this.area.x + point.r;
        }
        this.moveTo(point);
        this.fireEvent('changed');
    };
    ImageArea.prototype.set = function (dimensions, silent) {
        this.area = $.extend(this.area, dimensions);
        this.selectionOrigin[0] = this.area.x;
        this.selectionOrigin[1] = this.area.y;
        this.$input.val(this.area.label);
        this.$selection.attr('title', this.area.label);
        if (silent) {
            this.refresh('blur');
        }
        else {
            this.fireEvent('changed');
        }
    };
    ImageArea.prototype.contains = function (point) {
        return (point.x >= this.area.x) && (point.x <= this.area.x + this.area.width) &&
            (point.y >= this.area.y) && (point.y <= this.area.y + this.area.height);
    };
    return ImageArea;
}());
var ImageSelectAreas = (function () {
    function ImageSelectAreas(object, customOptions) {
        var _this = this;
        var defaultOptions = {
            allowEdit: true,
            allowMove: true,
            allowResize: true,
            allowSelect: true,
            allowDelete: true,
            allowNudge: true,
            aspectRatio: 0,
            minSize: [0, 0],
            maxSize: [0, 0],
            width: 0,
            maxAreas: 0,
            outlineOpacity: 0.5,
            overlayOpacity: 0.5,
            areas: [],
            onChanging: null,
            onChanged: null,
        };
        this.options = $.extend(defaultOptions, customOptions);
        if (!this.options.allowEdit) {
            this.options.allowSelect = this.options.allowMove = this.options.allowResize = this.options.allowDelete = false;
        }
        this._areas = [];
        // Initialize the image layer
        this.$image = $(object);
        this.$image.css({
            width: this.options.width || this.$image.width(),
            height: this.options.height || this.$image.height(),
        });
        if (this.options.onChanging) {
            this.$image.on('changing', this.options.onChanging);
        }
        if (this.options.onChanged) {
            this.$image.on('changed', this.options.onChanged);
        }
        if (this.options.onLoaded) {
            this.$image.on('loaded', this.options.onLoaded);
        }
        // Initialize an image holder
        this.$holder = $('<div />')
            .css({
            position: 'relative',
            width: this.$image.width(),
            height: this.$image.height(),
        });
        // Wrap the holder around the image
        this.$image.wrap(this.$holder);
        // Initialize a trigger layer and place it above the overlay layer
        this.$trigger = $('<div />')
            .css({
            top: 0,
            left: 0,
            backgroundColor: '#000000',
            opacity: 0,
            position: 'absolute',
            width: this.$image.width(),
            height: this.$image.height(),
        })
            .insertAfter(this.$image);
        $.each(this.options.areas, function (key, area) {
            _this._add(area, true);
        });
        this.blurAll();
        this._refresh();
        if (this.options.allowSelect) {
            // Bind an event handler to the 'mousedown' event of the trigger layer
            this.$trigger
                .mousedown(function (e) { return _this.newArea(e); })
                .on('touchstart', function (e) { return _this.newArea(e); });
        }
        if (this.options.allowNudge) {
            $('html').keydown(function (e) {
                var codes = {
                    37: 'l',
                    38: 'u',
                    39: 'r',
                    40: 'd',
                }, direction = codes[e.which];
                var selectedArea;
                if (direction) {
                    _this._eachArea(function (area) {
                        if (area.getData().z === 100) {
                            selectedArea = area;
                            return false;
                        }
                    });
                    if (selectedArea) {
                        var move = {};
                        move[direction] = 1;
                        selectedArea.nudge(move);
                        cancelEvent(e);
                    }
                }
            });
        }
    }
    ImageSelectAreas.prototype.remove = function (id, silent) {
        if (this._areas[id]) {
            this._areas[id].deleteSelection(null, silent);
        }
    };
    ImageSelectAreas.prototype.newArea = function (event) {
        this.blurAll();
        if (this.options.maxAreas && this.options.maxAreas <= this.areas().length) {
            return -1;
        }
        var id = this._areas ? this._areas.length : 0;
        this._areas[id] = new ImageArea(this);
        if (event) {
            this._areas[id].startSelection(event);
        }
        return id;
    };
    ImageSelectAreas.prototype.focus = function (id) {
        if (this._areas[id]) {
            this._areas[id].focus();
            this._refresh();
        }
    };
    ImageSelectAreas.prototype.set = function (id, options, silent) {
        if (this._areas[id]) {
            this._areas[id].set(options, silent);
            if (!silent) {
                this._areas[id].focus();
            }
            this._refresh();
        }
    };
    ImageSelectAreas.prototype.add = function (options, silent) {
        var _this = this;
        this.blurAll();
        if ($.isArray(options)) {
            $.each(options, function (key, val) {
                _this._add(val, silent);
            });
        }
        else {
            this._add(options, silent);
        }
        this._refresh();
        if (!this.options.allowSelect && !this.options.allowMove && !this.options.allowResize && !this.options.allowDelete) {
            this.blurAll();
        }
    };
    ImageSelectAreas.prototype.reset = function () {
        var _this = this;
        this._eachArea(function (area, id) {
            _this.remove(id);
        });
        this._refresh();
    };
    ImageSelectAreas.prototype.destroy = function () {
        for (var i = this._areas.length - 1; i >= 0; i--) {
            this.remove(i, true);
        }
        this.$holder.remove();
        this.$trigger.remove();
        this.$image.css('width', '').css('position', '').unwrap();
        this.$image.removeData('mainImageSelectAreas');
    };
    ImageSelectAreas.prototype.areas = function () {
        var ret = [];
        this._eachArea(function (area) {
            ret.push(area.getData());
        });
        return ret;
    };
    ImageSelectAreas.prototype.areaIndex = function (area) {
        return this._areas.indexOf(area);
    };
    ImageSelectAreas.prototype.blurAll = function () {
        this._eachArea(function (area) {
            area.blur();
        });
    };
    ImageSelectAreas.prototype.contains = function (point) {
        var res = false;
        this._eachArea(function (area) {
            if (area.contains(point)) {
                res = true;
                return false;
            }
        });
        return res;
    };
    ImageSelectAreas.prototype._refresh = function () {
        // @todo blurring
        // const nbAreas = this.areas().length;
        // if (nbAreas) {
        //   this.$image.addClass('blurred');
        // } else {
        //   this.$image.removeClass('blurred');
        // }
        this.$trigger.css({
            cursor: this.options.allowSelect ? 'crosshair' : 'default',
        });
    };
    ImageSelectAreas.prototype._remove = function (id) {
        this._areas.splice(id, 1);
        this._refresh();
    };
    ImageSelectAreas.prototype._add = function (options, silent) {
        var id = this.newArea();
        this.set(id, options, silent);
    };
    ImageSelectAreas.prototype._eachArea = function (cb) {
        $.each(this._areas, function (id, area) {
            return cb(area, id);
        });
    };
    return ImageSelectAreas;
}());
(function ($) {
    var selectAreas = function (object, options) {
        var $object = $(object);
        if (!$object.data('mainImageSelectAreas')) {
            var mainImageSelectAreas = new ImageSelectAreas(object, options);
            $object.data('mainImageSelectAreas', mainImageSelectAreas);
            $object.trigger('loaded');
        }
        return $object.data('mainImageSelectAreas');
    };
    $.fn.selectAreas = function (customOptions) {
        if (ImageSelectAreas.prototype[customOptions]) {
            var ret = ImageSelectAreas.prototype[customOptions].apply(selectAreas(this), Array.prototype.slice.call(arguments, 1));
            return typeof ret === 'undefined' ? this : ret;
        }
        else if (typeof customOptions === 'object' || !customOptions) {
            // Iterate over each object
            this.each(function () {
                var currentObject = this, image = new Image();
                // And attach selectAreas when the object is loaded
                image.onload = function () {
                    selectAreas(currentObject, customOptions);
                };
                // Reset the src because cached images don't fire load sometimes
                image.src = currentObject.src;
            });
            return this;
        }
        else {
            $.error('Method ' + customOptions + ' does not exist on jQuery.selectAreas');
        }
    };
})(jQuery);


/***/ }),

/***/ "../../../../../src/main.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vendor_ts__ = __webpack_require__("../../../../../src/vendor.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__ = __webpack_require__("../../../platform-browser-dynamic/esm5/platform-browser-dynamic.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__app_app_module__ = __webpack_require__("../../../../../src/app/app.module.ts");



var platform = Object(__WEBPACK_IMPORTED_MODULE_1__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])();
platform.bootstrapModule(__WEBPACK_IMPORTED_MODULE_2__app_app_module__["a" /* AppModule */]).then(function (moduleRef) {
    platform.onDestroy(function () {
        moduleRef.destroy();
    });
});
platform.onDestroy(function () {
    $('body').empty().append('<h1 class="text-center text-danger">Application stopped. See console for details.</h1>');
});


/***/ }),

/***/ "../../../../../src/split-dock/split-dock-layout.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SplitDockLayout; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__ = __webpack_require__("../../../../@phosphor/algorithm/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__ = __webpack_require__("../../../../@phosphor/domutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__ = __webpack_require__("../../../../@phosphor/messaging/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__ = __webpack_require__("../../../../@phosphor/widgets/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/*-----------------------------------------------------------------------------
 | Copyright (c) 2014-2017, PhosphorJS Contributors
 |
 | Distributed under the terms of the BSD 3-Clause License.
 |
 | The full license is in the file LICENSE, distributed with this software.
 |----------------------------------------------------------------------------*/




/**
 * A layout which provides a flexible docking arrangement.
 *
 * #### Notes
 * The consumer of this layout is repsonsible for handling all signals
 * from the generated tabs and managing the visibility of widgets
 * and tabs as needed.
 */
var SplitDockLayout = (function (_super) {
    __extends(SplitDockLayout, _super);
    /**
     * Construct a new dock layout.
     *
     * @param options - The options for initializing the layout.
     */
    function SplitDockLayout(options) {
        var _this = _super.call(this) || this;
        _this._spacing = 4;
        _this._dirty = false;
        _this._root = null;
        _this._box = null;
        _this._items = new Map();
        _this.renderer = options.renderer;
        if (options.spacing !== undefined) {
            _this._spacing = Private.clampSpacing(options.spacing);
        }
        return _this;
    }
    /**
     * Dispose of the resources held by the layout.
     *
     * #### Notes
     * This will clear and dispose all widgets in the layout.
     */
    SplitDockLayout.prototype.dispose = function () {
        // Get an iterator over the widgets in the layout.
        var widgets = this.iter();
        // Dispose of the layout items.
        this._items.forEach(function (item) {
            item.dispose();
        });
        // Clear the layout state before disposing the widgets.
        this._box = null;
        this._root = null;
        this._items.clear();
        // Dispose of the widgets contained in the old layout root.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(widgets, function (widget) {
            widget.dispose();
        });
        // Dispose of the base class.
        _super.prototype.dispose.call(this);
    };
    Object.defineProperty(SplitDockLayout.prototype, "spacing", {
        /**
         * Get the inter-element spacing for the dock layout.
         */
        get: function () {
            return this._spacing;
        },
        /**
         * Set the inter-element spacing for the dock layout.
         */
        set: function (value) {
            value = Private.clampSpacing(value);
            if (this._spacing === value) {
                return;
            }
            this._spacing = value;
            if (!this.parent) {
                return;
            }
            this.parent.fit();
        },
        enumerable: true,
        configurable: true
    });
    SplitDockLayout.prototype.expandWidget = function (item) {
        this._setExpandedLayout(this._root.findTabNode(item));
    };
    SplitDockLayout.prototype.collapseWidget = function () {
        this._setExpandedLayout(null);
    };
    Object.defineProperty(SplitDockLayout.prototype, "isEmpty", {
        /**
         * Whether the dock layout is empty.
         */
        get: function () {
            return this._root === null;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Create an iterator over all widgets in the layout.
     *
     * @returns A new iterator over the widgets in the layout.
     *
     * #### Notes
     * This iterator includes the generated tabs.
     */
    SplitDockLayout.prototype.iter = function () {
        return this._root ? this._root.iterAllWidgets() : Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
    };
    /**
     * Create an iterator over the user widgets in the layout.
     *
     * @returns A new iterator over the user widgets in the layout.
     *
     * #### Notes
     * This iterator does not include the generated tabs.
     */
    SplitDockLayout.prototype.widgets = function () {
        return this._root ? this._root.iterUserWidgets() : Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
    };
    /**
     * Create an iterator over the selected widgets in the layout.
     *
     * @returns A new iterator over the selected user widgets.
     *
     * #### Notes
     * This iterator yields the widgets corresponding to the current tab
     * of each tab in the layout.
     */
    SplitDockLayout.prototype.selectedWidgets = function () {
        return this._root ? this._root.iterSelectedWidgets() : Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
    };
    /**
     * Create an iterator over the tabs in the layout.
     *
     * @returns A new iterator over the tabs in the layout.
     *
     * #### Notes
     * This iterator does not include the user widgets.
     */
    SplitDockLayout.prototype.tabs = function () {
        return this._root ? this._root.iterTabs() : Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
    };
    /**
     * Create an iterator over the handles in the layout.
     *
     * @returns A new iterator over the handles in the layout.
     */
    SplitDockLayout.prototype.handles = function () {
        return this._root ? this._root.iterHandles() : Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
    };
    /**
     * Move a handle to the given offset position.
     *
     * @param handle - The handle to move.
     *
     * @param offsetX - The desired offset X position of the handle.
     *
     * @param offsetY - The desired offset Y position of the handle.
     *
     * #### Notes
     * If the given handle is not contained in the layout, this is no-op.
     *
     * The handle will be moved as close as possible to the desired
     * position without violating any of the layout constraints.
     *
     * Only one of the coordinates is used depending on the orientation
     * of the handle. This method accepts both coordinates to make it
     * easy to invoke from a mouse move event without needing to know
     * the handle orientation.
     */
    SplitDockLayout.prototype.moveHandle = function (handle, offsetX, offsetY) {
        // Bail early if there is no root or if the handle is hidden.
        if (!this._root || handle.classList.contains('p-mod-hidden')) {
            return;
        }
        // Lookup the split node for the handle.
        var data = this._root.findSplitNode(handle);
        if (!data) {
            return;
        }
        // Compute the desired delta movement for the handle.
        var delta;
        if (data.node.orientation === 'horizontal') {
            delta = offsetX - handle.offsetLeft;
        }
        else {
            delta = offsetY - handle.offsetTop;
        }
        // Bail if there is no handle movement.
        if (delta === 0) {
            return;
        }
        // Prevent sibling resizing unless needed.
        data.node.holdSizes();
        // Adjust the sizers to reflect the handle movement.
        __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxEngine"].adjust(data.node.sizers, data.index, delta);
        // Update the layout of the widgets.
        if (this.parent) {
            this.parent.update();
        }
    };
    /**
     * Save the current configuration of the dock layout.
     *
     * @returns A new config object for the current layout state.
     *
     * #### Notes
     * The return value can be provided to the `restoreLayout` method
     * in order to restore the layout to its current configuration.
     */
    SplitDockLayout.prototype.saveLayout = function () {
        // Bail early if there is no root.
        if (!this._root) {
            return { main: null };
        }
        // Hold the current sizes in the layout tree.
        this._root.holdAllSizes();
        // Return the layout config.
        return { main: this._root.createConfig() };
    };
    /**
     * Restore the layout to a previously saved configuration.
     *
     * @param config - The layout configuration to restore.
     *
     * #### Notes
     * Widgets which currently belong to the layout but which are not
     * contained in the config will be unparented.
     */
    SplitDockLayout.prototype.restoreLayout = function (config) {
        var _this = this;
        // Create the widget set for validating the config.
        var widgetSet = new Set();
        // Normalize the main area config and collect the widgets.
        var mainConfig;
        if (config.main) {
            mainConfig = Private.normalizeAreaConfig(config.main, widgetSet);
        }
        else {
            mainConfig = null;
        }
        // Create iterators over the old content.
        var oldWidgets = this.widgets();
        var oldTabs = this.tabs();
        var oldHandles = this.handles();
        // Clear the root before removing the old content.
        this._root = null;
        // Unparent the old widgets which are not in the new config.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(oldWidgets, function (widget) {
            if (!widgetSet.has(widget)) {
                widget.parent = null;
            }
        });
        // Dispose of the old tabs.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(oldTabs, function (tab) {
            tab.dispose();
        });
        // Remove the old handles.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(oldHandles, function (handle) {
            if (handle.parentNode) {
                handle.parentNode.removeChild(handle);
            }
        });
        // Reparent the new widgets to the current parent.
        widgetSet.forEach(function (widget) {
            widget.parent = _this.parent;
        });
        // Create the root node for the new config.
        if (mainConfig) {
            this._root = Private.realizeAreaConfig(mainConfig, {
                createTab: function (title) { return _this._createTab(title); },
                createHandle: function () { return _this._createHandle(); }
            });
        }
        else {
            this._root = null;
        }
        // If there is no parent, there is nothing more to do.
        if (!this.parent) {
            return;
        }
        // Attach the new widgets to the parent.
        widgetSet.forEach(function (widget) {
            _this.attachWidget(widget);
        });
        // Post a fit request to the parent.
        this.parent.fit();
    };
    /**
     * Add a widget to the dock layout.
     *
     * @param widget - The widget to add to the dock layout.
     *
     * @param options - The additional options for adding the widget.
     *
     * #### Notes
     * The widget will be moved if it is already contained in the layout.
     *
     * An error will be thrown if the reference widget is invalid.
     */
    SplitDockLayout.prototype.addWidget = function (widget, options) {
        if (options === void 0) { options = {}; }
        // Parse the options.
        var ref = options.ref || null;
        var mode = options.mode || 'split-right';
        // Find the tab node which holds the reference widget.
        var refNode = null;
        if (this._root && ref) {
            refNode = this._root.findTabNode(ref);
        }
        // Throw an error if the reference widget is invalid.
        if (ref && !refNode) {
            throw new Error('Reference widget is not in the layout.');
        }
        this._setExpandedLayout(null);
        // Reparent the widget to the current layout parent.
        widget.parent = this.parent;
        // Insert the widget according to the insert mode.
        switch (mode) {
            case 'split-top':
                this._insertSplit(widget, ref, refNode, 'vertical', false);
                break;
            case 'split-left':
                this._insertSplit(widget, ref, refNode, 'horizontal', false);
                break;
            case 'split-right':
                this._insertSplit(widget, ref, refNode, 'horizontal', true);
                break;
            case 'split-bottom':
                this._insertSplit(widget, ref, refNode, 'vertical', true);
                break;
        }
        // Do nothing else if there is no parent widget.
        if (!this.parent) {
            return;
        }
        // Ensure the widget is attached to the parent widget.
        this.attachWidget(widget);
        // Post a fit request for the parent widget.
        this.parent.fit();
    };
    /**
     * Remove a widget from the layout.
     *
     * @param widget - The widget to remove from the layout.
     *
     * #### Notes
     * A widget is automatically removed from the layout when its `parent`
     * is set to `null`. This method should only be invoked directly when
     * removing a widget from a layout which has yet to be installed on a
     * parent widget.
     *
     * This method does *not* modify the widget's `parent`.
     */
    SplitDockLayout.prototype.removeWidget = function (widget) {
        // Remove the widget from its current layout location.
        this._removeWidget(widget);
        // Do nothing else if there is no parent widget.
        if (!this.parent) {
            return;
        }
        // Detach the widget from the parent widget.
        this.detachWidget(widget);
        // Post a fit request for the parent widget.
        this.parent.fit();
    };
    /**
     * Find the tab area which contains the given client position.
     *
     * @param clientX - The client X position of interest.
     *
     * @param clientY - The client Y position of interest.
     *
     * @returns The geometry of the tab area at the given position, or
     *   `null` if there is no tab area at the given position.
     */
    SplitDockLayout.prototype.hitTestTabAreas = function (clientX, clientY) {
        // Bail early if hit testing cannot produce valid results.
        if (!this._root || !this.parent || !this.parent.isVisible) {
            return null;
        }
        // Ensure the parent box sizing data is computed.
        if (!this._box) {
            this._box = __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__["ElementExt"].boxSizing(this.parent.node);
        }
        // Convert from client to local coordinates.
        var rect = this.parent.node.getBoundingClientRect();
        var x = clientX - rect.left - this._box.borderLeft;
        var y = clientY - rect.top - this._box.borderTop;
        // Find the tab layout node at the local position.
        var tabNode = (this._expandedLayout || this._root).hitTestTabNodes(x, y);
        // Bail if a tab layout node was not found.
        if (!tabNode) {
            return null;
        }
        // Extract the data from the tab node.
        var tab = tabNode.tab, top = tabNode.top, left = tabNode.left, width = tabNode.width, height = tabNode.height;
        // Compute the right and bottom edges of the tab area.
        var borderWidth = this._box.borderLeft + this._box.borderRight;
        var borderHeight = this._box.borderTop + this._box.borderBottom;
        var right = rect.width - borderWidth - (left + width);
        var bottom = rect.height - borderHeight - (top + height);
        // Return the hit test results.
        return { tab: tab, x: x, y: y, top: top, left: left, right: right, bottom: bottom, width: width, height: height };
    };
    /**
     * Perform layout initialization which requires the parent widget.
     */
    SplitDockLayout.prototype.init = function () {
        var _this = this;
        // Perform superclass initialization.
        _super.prototype.init.call(this);
        // Attach each widget to the parent.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this, function (widget) {
            _this.attachWidget(widget);
        });
        // Attach each handle to the parent.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.handles(), function (handle) {
            _this.parent.node.appendChild(handle);
        });
        // Post a fit request for the parent widget.
        this.parent.fit();
    };
    /**
     * Attach the widget to the layout parent widget.
     *
     * @param widget - The widget to attach to the parent.
     *
     * #### Notes
     * This is a no-op if the widget is already attached.
     */
    SplitDockLayout.prototype.attachWidget = function (widget) {
        // Do nothing if the widget is already attached.
        if (this.parent.node === widget.node.parentNode) {
            return;
        }
        // Create the layout item for the widget.
        this._items.set(widget, new __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["LayoutItem"](widget));
        // Send a `'before-attach'` message if the parent is attached.
        if (this.parent.isAttached) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(widget, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.BeforeAttach);
        }
        // Add the widget's node to the parent.
        this.parent.node.appendChild(widget.node);
        // Send an `'after-attach'` message if the parent is attached.
        if (this.parent.isAttached) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(widget, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.AfterAttach);
        }
    };
    /**
     * Detach the widget from the layout parent widget.
     *
     * @param widget - The widget to detach from the parent.
     *
     * #### Notes
     * This is a no-op if the widget is not attached.
     */
    SplitDockLayout.prototype.detachWidget = function (widget) {
        // Do nothing if the widget is not attached.
        if (this.parent.node !== widget.node.parentNode) {
            return;
        }
        // Send a `'before-detach'` message if the parent is attached.
        if (this.parent.isAttached) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(widget, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.BeforeDetach);
        }
        // Remove the widget's node from the parent.
        this.parent.node.removeChild(widget.node);
        // Send an `'after-detach'` message if the parent is attached.
        if (this.parent.isAttached) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(widget, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.AfterDetach);
        }
        // Delete the layout item for the widget.
        var item = this._items.get(widget);
        if (item) {
            this._items.delete(widget);
            item.dispose();
        }
    };
    /**
     * A message handler invoked on a `'before-show'` message.
     */
    SplitDockLayout.prototype.onBeforeShow = function (msg) {
        _super.prototype.onBeforeShow.call(this, msg);
        this.parent.update();
    };
    /**
     * A message handler invoked on a `'before-attach'` message.
     */
    SplitDockLayout.prototype.onBeforeAttach = function (msg) {
        _super.prototype.onBeforeAttach.call(this, msg);
        this.parent.fit();
    };
    /**
     * A message handler invoked on a `'child-shown'` message.
     */
    SplitDockLayout.prototype.onChildShown = function (msg) {
        this.parent.fit();
    };
    /**
     * A message handler invoked on a `'child-hidden'` message.
     */
    SplitDockLayout.prototype.onChildHidden = function (msg) {
        this.parent.fit();
    };
    /**
     * A message handler invoked on a `'resize'` message.
     */
    SplitDockLayout.prototype.onResize = function (msg) {
        if (this.parent.isVisible) {
            this._update(msg.width, msg.height);
        }
    };
    /**
     * A message handler invoked on an `'update-request'` message.
     */
    SplitDockLayout.prototype.onUpdateRequest = function (msg) {
        if (this.parent.isVisible) {
            this._update(-1, -1);
        }
    };
    /**
     * A message handler invoked on a `'fit-request'` message.
     */
    SplitDockLayout.prototype.onFitRequest = function (msg) {
        if (this.parent.isAttached) {
            this._fit();
        }
    };
    SplitDockLayout.prototype._setExpandedLayout = function (expandedLayout) {
        var _this = this;
        this._expandedLayout = expandedLayout;
        if (this._expandedLayout) {
            var expandedTab_1 = this._expandedLayout.tab;
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.tabs(), function (tab) {
                if (expandedTab_1 === tab) {
                    tab.show();
                    tab.expanded = true;
                }
                else {
                    tab.hide();
                    tab.expanded = false;
                }
            });
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.handles(), function (handle) {
                _this.parent.node.removeChild(handle);
            });
        }
        else {
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.tabs(), function (tab) {
                tab.show();
                tab.child.show();
                tab.expanded = false;
            });
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.handles(), function (handle) {
                _this.parent.node.appendChild(handle);
            });
        }
        this._dirty = true;
        __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(this.parent, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.UpdateRequest);
    };
    /**
     * Remove the specified widget from the layout structure.
     *
     * #### Notes
     * This is a no-op if the widget is not in the layout tree.
     *
     * This does not detach the widget from the parent node.
     */
    SplitDockLayout.prototype._removeWidget = function (widget) {
        // Bail early if there is no layout root.
        if (!this._root) {
            return;
        }
        // Find the tab node which contains the given widget.
        var tabNode = this._root.findTabNode(widget);
        // Bail early if the tab node is not found.
        if (!tabNode) {
            return;
        }
        // Dispose the tab.
        tabNode.tab.dispose();
        // Handle the case where the tab node is the root.
        if (this._root === tabNode) {
            this._root = null;
            return;
        }
        // Otherwise, remove the tab node from its parent...
        // Prevent widget resizing unless needed.
        this._root.holdAllSizes();
        // Clear the parent reference on the tab node.
        var splitNode = tabNode.parent;
        tabNode.parent = null;
        // Remove the tab node from its parent split node.
        var i = __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeFirstOf(splitNode.children, tabNode);
        var handle = __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeAt(splitNode.handles, i);
        __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeAt(splitNode.sizers, i);
        // Remove the handle from its parent DOM node.
        if (handle.parentNode) {
            handle.parentNode.removeChild(handle);
        }
        // If there are multiple children, just update the handles.
        if (splitNode.children.length > 1) {
            splitNode.syncHandles();
            return;
        }
        // Otherwise, the split node also needs to be removed...
        // Clear the parent reference on the split node.
        var maybeParent = splitNode.parent;
        splitNode.parent = null;
        // Lookup the remaining child node and handle.
        var childNode = splitNode.children[0];
        var childHandle = splitNode.handles[0];
        // Clear the split node data.
        splitNode.children.length = 0;
        splitNode.handles.length = 0;
        splitNode.sizers.length = 0;
        // Remove the child handle from its parent node.
        if (childHandle.parentNode) {
            childHandle.parentNode.removeChild(childHandle);
        }
        // Handle the case where the split node is the root.
        if (this._root === splitNode) {
            childNode.parent = null;
            this._root = childNode;
            return;
        }
        // Otherwise, move the child node to the parent node...
        var parentNode = maybeParent;
        // Lookup the index of the split node.
        var j = parentNode.children.indexOf(splitNode);
        // Handle the case where the child node is a tab node.
        if (childNode instanceof Private.TabLayoutNode) {
            childNode.parent = parentNode;
            parentNode.children[j] = childNode;
        }
        else if (childNode instanceof Private.SplitLayoutNode) {
            // Remove the split data from the parent.
            var splitHandle = __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeAt(parentNode.handles, j);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeAt(parentNode.children, j);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeAt(parentNode.sizers, j);
            // Remove the handle from its parent node.
            if (splitHandle.parentNode) {
                splitHandle.parentNode.removeChild(splitHandle);
            }
            // The child node and the split parent node will have the same
            // orientation. Merge the grand-children with the parent node.
            for (var i_1 = 0, n = childNode.children.length; i_1 < n; ++i_1) {
                var gChild = childNode.children[i_1];
                var gHandle = childNode.handles[i_1];
                var gSizer = childNode.sizers[i_1];
                __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(parentNode.children, j + i_1, gChild);
                __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(parentNode.handles, j + i_1, gHandle);
                __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(parentNode.sizers, j + i_1, gSizer);
                gChild.parent = parentNode;
            }
            // Clear the child node.
            childNode.children.length = 0;
            childNode.handles.length = 0;
            childNode.sizers.length = 0;
            childNode.parent = null;
            // Sync the handles on the parent node.
            parentNode.syncHandles();
        }
    };
    /**
     * Insert a widget as a new split area.
     *
     * #### Notes
     * This does not attach the widget to the parent widget.
     */
    SplitDockLayout.prototype._insertSplit = function (widget, ref, refNode, orientation, after) {
        // Do nothing if there is no effective split.
        if (widget === ref) {
            return;
        }
        // Ensure the widget is removed from the current layout.
        this._removeWidget(widget);
        // Create the tab layout node to hold the widget.
        var tabNode = new Private.TabLayoutNode(this._createTab(widget.title));
        // Set the root if it does not exist.
        if (!this._root) {
            this._root = tabNode;
            return;
        }
        // If the ref node parent is null, split the root.
        if (!refNode || !refNode.parent) {
            // Ensure the root is split with the correct orientation.
            var root = this._splitRoot(orientation);
            // Determine the insert index for the new tab node.
            var i_2 = after ? root.children.length : 0;
            // Normalize the split node.
            root.normalizeSizes();
            // Create the sizer for new tab node.
            var sizer = Private.createSizer(refNode ? 1 : Private.GOLDEN_RATIO);
            // Insert the tab node sized to the golden ratio.
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(root.children, i_2, tabNode);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(root.sizers, i_2, sizer);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(root.handles, i_2, this._createHandle());
            tabNode.parent = root;
            // Re-normalize the split node to maintain the ratios.
            root.normalizeSizes();
            // Finally, synchronize the visibility of the handles.
            root.syncHandles();
            return;
        }
        // Lookup the split node for the ref widget.
        var splitNode = refNode.parent;
        // If the split node already had the correct orientation,
        // the widget can be inserted into the split node directly.
        if (splitNode.orientation === orientation) {
            // Find the index of the ref node.
            var i_3 = splitNode.children.indexOf(refNode);
            // Normalize the split node.
            splitNode.normalizeSizes();
            // Consume half the space for the insert location.
            var s = splitNode.sizers[i_3].sizeHint /= 2;
            // Insert the tab node sized to the other half.
            var j_1 = i_3 + (after ? 1 : 0);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(splitNode.children, j_1, tabNode);
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(splitNode.sizers, j_1, Private.createSizer(s));
            __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(splitNode.handles, j_1, this._createHandle());
            tabNode.parent = splitNode;
            // Finally, synchronize the visibility of the handles.
            splitNode.syncHandles();
            return;
        }
        // Remove the ref node from the split node.
        var i = __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].removeFirstOf(splitNode.children, refNode);
        // Create a new normalized split node for the children.
        var childNode = new Private.SplitLayoutNode(orientation);
        childNode.normalized = true;
        // Add the ref node sized to half the space.
        childNode.children.push(refNode);
        childNode.sizers.push(Private.createSizer(0.5));
        childNode.handles.push(this._createHandle());
        refNode.parent = childNode;
        // Add the tab node sized to the other half.
        var j = after ? 1 : 0;
        __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(childNode.children, j, tabNode);
        __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(childNode.sizers, j, Private.createSizer(0.5));
        __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(childNode.handles, j, this._createHandle());
        tabNode.parent = childNode;
        // Synchronize the visibility of the handles.
        childNode.syncHandles();
        // Finally, add the new child node to the original split node.
        __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].insert(splitNode.children, i, childNode);
        childNode.parent = splitNode;
    };
    /**
     * Ensure the root is a split node with the given orientation.
     */
    SplitDockLayout.prototype._splitRoot = function (orientation) {
        // Bail early if the root already meets the requirements.
        var oldRoot = this._root;
        if (oldRoot instanceof Private.SplitLayoutNode) {
            if (oldRoot.orientation === orientation) {
                return oldRoot;
            }
        }
        // Create a new root node with the specified orientation.
        var newRoot = this._root = new Private.SplitLayoutNode(orientation);
        // Add the old root to the new root.
        if (oldRoot) {
            newRoot.children.push(oldRoot);
            newRoot.sizers.push(Private.createSizer(0));
            newRoot.handles.push(this._createHandle());
            oldRoot.parent = newRoot;
        }
        // Return the new root as a convenience.
        return newRoot;
    };
    /**
     * Fit the layout to the total size required by the widgets.
     */
    SplitDockLayout.prototype._fit = function () {
        // Set up the computed minimum size.
        var minW = 0;
        var minH = 0;
        // Update the size limits for the layout tree.
        if (this._expandedLayout) {
            var limits = this._expandedLayout.fit(this._spacing, this._items);
            minW = limits.minWidth;
            minH = limits.minHeight;
        }
        else if (this._root) {
            var limits = this._root.fit(this._spacing, this._items);
            minW = limits.minWidth;
            minH = limits.minHeight;
        }
        // Update the box sizing and add it to the computed min size.
        var box = this._box = __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__["ElementExt"].boxSizing(this.parent.node);
        minW += box.horizontalSum;
        minH += box.verticalSum;
        // Update the parent's min size constraints.
        var style = this.parent.node.style;
        style.minWidth = minW + "px";
        style.minHeight = minH + "px";
        // Set the dirty flag to ensure only a single update occurs.
        this._dirty = true;
        // Notify the ancestor that it should fit immediately. This may
        // cause a resize of the parent, fulfilling the required update.
        if (this.parent.parent) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(this.parent.parent, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.FitRequest);
        }
        // If the dirty flag is still set, the parent was not resized.
        // Trigger the required update on the parent widget immediately.
        if (this._dirty) {
            __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["MessageLoop"].sendMessage(this.parent, __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Widget"].Msg.UpdateRequest);
        }
    };
    /**
     * Update the layout position and size of the widgets.
     *
     * The parent offset dimensions should be `-1` if unknown.
     */
    SplitDockLayout.prototype._update = function (offsetWidth, offsetHeight) {
        // Clear the dirty flag to indicate the update occurred.
        this._dirty = false;
        // Bail early if there is no root layout node.
        if (!this._root) {
            return;
        }
        // Measure the parent if the offset dimensions are unknown.
        if (offsetWidth < 0) {
            offsetWidth = this.parent.node.offsetWidth;
        }
        if (offsetHeight < 0) {
            offsetHeight = this.parent.node.offsetHeight;
        }
        // Ensure the parent box sizing data is computed.
        if (!this._box) {
            this._box = __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__["ElementExt"].boxSizing(this.parent.node);
        }
        // Compute the actual layout bounds adjusted for border and padding.
        var x = +this._box.paddingTop;
        var y = +this._box.paddingLeft;
        var width = offsetWidth - this._box.horizontalSum;
        var height = offsetHeight - this._box.verticalSum;
        // Update the geometry of the layout tree.
        (this._expandedLayout || this._root).update(x, y, width, height, this._spacing, this._items);
    };
    /**
     * Create a new tab for use by the dock layout.
     *
     * #### Notes
     * The tab will be attached to the parent if it exists.
     */
    SplitDockLayout.prototype._createTab = function (title) {
        // Create the tab using the renderer.
        var tab = this.renderer.createTab(title);
        // Reparent and attach the tab to the parent if possible.
        if (this.parent) {
            tab.parent = this.parent;
            this.attachWidget(tab);
        }
        // Return the initialized tab.
        return tab;
    };
    /**
     * Create a new handle for the dock layout.
     *
     * #### Notes
     * The handle will be attached to the parent if it exists.
     */
    SplitDockLayout.prototype._createHandle = function () {
        // Create the handle using the renderer.
        var handle = this.renderer.createHandle();
        // Initialize the handle layout behavior.
        var style = handle.style;
        style.position = 'absolute';
        style.top = '0';
        style.left = '0';
        style.width = '0';
        style.height = '0';
        // Attach the handle to the parent if it exists.
        if (this.parent) {
            this.parent.node.appendChild(handle);
        }
        // Return the initialized handle.
        return handle;
    };
    return SplitDockLayout;
}(__WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["Layout"]));

/**
 * The namespace for the module implementation details.
 */
var Private;
(function (Private) {
    /**
     * A fraction used for sizing root panels; ~= `1 / golden_ratio`.
     */
    Private.GOLDEN_RATIO = 0.618;
    /**
     * Clamp a spacing value to an integer >= 0.
     */
    function clampSpacing(value) {
        return Math.max(0, Math.floor(value));
    }
    Private.clampSpacing = clampSpacing;
    /**
     * Create a box sizer with an initial size hint.
     */
    function createSizer(hint) {
        var sizer = new __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxSizer"]();
        sizer.sizeHint = hint;
        sizer.size = hint;
        return sizer;
    }
    Private.createSizer = createSizer;
    /**
     * Normalize an area config object and collect the visited widgets.
     */
    function normalizeAreaConfig(config, widgetSet) {
        var result;
        if (config.type === 'tab-area') {
            result = normalizeTabAreaConfig(config, widgetSet);
        }
        else {
            result = normalizeSplitAreaConfig(config, widgetSet);
        }
        return result;
    }
    Private.normalizeAreaConfig = normalizeAreaConfig;
    /**
     * Convert a normalized area config into a layout tree.
     */
    function realizeAreaConfig(config, renderer) {
        var node;
        if (config.type === 'tab-area') {
            node = realizeTabAreaConfig(config, renderer);
        }
        else {
            node = realizeSplitAreaConfig(config, renderer);
        }
        return node;
    }
    Private.realizeAreaConfig = realizeAreaConfig;
    /**
     * A layout node which holds the data for a tabbed area.
     */
    var TabLayoutNode = (function () {
        /**
         * Construct a new tab layout node.
         *
         * @param tab - The tab to use for the layout node.
         */
        function TabLayoutNode(tab) {
            /**
             * The parent of the layout node.
             */
            this.parent = null;
            this._top = 0;
            this._left = 0;
            this._width = 0;
            this._height = 0;
            var tabSizer = new __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxSizer"]();
            var widgetSizer = new __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxSizer"]();
            tabSizer.stretch = 0;
            widgetSizer.stretch = 1;
            this.tab = tab;
            this.sizers = [tabSizer, widgetSizer];
        }
        Object.defineProperty(TabLayoutNode.prototype, "top", {
            /**
             * The most recent value for the `top` edge of the layout box.
             */
            get: function () {
                return this._top;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(TabLayoutNode.prototype, "left", {
            /**
             * The most recent value for the `left` edge of the layout box.
             */
            get: function () {
                return this._left;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(TabLayoutNode.prototype, "width", {
            /**
             * The most recent value for the `width` of the layout box.
             */
            get: function () {
                return this._width;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(TabLayoutNode.prototype, "height", {
            /**
             * The most recent value for the `height` of the layout box.
             */
            get: function () {
                return this._height;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Create an iterator for all widgets in the layout tree.
         */
        TabLayoutNode.prototype.iterAllWidgets = function () {
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["chain"])(Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["once"])(this.tab), this.iterUserWidgets());
        };
        /**
         * Create an iterator for the user widgets in the layout tree.
         */
        TabLayoutNode.prototype.iterUserWidgets = function () {
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["once"])(this.tab.child);
        };
        /**
         * Create an iterator for the selected widgets in the layout tree.
         */
        TabLayoutNode.prototype.iterSelectedWidgets = function () {
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["once"])(this.tab.child);
        };
        /**
         * Create an iterator for the tabs in the layout tree.
         */
        TabLayoutNode.prototype.iterTabs = function () {
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["once"])(this.tab);
        };
        /**
         * Create an iterator for the handles in the layout tree.
         */
        TabLayoutNode.prototype.iterHandles = function () {
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["empty"])();
        };
        /**
         * Find the tab layout node which contains the given widget.
         */
        TabLayoutNode.prototype.findTabNode = function (widget) {
            return this.tab.child === widget ? this : null;
        };
        /**
         * Find the split layout node which contains the given handle.
         */
        TabLayoutNode.prototype.findSplitNode = function (handle) {
            return null;
        };
        /**
         * Find the first tab layout node in a layout tree.
         */
        TabLayoutNode.prototype.findFirstTabNode = function () {
            return this;
        };
        /**
         * Find the tab layout node which contains the local point.
         */
        TabLayoutNode.prototype.hitTestTabNodes = function (x, y) {
            if (x < this._left || x >= this._left + this._width) {
                return null;
            }
            if (y < this._top || y >= this._top + this._height) {
                return null;
            }
            return this;
        };
        /**
         * Create a configuration object for the layout tree.
         */
        TabLayoutNode.prototype.createConfig = function () {
            var widget = this.tab.child;
            return { type: 'tab-area', widget: widget };
        };
        /**
         * Recursively hold all of the sizes in the layout tree.
         *
         * This ignores the sizers of tab layout nodes.
         */
        TabLayoutNode.prototype.holdAllSizes = function () {
            return;
        };
        /**
         * Fit the layout tree.
         */
        TabLayoutNode.prototype.fit = function (spacing, items) {
            // Set up the limit variables.
            var minWidth = 0;
            var minHeight = 0;
            var maxWidth = Infinity;
            var maxHeight = Infinity;
            // Lookup the tab layout item.
            var tabItem = items.get(this.tab);
            // Lookup the widget layout item.
            var widgetItem = items.get(this.tab.child);
            // Lookup the tab and widget sizers.
            var _a = this.sizers, tabSizer = _a[0], widgetSizer = _a[1];
            // Update the tab limits.
            if (tabItem) {
                tabItem.fit();
            }
            // Update the widget limits.
            if (widgetItem) {
                widgetItem.fit();
            }
            // Update the results and sizer for the tab.
            if (tabItem && !tabItem.isHidden) {
                minWidth = Math.max(minWidth, tabItem.minWidth);
                minHeight += tabItem.minHeight;
                tabSizer.minSize = tabItem.minHeight;
                tabSizer.maxSize = tabItem.maxHeight;
            }
            else {
                tabSizer.minSize = 0;
                tabSizer.maxSize = 0;
            }
            // Update the results and sizer for the current widget.
            if (widgetItem && !widgetItem.isHidden) {
                minWidth = Math.max(minWidth, widgetItem.minWidth);
                minHeight += widgetItem.minHeight;
                widgetSizer.minSize = widgetItem.minHeight;
                widgetSizer.maxSize = Infinity;
                widgetSizer.stretch = 1;
            }
            else {
                maxHeight = minHeight;
                widgetSizer.minSize = 0;
                widgetSizer.maxSize = 0;
                widgetSizer.stretch = 0;
            }
            // Return the computed size limits for the layout node.
            return { minWidth: minWidth, minHeight: minHeight, maxWidth: maxWidth, maxHeight: maxHeight };
        };
        /**
         * Update the layout tree.
         */
        TabLayoutNode.prototype.update = function (left, top, width, height, spacing, items) {
            // Update the layout box values.
            this._top = top;
            this._left = left;
            this._width = width;
            this._height = height;
            // Lookup the tab layout item.
            var tabItem = items.get(this.tab);
            // Lookup the widget layout item.
            var widgetItem = items.get(this.tab.child);
            // Distribute the layout space to the sizers.
            __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxEngine"].calc(this.sizers, height);
            // Update the tab item using the computed size.
            if (tabItem && !tabItem.isHidden) {
                var size = this.sizers[0].size;
                tabItem.update(left, top, width, size);
                top += size;
            }
            // Layout the widget using the computed size.
            if (widgetItem && !widgetItem.isHidden) {
                var size = this.sizers[1].size;
                widgetItem.update(left, top, width, size);
            }
        };
        return TabLayoutNode;
    }());
    Private.TabLayoutNode = TabLayoutNode;
    /**
     * A layout node which holds the data for a split area.
     */
    var SplitLayoutNode = (function () {
        /**
         * Construct a new split layout node.
         *
         * @param orientation - The orientation of the node.
         */
        function SplitLayoutNode(orientation) {
            /**
             * The parent of the layout node.
             */
            this.parent = null;
            /**
             * Whether the sizers have been normalized.
             */
            this.normalized = false;
            /**
             * The child nodes for the split node.
             */
            this.children = [];
            /**
             * The box sizers for the layout children.
             */
            this.sizers = [];
            /**
             * The handles for the layout children.
             */
            this.handles = [];
            this.orientation = orientation;
        }
        /**
         * Create an iterator for all widgets in the layout tree.
         */
        SplitLayoutNode.prototype.iterAllWidgets = function () {
            var children = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["map"])(this.children, function (child) { return child.iterAllWidgets(); });
            return new __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ChainIterator"](children);
        };
        /**
         * Create an iterator for the user widgets in the layout tree.
         */
        SplitLayoutNode.prototype.iterUserWidgets = function () {
            var children = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["map"])(this.children, function (child) { return child.iterUserWidgets(); });
            return new __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ChainIterator"](children);
        };
        /**
         * Create an iterator for the selected widgets in the layout tree.
         */
        SplitLayoutNode.prototype.iterSelectedWidgets = function () {
            var children = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["map"])(this.children, function (child) { return child.iterSelectedWidgets(); });
            return new __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ChainIterator"](children);
        };
        /**
         * Create an iterator for the tabs in the layout tree.
         */
        SplitLayoutNode.prototype.iterTabs = function () {
            var children = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["map"])(this.children, function (child) { return child.iterTabs(); });
            return new __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ChainIterator"](children);
        };
        /**
         * Create an iterator for the handles in the layout tree.
         */
        SplitLayoutNode.prototype.iterHandles = function () {
            var children = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["map"])(this.children, function (child) { return child.iterHandles(); });
            return Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["chain"])(this.handles, new __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ChainIterator"](children));
        };
        /**
         * Find the tab layout node which contains the given widget.
         */
        SplitLayoutNode.prototype.findTabNode = function (widget) {
            for (var i = 0, n = this.children.length; i < n; ++i) {
                var result = this.children[i].findTabNode(widget);
                if (result) {
                    return result;
                }
            }
            return null;
        };
        /**
         * Find the split layout node which contains the given handle.
         */
        SplitLayoutNode.prototype.findSplitNode = function (handle) {
            var index = this.handles.indexOf(handle);
            if (index !== -1) {
                return { index: index, node: this };
            }
            for (var i = 0, n = this.children.length; i < n; ++i) {
                var result = this.children[i].findSplitNode(handle);
                if (result) {
                    return result;
                }
            }
            return null;
        };
        /**
         * Find the first tab layout node in a layout tree.
         */
        SplitLayoutNode.prototype.findFirstTabNode = function () {
            if (this.children.length === 0) {
                return null;
            }
            return this.children[0].findFirstTabNode();
        };
        /**
         * Find the tab layout node which contains the local point.
         */
        SplitLayoutNode.prototype.hitTestTabNodes = function (x, y) {
            for (var i = 0, n = this.children.length; i < n; ++i) {
                var result = this.children[i].hitTestTabNodes(x, y);
                if (result) {
                    return result;
                }
            }
            return null;
        };
        /**
         * Create a configuration object for the layout tree.
         */
        SplitLayoutNode.prototype.createConfig = function () {
            var orientation = this.orientation;
            var sizes = this.createNormalizedSizes();
            var children = this.children.map(function (child) { return child.createConfig(); });
            return { type: 'split-area', orientation: orientation, children: children, sizes: sizes };
        };
        /**
         * Sync the visibility and orientation of the handles.
         */
        SplitLayoutNode.prototype.syncHandles = function () {
            var _this = this;
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.handles, function (handle, i) {
                handle.setAttribute('data-orientation', _this.orientation);
                if (i === _this.handles.length - 1) {
                    handle.classList.add('p-mod-hidden');
                }
                else {
                    handle.classList.remove('p-mod-hidden');
                }
            });
        };
        /**
         * Hold the current sizes of the box sizers.
         *
         * This sets the size hint of each sizer to its current size.
         */
        SplitLayoutNode.prototype.holdSizes = function () {
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.sizers, function (sizer) {
                sizer.sizeHint = sizer.size;
            });
        };
        /**
         * Recursively hold all of the sizes in the layout tree.
         *
         * This ignores the sizers of tab layout nodes.
         */
        SplitLayoutNode.prototype.holdAllSizes = function () {
            Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.children, function (child) { return child.holdAllSizes(); });
            this.holdSizes();
        };
        /**
         * Normalize the sizes of the split layout node.
         */
        SplitLayoutNode.prototype.normalizeSizes = function () {
            // Bail early if the sizers are empty.
            var n = this.sizers.length;
            if (n === 0) {
                return;
            }
            // Hold the current sizes of the sizers.
            this.holdSizes();
            // Compute the sum of the sizes.
            var sum = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["reduce"])(this.sizers, function (v, sizer) { return v + sizer.sizeHint; }, 0);
            // Normalize the sizes based on the sum.
            if (sum === 0) {
                Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.sizers, function (sizer) {
                    sizer.size = sizer.sizeHint = 1 / n;
                });
            }
            else {
                Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.sizers, function (sizer) {
                    sizer.size = sizer.sizeHint /= sum;
                });
            }
            // Mark the sizes as normalized.
            this.normalized = true;
        };
        /**
         * Snap the normalized sizes of the split layout node.
         */
        SplitLayoutNode.prototype.createNormalizedSizes = function () {
            // Bail early if the sizers are empty.
            var n = this.sizers.length;
            if (n === 0) {
                return [];
            }
            // Grab the current sizes of the sizers.
            var sizes = this.sizers.map(function (sizer) { return sizer.size; });
            // Compute the sum of the sizes.
            var sum = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["reduce"])(sizes, function (v, size) { return v + size; }, 0);
            // Normalize the sizes based on the sum.
            if (sum === 0) {
                Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(sizes, function (size, i) {
                    sizes[i] = 1 / n;
                });
            }
            else {
                Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(sizes, function (size, i) {
                    sizes[i] = size / sum;
                });
            }
            // Return the normalized sizes.
            return sizes;
        };
        /**
         * Fit the layout tree.
         */
        SplitLayoutNode.prototype.fit = function (spacing, items) {
            // Compute the required fixed space.
            var horizontal = this.orientation === 'horizontal';
            var fixed = Math.max(0, this.children.length - 1) * spacing;
            // Set up the limit variables.
            var minWidth = horizontal ? fixed : 0;
            var minHeight = horizontal ? 0 : fixed;
            var maxWidth = Infinity;
            var maxHeight = Infinity;
            // Fit the children and update the limits.
            for (var i = 0, n = this.children.length; i < n; ++i) {
                var limits = this.children[i].fit(spacing, items);
                if (horizontal) {
                    minHeight = Math.max(minHeight, limits.minHeight);
                    minWidth += limits.minWidth;
                    this.sizers[i].minSize = limits.minWidth;
                    this.sizers[i].maxSize = limits.maxWidth;
                }
                else {
                    minWidth = Math.max(minWidth, limits.minWidth);
                    minHeight += limits.minHeight;
                    this.sizers[i].minSize = limits.minHeight;
                    this.sizers[i].maxSize = limits.maxHeight;
                }
            }
            // Return the computed limits for the layout node.
            return { minWidth: minWidth, minHeight: minHeight, maxWidth: maxWidth, maxHeight: maxHeight };
        };
        /**
         * Update the layout tree.
         */
        SplitLayoutNode.prototype.update = function (left, top, width, height, spacing, items) {
            // Compute the available layout space.
            var horizontal = this.orientation === 'horizontal';
            var fixed = Math.max(0, this.children.length - 1) * spacing;
            var space = Math.max(0, (horizontal ? width : height) - fixed);
            // De-normalize the sizes if needed.
            if (this.normalized) {
                Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(this.sizers, function (sizer) {
                    sizer.sizeHint *= space;
                });
                this.normalized = false;
            }
            // Distribute the layout space to the sizers.
            __WEBPACK_IMPORTED_MODULE_3__phosphor_widgets_lib__["BoxEngine"].calc(this.sizers, space);
            // Update the geometry of the child nodes and handles.
            for (var i = 0, n = this.children.length; i < n; ++i) {
                var child = this.children[i];
                var size = this.sizers[i].size;
                var handleStyle = this.handles[i].style;
                if (horizontal) {
                    child.update(left, top, size, height, spacing, items);
                    left += size;
                    handleStyle.top = top + "px";
                    handleStyle.left = left + "px";
                    handleStyle.width = spacing + "px";
                    handleStyle.height = height + "px";
                    left += spacing;
                }
                else {
                    child.update(left, top, width, size, spacing, items);
                    top += size;
                    handleStyle.top = top + "px";
                    handleStyle.left = left + "px";
                    handleStyle.width = width + "px";
                    handleStyle.height = spacing + "px";
                    top += spacing;
                }
            }
        };
        return SplitLayoutNode;
    }());
    Private.SplitLayoutNode = SplitLayoutNode;
    /**
     * Normalize a tab area config and collect the visited widgets.
     */
    function normalizeTabAreaConfig(config, widgetSet) {
        // Filter the config for unique widgets.
        if (!widgetSet.has(config.widget)) {
            widgetSet.add(config.widget);
            return { type: 'tab-area', widget: config.widget };
        }
        return null;
    }
    /**
     * Normalize a split area config and collect the visited widgets.
     */
    function normalizeSplitAreaConfig(config, widgetSet) {
        // Set up the result variables.
        var orientation = config.orientation;
        var children = [];
        var sizes = [];
        // Normalize the config children.
        for (var i = 0, n = config.children.length; i < n; ++i) {
            // Normalize the child config.
            var child = normalizeAreaConfig(config.children[i], widgetSet);
            // Ignore an empty child.
            if (!child) {
                continue;
            }
            // Add the child or hoist its content as appropriate.
            if (child.type === 'tab-area' || child.orientation !== orientation) {
                children.push(child);
                sizes.push(Math.abs(config.sizes[i] || 0));
            }
            else {
                children.push.apply(children, child.children);
                sizes.push.apply(sizes, child.sizes);
            }
        }
        // Bail if there are no effective children.
        if (children.length === 0) {
            return null;
        }
        // If there is only one effective child, return that child.
        if (children.length === 1) {
            return children[0];
        }
        // Return a normalized config object.
        return { type: 'split-area', orientation: orientation, children: children, sizes: sizes };
    }
    /**
     * Convert a normalized tab area config into a layout tree.
     */
    function realizeTabAreaConfig(config, renderer) {
        // Create the tab for the layout node.
        var tab = renderer.createTab(config.widget.title);
        // Return the new tab layout node.
        return new TabLayoutNode(tab);
    }
    /**
     * Convert a normalized split area config into a layout tree.
     */
    function realizeSplitAreaConfig(config, renderer) {
        // Create the split layout node.
        var node = new SplitLayoutNode(config.orientation);
        // Add each child to the layout node.
        Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["each"])(config.children, function (child, i) {
            // Create the child data for the layout node.
            var childNode = realizeAreaConfig(child, renderer);
            var sizer = createSizer(config.sizes[i]);
            var handle = renderer.createHandle();
            // Add the child data to the layout node.
            node.children.push(childNode);
            node.handles.push(handle);
            node.sizers.push(sizer);
            // Update the parent for the child node.
            childNode.parent = node;
        });
        // Synchronize the handle state for the layout node.
        node.syncHandles();
        // Normalize the sizes for the layout node.
        node.normalizeSizes();
        // Return the new layout node.
        return node;
    }
})(Private || (Private = {}));


/***/ }),

/***/ "../../../../../src/split-dock/split-dock-panel.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SplitDockPanel; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__ = __webpack_require__("../../../../@phosphor/algorithm/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_coreutils_lib__ = __webpack_require__("../../../../@phosphor/coreutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_coreutils_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__phosphor_coreutils_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__ = __webpack_require__("../../../../@phosphor/domutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib__ = __webpack_require__("../../../../@phosphor/dragdrop/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__ = __webpack_require__("../../../../@phosphor/messaging/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__phosphor_properties_lib__ = __webpack_require__("../../../../@phosphor/properties/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__phosphor_properties_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__phosphor_properties_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__phosphor_signaling_lib__ = __webpack_require__("../../../../@phosphor/signaling/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__phosphor_signaling_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__phosphor_signaling_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__split_dock_layout__ = __webpack_require__("../../../../../src/split-dock/split-dock-layout.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__split_dock_tab__ = __webpack_require__("../../../../../src/split-dock/split-dock-tab.ts");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__phosphor_widgets_lib__ = __webpack_require__("../../../../@phosphor/widgets/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__phosphor_widgets_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__phosphor_widgets_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__phosphor_virtualdom_lib__ = __webpack_require__("../../../../@phosphor/virtualdom/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__phosphor_virtualdom_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10__phosphor_virtualdom_lib__);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
/*-----------------------------------------------------------------------------
 | Copyright (c) 2014-2017, PhosphorJS Contributors
 |
 | Distributed under the terms of the BSD 3-Clause License.
 |
 | The full license is in the file LICENSE, distributed with this software.
 |----------------------------------------------------------------------------*/











/**
 * A widget which provides a flexible docking area for widgets.
 */
var SplitDockPanel = (function (_super) {
    __extends(SplitDockPanel, _super);
    /**
     * Construct a new dock panel.
     *
     * @param options - The options for initializing the panel.
     * @param events
     */
    function SplitDockPanel(options, events) {
        if (options === void 0) { options = {}; }
        var _this = _super.call(this) || this;
        _this.events = events;
        _this._drag = null;
        _this._pressData = null;
        _this._layoutModified = new __WEBPACK_IMPORTED_MODULE_6__phosphor_signaling_lib__["Signal"](_this);
        _this.addClass('p-DockPanel');
        _this._renderer = options.renderer || SplitDockPanel.defaultRenderer;
        // Create the delegate renderer for the layout.
        var renderer = {
            createTab: function (title) { return _this._createTab(title); },
            createHandle: function () { return _this._createHandle(); }
        };
        // Set up the dock layout for the panel.
        _this.layout = new __WEBPACK_IMPORTED_MODULE_7__split_dock_layout__["a" /* SplitDockLayout */]({ renderer: renderer, spacing: options.spacing });
        // Set up the overlay drop indicator.
        _this.overlay = options.overlay || new SplitDockPanel.Overlay();
        _this.node.appendChild(_this.overlay.node);
        return _this;
    }
    /**
     * Dispose of the resources held by the panel.
     */
    SplitDockPanel.prototype.dispose = function () {
        // Ensure the mouse is released.
        this._releaseMouse();
        // Hide the overlay.
        this.overlay.hide(0);
        // Cancel a drag if one is in progress.
        if (this._drag) {
            this._drag.dispose();
        }
        // Dispose of the base class.
        _super.prototype.dispose.call(this);
    };
    SplitDockPanel.prototype.selectWidget = function (widget) {
        var $previous = $(widget.parent.node).find('.p-DockPanel-widget.p-DockPanel-selected');
        var $current = $(widget.node);
        $previous.removeClass('p-DockPanel-selected');
        $current.addClass('p-DockPanel-selected');
    };
    Object.defineProperty(SplitDockPanel.prototype, "layoutModified", {
        /**
         * A signal emitted when the layout configuration is modified.
         *
         * #### Notes
         * This signal is emitted whenever the current layout configuration
         * may have changed.
         *
         * This signal is emitted asynchronously in a collapsed fashion, so
         * that multiple synchronous modifications results in only a single
         * emit of the signal.
         */
        get: function () {
            return this._layoutModified;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockPanel.prototype, "renderer", {
        /**
         * The renderer used by the dock panel.
         */
        get: function () {
            return this.layout.renderer;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockPanel.prototype, "spacing", {
        /**
         * Get the spacing between the widgets.
         */
        get: function () {
            return this.layout.spacing;
        },
        /**
         * Set the spacing between the widgets.
         */
        set: function (value) {
            this.layout.spacing = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockPanel.prototype, "isEmpty", {
        /**
         * Whether the dock panel is empty.
         */
        get: function () {
            return this.layout.isEmpty;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Create an iterator over the user widgets in the panel.
     *
     * @returns A new iterator over the user widgets in the panel.
     *
     * #### Notes
     * This iterator does not include the generated tabs.
     */
    SplitDockPanel.prototype.widgets = function () {
        return this.layout.widgets();
    };
    /**
     * Create an iterator over the selected widgets in the panel.
     *
     * @returns A new iterator over the selected user widgets.
     *
     * #### Notes
     * This iterator yields the widgets corresponding to the current tab
     * of each tab in the panel.
     */
    SplitDockPanel.prototype.selectedWidgets = function () {
        return this.layout.selectedWidgets();
    };
    /**
     * Create an iterator over the tabs in the panel.
     *
     * @returns A new iterator over the tabs in the panel.
     *
     * #### Notes
     * This iterator does not include the user widgets.
     */
    SplitDockPanel.prototype.tabs = function () {
        return this.layout.tabs();
    };
    /**
     * Create an iterator over the handles in the panel.
     *
     * @returns A new iterator over the handles in the panel.
     */
    SplitDockPanel.prototype.handles = function () {
        return this.layout.handles();
    };
    /**
     * Activate a specified widget in the dock panel.
     *
     * @param widget - The widget of interest.
     *
     * #### Notes
     * This will select and activate the given widget.
     */
    SplitDockPanel.prototype.activateWidget = function (widget) {
        widget.activate();
        this.selectWidget(widget);
    };
    /**
     * Save the current layout configuration of the dock panel.
     *
     * @returns A new config object for the current layout state.
     *
     * #### Notes
     * The return value can be provided to the `restoreLayout` method
     * in order to restore the layout to its current configuration.
     */
    SplitDockPanel.prototype.saveLayout = function () {
        return this.layout.saveLayout();
    };
    /**
     * Restore the layout to a previously saved configuration.
     *
     * @param config - The layout configuration to restore.
     *
     * #### Notes
     * Widgets which currently belong to the layout but which are not
     * contained in the config will be unparented.
     *
     * The dock panel automatically reverts to `'multiple-document'`
     * mode when a layout config is restored.
     */
    SplitDockPanel.prototype.restoreLayout = function (config) {
        // Restore the layout.
        this.layout.restoreLayout(config);
        // Flush the message loop on IE and Edge to prevent flicker.
        if (__WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__["Platform"].IS_EDGE || __WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__["Platform"].IS_IE) {
            __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].flush();
        }
        // Schedule an emit of the layout modified signal.
        __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].postMessage(this, Private.LayoutModified);
    };
    /**
     * Add a widget to the dock panel.
     *
     * @param widget - The widget to add to the dock panel.
     *
     * @param options - The additional options for adding the widget.
     *
     * #### Notes
     * If the panel is in single document mode, the options are ignored
     * and the widget is always added as tab in the hidden tab.
     */
    SplitDockPanel.prototype.addWidget = function (widget, options) {
        if (options === void 0) { options = {}; }
        // Add the widget to the layout.
        this.layout.addWidget(widget, options);
        // Schedule an emit of the layout modified signal.
        __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].postMessage(this, Private.LayoutModified);
    };
    SplitDockPanel.prototype.addWidgetDetached = function (widget, clientX, clientY) {
        var _this = this;
        // Do nothing if a drag is already in progress.
        if (this._drag) {
            return;
        }
        // Setup the mime data for the drag operation.
        var mimeData = new __WEBPACK_IMPORTED_MODULE_1__phosphor_coreutils_lib__["MimeData"]();
        var factory = function () { return widget; };
        mimeData.setData('application/vnd.phosphor.widget-factory', factory);
        var dragImage = __WEBPACK_IMPORTED_MODULE_10__phosphor_virtualdom_lib__["VirtualDOM"].realize(__WEBPACK_IMPORTED_MODULE_8__split_dock_tab__["a" /* SplitDockTab */].defaultRenderer.renderTab(widget));
        // Create the drag object to manage the drag-drop operation.
        this._drag = new __WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib__["Drag"]({
            mimeData: mimeData, dragImage: dragImage,
            proposedAction: 'move',
            supportedActions: 'move',
        });
        // Create the cleanup callback.
        var cleanup = (function () {
            _this._drag = null;
        });
        // Start the drag operation and cleanup when done.
        this._drag.start(clientX, clientY).then(cleanup);
    };
    /**
     * Process a message sent to the widget.
     *
     * @param msg - The message sent to the widget.
     */
    SplitDockPanel.prototype.processMessage = function (msg) {
        if (msg.type === 'layout-modified') {
            this._layoutModified.emit(undefined);
        }
        else {
            _super.prototype.processMessage.call(this, msg);
        }
    };
    /**
     * Handle the DOM events for the dock panel.
     *
     * @param event - The DOM event sent to the panel.
     *
     * #### Notes
     * This method implements the DOM `EventListener` interface and is
     * called in response to events on the panel's DOM node. It should
     * not be called directly by user code.
     */
    SplitDockPanel.prototype.handleEvent = function (event) {
        switch (event.type) {
            case 'p-dragenter':
                this._evtDragEnter(event);
                break;
            case 'p-dragleave':
                this._evtDragLeave(event);
                break;
            case 'p-dragover':
                this._evtDragOver(event);
                break;
            case 'p-drop':
                this._evtDrop(event);
                break;
            case 'mousedown':
                this._evtMouseDown(event);
                break;
            case 'mousemove':
                this._evtMouseMove(event);
                break;
            case 'mouseup':
                this._evtMouseUp(event);
                break;
            case 'keydown':
                this._evtKeyDown(event);
                break;
            case 'contextmenu':
                event.preventDefault();
                event.stopPropagation();
                break;
        }
    };
    /**
     * A message handler invoked on a `'before-attach'` message.
     */
    SplitDockPanel.prototype.onBeforeAttach = function (msg) {
        this.node.addEventListener('p-dragenter', this);
        this.node.addEventListener('p-dragleave', this);
        this.node.addEventListener('p-dragover', this);
        this.node.addEventListener('p-drop', this);
        this.node.addEventListener('mousedown', this);
    };
    /**
     * A message handler invoked on an `'after-detach'` message.
     */
    SplitDockPanel.prototype.onAfterDetach = function (msg) {
        this.node.removeEventListener('p-dragenter', this);
        this.node.removeEventListener('p-dragleave', this);
        this.node.removeEventListener('p-dragover', this);
        this.node.removeEventListener('p-drop', this);
        this.node.removeEventListener('mousedown', this);
        this._releaseMouse();
    };
    /**
     * A message handler invoked on a `'child-added'` message.
     */
    SplitDockPanel.prototype.onChildAdded = function (msg) {
        // Ignore the generated tabs.
        if (Private.isGeneratedTabProperty.get(msg.child)) {
            return;
        }
        // Add the widget class to the child.
        msg.child.addClass('p-DockPanel-widget');
    };
    /**
     * A message handler invoked on a `'child-removed'` message.
     */
    SplitDockPanel.prototype.onChildRemoved = function (msg) {
        // Ignore the generated tabs.
        if (Private.isGeneratedTabProperty.get(msg.child)) {
            return;
        }
        // Remove the widget class from the child.
        msg.child.removeClass('p-DockPanel-widget');
        // Schedule an emit of the layout modified signal.
        __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].postMessage(this, Private.LayoutModified);
    };
    /**
     * Handle the `'p-dragenter'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtDragEnter = function (event) {
        // If the factory mime type is present, mark the event as
        // handled in order to get the rest of the drag events.
        if (event.mimeData.hasData('application/vnd.phosphor.widget-factory')) {
            event.preventDefault();
            event.stopPropagation();
        }
    };
    /**
     * Handle the `'p-dragleave'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtDragLeave = function (event) {
        // Mark the event as handled.
        event.preventDefault();
        event.stopPropagation();
        // Get the node into which the drag is entering.
        var related = event.relatedTarget;
        // Hide the overlay if the drag is leaving the dock panel.
        if (!related || !this.node.contains(related)) {
            this.overlay.hide(0);
        }
    };
    /**
     * Handle the `'p-dragover'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtDragOver = function (event) {
        // Mark the event as handled.
        event.preventDefault();
        event.stopPropagation();
        // Show the drop indicator overlay and update the drop
        // action based on the drop target zone under the mouse.
        if (this._showOverlay(event.clientX, event.clientY) === 'invalid') {
            event.dropAction = 'none';
        }
        else {
            event.dropAction = event.proposedAction;
        }
    };
    /**
     * Handle the `'p-drop'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtDrop = function (event) {
        // Mark the event as handled.
        event.preventDefault();
        event.stopPropagation();
        // Hide the drop indicator overlay.
        this.overlay.hide(0);
        // Bail if the proposed action is to do nothing.
        if (event.proposedAction === 'none') {
            event.dropAction = 'none';
            return;
        }
        // Find the drop target under the mouse.
        var clientX = event.clientX, clientY = event.clientY;
        var _a = Private.findDropTarget(this, clientX, clientY), zone = _a.zone, target = _a.target;
        // Bail if the drop zone is invalid.
        if (zone === 'invalid') {
            event.dropAction = 'none';
            return;
        }
        // Bail if the factory mime type has invalid data.
        var mimeData = event.mimeData;
        var factory = mimeData.getData('application/vnd.phosphor.widget-factory');
        if (typeof factory !== 'function') {
            event.dropAction = 'none';
            return;
        }
        // Bail if the factory does not produce a widget.
        var widget = factory();
        if (!(widget instanceof __WEBPACK_IMPORTED_MODULE_9__phosphor_widgets_lib__["Widget"])) {
            event.dropAction = 'none';
            return;
        }
        // Bail if the widget is an ancestor of the dock panel.
        if (widget.contains(this)) {
            event.dropAction = 'none';
            return;
        }
        // Find the reference widget for the drop target.
        var ref = target ? Private.getDropRef(target.tab) : null;
        // Add the widget according to the indicated drop zone.
        switch (zone) {
            case 'root-all':
                this.addWidget(widget);
                break;
            case 'root-top':
                this.addWidget(widget, { mode: 'split-top' });
                break;
            case 'root-left':
                this.addWidget(widget, { mode: 'split-left' });
                break;
            case 'root-right':
                this.addWidget(widget, { mode: 'split-right' });
                break;
            case 'root-bottom':
                this.addWidget(widget, { mode: 'split-bottom' });
                break;
            case 'widget-top':
                this.addWidget(widget, { mode: 'split-top', ref: ref });
                break;
            case 'widget-left':
                this.addWidget(widget, { mode: 'split-left', ref: ref });
                break;
            case 'widget-right':
                this.addWidget(widget, { mode: 'split-right', ref: ref });
                break;
            case 'widget-bottom':
                this.addWidget(widget, { mode: 'split-bottom', ref: ref });
                break;
            default:
                throw new Error('unreachable');
        }
        // Accept the proposed drop action.
        event.dropAction = event.proposedAction;
    };
    /**
     * Handle the `'keydown'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtKeyDown = function (event) {
        // Stop input events during drag.
        event.preventDefault();
        event.stopPropagation();
        // Release the mouse if `Escape` is pressed.
        if (event.keyCode === 27) {
            // Finalize the mouse release.
            this._releaseMouse();
            // Schedule an emit of the layout modified signal.
            __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].postMessage(this, Private.LayoutModified);
        }
    };
    /**
     * Handle the `'mousedown'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtMouseDown = function (event) {
        // Do nothing if the left mouse button is not pressed.
        if (event.button !== 0) {
            return;
        }
        // Find the handle which contains the mouse target, if any.
        var layout = this.layout;
        var target = event.target;
        var handle = Object(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["find"])(layout.handles(), function (handle) { return handle.contains(target); });
        if (!handle) {
            return;
        }
        // Stop the event when a handle is pressed.
        event.preventDefault();
        event.stopPropagation();
        // Add the extra document listeners.
        document.addEventListener('keydown', this, true);
        document.addEventListener('mouseup', this, true);
        document.addEventListener('mousemove', this, true);
        document.addEventListener('contextmenu', this, true);
        // Compute the offset deltas for the handle press.
        var rect = handle.getBoundingClientRect();
        var deltaX = event.clientX - rect.left;
        var deltaY = event.clientY - rect.top;
        // Override the cursor and store the press data.
        var style = window.getComputedStyle(handle);
        var override = __WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib__["Drag"].overrideCursor(style.cursor);
        this._pressData = { handle: handle, deltaX: deltaX, deltaY: deltaY, override: override };
    };
    /**
     * Handle the `'mousemove'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtMouseMove = function (event) {
        // Bail early if no drag is in progress.
        if (!this._pressData) {
            return;
        }
        // Stop the event when dragging a handle.
        event.preventDefault();
        event.stopPropagation();
        // Compute the desired offset position for the handle.
        var rect = this.node.getBoundingClientRect();
        var xPos = event.clientX - rect.left - this._pressData.deltaX;
        var yPos = event.clientY - rect.top - this._pressData.deltaY;
        // Set the handle as close to the desired position as possible.
        var layout = this.layout;
        layout.moveHandle(this._pressData.handle, xPos, yPos);
    };
    /**
     * Handle the `'mouseup'` event for the dock panel.
     */
    SplitDockPanel.prototype._evtMouseUp = function (event) {
        // Do nothing if the left mouse button is not released.
        if (event.button !== 0) {
            return;
        }
        // Stop the event when releasing a handle.
        event.preventDefault();
        event.stopPropagation();
        // Finalize the mouse release.
        this._releaseMouse();
        // Schedule an emit of the layout modified signal.
        __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["MessageLoop"].postMessage(this, Private.LayoutModified);
    };
    /**
     * Release the mouse grab for the dock panel.
     */
    SplitDockPanel.prototype._releaseMouse = function () {
        // Bail early if no drag is in progress.
        if (!this._pressData) {
            return;
        }
        // Clear the override cursor.
        this._pressData.override.dispose();
        this._pressData = null;
        // Remove the extra document listeners.
        document.removeEventListener('keydown', this, true);
        document.removeEventListener('mouseup', this, true);
        document.removeEventListener('mousemove', this, true);
        document.removeEventListener('contextmenu', this, true);
    };
    /**
     * Show the overlay indicator at the given client position.
     *
     * Returns the drop zone at the specified client position.
     *
     * #### Notes
     * If the position is not over a valid zone, the overlay is hidden.
     */
    SplitDockPanel.prototype._showOverlay = function (clientX, clientY) {
        // Find the dock target for the given client position.
        var _a = Private.findDropTarget(this, clientX, clientY), zone = _a.zone, target = _a.target;
        // If the drop zone is invalid, hide the overlay and bail.
        if (zone === 'invalid') {
            this.overlay.hide(100);
            return zone;
        }
        // Setup the variables needed to compute the overlay geometry.
        var top;
        var left;
        var right;
        var bottom;
        var box = __WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__["ElementExt"].boxSizing(this.node); // TODO cache this?
        var rect = this.node.getBoundingClientRect();
        // Compute the overlay geometry based on the dock zone.
        switch (zone) {
            case 'root-all':
                top = box.paddingTop;
                left = box.paddingLeft;
                right = box.paddingRight;
                bottom = box.paddingBottom;
                break;
            case 'root-top':
                top = box.paddingTop;
                left = box.paddingLeft;
                right = box.paddingRight;
                bottom = rect.height * Private.GOLDEN_RATIO;
                break;
            case 'root-left':
                top = box.paddingTop;
                left = box.paddingLeft;
                right = rect.width * Private.GOLDEN_RATIO;
                bottom = box.paddingBottom;
                break;
            case 'root-right':
                top = box.paddingTop;
                left = rect.width * Private.GOLDEN_RATIO;
                right = box.paddingRight;
                bottom = box.paddingBottom;
                break;
            case 'root-bottom':
                top = rect.height * Private.GOLDEN_RATIO;
                left = box.paddingLeft;
                right = box.paddingRight;
                bottom = box.paddingBottom;
                break;
            case 'widget-top':
                top = target.top;
                left = target.left;
                right = target.right;
                bottom = target.bottom + target.height / 2;
                break;
            case 'widget-left':
                top = target.top;
                left = target.left;
                right = target.right + target.width / 2;
                bottom = target.bottom;
                break;
            case 'widget-right':
                top = target.top;
                left = target.left + target.width / 2;
                right = target.right;
                bottom = target.bottom;
                break;
            case 'widget-bottom':
                top = target.top + target.height / 2;
                left = target.left;
                right = target.right;
                bottom = target.bottom;
                break;
            default:
                throw new Error('unreachable');
        }
        // Show the overlay with the computed geometry.
        this.overlay.show({ top: top, left: left, right: right, bottom: bottom });
        // Finally, return the computed drop zone.
        return zone;
    };
    /**
     * Create a new tab for use by the panel.
     */
    SplitDockPanel.prototype._createTab = function (title) {
        // Create the tab.
        var tab = this._renderer.createTab(title);
        // Set the generated tab property for the tab.
        Private.isGeneratedTabProperty.set(tab, true);
        // Connect the signal handlers for the tab.
        tab.tabMinimizeRequested.connect(this._onTabMinimizeRequested, this);
        tab.tabExpandRequested.connect(this._onTabExpandRequested, this);
        tab.tabCollapseRequested.connect(this._onTabCollapseRequested, this);
        tab.tabCloseRequested.connect(this._onTabCloseRequested, this);
        tab.tabDetachRequested.connect(this._onTabDetachRequested, this);
        tab.tabActivateRequested.connect(this._onTabActivateRequested, this);
        // Return the initialized tab.
        return tab;
    };
    /**
     * Create a new handle for use by the panel.
     */
    SplitDockPanel.prototype._createHandle = function () {
        return this._renderer.createHandle();
    };
    /**
     * Handle the `tabActivateRequested` signal from a tab.
     */
    SplitDockPanel.prototype._onTabActivateRequested = function (sender, args) {
        args.widget.activate();
        this.selectWidget(args.widget);
    };
    SplitDockPanel.prototype._onTabMinimizeRequested = function (sender) {
        sender.child.isHidden ? sender.child.show() : sender.child.hide();
    };
    SplitDockPanel.prototype._onTabExpandRequested = function (sender) {
        this.layout.expandWidget(sender.child);
    };
    SplitDockPanel.prototype._onTabCollapseRequested = function (sender) {
        this.layout.collapseWidget();
    };
    /**
     * Handle the `tabCloseRequested` signal from a tab.
     */
    SplitDockPanel.prototype._onTabCloseRequested = function (sender) {
        sender.child.close();
    };
    /**
     * Handle the `tabDetachRequested` signal from a tab.
     */
    SplitDockPanel.prototype._onTabDetachRequested = function (sender, args) {
        var _this = this;
        // Do nothing if a drag is already in progress.
        if (this._drag) {
            return;
        }
        // Release the tab's hold on the mouse.
        sender.releaseMouse();
        // Extract the data from the args.
        var widget = args.widget, tab = args.tab, clientX = args.clientX, clientY = args.clientY;
        // Setup the mime data for the drag operation.
        var mimeData = new __WEBPACK_IMPORTED_MODULE_1__phosphor_coreutils_lib__["MimeData"]();
        var factory = function () { return widget; };
        mimeData.setData('application/vnd.phosphor.widget-factory', factory);
        // Create the drag image for the drag operation.
        var dragImage = tab.cloneNode(true);
        // Create the drag object to manage the drag-drop operation.
        this._drag = new __WEBPACK_IMPORTED_MODULE_3__phosphor_dragdrop_lib__["Drag"]({
            mimeData: mimeData, dragImage: dragImage,
            proposedAction: 'move',
            supportedActions: 'move',
        });
        // Hide the tab node in the original tab.
        tab.classList.add('p-mod-hidden');
        // Create the cleanup callback.
        var cleanup = (function () {
            _this._drag = null;
            tab.classList.remove('p-mod-hidden');
        });
        // Start the drag operation and cleanup when done.
        this._drag.start(clientX, clientY).then(cleanup);
    };
    return SplitDockPanel;
}(__WEBPACK_IMPORTED_MODULE_9__phosphor_widgets_lib__["Widget"]));

/**
 * The namespace for the `DockPanel` class statics.
 */
(function (SplitDockPanel) {
    /**
     * A concrete implementation of `IOverlay`.
     *
     * This is the default overlay implementation for a dock panel.
     */
    var Overlay = (function () {
        /**
         * Construct a new overlay.
         */
        function Overlay() {
            this._timer = -1;
            this._hidden = true;
            this.node = document.createElement('div');
            this.node.classList.add('p-DockPanel-overlay');
            this.node.classList.add('p-mod-hidden');
            this.node.style.position = 'absolute';
        }
        /**
         * Show the overlay using the given overlay geometry.
         *
         * @param geo - The desired geometry for the overlay.
         */
        Overlay.prototype.show = function (geo) {
            // Update the position of the overlay.
            var style = this.node.style;
            style.top = geo.top + "px";
            style.left = geo.left + "px";
            style.right = geo.right + "px";
            style.bottom = geo.bottom + "px";
            // Clear any pending hide timer.
            clearTimeout(this._timer);
            this._timer = -1;
            // If the overlay is already visible, we're done.
            if (!this._hidden) {
                return;
            }
            // Clear the hidden flag.
            this._hidden = false;
            // Finally, show the overlay.
            this.node.classList.remove('p-mod-hidden');
        };
        /**
         * Hide the overlay node.
         *
         * @param delay - The delay (in ms) before hiding the overlay.
         *   A delay value <= 0 will hide the overlay immediately.
         */
        Overlay.prototype.hide = function (delay) {
            var _this = this;
            // Do nothing if the overlay is already hidden.
            if (this._hidden) {
                return;
            }
            // Hide immediately if the delay is <= 0.
            if (delay <= 0) {
                clearTimeout(this._timer);
                this._timer = -1;
                this._hidden = true;
                this.node.classList.add('p-mod-hidden');
                return;
            }
            // Do nothing if a hide is already pending.
            if (this._timer !== -1) {
                return;
            }
            // Otherwise setup the hide timer.
            this._timer = window.setTimeout(function () {
                _this._timer = -1;
                _this._hidden = true;
                _this.node.classList.add('p-mod-hidden');
            }, delay);
        };
        return Overlay;
    }());
    SplitDockPanel.Overlay = Overlay;
    /**
     * The default implementation of `IRenderer`.
     */
    var Renderer = (function () {
        function Renderer() {
        }
        /**
         * Create a new tab for use with a dock panel.
         *
         * @returns A new tab for a dock panel.
         */
        Renderer.prototype.createTab = function (title) {
            var bar = new __WEBPACK_IMPORTED_MODULE_8__split_dock_tab__["a" /* SplitDockTab */]({ widget: title.owner });
            bar.addClass('p-DockPanel-tab');
            return bar;
        };
        /**
         * Create a new handle node for use with a dock panel.
         *
         * @returns A new handle node for a dock panel.
         */
        Renderer.prototype.createHandle = function () {
            var handle = document.createElement('div');
            handle.className = 'p-DockPanel-handle';
            return handle;
        };
        return Renderer;
    }());
    SplitDockPanel.Renderer = Renderer;
    /**
     * The default `Renderer` instance.
     */
    SplitDockPanel.defaultRenderer = new Renderer();
})(SplitDockPanel || (SplitDockPanel = {}));
/**
 * The namespace for the module implementation details.
 */
var Private;
(function (Private) {
    /**
     * A fraction used for sizing root panels; ~= `1 / golden_ratio`.
     */
    Private.GOLDEN_RATIO = 0.618;
    /**
     * The size of the edge dock zone for the root panel, in pixels.
     */
    Private.EDGE_SIZE = 40;
    /**
     * A singleton `'layout-modified'` conflatable message.
     */
    Private.LayoutModified = new __WEBPACK_IMPORTED_MODULE_4__phosphor_messaging_lib__["ConflatableMessage"]('layout-modified');
    /**
     * An attached property used to track generated tabs.
     */
    Private.isGeneratedTabProperty = new __WEBPACK_IMPORTED_MODULE_5__phosphor_properties_lib__["AttachedProperty"]({
        name: 'isGeneratedTab',
        create: function () { return false; }
    });
    /**
     * Find the drop target at the given client position.
     */
    function findDropTarget(panel, clientX, clientY) {
        // Bail if the mouse is not over the dock panel.
        if (!__WEBPACK_IMPORTED_MODULE_2__phosphor_domutils_lib__["ElementExt"].hitTest(panel.node, clientX, clientY)) {
            return { zone: 'invalid', target: null };
        }
        // Look up the layout for the panel.
        var layout = panel.layout;
        // If the layout is empty, indicate the entire root drop zone.
        if (layout.isEmpty) {
            return { zone: 'root-all', target: null };
        }
        // Get the client rect for the dock panel.
        var panelRect = panel.node.getBoundingClientRect();
        // Compute the distance to each edge of the panel.
        var pl = clientX - panelRect.left + 1;
        var pt = clientY - panelRect.top + 1;
        var pr = panelRect.right - clientX;
        var pb = panelRect.bottom - clientY;
        // Find the minimum distance to an edge.
        var pd = Math.min(pl, pt, pr, pb);
        // Return a root zone if the mouse is within an edge.
        if (pd <= Private.EDGE_SIZE) {
            var zone_1;
            switch (pd) {
                case pl:
                    zone_1 = 'root-left';
                    break;
                case pt:
                    zone_1 = 'root-top';
                    break;
                case pr:
                    zone_1 = 'root-right';
                    break;
                case pb:
                    zone_1 = 'root-bottom';
                    break;
                default:
                    throw new Error('unreachable');
            }
            return { zone: zone_1, target: null };
        }
        // Hit test the dock layout at the given client position.
        var target = layout.hitTestTabAreas(clientX, clientY);
        // Bail if no target area was found.
        if (!target) {
            return { zone: 'invalid', target: null };
        }
        // Compute the distance to each edge of the tab area.
        var al = target.x - target.left + 1;
        var at = target.y - target.top + 1;
        var ar = target.left + target.width - target.x;
        var ab = target.top + target.height - target.y;
        // Get the X and Y edge sizes for the area.
        var rx = Math.round(target.width / 3);
        var ry = Math.round(target.height / 3);
        // Scale the distances by the slenderness ratio.
        al /= rx;
        at /= ry;
        ar /= rx;
        ab /= ry;
        // Find the minimum distance to the area edge.
        var ad = Math.min(al, at, ar, ab);
        // Find the widget zone for the area edge.
        var zone;
        switch (ad) {
            case al:
                zone = 'widget-left';
                break;
            case at:
                zone = 'widget-top';
                break;
            case ar:
                zone = 'widget-right';
                break;
            case ab:
                zone = 'widget-bottom';
                break;
            default:
                throw new Error('unreachable');
        }
        // Return the final drop target.
        return { zone: zone, target: target };
    }
    Private.findDropTarget = findDropTarget;
    /**
     * Get the drop reference widget for a tab.
     */
    function getDropRef(tab) {
        return tab.child;
    }
    Private.getDropRef = getDropRef;
})(Private || (Private = {}));


/***/ }),

/***/ "../../../../../src/split-dock/split-dock-tab.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SplitDockTab; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__ = __webpack_require__("../../../../@phosphor/algorithm/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__ = __webpack_require__("../../../../@phosphor/domutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__ = __webpack_require__("../../../../@phosphor/messaging/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__ = __webpack_require__("../../../../@phosphor/signaling/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__ = __webpack_require__("../../../../@phosphor/virtualdom/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib__ = __webpack_require__("../../../../@phosphor/widgets/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib__);
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();






/**
 * A widget which displays titles as a single row or column of tabs.
 *
 * #### Notes
 * If CSS transforms are used to rotate nodes for vertically oriented
 * text, then tab dragging will not work correctly. The `tabsMovable`
 * property should be set to `false` when rotating nodes from CSS.
 */
var SplitDockTab = (function (_super) {
    __extends(SplitDockTab, _super);
    /**
     * Construct a new tab.
     *
     * @param options - The options for initializing the tab.
     */
    function SplitDockTab(options) {
        var _this = _super.call(this, { node: Private.createNode() }) || this;
        _this._child = null;
        _this._dragData = null;
        _this._tabExpandRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this._tabMinimizeRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this._tabCollapseRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this._tabCloseRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this._tabDetachRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this._tabActivateRequested = new __WEBPACK_IMPORTED_MODULE_3__phosphor_signaling_lib__["Signal"](_this);
        _this.addClass('p-SplitDockTab');
        _this.setFlag(__WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib__["Widget"].Flag.DisallowLayout);
        _this.renderer = options.renderer || SplitDockTab.defaultRenderer;
        _this._child = options.widget;
        // Connect to the title changed signal.
        _this._child.title.changed.connect(_this._onTitleChanged, _this);
        _this.update();
        return _this;
    }
    Object.defineProperty(SplitDockTab.prototype, "expanded", {
        set: function (value) {
            var expandIcon = this.contentNode.querySelector('.' + this.renderer.expandIconSelector);
            $(expandIcon).toggleClass(this.renderer.collapseIconSelector, value);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Dispose of the resources held by the widget.
     */
    SplitDockTab.prototype.dispose = function () {
        this._releaseMouse();
        this._child = null;
        _super.prototype.dispose.call(this);
    };
    Object.defineProperty(SplitDockTab.prototype, "tabActivateRequested", {
        /**
         * A signal emitted when a tab is clicked by the user.
         *
         * #### Notes
         * If the clicked tab is not the current tab, the clicked tab will be
         * made current and the `currentChanged` signal will be emitted first.
         *
         * This signal is emitted even if the clicked tab is the current tab.
         */
        get: function () {
            return this._tabActivateRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "tabMinimizeRequested", {
        get: function () {
            return this._tabMinimizeRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "tabExpandRequested", {
        get: function () {
            return this._tabExpandRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "tabCollapseRequested", {
        get: function () {
            return this._tabCollapseRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "tabCloseRequested", {
        get: function () {
            return this._tabCloseRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "tabDetachRequested", {
        /**
         * A signal emitted when a tab is dragged beyond the detach threshold.
         *
         * #### Notes
         * This signal is emitted when the user drags a tab with the mouse,
         * and mouse is dragged beyond the detach threshold.
         *
         * The consumer of the signal should call `releaseMouse` and remove
         * the tab in order to complete the detach.
         *
         * This signal is only emitted once per drag cycle.
         */
        get: function () {
            return this._tabDetachRequested;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SplitDockTab.prototype, "child", {
        get: function () {
            return this._child;
        },
        enumerable: true,
        configurable: true
    });
    SplitDockTab.prototype.hide = function () {
        this.child.hide();
        _super.prototype.hide.call(this);
    };
    SplitDockTab.prototype.show = function () {
        this.child.show();
        _super.prototype.show.call(this);
    };
    Object.defineProperty(SplitDockTab.prototype, "contentNode", {
        /**
         * The tab content node.
         *
         * #### Notes
         * This is the node which holds the tab nodes.
         *
         * Modifying this node directly can lead to undefined behavior.
         */
        get: function () {
            return this.node;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * Release the mouse and restore the non-dragged tab positions.
     *
     * #### Notes
     * This will cause the tab to stop handling mouse events and to
     * restore the tabs to their non-dragged positions.
     */
    SplitDockTab.prototype.releaseMouse = function () {
        this._releaseMouse();
    };
    /**
     * Handle the DOM events for the tab.
     *
     * @param event - The DOM event sent to the tab.
     *
     * #### Notes
     * This method implements the DOM `EventListener` interface and is
     * called in response to events on the tab's DOM node.
     *
     * This should not be called directly by user code.
     */
    SplitDockTab.prototype.handleEvent = function (event) {
        switch (event.type) {
            case 'mousedown':
                this._evtMouseDown(event);
                break;
            case 'mousemove':
                this._evtMouseMove(event);
                break;
            case 'mouseup':
                this._evtMouseUp(event);
                break;
            case 'keydown':
                this._evtKeyDown(event);
                break;
            case 'contextmenu':
                event.preventDefault();
                event.stopPropagation();
                break;
        }
    };
    /**
     * A message handler invoked on a `'before-attach'` message.
     */
    SplitDockTab.prototype.onBeforeAttach = function (msg) {
        this.node.addEventListener('mousedown', this);
    };
    /**
     * A message handler invoked on an `'after-detach'` message.
     */
    SplitDockTab.prototype.onAfterDetach = function (msg) {
        this.node.removeEventListener('mousedown', this);
        this._releaseMouse();
    };
    /**
     * A message handler invoked on an `'update-request'` message.
     */
    SplitDockTab.prototype.onUpdateRequest = function (msg) {
        var renderer = this.renderer;
        __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["VirtualDOM"].render(renderer.renderTab(this._child), this.contentNode);
    };
    /**
     * Handle the `'keydown'` event for the tab.
     */
    SplitDockTab.prototype._evtKeyDown = function (event) {
        // Stop all input events during drag.
        event.preventDefault();
        event.stopPropagation();
        // Release the mouse if `Escape` is pressed.
        if (event.keyCode === 27) {
            this._releaseMouse();
        }
    };
    /**
     * Handle the `'mousedown'` event for the tab.
     */
    SplitDockTab.prototype._evtMouseDown = function (event) {
        // Do nothing if it's not a left or middle mouse press.
        if (event.button !== 0 && event.button !== 1) {
            return;
        }
        // Do nothing if a drag is in progress.
        if (this._dragData) {
            return;
        }
        // Lookup the tab nodes.
        var tabs = this.contentNode.children;
        // Find the index of the pressed tab.
        var index = __WEBPACK_IMPORTED_MODULE_0__phosphor_algorithm_lib__["ArrayExt"].findFirstIndex(tabs, function (tab) {
            return __WEBPACK_IMPORTED_MODULE_1__phosphor_domutils_lib__["ElementExt"].hitTest(tab, event.clientX, event.clientY);
        });
        // Do nothing if the press is not on a tab.
        if (index === -1) {
            return;
        }
        // Pressing on a tab stops the event propagation.
        event.preventDefault();
        event.stopPropagation();
        // Initialize the non-measured parts of the drag data.
        this._dragData = {
            tab: tabs[index],
            index: index,
            pressX: event.clientX,
            pressY: event.clientY,
            tabPos: -1,
            tabSize: -1,
            tabPressPos: -1,
            targetIndex: -1,
            tabLayout: null,
            contentRect: null,
            override: null,
            dragActive: false,
            dragAborted: false,
            detachRequested: false
        };
        // Add the document mouse up listener.
        document.addEventListener('mouseup', this, true);
        // Do nothing else if the middle button is clicked.
        if (event.button === 1) {
            return;
        }
        // Do nothing else if the close icon is clicked.
        var closeIcon = tabs[index].querySelector('.' + this.renderer.closeIconSelector);
        if (closeIcon && closeIcon.contains(event.target)) {
            return;
        }
        document.addEventListener('mousemove', this, true);
        document.addEventListener('keydown', this, true);
        document.addEventListener('contextmenu', this, true);
        if ($(event.target).hasClass('p-SplitDockTab-tabLabel')) {
            // Emit the tab activate request signal.
            this._tabActivateRequested.emit({
                widget: this._child
            });
        }
    };
    /**
     * Handle the `'mousemove'` event for the tab.
     */
    SplitDockTab.prototype._evtMouseMove = function (event) {
        // Do nothing if no drag is in progress.
        var data = this._dragData;
        if (!data) {
            return;
        }
        // Suppress the event during a drag.
        event.preventDefault();
        event.stopPropagation();
        // Lookup the tab nodes.
        var tab = this.contentNode.children[0];
        // Bail early if the drag threshold has not been met.
        if (!data.detachRequested && !Private.dragExceeded(data, event)) {
            return;
        }
        // Emit the detach requested signal if the threshold is exceeded.
        if (!data.detachRequested) {
            // Only emit the signal once per drag cycle.
            data.detachRequested = true;
            // Setup the arguments for the signal.
            var clientX = event.clientX;
            var clientY = event.clientY;
            var widget = this._child;
            // Emit the tab detach requested signal.
            this._tabDetachRequested.emit({ widget: widget, tab: tab, clientX: clientX, clientY: clientY });
            // Bail if the signal handler aborted the drag.
            if (data.dragAborted) {
                return;
            }
        }
    };
    /**
     * Handle the `'mouseup'` event for the document.
     */
    SplitDockTab.prototype._evtMouseUp = function (event) {
        var _this = this;
        // Do nothing if it's not a left or middle mouse release.
        if (event.button !== 0 && event.button !== 1) {
            return;
        }
        // Do nothing if no drag is in progress.
        var data = this._dragData;
        if (!data) {
            return;
        }
        // Stop the event propagation.
        event.preventDefault();
        event.stopPropagation();
        // Remove the extra mouse event listeners.
        document.removeEventListener('mousemove', this, true);
        document.removeEventListener('mouseup', this, true);
        document.removeEventListener('keydown', this, true);
        document.removeEventListener('contextmenu', this, true);
        // Clear the drag data.
        this._dragData = null;
        var widget = this._child;
        // Emit the close requested signal if the middle button is released.
        if (event.button === 1) {
            this._tabCloseRequested.emit({ widget: widget });
            return;
        }
        // Emit the close requested signal if the close icon was released.
        var minimizeIcon = this.contentNode.querySelector('.' + this.renderer.minimizeIconSelector);
        var expandIcon = this.contentNode.querySelector('.' + this.renderer.expandIconSelector);
        var collapseIcon = this.contentNode.querySelector('.' + this.renderer.collapseIconSelector);
        var closeIcon = this.contentNode.querySelector('.' + this.renderer.closeIconSelector);
        if (this.child instanceof SplitDockTab.IWidget) {
            this.child.icons.forEach(function (_) {
                var icon = _this.contentNode.querySelector('.' + _.selector);
                if (icon && icon.contains(event.target)) {
                    _.processMessage(new __WEBPACK_IMPORTED_MODULE_2__phosphor_messaging_lib__["Message"]('click'));
                }
            });
        }
        if (minimizeIcon && minimizeIcon.contains(event.target)) {
            this._tabMinimizeRequested.emit({ widget: widget });
            return;
        }
        else if (collapseIcon && collapseIcon.contains(event.target)) {
            this._tabCollapseRequested.emit({ widget: widget });
            return;
        }
        else if (expandIcon && expandIcon.contains(event.target)) {
            this._tabExpandRequested.emit({ widget: widget });
            return;
        }
        else if (closeIcon && widget.title.closable && closeIcon.contains(event.target)) {
            // Ignore the release if the title is not closable.
            this._tabCloseRequested.emit({ widget: widget });
            return;
        }
    };
    /**
     * Release the mouse and restore the non-dragged tab positions.
     */
    SplitDockTab.prototype._releaseMouse = function () {
        // Do nothing if no drag is in progress.
        var data = this._dragData;
        if (!data) {
            return;
        }
        // Clear the drag data reference.
        this._dragData = null;
        // Remove the extra mouse listeners.
        document.removeEventListener('mousemove', this, true);
        document.removeEventListener('mouseup', this, true);
        document.removeEventListener('keydown', this, true);
        document.removeEventListener('contextmenu', this, true);
        // Indicate the drag has been aborted. This allows the mouse
        // event handlers to return early when the drag is canceled.
        data.dragAborted = true;
        // If the drag is not active, there's nothing more to do.
        if (!data.dragActive) {
            return;
        }
        // Clear the cursor override.
        data.override.dispose();
        // Clear the dragging style classes.
        data.tab.classList.remove('p-mod-dragging');
        this.removeClass('p-mod-dragging');
    };
    /**
     * Handle the `changed` signal of a title object.
     */
    SplitDockTab.prototype._onTitleChanged = function () {
        this.update();
    };
    return SplitDockTab;
}(__WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib__["Widget"]));

/**
 * The namespace for the `SplitDockTab` class statics.
 */
(function (SplitDockTab) {
    var IWidget = (function (_super) {
        __extends(IWidget, _super);
        function IWidget() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        return IWidget;
    }(__WEBPACK_IMPORTED_MODULE_5__phosphor_widgets_lib__["Widget"]));
    SplitDockTab.IWidget = IWidget;
    /**
     * The default implementation of `IRenderer`.
     *
     * #### Notes
     * Subclasses are free to reimplement rendering methods as needed.
     */
    var Renderer = (function () {
        /**
         * Construct a new renderer.
         */
        function Renderer() {
            /**
             * Selectors which matches the icons node in a tab.
             */
            this.refreshIconSelector = 'p-SplitDockTab-tabRefreshIcon';
            this.minimizeIconSelector = 'p-SplitDockTab-tabMinimizeIcon';
            this.expandIconSelector = 'p-SplitDockTab-tabExpandIcon';
            this.collapseIconSelector = 'p-SplitDockTab-tabCollapseIcon';
            this.closeIconSelector = 'p-SplitDockTab-tabCloseIcon';
            this.filterIconSelector = 'p-SplitDockTab-tabFilterIcon';
            this.pinIconSelector = 'p-SplitDockTab-tabPinIcon';
        }
        Renderer.prototype.renderTab = function (widget) {
            var _this = this;
            var className = this.createTabClass(widget.title);
            var icons = widget instanceof IWidget
                ? widget.icons.map(function (_) { return _this.renderTabIcon(_); })
                : [];
            return (__WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: className, title: widget.title.caption }, this.renderIcon(widget.title), this.renderLabel(widget.title), icons, this.renderMinimizeIcon(), this.renderExpandIcon(), this.renderCloseIcon(widget.title)));
        };
        /**
         * Render the custom icon element for a tab.
         */
        Renderer.prototype.renderTabIcon = function (icon) {
            return __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: icon.selector, title: icon.tooltip || '' });
        };
        /**
         * Render the icon element for a tab.
         */
        Renderer.prototype.renderIcon = function (title) {
            return __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: this.createIconClass(title) });
        };
        /**
         * Render the label element for a tab.
         */
        Renderer.prototype.renderLabel = function (title) {
            return __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: 'p-SplitDockTab-tabLabel' }, title.label);
        };
        Renderer.prototype.renderMinimizeIcon = function () {
            return __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: this.minimizeIconSelector, title: 'Minimize' });
        };
        Renderer.prototype.renderExpandIcon = function () {
            return __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: this.expandIconSelector, title: 'Expand' });
        };
        Renderer.prototype.renderCloseIcon = function (title) {
            return title.closable ? __WEBPACK_IMPORTED_MODULE_4__phosphor_virtualdom_lib__["h"].div({ className: this.closeIconSelector, title: 'Close' }) : null;
        };
        /**
         * Create the class name for the tab.
         */
        Renderer.prototype.createTabClass = function (title) {
            var name = 'p-SplitDockTab-tab p-mod-current';
            if (title.className) {
                name += " " + title.className;
            }
            if (title.closable) {
                name += ' p-mod-closable';
            }
            return name;
        };
        /**
         * Create the class name for the tab icon.
         */
        Renderer.prototype.createIconClass = function (title) {
            var name = 'p-SplitDockTab-tabIcon';
            var extra = title.icon;
            return extra ? name + " " + extra : name;
        };
        return Renderer;
    }());
    SplitDockTab.Renderer = Renderer;
    /**
     * The default `Renderer` instance.
     */
    SplitDockTab.defaultRenderer = new Renderer();
})(SplitDockTab || (SplitDockTab = {}));
/**
 * The namespace for the module implementation details.
 */
var Private;
(function (Private) {
    /**
     * The start drag distance threshold.
     */
    Private.DRAG_THRESHOLD = 5;
    /**
     * The detach distance threshold.
     */
    Private.DETACH_THRESHOLD = 20;
    /**
     * Create the DOM node for a tab.
     */
    function createNode() {
        return document.createElement('div');
    }
    Private.createNode = createNode;
    /**
     * Test if the event exceeds the drag threshold.
     */
    function dragExceeded(data, event) {
        var dx = Math.abs(event.clientX - data.pressX);
        var dy = Math.abs(event.clientY - data.pressY);
        return dx >= Private.DRAG_THRESHOLD || dy >= Private.DRAG_THRESHOLD;
    }
    Private.dragExceeded = dragExceeded;
})(Private || (Private = {}));


/***/ }),

/***/ "../../../../../src/vendor.ts":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash__ = __webpack_require__("../../../../lodash/lodash.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_lodash___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_lodash__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js__ = __webpack_require__("../../../../chart.js/src/chart.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_chart_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_chart_js__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_d3__ = __webpack_require__("../../../../d3/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_d3_scale_chromatic__ = __webpack_require__("../../../../d3-scale-chromatic/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_svg_legend__ = __webpack_require__("../../../../d3-svg-legend/indexRollupNext.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__angular_core__ = __webpack_require__("../../../core/esm5/core.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__angular_common__ = __webpack_require__("../../../common/esm5/common.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_platform_browser__ = __webpack_require__("../../../platform-browser/esm5/platform-browser.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__angular_platform_browser_dynamic__ = __webpack_require__("../../../platform-browser-dynamic/esm5/platform-browser-dynamic.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__angular_router__ = __webpack_require__("../../../router/esm5/router.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__angular_http__ = __webpack_require__("../../../http/esm5/http.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__angular_http_testing__ = __webpack_require__("../../../http/esm5/testing.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__angular_forms__ = __webpack_require__("../../../forms/esm5/forms.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_ngx_bootstrap_typeahead__ = __webpack_require__("../../../../ngx-bootstrap/typeahead/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__phosphor_widgets__ = __webpack_require__("../../../../@phosphor/widgets/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__phosphor_widgets___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__phosphor_widgets__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__phosphor_algorithm__ = __webpack_require__("../../../../@phosphor/algorithm/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__phosphor_algorithm___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_15__phosphor_algorithm__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__phosphor_commands__ = __webpack_require__("../../../../@phosphor/commands/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__phosphor_commands___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16__phosphor_commands__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__phosphor_dragdrop__ = __webpack_require__("../../../../@phosphor/dragdrop/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__phosphor_dragdrop___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17__phosphor_dragdrop__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__phosphor_virtualdom__ = __webpack_require__("../../../../@phosphor/virtualdom/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__phosphor_virtualdom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_18__phosphor_virtualdom__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__phosphor_domutils__ = __webpack_require__("../../../../@phosphor/domutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__phosphor_domutils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_19__phosphor_domutils__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__phosphor_messaging__ = __webpack_require__("../../../../@phosphor/messaging/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__phosphor_messaging___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_20__phosphor_messaging__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__phosphor_collections__ = __webpack_require__("../../../../@phosphor/collections/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__phosphor_collections___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_21__phosphor_collections__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__phosphor_signaling__ = __webpack_require__("../../../../@phosphor/signaling/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__phosphor_signaling___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_22__phosphor_signaling__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__phosphor_keyboard__ = __webpack_require__("../../../../@phosphor/keyboard/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__phosphor_keyboard___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_23__phosphor_keyboard__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__phosphor_coreutils__ = __webpack_require__("../../../../@phosphor/coreutils/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__phosphor_coreutils___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_24__phosphor_coreutils__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__phosphor_properties__ = __webpack_require__("../../../../@phosphor/properties/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__phosphor_properties___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_25__phosphor_properties__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__phosphor_disposable__ = __webpack_require__("../../../../@phosphor/disposable/lib/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__phosphor_disposable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_26__phosphor_disposable__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27_ng2_dnd__ = __webpack_require__("../../../../ng2-dnd/index.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28_rxjs_Observable__ = __webpack_require__("../../../../rxjs/_esm5/Observable.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29_rxjs_Subscription__ = __webpack_require__("../../../../rxjs/_esm5/Subscription.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30_rxjs_Subject__ = __webpack_require__("../../../../rxjs/_esm5/Subject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31_rxjs_ReplaySubject__ = __webpack_require__("../../../../rxjs/_esm5/ReplaySubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32_rxjs_BehaviorSubject__ = __webpack_require__("../../../../rxjs/_esm5/BehaviorSubject.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33_rxjs_add_observable_combineLatest__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/combineLatest.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34_rxjs_add_observable_empty__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/empty.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35_rxjs_add_observable_forkJoin__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/forkJoin.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36_rxjs_add_observable_fromPromise__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/fromPromise.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37_rxjs_add_observable_interval__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/interval.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38_rxjs_add_observable_merge__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/merge.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39_rxjs_add_observable_of__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/of.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40_rxjs_add_observable_timer__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/timer.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41_rxjs_add_observable_throw__ = __webpack_require__("../../../../rxjs/_esm5/add/observable/throw.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42_rxjs_add_operator_catch__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/catch.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43_rxjs_add_operator_debounceTime__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/debounceTime.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44_rxjs_add_operator_delay__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/delay.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45_rxjs_add_operator_distinctUntilChanged__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/distinctUntilChanged.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46_rxjs_add_operator_do__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/do.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47_rxjs_add_operator_filter__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/filter.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48_rxjs_add_operator_map__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/map.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49_rxjs_add_operator_mapTo__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/mapTo.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50_rxjs_add_operator_mergeMap__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/mergeMap.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51_rxjs_add_operator_publish__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/publish.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52_rxjs_add_operator_publishReplay__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/publishReplay.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53_rxjs_add_operator_share__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/share.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54_rxjs_add_operator_shareReplay__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/shareReplay.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55_rxjs_add_operator_switchMap__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/switchMap.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56_rxjs_add_operator_startWith__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/startWith.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57_rxjs_add_operator_reduce__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/reduce.js");
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58_rxjs_add_operator_first__ = __webpack_require__("../../../../rxjs/_esm5/add/operator/first.js");
// lodash

// Chart.js

// D3



// Angular









// Phosphor













// nd2-dnd

// Rxjs































// jQuery
global['jQuery'] = global['$'] = __webpack_require__("../../../../jquery/dist/jquery.js");
// bootstrap
__webpack_require__("../../../../bootstrap-sass/assets/javascripts/bootstrap.js");
// jQuery UI
__webpack_require__("../../../../jquery-ui/ui/widgets/slider.js");
__webpack_require__("../../../../jquery-ui/ui/widgets/draggable.js");
__webpack_require__("../../../../jquery-ui/ui/widgets/resizable.js");
// bootstrap-multiselect
__webpack_require__("../../../../bootstrap-multiselect/dist/js/bootstrap-multiselect.js");
// ICheck
__webpack_require__("../../../../icheck/icheck.js");
// codemirror
__webpack_require__("../../../../codemirror/lib/codemirror.js");
__webpack_require__("../../../../codemirror/mode/sql/sql.js");
__webpack_require__("../../../../codemirror/addon/hint/show-hint.js");
__webpack_require__("../../../../codemirror/addon/display/placeholder.js");
__webpack_require__("../../../../@xuzijian/dagre-d3/dist/dagre-d3.js");
// Topojson
__webpack_require__("../../../../topojson/index.js");
__webpack_require__("../../../../us-atlas/us/10m.json");
/** DIRTY HACK. See https://github.com/twbs/bootstrap/issues/21855 */
var originalGetPosition = $.fn.tooltip.Constructor.prototype.getPosition;
$.fn.tooltip.Constructor.prototype.getPosition = function ($element) {
    $element = $element || this.$element;
    var el = $element[0];
    var pos = originalGetPosition.call(this, $element || this.$element);
    var isSvg = window.SVGElement && el instanceof window.SVGElement;
    if (isSvg) {
        var elRect = el.getBoundingClientRect();
        return $.extend({}, pos, {
            top: elRect.top + window.pageYOffset,
            left: elRect.left + window.pageXOffset,
            bottom: elRect.bottom + window.pageYOffset,
            right: elRect.right + window.pageXOffset,
        });
    }
    return pos;
};
/** end of hack */

/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__("../../node_modules/webpack/buildin/global.js")))

/***/ }),

/***/ "../../../../moment/locale recursive ^\\.\\/.*$":
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": "../../../../moment/locale/af.js",
	"./af.js": "../../../../moment/locale/af.js",
	"./ar": "../../../../moment/locale/ar.js",
	"./ar-dz": "../../../../moment/locale/ar-dz.js",
	"./ar-dz.js": "../../../../moment/locale/ar-dz.js",
	"./ar-kw": "../../../../moment/locale/ar-kw.js",
	"./ar-kw.js": "../../../../moment/locale/ar-kw.js",
	"./ar-ly": "../../../../moment/locale/ar-ly.js",
	"./ar-ly.js": "../../../../moment/locale/ar-ly.js",
	"./ar-ma": "../../../../moment/locale/ar-ma.js",
	"./ar-ma.js": "../../../../moment/locale/ar-ma.js",
	"./ar-sa": "../../../../moment/locale/ar-sa.js",
	"./ar-sa.js": "../../../../moment/locale/ar-sa.js",
	"./ar-tn": "../../../../moment/locale/ar-tn.js",
	"./ar-tn.js": "../../../../moment/locale/ar-tn.js",
	"./ar.js": "../../../../moment/locale/ar.js",
	"./az": "../../../../moment/locale/az.js",
	"./az.js": "../../../../moment/locale/az.js",
	"./be": "../../../../moment/locale/be.js",
	"./be.js": "../../../../moment/locale/be.js",
	"./bg": "../../../../moment/locale/bg.js",
	"./bg.js": "../../../../moment/locale/bg.js",
	"./bn": "../../../../moment/locale/bn.js",
	"./bn.js": "../../../../moment/locale/bn.js",
	"./bo": "../../../../moment/locale/bo.js",
	"./bo.js": "../../../../moment/locale/bo.js",
	"./br": "../../../../moment/locale/br.js",
	"./br.js": "../../../../moment/locale/br.js",
	"./bs": "../../../../moment/locale/bs.js",
	"./bs.js": "../../../../moment/locale/bs.js",
	"./ca": "../../../../moment/locale/ca.js",
	"./ca.js": "../../../../moment/locale/ca.js",
	"./cs": "../../../../moment/locale/cs.js",
	"./cs.js": "../../../../moment/locale/cs.js",
	"./cv": "../../../../moment/locale/cv.js",
	"./cv.js": "../../../../moment/locale/cv.js",
	"./cy": "../../../../moment/locale/cy.js",
	"./cy.js": "../../../../moment/locale/cy.js",
	"./da": "../../../../moment/locale/da.js",
	"./da.js": "../../../../moment/locale/da.js",
	"./de": "../../../../moment/locale/de.js",
	"./de-at": "../../../../moment/locale/de-at.js",
	"./de-at.js": "../../../../moment/locale/de-at.js",
	"./de-ch": "../../../../moment/locale/de-ch.js",
	"./de-ch.js": "../../../../moment/locale/de-ch.js",
	"./de.js": "../../../../moment/locale/de.js",
	"./dv": "../../../../moment/locale/dv.js",
	"./dv.js": "../../../../moment/locale/dv.js",
	"./el": "../../../../moment/locale/el.js",
	"./el.js": "../../../../moment/locale/el.js",
	"./en-au": "../../../../moment/locale/en-au.js",
	"./en-au.js": "../../../../moment/locale/en-au.js",
	"./en-ca": "../../../../moment/locale/en-ca.js",
	"./en-ca.js": "../../../../moment/locale/en-ca.js",
	"./en-gb": "../../../../moment/locale/en-gb.js",
	"./en-gb.js": "../../../../moment/locale/en-gb.js",
	"./en-ie": "../../../../moment/locale/en-ie.js",
	"./en-ie.js": "../../../../moment/locale/en-ie.js",
	"./en-nz": "../../../../moment/locale/en-nz.js",
	"./en-nz.js": "../../../../moment/locale/en-nz.js",
	"./eo": "../../../../moment/locale/eo.js",
	"./eo.js": "../../../../moment/locale/eo.js",
	"./es": "../../../../moment/locale/es.js",
	"./es-do": "../../../../moment/locale/es-do.js",
	"./es-do.js": "../../../../moment/locale/es-do.js",
	"./es.js": "../../../../moment/locale/es.js",
	"./et": "../../../../moment/locale/et.js",
	"./et.js": "../../../../moment/locale/et.js",
	"./eu": "../../../../moment/locale/eu.js",
	"./eu.js": "../../../../moment/locale/eu.js",
	"./fa": "../../../../moment/locale/fa.js",
	"./fa.js": "../../../../moment/locale/fa.js",
	"./fi": "../../../../moment/locale/fi.js",
	"./fi.js": "../../../../moment/locale/fi.js",
	"./fo": "../../../../moment/locale/fo.js",
	"./fo.js": "../../../../moment/locale/fo.js",
	"./fr": "../../../../moment/locale/fr.js",
	"./fr-ca": "../../../../moment/locale/fr-ca.js",
	"./fr-ca.js": "../../../../moment/locale/fr-ca.js",
	"./fr-ch": "../../../../moment/locale/fr-ch.js",
	"./fr-ch.js": "../../../../moment/locale/fr-ch.js",
	"./fr.js": "../../../../moment/locale/fr.js",
	"./fy": "../../../../moment/locale/fy.js",
	"./fy.js": "../../../../moment/locale/fy.js",
	"./gd": "../../../../moment/locale/gd.js",
	"./gd.js": "../../../../moment/locale/gd.js",
	"./gl": "../../../../moment/locale/gl.js",
	"./gl.js": "../../../../moment/locale/gl.js",
	"./gom-latn": "../../../../moment/locale/gom-latn.js",
	"./gom-latn.js": "../../../../moment/locale/gom-latn.js",
	"./he": "../../../../moment/locale/he.js",
	"./he.js": "../../../../moment/locale/he.js",
	"./hi": "../../../../moment/locale/hi.js",
	"./hi.js": "../../../../moment/locale/hi.js",
	"./hr": "../../../../moment/locale/hr.js",
	"./hr.js": "../../../../moment/locale/hr.js",
	"./hu": "../../../../moment/locale/hu.js",
	"./hu.js": "../../../../moment/locale/hu.js",
	"./hy-am": "../../../../moment/locale/hy-am.js",
	"./hy-am.js": "../../../../moment/locale/hy-am.js",
	"./id": "../../../../moment/locale/id.js",
	"./id.js": "../../../../moment/locale/id.js",
	"./is": "../../../../moment/locale/is.js",
	"./is.js": "../../../../moment/locale/is.js",
	"./it": "../../../../moment/locale/it.js",
	"./it.js": "../../../../moment/locale/it.js",
	"./ja": "../../../../moment/locale/ja.js",
	"./ja.js": "../../../../moment/locale/ja.js",
	"./jv": "../../../../moment/locale/jv.js",
	"./jv.js": "../../../../moment/locale/jv.js",
	"./ka": "../../../../moment/locale/ka.js",
	"./ka.js": "../../../../moment/locale/ka.js",
	"./kk": "../../../../moment/locale/kk.js",
	"./kk.js": "../../../../moment/locale/kk.js",
	"./km": "../../../../moment/locale/km.js",
	"./km.js": "../../../../moment/locale/km.js",
	"./kn": "../../../../moment/locale/kn.js",
	"./kn.js": "../../../../moment/locale/kn.js",
	"./ko": "../../../../moment/locale/ko.js",
	"./ko.js": "../../../../moment/locale/ko.js",
	"./ky": "../../../../moment/locale/ky.js",
	"./ky.js": "../../../../moment/locale/ky.js",
	"./lb": "../../../../moment/locale/lb.js",
	"./lb.js": "../../../../moment/locale/lb.js",
	"./lo": "../../../../moment/locale/lo.js",
	"./lo.js": "../../../../moment/locale/lo.js",
	"./lt": "../../../../moment/locale/lt.js",
	"./lt.js": "../../../../moment/locale/lt.js",
	"./lv": "../../../../moment/locale/lv.js",
	"./lv.js": "../../../../moment/locale/lv.js",
	"./me": "../../../../moment/locale/me.js",
	"./me.js": "../../../../moment/locale/me.js",
	"./mi": "../../../../moment/locale/mi.js",
	"./mi.js": "../../../../moment/locale/mi.js",
	"./mk": "../../../../moment/locale/mk.js",
	"./mk.js": "../../../../moment/locale/mk.js",
	"./ml": "../../../../moment/locale/ml.js",
	"./ml.js": "../../../../moment/locale/ml.js",
	"./mr": "../../../../moment/locale/mr.js",
	"./mr.js": "../../../../moment/locale/mr.js",
	"./ms": "../../../../moment/locale/ms.js",
	"./ms-my": "../../../../moment/locale/ms-my.js",
	"./ms-my.js": "../../../../moment/locale/ms-my.js",
	"./ms.js": "../../../../moment/locale/ms.js",
	"./my": "../../../../moment/locale/my.js",
	"./my.js": "../../../../moment/locale/my.js",
	"./nb": "../../../../moment/locale/nb.js",
	"./nb.js": "../../../../moment/locale/nb.js",
	"./ne": "../../../../moment/locale/ne.js",
	"./ne.js": "../../../../moment/locale/ne.js",
	"./nl": "../../../../moment/locale/nl.js",
	"./nl-be": "../../../../moment/locale/nl-be.js",
	"./nl-be.js": "../../../../moment/locale/nl-be.js",
	"./nl.js": "../../../../moment/locale/nl.js",
	"./nn": "../../../../moment/locale/nn.js",
	"./nn.js": "../../../../moment/locale/nn.js",
	"./pa-in": "../../../../moment/locale/pa-in.js",
	"./pa-in.js": "../../../../moment/locale/pa-in.js",
	"./pl": "../../../../moment/locale/pl.js",
	"./pl.js": "../../../../moment/locale/pl.js",
	"./pt": "../../../../moment/locale/pt.js",
	"./pt-br": "../../../../moment/locale/pt-br.js",
	"./pt-br.js": "../../../../moment/locale/pt-br.js",
	"./pt.js": "../../../../moment/locale/pt.js",
	"./ro": "../../../../moment/locale/ro.js",
	"./ro.js": "../../../../moment/locale/ro.js",
	"./ru": "../../../../moment/locale/ru.js",
	"./ru.js": "../../../../moment/locale/ru.js",
	"./sd": "../../../../moment/locale/sd.js",
	"./sd.js": "../../../../moment/locale/sd.js",
	"./se": "../../../../moment/locale/se.js",
	"./se.js": "../../../../moment/locale/se.js",
	"./si": "../../../../moment/locale/si.js",
	"./si.js": "../../../../moment/locale/si.js",
	"./sk": "../../../../moment/locale/sk.js",
	"./sk.js": "../../../../moment/locale/sk.js",
	"./sl": "../../../../moment/locale/sl.js",
	"./sl.js": "../../../../moment/locale/sl.js",
	"./sq": "../../../../moment/locale/sq.js",
	"./sq.js": "../../../../moment/locale/sq.js",
	"./sr": "../../../../moment/locale/sr.js",
	"./sr-cyrl": "../../../../moment/locale/sr-cyrl.js",
	"./sr-cyrl.js": "../../../../moment/locale/sr-cyrl.js",
	"./sr.js": "../../../../moment/locale/sr.js",
	"./ss": "../../../../moment/locale/ss.js",
	"./ss.js": "../../../../moment/locale/ss.js",
	"./sv": "../../../../moment/locale/sv.js",
	"./sv.js": "../../../../moment/locale/sv.js",
	"./sw": "../../../../moment/locale/sw.js",
	"./sw.js": "../../../../moment/locale/sw.js",
	"./ta": "../../../../moment/locale/ta.js",
	"./ta.js": "../../../../moment/locale/ta.js",
	"./te": "../../../../moment/locale/te.js",
	"./te.js": "../../../../moment/locale/te.js",
	"./tet": "../../../../moment/locale/tet.js",
	"./tet.js": "../../../../moment/locale/tet.js",
	"./th": "../../../../moment/locale/th.js",
	"./th.js": "../../../../moment/locale/th.js",
	"./tl-ph": "../../../../moment/locale/tl-ph.js",
	"./tl-ph.js": "../../../../moment/locale/tl-ph.js",
	"./tlh": "../../../../moment/locale/tlh.js",
	"./tlh.js": "../../../../moment/locale/tlh.js",
	"./tr": "../../../../moment/locale/tr.js",
	"./tr.js": "../../../../moment/locale/tr.js",
	"./tzl": "../../../../moment/locale/tzl.js",
	"./tzl.js": "../../../../moment/locale/tzl.js",
	"./tzm": "../../../../moment/locale/tzm.js",
	"./tzm-latn": "../../../../moment/locale/tzm-latn.js",
	"./tzm-latn.js": "../../../../moment/locale/tzm-latn.js",
	"./tzm.js": "../../../../moment/locale/tzm.js",
	"./uk": "../../../../moment/locale/uk.js",
	"./uk.js": "../../../../moment/locale/uk.js",
	"./ur": "../../../../moment/locale/ur.js",
	"./ur.js": "../../../../moment/locale/ur.js",
	"./uz": "../../../../moment/locale/uz.js",
	"./uz-latn": "../../../../moment/locale/uz-latn.js",
	"./uz-latn.js": "../../../../moment/locale/uz-latn.js",
	"./uz.js": "../../../../moment/locale/uz.js",
	"./vi": "../../../../moment/locale/vi.js",
	"./vi.js": "../../../../moment/locale/vi.js",
	"./x-pseudo": "../../../../moment/locale/x-pseudo.js",
	"./x-pseudo.js": "../../../../moment/locale/x-pseudo.js",
	"./yo": "../../../../moment/locale/yo.js",
	"./yo.js": "../../../../moment/locale/yo.js",
	"./zh-cn": "../../../../moment/locale/zh-cn.js",
	"./zh-cn.js": "../../../../moment/locale/zh-cn.js",
	"./zh-hk": "../../../../moment/locale/zh-hk.js",
	"./zh-hk.js": "../../../../moment/locale/zh-hk.js",
	"./zh-tw": "../../../../moment/locale/zh-tw.js",
	"./zh-tw.js": "../../../../moment/locale/zh-tw.js"
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = "../../../../moment/locale recursive ^\\.\\/.*$";

/***/ }),

/***/ 0:
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__("../../../../../src/main.ts");


/***/ })

},[0]);